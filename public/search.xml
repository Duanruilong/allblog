<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[dva.jså­¦ä¹ æ¢³ç†é›†]]></title>
    <url>%2Fblog%2F2019%2F05%2F22%2Fdva-js%E5%AD%A6%E4%B9%A0%E6%A2%B3%E7%90%86%E9%9B%86%2F</url>
    <content type="text"><![CDATA[dva é¦–å…ˆæ˜¯ä¸€ä¸ªåŸºäºŽ redux å’Œ redux-saga çš„æ•°æ®æµæ–¹æ¡ˆï¼Œç„¶åŽä¸ºäº†ç®€åŒ–å¼€å‘ä½“éªŒï¼Œdva è¿˜é¢å¤–å†…ç½®äº† react-router å’Œ fetchï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè½»é‡çº§çš„åº”ç”¨æ¡†æž¶ ç–‘æƒ‘ es6 ç‰¹æ€§é‚£ä¹ˆå¤šï¼Œæˆ‘éœ€è¦å…¨éƒ¨å­¦ä¼šå—? react component æœ‰ 3 ç§å†™æ³•ï¼Œæˆ‘éœ€è¦å…¨éƒ¨å­¦ä¼šå—? reducer çš„å¢žåˆ æ”¹åº”è¯¥æ€Žä¹ˆå†™? æ€Žä¹ˆåšå…¨å±€/å±€éƒ¨çš„é”™è¯¯å¤„ç†? æ€Žä¹ˆå‘å¼‚æ­¥è¯·æ±‚? æ€Žä¹ˆå¤„ç†å¤æ‚çš„å¼‚æ­¥ä¸šåŠ¡é€»è¾‘? æ€Žä¹ˆé…ç½®è·¯ç”±? â€¦ è¿™ç¯‡æ–‡æ¡£æ¢³ç†äº†åŸºäºŽ dva-cli ä½¿ç”¨ dva çš„æœ€å°çŸ¥è¯†é›†ï¼Œè®©ä½ å¯ä»¥ç”¨æœ€å°‘çš„æ—¶é—´æŽŒæ¡åˆ›å»ºç±»ä¼¼ dva-hackernews çš„å…¨éƒ¨çŸ¥è¯†ï¼Œå¹¶ä¸”ä¸éœ€è¦æŽŒæ¡é¢å¤–çš„å†—ä½™çŸ¥è¯†ã€‚ JavaScript è¯­è¨€å˜é‡å£°æ˜Žconst å’Œ letä¸è¦ç”¨ varï¼Œè€Œæ˜¯ç”¨ const å’Œ letï¼Œåˆ†åˆ«è¡¨ç¤ºå¸¸é‡å’Œå˜é‡ã€‚ä¸åŒäºŽ var çš„å‡½æ•°ä½œç”¨åŸŸï¼Œconst å’Œ let éƒ½æ˜¯å—çº§ä½œç”¨åŸŸã€‚ 1234const DELAY = 1000;let count = 0;count = count + 1; æ¨¡æ¿å­—ç¬¦ä¸²æ¨¡æ¿å­—ç¬¦ä¸²æä¾›äº†å¦ä¸€ç§åšå­—ç¬¦ä¸²ç»„åˆçš„æ–¹æ³•ã€‚ 12345678const user = 'world';console.log(`hello $&#123;user&#125;`); // hello world// å¤šè¡Œconst content = ` Hello $&#123;firstName&#125;, Thanks for ordering $&#123;qty&#125; tickets to $&#123;event&#125;.`; é»˜è®¤å‚æ•°12345function logActivity(activity = 'skiing') &#123; console.log(activity);&#125;logActivity(); // skiing ç®­å¤´å‡½æ•°å‡½æ•°çš„å¿«æ·å†™æ³•ï¼Œä¸éœ€è¦é€šè¿‡ function å…³é”®å­—åˆ›å»ºå‡½æ•°ï¼Œå¹¶ä¸”è¿˜å¯ä»¥çœç•¥ return å…³é”®å­—ã€‚ åŒæ—¶ï¼Œç®­å¤´å‡½æ•°è¿˜ä¼šç»§æ‰¿å½“å‰ä¸Šä¸‹æ–‡çš„ this å…³é”®å­—ã€‚ æ¯”å¦‚ï¼š 1[1, 2, 3].map(x =&gt; x + 1); // [2, 3, 4] ç­‰åŒäºŽï¼š 123[1, 2, 3].map((function(x) &#123; return x + 1;&#125;).bind(this)); æ¨¡å—çš„ Import å’Œ Exportimport ç”¨äºŽå¼•å…¥æ¨¡å—ï¼Œexport ç”¨äºŽå¯¼å‡ºæ¨¡å—ã€‚ æ¯”å¦‚ï¼š 1234567891011121314// å¼•å…¥å…¨éƒ¨import dva from 'dva';// å¼•å…¥éƒ¨åˆ†import &#123; connect &#125; from 'dva';import &#123; Link, Route &#125; from 'dva/router';// å¼•å…¥å…¨éƒ¨å¹¶ä½œä¸º github å¯¹è±¡import * as github from './services/github';// å¯¼å‡ºé»˜è®¤export default App;// éƒ¨åˆ†å¯¼å‡ºï¼Œéœ€ import &#123; App &#125; from './file'; å¼•å…¥export class App extend Component &#123;&#125;; ES6 å¯¹è±¡å’Œæ•°ç»„æžæž„èµ‹å€¼æžæž„èµ‹å€¼è®©æˆ‘ä»¬ä»Ž Object æˆ– Array é‡Œå–éƒ¨åˆ†æ•°æ®å­˜ä¸ºå˜é‡ã€‚ 123456789// å¯¹è±¡const user = &#123; name: 'guanguan', age: 2 &#125;;const &#123; name, age &#125; = user;console.log(`$&#123;name&#125; : $&#123;age&#125;`); // guanguan : 2// æ•°ç»„const arr = [1, 2];const [foo, bar] = arr;console.log(foo); // 1 æˆ‘ä»¬ä¹Ÿå¯ä»¥æžæž„ä¼ å…¥çš„å‡½æ•°å‚æ•°ã€‚ 123const add = (state, &#123; payload &#125;) =&gt; &#123; return state.concat(payload);&#125;; æžæž„æ—¶è¿˜å¯ä»¥é… aliasï¼Œè®©ä»£ç æ›´å…·æœ‰è¯­ä¹‰ã€‚ 123const add = (state, &#123; payload: todo &#125;) =&gt; &#123; return state.concat(todo);&#125;; å¯¹è±¡å­—é¢é‡æ”¹è¿›è¿™æ˜¯æžæž„çš„åå‘æ“ä½œï¼Œç”¨äºŽé‡æ–°ç»„ç»‡ä¸€ä¸ª Object ã€‚ 1234const name = 'duoduo';const age = 8;const user = &#123; name, age &#125;; // &#123; name: 'duoduo', age: 8 &#125; å®šä¹‰å¯¹è±¡æ–¹æ³•æ—¶ï¼Œè¿˜å¯ä»¥çœåŽ» function å…³é”®å­—ã€‚ 12345678app.model(&#123; reducers: &#123; add() &#123;&#125; // ç­‰åŒäºŽ add: function() &#123;&#125; &#125;, effects: &#123; *addRemote() &#123;&#125; // ç­‰åŒäºŽ addRemote: function*() &#123;&#125; &#125;,&#125;); Spread OperatorSpread Operator å³ 3 ä¸ªç‚¹ ...ï¼Œæœ‰å‡ ç§ä¸åŒçš„ä½¿ç”¨æ–¹æ³•ã€‚ å¯ç”¨äºŽç»„è£…æ•°ç»„ã€‚ 12const todos = ['Learn dva'];[...todos, 'Learn antd']; // ['Learn dva', 'Learn antd'] ä¹Ÿå¯ç”¨äºŽèŽ·å–æ•°ç»„çš„éƒ¨åˆ†é¡¹ã€‚ 1234567const arr = ['a', 'b', 'c'];const [first, ...rest] = arr;rest; // ['b', 'c']// With ignoreconst [first, , ...rest] = arr;rest; // ['c'] è¿˜å¯æ”¶é›†å‡½æ•°å‚æ•°ä¸ºæ•°ç»„ã€‚ 1234function directions(first, ...rest) &#123; console.log(rest);&#125;directions('a', 'b', 'c'); // ['b', 'c']; ä»£æ›¿ applyã€‚ 123456function foo(x, y, z) &#123;&#125;const args = [1,2,3];// ä¸‹é¢ä¸¤å¥æ•ˆæžœç›¸åŒfoo.apply(null, args);foo(...args); å¯¹äºŽ Object è€Œè¨€ï¼Œç”¨äºŽç»„åˆæˆæ–°çš„ Object ã€‚(ES2017 stage-2 proposal) 1234567891011const foo = &#123; a: 1, b: 2,&#125;;const bar = &#123; b: 3, c: 2,&#125;;const d = 4;const ret = &#123; ...foo, ...bar, d &#125;; // &#123; a:1, b:3, c:2, d:4 &#125; æ­¤å¤–ï¼Œåœ¨ JSX ä¸­ Spread Operator è¿˜å¯ç”¨äºŽæ‰©å±• propsï¼Œè¯¦è§ Spread Attributesã€‚ PromisesPromise ç”¨äºŽæ›´ä¼˜é›…åœ°å¤„ç†å¼‚æ­¥è¯·æ±‚ã€‚æ¯”å¦‚å‘èµ·å¼‚æ­¥è¯·æ±‚ï¼š 1234fetch('/api/todos') .then(res =&gt; res.json()) .then(data =&gt; (&#123; data &#125;)) .catch(err =&gt; (&#123; err &#125;)); å®šä¹‰ Promise ã€‚ 123456789const delay = (timeout) =&gt; &#123; return new Promise(resolve =&gt; &#123; setTimeout(resolve, timeout); &#125;);&#125;;delay(1000).then(_ =&gt; &#123; console.log('executed');&#125;); Generatorsdva çš„ effects æ˜¯é€šè¿‡ generator ç»„ç»‡çš„ã€‚Generator è¿”å›žçš„æ˜¯è¿­ä»£å™¨ï¼Œé€šè¿‡ yield å…³é”®å­—å®žçŽ°æš‚åœåŠŸèƒ½ã€‚ è¿™æ˜¯ä¸€ä¸ªå…¸åž‹çš„ dva effectï¼Œé€šè¿‡ yield æŠŠå¼‚æ­¥é€»è¾‘é€šè¿‡åŒæ­¥çš„æ–¹å¼ç»„ç»‡èµ·æ¥ã€‚ 123456789app.model(&#123; namespace: 'todos', effects: &#123; *addRemote(&#123; payload: todo &#125;, &#123; put, call &#125;) &#123; yield call(addTodo, todo); yield put(&#123; type: 'add', payload: todo &#125;); &#125;, &#125;,&#125;); React ComponentStateless Functional ComponentsReact Component æœ‰ 3 ç§å®šä¹‰æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ React.createClass, class å’Œ Stateless Functional Componentã€‚æŽ¨èå°½é‡ä½¿ç”¨æœ€åŽä¸€ç§ï¼Œä¿æŒç®€æ´å’Œæ— çŠ¶æ€ã€‚è¿™æ˜¯å‡½æ•°ï¼Œä¸æ˜¯ Objectï¼Œæ²¡æœ‰ this ä½œç”¨åŸŸï¼Œæ˜¯ pure functionã€‚ æ¯”å¦‚å®šä¹‰ App Component ã€‚ 123456function App(props) &#123; function handleClick() &#123; props.dispatch(&#123; type: 'app/create' &#125;); &#125; return &lt;div onClick=&#123;handleClick&#125;&gt;$&#123;props.name&#125;&lt;/div&gt;&#125; ç­‰åŒäºŽï¼š 12345678class App extends React.Component &#123; handleClick() &#123; this.props.dispatch(&#123; type: 'app/create' &#125;); &#125; render() &#123; return &lt;div onClick=&#123;this.handleClick.bind(this)&#125;&gt;$&#123;this.props.name&#125;&lt;/div&gt; &#125;&#125; JSXComponent åµŒå¥—ç±»ä¼¼ HTMLï¼ŒJSX é‡Œå¯ä»¥ç»™ç»„ä»¶æ·»åŠ å­ç»„ä»¶ã€‚ 12345&lt;App&gt; &lt;Header /&gt; &lt;MainContent /&gt; &lt;Footer /&gt;&lt;/App&gt; classNameclass æ˜¯ä¿ç•™è¯ï¼Œæ‰€ä»¥æ·»åŠ æ ·å¼æ—¶ï¼Œéœ€ç”¨ className ä»£æ›¿ class ã€‚ 1&lt;h1 className="fancy"&gt;Hello dva&lt;/h1&gt; JavaScript è¡¨è¾¾å¼JavaScript è¡¨è¾¾å¼éœ€è¦ç”¨ {} æ‹¬èµ·æ¥ï¼Œä¼šæ‰§è¡Œå¹¶è¿”å›žç»“æžœã€‚ æ¯”å¦‚ï¼š 1&lt;h1&gt;&#123; this.props.title &#125;&lt;/h1&gt; Mapping Arrays to JSXå¯ä»¥æŠŠæ•°ç»„æ˜ å°„ä¸º JSX å…ƒç´ åˆ—è¡¨ã€‚ 123&lt;ul&gt; &#123; this.props.todos.map((todo, i) =&gt; &lt;li key=&#123;i&#125;&gt;&#123;todo&#125;&lt;/li&gt;) &#125;&lt;/ul&gt; æ³¨é‡Šå°½é‡åˆ«ç”¨ // åšå•è¡Œæ³¨é‡Šã€‚ 123456789101112&lt;h1&gt; &#123;/* multiline comment */&#125; &#123;/* multi line comment */&#125; &#123; // single line &#125; Hello&lt;/h1&gt; Spread Attributesè¿™æ˜¯ JSX ä»Ž ECMAScript6 å€Ÿé‰´è¿‡æ¥çš„å¾ˆæœ‰ç”¨çš„ç‰¹æ€§ï¼Œç”¨äºŽæ‰©å……ç»„ä»¶ props ã€‚ æ¯”å¦‚ï¼š 12345const attrs = &#123; href: 'http://example.org', target: '_blank',&#125;;&lt;a &#123;...attrs&#125;&gt;Hello&lt;/a&gt; ç­‰åŒäºŽ 12345const attrs = &#123; href: 'http://example.org', target: '_blank',&#125;;&lt;a href=&#123;attrs.href&#125; target=&#123;attrs.target&#125;&gt;Hello&lt;/a&gt; Propsæ•°æ®å¤„ç†åœ¨ React ä¸­æ˜¯éžå¸¸é‡è¦çš„æ¦‚å¿µä¹‹ä¸€ï¼Œåˆ†åˆ«å¯ä»¥é€šè¿‡ props, state å’Œ context æ¥å¤„ç†æ•°æ®ã€‚è€Œåœ¨ dva åº”ç”¨é‡Œï¼Œä½ åªéœ€å…³å¿ƒ props ã€‚ propTypesJavaScript æ˜¯å¼±ç±»åž‹è¯­è¨€ï¼Œæ‰€ä»¥è¯·å°½é‡å£°æ˜Ž propTypes å¯¹ props è¿›è¡Œæ ¡éªŒï¼Œä»¥å‡å°‘ä¸å¿…è¦çš„é—®é¢˜ã€‚ 123456function App(props) &#123; return &lt;div&gt;&#123;props.name&#125;&lt;/div&gt;;&#125;App.propTypes = &#123; name: React.PropTypes.string.isRequired,&#125;; å†…ç½®çš„ prop type æœ‰ï¼š PropTypes.array PropTypes.bool PropTypes.func PropTypes.number PropTypes.object PropTypes.string å¾€ä¸‹ä¼ æ•°æ® å¾€ä¸Šä¼ æ•°æ® CSS Modules ç†è§£ CSS Modulesä¸€å¼ å›¾ç†è§£ CSS Modules çš„å·¥ä½œåŽŸç†ï¼š button class åœ¨æž„å»ºä¹‹åŽä¼šè¢«é‡å‘½åä¸º ProductList_button_1FU0u ã€‚button æ˜¯ local nameï¼Œè€Œ ProductList_button_1FU0u æ˜¯ global name ã€‚ä½ å¯ä»¥ç”¨ç®€çŸ­çš„æè¿°æ€§åå­—ï¼Œè€Œä¸éœ€è¦å…³å¿ƒå‘½åå†²çªé—®é¢˜ã€‚ ç„¶åŽä½ è¦åšçš„å…¨éƒ¨äº‹æƒ…å°±æ˜¯åœ¨ css/less æ–‡ä»¶é‡Œå†™ .button {...}ï¼Œå¹¶åœ¨ç»„ä»¶é‡Œé€šè¿‡ styles.button æ¥å¼•ç”¨ä»–ã€‚ å®šä¹‰å…¨å±€ CSSCSS Modules é»˜è®¤æ˜¯å±€éƒ¨ä½œç”¨åŸŸçš„ï¼Œæƒ³è¦å£°æ˜Žä¸€ä¸ªå…¨å±€è§„åˆ™ï¼Œå¯ç”¨ :global è¯­æ³•ã€‚ æ¯”å¦‚ï¼š 123456.title &#123; color: red;&#125;:global(.title) &#123; color: green;&#125; ç„¶åŽåœ¨å¼•ç”¨çš„æ—¶å€™ï¼š 12&lt;App className=&#123;styles.title&#125; /&gt; // red&lt;App className="title" /&gt; // green classnames Packageåœ¨ä¸€äº›å¤æ‚çš„åœºæ™¯ä¸­ï¼Œä¸€ä¸ªå…ƒç´ å¯èƒ½å¯¹åº”å¤šä¸ª classNameï¼Œè€Œæ¯ä¸ª className åˆåŸºäºŽä¸€äº›æ¡ä»¶æ¥å†³å®šæ˜¯å¦å‡ºçŽ°ã€‚è¿™æ—¶ï¼Œclassnames è¿™ä¸ªåº“å°±éžå¸¸æœ‰ç”¨ã€‚ 123456789import classnames from 'classnames';const App = (props) =&gt; &#123; const cls = classnames(&#123; btn: true, btnLarge: props.type === 'submit', btnSmall: props.type === 'edit', &#125;); return &lt;div className=&#123; cls &#125; /&gt;;&#125; è¿™æ ·ï¼Œä¼ å…¥ä¸åŒçš„ type ç»™ App ç»„ä»¶ï¼Œå°±ä¼šè¿”å›žä¸åŒçš„ className ç»„åˆï¼š 12&lt;App type="submit" /&gt; // btn btnLarge&lt;App type="edit" /&gt; // btn btnSmall Reducerreducer æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŽ¥å— state å’Œ actionï¼Œè¿”å›žè€çš„æˆ–æ–°çš„ state ã€‚å³ï¼š(state, action) =&gt; state å¢žåˆ æ”¹ä»¥ todos ä¸ºä¾‹ã€‚ 123456789101112131415161718192021app.model(&#123; namespace: 'todos', state: [], reducers: &#123; add(state, &#123; payload: todo &#125;) &#123; return state.concat(todo); &#125;, remove(state, &#123; payload: id &#125;) &#123; return state.filter(todo =&gt; todo.id !== id); &#125;, update(state, &#123; payload: updatedTodo &#125;) &#123; return state.map(todo =&gt; &#123; if (todo.id === updatedTodo.id) &#123; return &#123; ...todo, ...updatedTodo &#125;; &#125; else &#123; return todo; &#125; &#125;); &#125;, &#125;,&#125;; åµŒå¥—æ•°æ®çš„å¢žåˆ æ”¹å»ºè®®æœ€å¤šä¸€å±‚åµŒå¥—ï¼Œä»¥ä¿æŒ state çš„æ‰å¹³åŒ–ï¼Œæ·±å±‚åµŒå¥—ä¼šè®© reducer å¾ˆéš¾å†™å’Œéš¾ä»¥ç»´æŠ¤ã€‚ 12345678910111213app.model(&#123; namespace: 'app', state: &#123; todos: [], loading: false, &#125;, reducers: &#123; add(state, &#123; payload: todo &#125;) &#123; const todos = state.todos.concat(todo); return &#123; ...state, todos &#125;; &#125;, &#125;,&#125;); ä¸‹é¢æ˜¯æ·±å±‚åµŒå¥—çš„ä¾‹å­ï¼Œåº”å°½é‡é¿å…ã€‚ 12345678910111213141516171819app.model(&#123; namespace: 'app', state: &#123; a: &#123; b: &#123; todos: [], loading: false, &#125;, &#125;, &#125;, reducers: &#123; add(state, &#123; payload: todo &#125;) &#123; const todos = state.a.b.todos.concat(todo); const b = &#123; ...state.a.b, todos &#125;; const a = &#123; ...state.a, b &#125;; return &#123; ...state, a &#125;; &#125;, &#125;,&#125;); Effectç¤ºä¾‹ï¼š 123456789app.model(&#123; namespace: 'todos', effects: &#123; *addRemote(&#123; payload: todo &#125;, &#123; put, call &#125;) &#123; yield call(addTodo, todo); yield put(&#123; type: 'add', payload: todo &#125;); &#125;, &#125;,&#125;); Effectsputç”¨äºŽè§¦å‘ action ã€‚ 1yield put(&#123; type: 'todos/add', payload: 'Learn Dva' &#125;); callç”¨äºŽè°ƒç”¨å¼‚æ­¥é€»è¾‘ï¼Œæ”¯æŒ promise ã€‚ 1const result = yield call(fetch, '/todos'); selectç”¨äºŽä»Ž state é‡ŒèŽ·å–æ•°æ®ã€‚ 1const todos = yield select(state =&gt; state.todos); é”™è¯¯å¤„ç†å…¨å±€é”™è¯¯å¤„ç†dva é‡Œï¼Œeffects å’Œ subscriptions çš„æŠ›é”™å…¨éƒ¨ä¼šèµ° onError hookï¼Œæ‰€ä»¥å¯ä»¥åœ¨ onError é‡Œç»Ÿä¸€å¤„ç†é”™è¯¯ã€‚ 12345const app = dva(&#123; onError(e, dispatch) &#123; console.log(e.message); &#125;,&#125;); ç„¶åŽ effects é‡Œçš„æŠ›é”™å’Œ reject çš„ promise å°±éƒ½ä¼šè¢«æ•èŽ·åˆ°äº†ã€‚ æœ¬åœ°é”™è¯¯å¤„ç†å¦‚æžœéœ€è¦å¯¹æŸäº› effects çš„é”™è¯¯è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œéœ€è¦åœ¨ effect å†…éƒ¨åŠ  try catch ã€‚ 1234567891011app.model(&#123; effects: &#123; *addRemote() &#123; try &#123; // Your Code Here &#125; catch(e) &#123; console.log(e.message); &#125; &#125;, &#125;,&#125;); å¼‚æ­¥è¯·æ±‚å¼‚æ­¥è¯·æ±‚åŸºäºŽ whatwg-fetchï¼ŒAPI è¯¦è§ï¼šhttps://github.com/github/fetch GET å’Œ POST12345678910import request from '../util/request';// GETrequest('/api/todos');// POSTrequest('/api/todos', &#123; method: 'POST', body: JSON.stringify(&#123; a: 1 &#125;),&#125;); ç»Ÿä¸€é”™è¯¯å¤„ç†å‡å¦‚çº¦å®šåŽå°è¿”å›žä»¥ä¸‹æ ¼å¼æ—¶ï¼Œåšç»Ÿä¸€çš„é”™è¯¯å¤„ç†ã€‚ 1234&#123; status: 'error', message: '',&#125; ç¼–è¾‘ utils/request.jsï¼ŒåŠ å…¥ä»¥ä¸‹ä¸­é—´ä»¶ï¼š 1234567function parseErrorMessage(&#123; data &#125;) &#123; const &#123; status, message &#125; = data; if (status === 'error') &#123; throw new Error(message); &#125; return &#123; data &#125;;&#125; ç„¶åŽï¼Œè¿™ç±»é”™è¯¯å°±ä¼šèµ°åˆ° onError hook é‡Œã€‚ Subscriptionsubscriptions æ˜¯è®¢é˜…ï¼Œç”¨äºŽè®¢é˜…ä¸€ä¸ªæ•°æ®æºï¼Œç„¶åŽæ ¹æ®éœ€è¦ dispatch ç›¸åº”çš„ actionã€‚æ•°æ®æºå¯ä»¥æ˜¯å½“å‰çš„æ—¶é—´ã€æœåŠ¡å™¨çš„ websocket è¿žæŽ¥ã€keyboard è¾“å…¥ã€geolocation å˜åŒ–ã€history è·¯ç”±å˜åŒ–ç­‰ç­‰ã€‚æ ¼å¼ä¸º ({ dispatch, history }) =&gt; unsubscribe ã€‚ å¼‚æ­¥æ•°æ®åˆå§‹åŒ–æ¯”å¦‚ï¼šå½“ç”¨æˆ·è¿›å…¥ /users é¡µé¢æ—¶ï¼Œè§¦å‘ action users/fetch åŠ è½½ç”¨æˆ·æ•°æ®ã€‚ 12345678910111213app.model(&#123; subscriptions: &#123; setup(&#123; dispatch, history &#125;) &#123; history.listen((&#123; pathname &#125;) =&gt; &#123; if (pathname === '/users') &#123; dispatch(&#123; type: 'users/fetch', &#125;); &#125; &#125;); &#125;, &#125;,&#125;); path-to-regexp Packageå¦‚æžœ url è§„åˆ™æ¯”è¾ƒå¤æ‚ï¼Œæ¯”å¦‚ /users/:userId/searchï¼Œé‚£ä¹ˆåŒ¹é…å’Œ userId çš„èŽ·å–éƒ½ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚è¿™æ˜¯æŽ¨èç”¨ path-to-regexp ç®€åŒ–è¿™éƒ¨åˆ†é€»è¾‘ã€‚ 12345678import pathToRegexp from 'path-to-regexp';// in subscriptionconst match = pathToRegexp('/users/:userId/search').exec(pathname);if (match) &#123; const userId = match[1]; // dispatch action with userId&#125; RouterConfig with JSX Element (router.js)1234&lt;Route path="/" component=&#123;App&#125;&gt; &lt;Route path="accounts" component=&#123;Accounts&#125;/&gt; &lt;Route path="statements" component=&#123;Statements&#125;/&gt;&lt;/Route&gt; è¯¦è§ï¼šreact-router Route ComponentsRoute Components æ˜¯æŒ‡ ./src/routes/ ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä»–ä»¬æ˜¯ ./src/router.js é‡ŒåŒ¹é…çš„ Componentã€‚ é€šè¿‡ connect ç»‘å®šæ•°æ®æ¯”å¦‚ï¼š 123456789import &#123; connect &#125; from 'dva';function App() &#123;&#125;function mapStateToProps(state, ownProps) &#123; return &#123; users: state.users, &#125;;&#125;export default connect(mapStateToProps)(App); ç„¶åŽåœ¨ App é‡Œå°±æœ‰äº† dispatch å’Œ users ä¸¤ä¸ªå±žæ€§ã€‚ Injected Props (e.g. location)Route Component ä¼šæœ‰é¢å¤–çš„ props ç”¨ä»¥èŽ·å–è·¯ç”±ä¿¡æ¯ã€‚ location params children æ›´å¤šè¯¦è§ï¼šreact-router åŸºäºŽ action è¿›è¡Œé¡µé¢è·³è½¬123456789101112131415import &#123; routerRedux &#125; from 'dva/router';// Inside Effectsyield put(routerRedux.push('/logout'));// Outside Effectsdispatch(routerRedux.push('/logout'));// With queryrouterRedux.push(&#123; pathname: '/logout', query: &#123; page: 2, &#125;,&#125;); é™¤ push(location) å¤–è¿˜æœ‰æ›´å¤šæ–¹æ³•ï¼Œè¯¦è§ react-router-redux dva é…ç½®Redux Middlewareæ¯”å¦‚è¦æ·»åŠ  redux-logger ä¸­é—´ä»¶ï¼š 1234import createLogger from 'redux-logger';const app = dva(&#123; onAction: createLogger(),&#125;); æ³¨ï¼šonAction æ”¯æŒæ•°ç»„ï¼Œå¯åŒæ—¶ä¼ å…¥å¤šä¸ªä¸­é—´ä»¶ã€‚ historyåˆ‡æ¢ history ä¸º browserHistory1234import &#123; browserHistory &#125; from 'dva/router';const app = dva(&#123; history: browserHistory,&#125;); åŽ»é™¤ hashHistory ä¸‹çš„ _k æŸ¥è¯¢å‚æ•°12345import &#123; useRouterHistory &#125; from 'dva/router';import &#123; createHashHistory &#125; from 'history';const app = dva(&#123; history: useRouterHistory(createHashHistory)(&#123; queryKey: false &#125;),&#125;); å·¥å…·é€šè¿‡ dva-cli åˆ›å»ºé¡¹ç›®å…ˆå®‰è£… dva-cli ã€‚ 1$ npm install dva-cli -g ç„¶åŽåˆ›å»ºé¡¹ç›®ã€‚ 1$ dva new myapp æœ€åŽï¼Œè¿›å…¥ç›®å½•å¹¶å¯åŠ¨ã€‚ 12$ cd myapp$ npm start]]></content>
      <categories>
        <category>dva</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>ES6</tag>
        <tag>React</tag>
        <tag>dva</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨prop-typesè¿›è¡Œå±žæ€§ç¡®è®¤]]></title>
    <url>%2Fblog%2F2019%2F03%2F29%2F%E4%BD%BF%E7%94%A8prop-types%E8%BF%9B%E8%A1%8C%E5%B1%9E%E6%80%A7%E7%A1%AE%E8%AE%A4%2F</url>
    <content type="text"><![CDATA[åœ¨å¼€å‘ React Native è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œå¯ä»¥é€šè¿‡å±žæ€§ç¡®è®¤æ¥å£°æ˜Žè¿™ä¸ªç»„ä»¶éœ€è¦å“ªäº›å±žæ€§ã€‚è¿™æ ·ï¼Œå¦‚æžœåœ¨è°ƒç”¨è¿™ä¸ªè‡ªå®šä¹‰ç»„ä»¶æ—¶æ²¡æœ‰æä¾›ç›¸åº”çš„å±žæ€§ï¼Œåˆ™ä¼šåœ¨æ‰‹æœºä¸Žè°ƒè¯•å·¥å…·ä¸­å¼¹å‡ºè­¦å‘Šä¿¡æ¯ï¼Œå‘ŠçŸ¥å¼€å‘è€…è¯¥ç»„ä»¶éœ€è¦å“ªäº›å±žæ€§ã€‚ ä¸ºäº†ä¿è¯ React Native ä»£ç é«˜æ•ˆè¿è¡Œï¼Œå±žæ€§ç¡®è®¤ä»…åœ¨å¼€å‘çŽ¯å¢ƒä¸­æœ‰æ•ˆã€‚ prop-types åº“çš„å®‰è£…å’Œé…ç½® è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹ä»£ç å®‰è£… prop-types åº“ï¼š 1npm install --save prop-types åœ¨éœ€è¦ä½¿ç”¨çš„ js æ–‡ä»¶ä¸­ä½¿ç”¨å¦‚ä¸‹ä»£ç å¼•å…¥ï¼š 1import PropTypes from 'prop-types'; ä½¿ç”¨prop-typesä¸‹é¢å¯¹ list.js ä»£ç åšä¸ªä¿®æ”¹ï¼Œå¢žåŠ å±žæ€§ç¡®è®¤ä»£ç  123456789101112131415161718192021import React, &#123; Component &#125; from 'react';import &#123; Text, View, &#125; from 'react-native'; import PropTypes from 'prop-types'; export default class List extends Component &#123; //........ &#125; //æ·»åŠ å±žæ€§ç¡®è®¤ List.propTypes = &#123; news: PropTypes.array, &#125; const styles = StyleSheet.create(&#123; //........ &#125;); å±žæ€§ç¡®è®¤çš„è¯­æ³•1ã€è¦æ±‚å±žæ€§æ˜¯æŒ‡å®šçš„ JavaScript åŸºæœ¬ç±»åž‹ 123456å±žæ€§: PropTypes.array,å±žæ€§: PropTypes.bool,å±žæ€§: PropTypes.func,å±žæ€§: PropTypes.number,å±žæ€§: PropTypes.object,å±žæ€§: PropTypes.string, 2ã€è¦æ±‚å±žæ€§æ˜¯å¯æ¸²æŸ“èŠ‚ç‚¹ 1å±žæ€§: PropTypes.node, 3ã€è¦æ±‚å±žæ€§æ˜¯æŸä¸ª React å…ƒç´  1å±žæ€§: PropTypes.element, 4ã€è¦æ±‚å±žæ€§æ˜¯æŸä¸ªæŒ‡å®šç±»çš„å®žä¾‹ 1å±žæ€§: PropTypes.instanceOf(NameOfAClass), 5ã€è¦æ±‚å±žæ€§å–å€¼ä¸ºç‰¹å®šçš„å‡ ä¸ªå€¼ 1å±žæ€§: PropTypes.oneOf(['value1', 'value2']), 6ã€è¦æ±‚å±žæ€§å¯ä»¥ä¸ºæŒ‡å®šç±»åž‹ä¸­çš„ä»»æ„ä¸€ä¸ª 12345å±žæ€§: PropTypes.oneOfType([ PropTypes.bool, PropTypes.number, PropTypes.instanceOf(NameOfAClass),]) 7ã€è¦æ±‚å±žæ€§ä¸ºæŒ‡å®šç±»åž‹çš„æ•°ç»„ 1å±žæ€§: PropTypes.arrayOf(PropTypes.number), 8ã€è¦æ±‚å±žæ€§æ˜¯ä¸€ä¸ªæœ‰ç‰¹å®šæˆå‘˜å˜é‡çš„å¯¹è±¡ 1å±žæ€§: PropTypes.objectOf(PropTypes.number), 9ã€è¦æ±‚å±žæ€§æ˜¯ä¸€ä¸ªæŒ‡å®šæž„æˆæ–¹å¼çš„å¯¹è±¡ 1234å±žæ€§: PropTypes.shape(&#123; color: PropTypes.string, fontSize: PropTypes.number,&#125;), 10ã€å±žæ€§å¯ä»¥æ˜¯ä»»æ„ç±»åž‹ 1å±žæ€§: PropTypes.any å±žæ€§å£°æ˜Žä¸ºå¿…éœ€çš„ä¸Šè¿°çš„ 10 ç§è¯­æ³•ï¼Œéƒ½å¯ä»¥é€šè¿‡åœ¨åŽé¢åŠ ä¸Š isRequired å£°æ˜Žå®ƒæ˜¯å¿…éœ€çš„ã€‚ 123å±žæ€§: PropTypes.array.isRequired,å±žæ€§: PropTypes.any.isRequired,å±žæ€§: PropTypes.instanceOf(NameOfAClass).isRequired,]]></content>
      <categories>
        <category>ç¼–ç¨‹,Javascript</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[docsifyç¥žå¥‡çš„æ–‡æ¡£ç½‘ç«™ç”Ÿæˆå·¥å…·]]></title>
    <url>%2Fblog%2F2019%2F03%2F14%2Fdocsify%E7%A5%9E%E5%A5%87%E7%9A%84%E6%96%87%E6%A1%A3%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7%2F</url>
    <content type="text"><![CDATA[docsify æ˜¯ä¸€ä¸ªåŠ¨æ€ç”Ÿæˆæ–‡æ¡£ç½‘ç«™çš„å·¥å…·ã€‚ä¸åŒäºŽ GitBookã€Hexo çš„åœ°æ–¹æ˜¯å®ƒä¸ä¼šç”Ÿæˆå°† .md è½¬æˆ .html æ–‡ä»¶ï¼Œæ‰€æœ‰è½¬æ¢å·¥ä½œéƒ½æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œã€‚ è¿™å°†éžå¸¸å®žç”¨ï¼Œå¦‚æžœåªæ˜¯éœ€è¦å¿«é€Ÿçš„æ­å»ºä¸€ä¸ªå°åž‹çš„æ–‡æ¡£ç½‘ç«™ï¼Œæˆ–è€…ä¸æƒ³å› ä¸ºç”Ÿæˆçš„ä¸€å † .html æ–‡ä»¶â€œæ±¡æŸ“â€ commit è®°å½•ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ª index.html å°±å¯ä»¥å¼€å§‹å†™æ–‡æ¡£è€Œä¸”ç›´æŽ¥éƒ¨ç½²åœ¨ GitHub Pagesã€‚ ç‰¹æ€§ æ— éœ€æž„å»ºï¼Œå†™å®Œæ–‡æ¡£ç›´æŽ¥å‘å¸ƒ å®¹æ˜“ä½¿ç”¨å¹¶ä¸”è½»é‡ (~19kB gzipped) æ™ºèƒ½çš„å…¨æ–‡æœç´¢ æä¾›å¤šå¥—ä¸»é¢˜ ä¸°å¯Œçš„ API æ”¯æŒ Emoji å…¼å®¹ IE10+ æ”¯æŒ SSR (example) å¿«é€Ÿå¼€å§‹æŽ¨èå®‰è£… docsify-cli å·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿åˆ›å»ºåŠæœ¬åœ°é¢„è§ˆæ–‡æ¡£ç½‘ç«™ã€‚ 1npm i docsify-cli -g åˆå§‹åŒ–é¡¹ç›®å¦‚æžœæƒ³åœ¨é¡¹ç›®çš„ ./docs ç›®å½•é‡Œå†™æ–‡æ¡£ï¼Œç›´æŽ¥é€šè¿‡ init åˆå§‹åŒ–é¡¹ç›®ã€‚ 1docsify init ./docs å¼€å§‹å†™æ–‡æ¡£åˆå§‹åŒ–æˆåŠŸåŽï¼Œå¯ä»¥çœ‹åˆ° ./docs ç›®å½•ä¸‹åˆ›å»ºçš„å‡ ä¸ªæ–‡ä»¶ index.html å…¥å£æ–‡ä»¶ README.md ä¼šåšä¸ºä¸»é¡µå†…å®¹æ¸²æŸ“ .nojekyll ç”¨äºŽé˜»æ­¢ GitHub Pages ä¼šå¿½ç•¥æŽ‰ä¸‹åˆ’çº¿å¼€å¤´çš„æ–‡ä»¶ç›´æŽ¥ç¼–è¾‘ docs/README.md å°±èƒ½æ›´æ–°ç½‘ç«™å†…å®¹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å†™å¤šä¸ªé¡µé¢ã€‚ æœ¬åœ°é¢„è§ˆç½‘ç«™è¿è¡Œä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨é€šè¿‡ docsify serve å¯ä»¥æ–¹ä¾¿çš„é¢„è§ˆæ•ˆæžœï¼Œè€Œä¸”æä¾› LiveReload åŠŸèƒ½ï¼Œå¯ä»¥è®©å®žæ—¶çš„é¢„è§ˆã€‚é»˜è®¤è®¿é—® http://localhost:3000 ã€‚ 1docsify serve docs æ›´å¤šå‘½ä»¤è¡Œå·¥å…·ç”¨æ³•ï¼Œå‚è€ƒ docsify-cli æ–‡æ¡£ã€‚ æ‰‹åŠ¨åˆå§‹åŒ–å¦‚æžœä¸å–œæ¬¢ npm æˆ–è€…è§‰å¾—å®‰è£…å·¥å…·å¤ªéº»çƒ¦ï¼Œæˆ‘ä»¬å…¶å®žåªéœ€è¦ç›´æŽ¥åˆ›å»ºä¸€ä¸ª index.html æ–‡ä»¶ã€‚ 1234567891011121314151617181920// index.html&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"&gt; &lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt; &lt;meta charset="UTF-8"&gt; &lt;link rel="stylesheet" href="//unpkg.com/docsify/themes/vue.css"&gt;&lt;/head&gt;&lt;body&gt; &lt;div id="app"&gt;&lt;/div&gt; &lt;script&gt; window.$docsify = &#123; //... &#125; &lt;/script&gt; &lt;script src="//unpkg.com/docsify/lib/docsify.min.js"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; å¦‚æžœç³»ç»Ÿé‡Œå®‰è£… Python çš„è¯ï¼Œä¹Ÿå¯ä»¥å¾ˆè½»æ˜“çš„å¯åŠ¨ä¸€ä¸ªé™æ€æœåŠ¡å™¨ã€‚ 1cd docs &amp;&amp; python -m SimpleHTTPServer 3000 Loading æç¤ºåˆå§‹åŒ–æ—¶ä¼šæ˜¾ç¤º Loadingâ€¦ å†…å®¹ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰æç¤ºä¿¡æ¯ã€‚ 123// index.html &lt;div id="app"&gt;åŠ è½½ä¸­&lt;/div&gt; å¦‚æžœæ›´æ”¹äº† el çš„é…ç½®ï¼Œéœ€è¦å°†è¯¥å…ƒç´ åŠ ä¸Š data-app å±žæ€§ã€‚ 123456789// index.html &lt;div data-app id="main"&gt;åŠ è½½ä¸­&lt;/div&gt; &lt;script&gt; window.$docsify = &#123; el: '#main' &#125; &lt;/script&gt; ç¤ºä¾‹è¿™æ˜¯ä¸€ä»½docsifyå¼€å‘çš„æ–‡æ¡£æ¬¢è¿Žç‚¹å‡»æŸ¥çœ‹ gitåœ°å€ çº¿ä¸Šé¢„è§ˆ æ›´åŠ è¯¦ç»†çš„è®¾ç½®é…ç½®å‚è€ƒå®˜æ–¹æ–‡æ¡£]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ES6--Setå’ŒMapæ•°æ®ç»“æž„]]></title>
    <url>%2Fblog%2F2019%2F01%2F29%2FES6-Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%2F</url>
    <content type="text"><![CDATA[ES6æä¾›äº†æ–°çš„æ•°æ®ç»“æž„Set, å®ƒç±»ä¼¼æ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ï¼ŒSetæœ¬èº«æ˜¯ä¸€ä¸ªæž„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆSetæ•°æ®ç»“æž„ã€‚ SetSetæž„é€ å‡½æ•°å¯ä»¥ç»“æž„ä¸€ä¸ªæ•°æ®ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ– 12345678let s = new Set();let s = new Set( [1,2,3,4,4] );s//Set&#123;1,2,3,4&#125;s.size//4[...set]//[1,2,3,4] å› æ­¤ä¹Ÿå‡ºçŽ°äº†lä¸¤ç§æ•°ç»„åŽ»é‡çš„æ–¹æ³• 1234567[...new Set( [1,2,3,4,4] ) ]//[1,2,3,4]//æˆ–è€…Array.from( new Set( [1,2,3,4,5,5] ) )//[1,2,3,4,5] Setå®žä¾‹çš„å±žæ€§å’Œæ–¹æ³•Setç»“æž„çš„å®žä¾‹æœ‰å±žæ€§:Set.prototype.constructorï¼šæž„é€ å‡½æ•°ï¼Œé»˜è®¤å°±æ˜¯Setå‡½æ•°ï¼›Set.prototype.sizeï¼šè¿”å›žSetå®žä¾‹çš„æˆå‘˜æ€»æ•°ï¼›Setå®žä¾‹çš„æ–¹æ³•åˆ†ä¸ºä¸¤ç±»ï¼šæ“ä½œæ–¹æ³•å’ŒéåŽ†æ–¹æ³•ï¼›add(value)ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å›žSetç»“æž„æœ¬èº«delete(value)ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›žä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸï¼›has(value)ï¼šè¿”å›žä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸ºSetçš„æˆå‘˜ï¼›clear() ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›žå€¼ï¼› 12345678910let s = new Set( [1,2,3,4,5,5] );s.add(4);s.size//5s.has(2)//trues.delete(2)s.has(2)//fasles.clear() éåŽ†æ“ä½œSetç»“æž„çš„å®žä¾‹æœ‰å››ä¸ªéåŽ†æ–¹æ³•ï¼Œå¯ä»¥ç”¨äºŽéåŽ†æˆå‘˜keys()ï¼šè¿”å›žé”®åçš„éåŽ†å™¨values()ï¼šè¿”å›žé”®å€¼çš„éåŽ†å™¨entries()ï¼šè¿”å›žé”®å€¼å¯¹çš„éåŽ†å™¨forEach() :ä½¿ç”¨å›žè°ƒå‡½æ•°éåŽ†æ¯ä¸ªæˆå‘˜ ###ï¼ˆ1ï¼‰keys()ï¼Œvalues()ï¼Œentries() keysæ–¹æ³•ã€valuesæ–¹æ³•ã€entriesæ–¹æ³•è¿”å›žçš„éƒ½æ˜¯éåŽ†å™¨å¯¹è±¡ï¼ˆè¯¦è§ã€ŠIterator å¯¹è±¡ã€‹ä¸€ç« ï¼‰ã€‚ç”±äºŽ Set ç»“æž„æ²¡æœ‰é”®åï¼Œåªæœ‰é”®å€¼ï¼ˆæˆ–è€…è¯´é”®åå’Œé”®å€¼æ˜¯åŒä¸€ä¸ªå€¼ï¼‰ï¼Œæ‰€ä»¥keysæ–¹æ³•å’Œvaluesæ–¹æ³•çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚ 1234567891011121314151617181920212223let set = new Set(['red', 'green', 'blue']);for (let item of set.keys()) &#123; console.log(item);&#125;// red// green// bluefor (let item of set.values()) &#123; console.log(item);&#125;// red// green// bluefor (let item of set.entries()) &#123; console.log(item);&#125;// ["red", "red"]// ["green", "green"]// ["blue", "blue"] ï¼ˆ2ï¼‰forEach()Setç»“æž„çš„å®žä¾‹çš„forEachæ–¹æ³•ï¼Œç”¨äºŽå¯¹æ¯ä¸ªæˆå‘˜æ‰§è¡ŒæŸç§æ“ä½œï¼Œæ²¡æœ‰è¿”å›žå€¼ã€‚ 123456let set = new Set([1, 2, 3]);set.forEach((value, key) =&gt; console.log(value * 2) )// 2// 4// 6 MapJavaScript çš„å¯¹è±¡ï¼ˆObjectï¼‰ï¼Œæœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼ˆHash ç»“æž„ï¼‰ï¼Œä½†æ˜¯ä¼ ç»Ÿä¸Šåªèƒ½ç”¨å­—ç¬¦ä¸²å½“ä½œé”®ã€‚è¿™ç»™å®ƒçš„ä½¿ç”¨å¸¦æ¥äº†å¾ˆå¤§çš„é™åˆ¶ã€‚ ES6 æä¾›äº† Map æ•°æ®ç»“æž„ã€‚å®ƒç±»ä¼¼äºŽå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºŽå­—ç¬¦ä¸²ï¼Œå„ç§ç±»åž‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒObject ç»“æž„æä¾›äº†â€œå­—ç¬¦ä¸²â€”å€¼â€çš„å¯¹åº”ï¼ŒMapç»“æž„æä¾›äº†â€œå€¼â€”å€¼â€çš„å¯¹åº”ï¼Œæ˜¯ä¸€ç§æ›´å®Œå–„çš„ Hash ç»“æž„å®žçŽ°ã€‚å¦‚æžœä½ éœ€è¦â€œé”®å€¼å¯¹â€çš„æ•°æ®ç»“æž„ï¼ŒMap æ¯” Object æ›´åˆé€‚ã€‚ 12345678const map = new Map([["name","å¼ ä¸‰"] , ["title","Author"] ]);map.size//2map.has("name")//truemap.get("name")//"å¼ ä¸‰" å®žä¾‹çš„å±žæ€§å¥½æ“ä½œæ–¹æ³•ï¼ˆ1ï¼‰sizeå±žæ€§ï¼šè¿”å›ž Map ç»“æž„çš„æˆå‘˜æ€»æ•°ã€‚ 1234567const map = new Map();map.set('foo', true);map.set('bar', false);map//Map &#123;"foo" =&gt; true, "bar" =&gt; false&#125;map.size // 2 ï¼ˆ2ï¼‰set(key, value)setæ–¹æ³•è®¾ç½®é”®åkeyå¯¹åº”çš„é”®å€¼ä¸ºvalueï¼Œç„¶åŽè¿”å›žæ•´ä¸ª Map ç»“æž„ã€‚å¦‚æžœkeyå·²ç»æœ‰å€¼ï¼Œåˆ™é”®å€¼ä¼šè¢«æ›´æ–°ï¼Œå¦åˆ™å°±æ–°ç”Ÿæˆè¯¥é”®ã€‚ 123456const m = new Map();m.set('edition', 6) // é”®æ˜¯å­—ç¬¦ä¸²m.set(262, 'standard') // é”®æ˜¯æ•°å€¼m.set(undefined, 'nah') // é”®æ˜¯ undefined ï¼ˆ3ï¼‰get(key)getæ–¹æ³•è¯»å–keyå¯¹åº”çš„é”®å€¼ï¼Œå¦‚æžœæ‰¾ä¸åˆ°keyï¼Œè¿”å›žundefinedã€‚ 123456const m = new Map([["name","MGT360124"],["age",18]])m.get('name')//"MGT360124" ï¼ˆ4ï¼‰has(key),delete(key),clear()hasæ–¹æ³•è¿”å›žä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªé”®æ˜¯å¦åœ¨å½“å‰ Map å¯¹è±¡ä¹‹ä¸­ã€‚ 12345678910111213const m = new Map();m.set('edition', 6);m.set(262, 'standard');m.set(undefined, 'nah');m.has('edition') // truem.has('years') // falsem.has(262) // truem.has(undefined) // truem.delete(undefined)m.has(undefined) // false MapéåŽ†æ–¹æ³•Mapç»“æž„åŽŸç”Ÿæä¾›ä¸‰ä¸ªéåŽ†å™¨ç”Ÿæˆå‡½æ•°å’Œä¸€ä¸ªéåŽ†æ–¹æ³•;keys()ï¼šè¿”å›žé”®åçš„éåŽ†å™¨values()ï¼šè¿”å›žé”®å€¼çš„éåŽ†å™¨entries()ï¼šè¿”å›žæ‰€æœ‰æˆå‘˜çš„éåŽ†å™¨forEach()ï¼šéåŽ†Mapçš„æ‰€æœ‰æˆå‘˜MapéåŽ†çš„é¡ºåºå°±æ˜¯æ’å…¥çš„é¡ºåº 12345678910111213141516171819202122232425262728293031323334353637const map = new Map([ ['F', 'no'], ['T', 'yes'],]);for (let key of map.keys()) &#123; console.log(key);&#125;// "F"// "T"for (let value of map.values()) &#123; console.log(value);&#125;// "no"// "yes"for (let item of map.entries()) &#123; console.log(item[0], item[1]);&#125;// "F" "no"// "T" "yes"// æˆ–è€…for (let [key, value] of map.entries()) &#123; console.log(key, value);&#125;// "F" "no"// "T" "yes"// ç­‰åŒäºŽä½¿ç”¨map.entries()for (let [key, value] of map) &#123; console.log(key, value);&#125;// "F" "no"// "T" "yes" Mapç»“æž„è½¬ä¸ºæ•°ç»„ç»“æž„ 123456789101112131415161718const map = new Map([ [1, 'one'], [2, 'two'], [3, 'three'],]);[...map.keys()]// [1, 2, 3][...map.values()]// ['one', 'two', 'three'][...map.entries()]// [[1,'one'], [2, 'two'], [3, 'three']][...map]// [[1,'one'], [2, 'two'], [3, 'three']] Map è¿˜æœ‰ä¸€ä¸ªforEachæ–¹æ³•ï¼Œä¸Žæ•°ç»„çš„forEachæ–¹æ³•ç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥å®žçŽ°éåŽ†ã€‚]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Eslint è§„åˆ™]]></title>
    <url>%2Fblog%2F2019%2F01%2F14%2FEslint-%E8%A7%84%E5%88%99%2F</url>
    <content type="text"><![CDATA[ESLint ç”± JavaScript çº¢å®ä¹¦ ä½œè€… Nicholas C. Zakas ç¼–å†™ï¼Œ 2013 å¹´å‘å¸ƒç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚ NCZ çš„åˆè¡·ä¸æ˜¯é‡å¤é€ ä¸€ä¸ªè½®å­ï¼Œè€Œæ˜¯åœ¨å®žé™…éœ€æ±‚å¾—ä¸åˆ° JSHint å›¢é˜Ÿå“åº” çš„æƒ…å†µä¸‹åšå‡ºçš„é€‰æ‹©ï¼šä»¥å¯æ‰©å±•ã€æ¯æ¡è§„åˆ™ç‹¬ç«‹ã€ä¸å†…ç½®ç¼–ç é£Žæ ¼ä¸ºç†å¿µç¼–å†™ä¸€ä¸ª lint å·¥å…·ã€‚ å®‰è£…npm install -g eslint åˆå§‹åŒ–é¡¹ç›®è¿˜æ²¡æœ‰é…ç½®æ–‡ä»¶ï¼ˆ.eslintrcï¼‰çš„è¯ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šâ€“initå‚æ•°æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„é…ç½®æ–‡ä»¶ï¼š eslint --init è¿è¡Œeslint â€“initåŽï¼Œä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª.eslintrcæ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­é…ç½®ä¸€äº›è§„åˆ™ã€‚ é…ç½®ESLintè¢«è®¾è®¡ä¸ºå®Œå…¨å¯é…ç½®çš„ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹å¼æ¥é…ç½®ESLintï¼š å†…åµŒé…ç½®ï¼šå°†é…ç½®ä¿¡æ¯ä»¥æ³¨é‡Šçš„å½¢å¼å†™åœ¨è¦æ£€éªŒçš„æ–‡ä»¶å†… æ–‡ä»¶é…ç½®ï¼šåˆ©ç”¨javascriptã€jsonã€ymlè¯­è¨€çš„è¯­æ³•ï¼Œç”Ÿæˆåä¸º.eslintrc.*çš„é…ç½®æ–‡ä»¶ï¼Œå°†é…ç½®ä¿¡æ¯å†™åˆ°æ–‡ä»¶å†… æ–‡ä»¶é…ç½®æ–¹å¼envï¼šä½ çš„è„šæœ¬å°†è¦è¿è¡Œåœ¨ä»€ä¹ˆçŽ¯å¢ƒä¸­Environmentå¯ä»¥é¢„è®¾å¥½çš„å…¶ä»–çŽ¯å¢ƒçš„å…¨å±€å˜é‡ï¼Œå¦‚browerã€nodeçŽ¯å¢ƒå˜é‡ã€es6çŽ¯å¢ƒå˜é‡ã€mochaçŽ¯å¢ƒå˜é‡ç­‰12345'env': &#123; 'browser': true, 'commonjs': true, 'es6': true &#125;, globalsï¼šé¢å¤–çš„å…¨å±€å˜é‡ 12345ç¤ºä¾‹ï¼šglobals: &#123; vue: true, wx: true&#125; parserOptions: ** JavaScript è¯­è¨€é€‰é¡¹ 1234567891011121314"parserOptions": &#123; // ECMAScript ç‰ˆæœ¬ "ecmaVersion":6, "sourceType":"script",//module // æƒ³ä½¿ç”¨çš„é¢å¤–çš„è¯­è¨€ç‰¹æ€§: "ecmaFeatures": &#123; // å…è®¸åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ä½¿ç”¨ return è¯­å¥ "globalReturn":true, // impliedStric "impliedStrict":true, // å¯ç”¨ JSX "jsx":true &#125; &#125;, rulesï¼šå¼€å¯è§„åˆ™å’Œå‘ç”Ÿé”™è¯¯æ—¶æŠ¥å‘Šçš„ç­‰çº§è§„åˆ™çš„é”™è¯¯ç­‰çº§æœ‰ä¸‰ç§ï¼š 0æˆ–â€™offâ€™ï¼šå…³é—­è§„åˆ™ã€‚ 1æˆ–â€™warnâ€™ï¼šæ‰“å¼€è§„åˆ™ï¼Œå¹¶ä¸”ä½œä¸ºä¸€ä¸ªè­¦å‘Šï¼ˆå¹¶ä¸ä¼šå¯¼è‡´æ£€æŸ¥ä¸é€šè¿‡ï¼‰ã€‚ 2æˆ–â€™errorâ€™ï¼šæ‰“å¼€è§„åˆ™ï¼Œå¹¶ä¸”ä½œä¸ºä¸€ä¸ªé”™è¯¯ (é€€å‡ºç ä¸º1ï¼Œæ£€æŸ¥ä¸é€šè¿‡)ã€‚ eslint è§„åˆ™123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177// 0-ä¸éªŒè¯ï¼›1-è­¦å‘Šï¼›2-é”™è¯¯"no-alert": 0,//ç¦æ­¢ä½¿ç”¨alert confirm prompt "no-array-constructor": 2,//ç¦æ­¢ä½¿ç”¨æ•°ç»„æž„é€ å™¨ "no-bitwise": 0,//ç¦æ­¢ä½¿ç”¨æŒ‰ä½è¿ç®—ç¬¦ "no-caller": 1,//ç¦æ­¢ä½¿ç”¨arguments.calleræˆ–arguments.callee "no-catch-shadow": 2,//ç¦æ­¢catchå­å¥å‚æ•°ä¸Žå¤–éƒ¨ä½œç”¨åŸŸå˜é‡åŒå "no-class-assign": 2,//ç¦æ­¢ç»™ç±»èµ‹å€¼ "no-cond-assign": 2,//ç¦æ­¢åœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­ä½¿ç”¨èµ‹å€¼è¯­å¥ "no-console": 2,//ç¦æ­¢ä½¿ç”¨console "no-const-assign": 2,//ç¦æ­¢ä¿®æ”¹constå£°æ˜Žçš„å˜é‡ "no-constant-condition": 2,//ç¦æ­¢åœ¨æ¡ä»¶ä¸­ä½¿ç”¨å¸¸é‡è¡¨è¾¾å¼ if(true) if(1) "no-continue": 0,//ç¦æ­¢ä½¿ç”¨continue "no-control-regex": 2,//ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨æŽ§åˆ¶å­—ç¬¦ "no-debugger": 2,//ç¦æ­¢ä½¿ç”¨debugger "no-delete-var": 2,//ä¸èƒ½å¯¹varå£°æ˜Žçš„å˜é‡ä½¿ç”¨deleteæ“ä½œç¬¦ "no-div-regex": 1,//ä¸èƒ½ä½¿ç”¨çœ‹èµ·æ¥åƒé™¤æ³•çš„æ­£åˆ™è¡¨è¾¾å¼/=foo/ "no-dupe-keys": 2,//åœ¨åˆ›å»ºå¯¹è±¡å­—é¢é‡æ—¶ä¸å…è®¸é”®é‡å¤ &#123;a:1,a:1&#125; "no-dupe-args": 2,//å‡½æ•°å‚æ•°ä¸èƒ½é‡å¤ "no-duplicate-case": 2,//switchä¸­çš„caseæ ‡ç­¾ä¸èƒ½é‡å¤ "no-else-return": 2,//å¦‚æžœifè¯­å¥é‡Œé¢æœ‰return,åŽé¢ä¸èƒ½è·Ÿelseè¯­å¥ "no-empty": 2,//å—è¯­å¥ä¸­çš„å†…å®¹ä¸èƒ½ä¸ºç©º "no-empty-character-class": 2,//æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„[]å†…å®¹ä¸èƒ½ä¸ºç©º "no-empty-label": 2,//ç¦æ­¢ä½¿ç”¨ç©ºlabel "no-eq-null": 2,//ç¦æ­¢å¯¹nullä½¿ç”¨==æˆ–!=è¿ç®—ç¬¦ "no-eval": 1,//ç¦æ­¢ä½¿ç”¨eval "no-ex-assign": 2,//ç¦æ­¢ç»™catchè¯­å¥ä¸­çš„å¼‚å¸¸å‚æ•°èµ‹å€¼ "no-extend-native": 2,//ç¦æ­¢æ‰©å±•nativeå¯¹è±¡ "no-extra-bind": 2,//ç¦æ­¢ä¸å¿…è¦çš„å‡½æ•°ç»‘å®š "no-extra-boolean-cast": 2,//ç¦æ­¢ä¸å¿…è¦çš„boolè½¬æ¢ "no-extra-parens": 2,//ç¦æ­¢éžå¿…è¦çš„æ‹¬å· "no-extra-semi": 2,//ç¦æ­¢å¤šä½™çš„å†’å· "no-fallthrough": 1,//ç¦æ­¢switchç©¿é€ "no-floating-decimal": 2,//ç¦æ­¢çœç•¥æµ®ç‚¹æ•°ä¸­çš„0 .5 3. "no-func-assign": 2,//ç¦æ­¢é‡å¤çš„å‡½æ•°å£°æ˜Ž "no-implicit-coercion": 1,//ç¦æ­¢éšå¼è½¬æ¢ "no-implied-eval": 2,//ç¦æ­¢ä½¿ç”¨éšå¼eval "no-inline-comments": 0,//ç¦æ­¢è¡Œå†…å¤‡æ³¨ "no-inner-declarations": [2, "functions"],//ç¦æ­¢åœ¨å—è¯­å¥ä¸­ä½¿ç”¨å£°æ˜Žï¼ˆå˜é‡æˆ–å‡½æ•°ï¼‰ "no-invalid-regexp": 2,//ç¦æ­¢æ— æ•ˆçš„æ­£åˆ™è¡¨è¾¾å¼ "no-invalid-this": 2,//ç¦æ­¢æ— æ•ˆçš„thisï¼Œåªèƒ½ç”¨åœ¨æž„é€ å™¨ï¼Œç±»ï¼Œå¯¹è±¡å­—é¢é‡ "no-irregular-whitespace": 2,//ä¸èƒ½æœ‰ä¸è§„åˆ™çš„ç©ºæ ¼ "no-iterator": 2,//ç¦æ­¢ä½¿ç”¨__iterator__ å±žæ€§ "no-label-var": 2,//labelåä¸èƒ½ä¸Žvarå£°æ˜Žçš„å˜é‡åç›¸åŒ "no-labels": 2,//ç¦æ­¢æ ‡ç­¾å£°æ˜Ž "no-lone-blocks": 2,//ç¦æ­¢ä¸å¿…è¦çš„åµŒå¥—å— "no-lonely-if": 2,//ç¦æ­¢elseè¯­å¥å†…åªæœ‰ifè¯­å¥ "no-loop-func": 1,//ç¦æ­¢åœ¨å¾ªçŽ¯ä¸­ä½¿ç”¨å‡½æ•°ï¼ˆå¦‚æžœæ²¡æœ‰å¼•ç”¨å¤–éƒ¨å˜é‡ä¸å½¢æˆé—­åŒ…å°±å¯ä»¥ï¼‰ "no-mixed-requires": [0, false],//å£°æ˜Žæ—¶ä¸èƒ½æ··ç”¨å£°æ˜Žç±»åž‹ "no-mixed-spaces-and-tabs": [2, false],//ç¦æ­¢æ··ç”¨tabå’Œç©ºæ ¼ "linebreak-style": [0, "windows"],//æ¢è¡Œé£Žæ ¼ "no-multi-spaces": 1,//ä¸èƒ½ç”¨å¤šä½™çš„ç©ºæ ¼ "no-multi-str": 2,//å­—ç¬¦ä¸²ä¸èƒ½ç”¨\æ¢è¡Œ "no-multiple-empty-lines": [1, &#123;"max": 2&#125;],//ç©ºè¡Œæœ€å¤šä¸èƒ½è¶…è¿‡2è¡Œ "no-native-reassign": 2,//ä¸èƒ½é‡å†™nativeå¯¹è±¡ "no-negated-in-lhs": 2,//in æ“ä½œç¬¦çš„å·¦è¾¹ä¸èƒ½æœ‰! "no-nested-ternary": 0,//ç¦æ­¢ä½¿ç”¨åµŒå¥—çš„ä¸‰ç›®è¿ç®— "no-new": 1,//ç¦æ­¢åœ¨ä½¿ç”¨newæž„é€ ä¸€ä¸ªå®žä¾‹åŽä¸èµ‹å€¼ "no-new-func": 1,//ç¦æ­¢ä½¿ç”¨new Function "no-new-object": 2,//ç¦æ­¢ä½¿ç”¨new Object() "no-new-require": 2,//ç¦æ­¢ä½¿ç”¨new require "no-new-wrappers": 2,//ç¦æ­¢ä½¿ç”¨newåˆ›å»ºåŒ…è£…å®žä¾‹ï¼Œnew String new Boolean new Number "no-obj-calls": 2,//ä¸èƒ½è°ƒç”¨å†…ç½®çš„å…¨å±€å¯¹è±¡ï¼Œæ¯”å¦‚Math() JSON() "no-octal": 2,//ç¦æ­¢ä½¿ç”¨å…«è¿›åˆ¶æ•°å­— "no-octal-escape": 2,//ç¦æ­¢ä½¿ç”¨å…«è¿›åˆ¶è½¬ä¹‰åºåˆ— "no-param-reassign": 2,//ç¦æ­¢ç»™å‚æ•°é‡æ–°èµ‹å€¼ "no-path-concat": 0,//nodeä¸­ä¸èƒ½ä½¿ç”¨__dirnameæˆ–__filenameåšè·¯å¾„æ‹¼æŽ¥ "no-plusplus": 0,//ç¦æ­¢ä½¿ç”¨++ï¼Œ-- "no-process-env": 0,//ç¦æ­¢ä½¿ç”¨process.env "no-process-exit": 0,//ç¦æ­¢ä½¿ç”¨process.exit() "no-proto": 2,//ç¦æ­¢ä½¿ç”¨__proto__å±žæ€§ "no-redeclare": 2,//ç¦æ­¢é‡å¤å£°æ˜Žå˜é‡ "no-regex-spaces": 2,//ç¦æ­¢åœ¨æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ä¸­ä½¿ç”¨å¤šä¸ªç©ºæ ¼ /foo bar/ "no-restricted-modules": 0,//å¦‚æžœç¦ç”¨äº†æŒ‡å®šæ¨¡å—ï¼Œä½¿ç”¨å°±ä¼šæŠ¥é”™ "no-return-assign": 1,//return è¯­å¥ä¸­ä¸èƒ½æœ‰èµ‹å€¼è¡¨è¾¾å¼ "no-script-url": 0,//ç¦æ­¢ä½¿ç”¨javascript:void(0) "no-self-compare": 2,//ä¸èƒ½æ¯”è¾ƒè‡ªèº« "no-sequences": 0,//ç¦æ­¢ä½¿ç”¨é€—å·è¿ç®—ç¬¦ "no-shadow": 2,//å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„å˜é‡ä¸èƒ½ä¸Žå®ƒæ‰€åŒ…å«çš„ä½œç”¨åŸŸä¸­çš„å˜é‡æˆ–å‚æ•°åŒå "no-shadow-restricted-names": 2,//ä¸¥æ ¼æ¨¡å¼ä¸­è§„å®šçš„é™åˆ¶æ ‡è¯†ç¬¦ä¸èƒ½ä½œä¸ºå£°æ˜Žæ—¶çš„å˜é‡åä½¿ç”¨ "no-spaced-func": 2,//å‡½æ•°è°ƒç”¨æ—¶ å‡½æ•°åä¸Ž()ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ "no-sparse-arrays": 2,//ç¦æ­¢ç¨€ç–æ•°ç»„ï¼Œ [1,,2] "no-sync": 0,//nodejs ç¦æ­¢åŒæ­¥æ–¹æ³• "no-ternary": 0,//ç¦æ­¢ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦ "no-trailing-spaces": 1,//ä¸€è¡Œç»“æŸåŽé¢ä¸è¦æœ‰ç©ºæ ¼ "no-this-before-super": 0,//åœ¨è°ƒç”¨super()ä¹‹å‰ä¸èƒ½ä½¿ç”¨thisæˆ–super "no-throw-literal": 2,//ç¦æ­¢æŠ›å‡ºå­—é¢é‡é”™è¯¯ throw "error"; "no-undef": 1,//ä¸èƒ½æœ‰æœªå®šä¹‰çš„å˜é‡ "no-undef-init": 2,//å˜é‡åˆå§‹åŒ–æ—¶ä¸èƒ½ç›´æŽ¥ç»™å®ƒèµ‹å€¼ä¸ºundefined "no-undefined": 2,//ä¸èƒ½ä½¿ç”¨undefined "no-unexpected-multiline": 2,//é¿å…å¤šè¡Œè¡¨è¾¾å¼ "no-underscore-dangle": 1,//æ ‡è¯†ç¬¦ä¸èƒ½ä»¥_å¼€å¤´æˆ–ç»“å°¾ "no-unneeded-ternary": 2,//ç¦æ­¢ä¸å¿…è¦çš„åµŒå¥— var isYes = answer === 1 ? true : false; "no-unreachable": 2,//ä¸èƒ½æœ‰æ— æ³•æ‰§è¡Œçš„ä»£ç  "no-unused-expressions": 2,//ç¦æ­¢æ— ç”¨çš„è¡¨è¾¾å¼ "no-unused-vars": [2, &#123;"vars": "all", "args": "after-used"&#125;],//ä¸èƒ½æœ‰å£°æ˜ŽåŽæœªè¢«ä½¿ç”¨çš„å˜é‡æˆ–å‚æ•° "no-use-before-define": 2,//æœªå®šä¹‰å‰ä¸èƒ½ä½¿ç”¨ "no-useless-call": 2,//ç¦æ­¢ä¸å¿…è¦çš„callå’Œapply "no-void": 2,//ç¦ç”¨voidæ“ä½œç¬¦ "no-var": 0,//ç¦ç”¨varï¼Œç”¨letå’Œconstä»£æ›¿ "no-warning-comments": [1, &#123; "terms": ["todo", "fixme", "xxx"], "location": "start" &#125;],//ä¸èƒ½æœ‰è­¦å‘Šå¤‡æ³¨ "no-with": 2,//ç¦ç”¨with "array-bracket-spacing": [2, "never"],//æ˜¯å¦å…è®¸éžç©ºæ•°ç»„é‡Œé¢æœ‰å¤šä½™çš„ç©ºæ ¼ "arrow-parens": 0,//ç®­å¤´å‡½æ•°ç”¨å°æ‹¬å·æ‹¬èµ·æ¥ "arrow-spacing": 0,//=&gt;çš„å‰/åŽæ‹¬å· "accessor-pairs": 0,//åœ¨å¯¹è±¡ä¸­ä½¿ç”¨getter/setter "block-scoped-var": 0,//å—è¯­å¥ä¸­ä½¿ç”¨var "brace-style": [1, "1tbs"],//å¤§æ‹¬å·é£Žæ ¼ "callback-return": 1,//é¿å…å¤šæ¬¡è°ƒç”¨å›žè°ƒä»€ä¹ˆçš„ "camelcase": 2,//å¼ºåˆ¶é©¼å³°æ³•å‘½å "comma-dangle": [2, "never"],//å¯¹è±¡å­—é¢é‡é¡¹å°¾ä¸èƒ½æœ‰é€—å· "comma-spacing": 0,//é€—å·å‰åŽçš„ç©ºæ ¼ "comma-style": [2, "last"],//é€—å·é£Žæ ¼ï¼Œæ¢è¡Œæ—¶åœ¨è¡Œé¦–è¿˜æ˜¯è¡Œå°¾ "complexity": [0, 11],//å¾ªçŽ¯å¤æ‚åº¦ "computed-property-spacing": [0, "never"],//æ˜¯å¦å…è®¸è®¡ç®—åŽçš„é”®åä»€ä¹ˆçš„ "consistent-return": 0,//return åŽé¢æ˜¯å¦å…è®¸çœç•¥ "consistent-this": [2, "that"],//thisåˆ«å "constructor-super": 0,//éžæ´¾ç”Ÿç±»ä¸èƒ½è°ƒç”¨superï¼Œæ´¾ç”Ÿç±»å¿…é¡»è°ƒç”¨super "curly": [2, "all"],//å¿…é¡»ä½¿ç”¨ if()&#123;&#125; ä¸­çš„&#123;&#125; "default-case": 2,//switchè¯­å¥æœ€åŽå¿…é¡»æœ‰default "dot-location": 0,//å¯¹è±¡è®¿é—®ç¬¦çš„ä½ç½®ï¼Œæ¢è¡Œçš„æ—¶å€™åœ¨è¡Œé¦–è¿˜æ˜¯è¡Œå°¾ "dot-notation": [0, &#123; "allowKeywords": true &#125;],//é¿å…ä¸å¿…è¦çš„æ–¹æ‹¬å· "eol-last": 0,//æ–‡ä»¶ä»¥å•ä¸€çš„æ¢è¡Œç¬¦ç»“æŸ "eqeqeq": 2,//å¿…é¡»ä½¿ç”¨å…¨ç­‰ "func-names": 0,//å‡½æ•°è¡¨è¾¾å¼å¿…é¡»æœ‰åå­— "func-style": [0, "declaration"],//å‡½æ•°é£Žæ ¼ï¼Œè§„å®šåªèƒ½ä½¿ç”¨å‡½æ•°å£°æ˜Ž/å‡½æ•°è¡¨è¾¾å¼ "generator-star-spacing": 0,//ç”Ÿæˆå™¨å‡½æ•°*çš„å‰åŽç©ºæ ¼ "guard-for-in": 0,//for inå¾ªçŽ¯è¦ç”¨ifè¯­å¥è¿‡æ»¤ "handle-callback-err": 0,//nodejs å¤„ç†é”™è¯¯ "id-length": 0,//å˜é‡åé•¿åº¦ "indent": [2, 4],//ç¼©è¿›é£Žæ ¼ "init-declarations": 0,//å£°æ˜Žæ—¶å¿…é¡»èµ‹åˆå€¼ "key-spacing": [0, &#123; "beforeColon": false, "afterColon": true &#125;],//å¯¹è±¡å­—é¢é‡ä¸­å†’å·çš„å‰åŽç©ºæ ¼ "lines-around-comment": 0,//è¡Œå‰/è¡ŒåŽå¤‡æ³¨ "max-depth": [0, 4],//åµŒå¥—å—æ·±åº¦ "max-len": [0, 80, 4],//å­—ç¬¦ä¸²æœ€å¤§é•¿åº¦ "max-nested-callbacks": [0, 2],//å›žè°ƒåµŒå¥—æ·±åº¦ "max-params": [0, 3],//å‡½æ•°æœ€å¤šåªèƒ½æœ‰3ä¸ªå‚æ•° "max-statements": [0, 10],//å‡½æ•°å†…æœ€å¤šæœ‰å‡ ä¸ªå£°æ˜Ž "new-cap": 2,//å‡½æ•°åé¦–è¡Œå¤§å†™å¿…é¡»ä½¿ç”¨newæ–¹å¼è°ƒç”¨ï¼Œé¦–è¡Œå°å†™å¿…é¡»ç”¨ä¸å¸¦newæ–¹å¼è°ƒç”¨ "new-parens": 2,//newæ—¶å¿…é¡»åŠ å°æ‹¬å· "newline-after-var": 2,//å˜é‡å£°æ˜ŽåŽæ˜¯å¦éœ€è¦ç©ºä¸€è¡Œ "object-curly-spacing": [0, "never"],//å¤§æ‹¬å·å†…æ˜¯å¦å…è®¸ä¸å¿…è¦çš„ç©ºæ ¼ "object-shorthand": 0,//å¼ºåˆ¶å¯¹è±¡å­—é¢é‡ç¼©å†™è¯­æ³• "one-var": 1,//è¿žç»­å£°æ˜Ž "operator-assignment": [0, "always"],//èµ‹å€¼è¿ç®—ç¬¦ += -=ä»€ä¹ˆçš„ "operator-linebreak": [2, "after"],//æ¢è¡Œæ—¶è¿ç®—ç¬¦åœ¨è¡Œå°¾è¿˜æ˜¯è¡Œé¦– "padded-blocks": 0,//å—è¯­å¥å†…è¡Œé¦–è¡Œå°¾æ˜¯å¦è¦ç©ºè¡Œ "prefer-const": 0,//é¦–é€‰const "prefer-spread": 0,//é¦–é€‰å±•å¼€è¿ç®— "prefer-reflect": 0,//é¦–é€‰Reflectçš„æ–¹æ³• "quotes": [1, "single"],//å¼•å·ç±»åž‹ `` "" '' "quote-props":[2, "always"],//å¯¹è±¡å­—é¢é‡ä¸­çš„å±žæ€§åæ˜¯å¦å¼ºåˆ¶åŒå¼•å· "radix": 2,//parseIntå¿…é¡»æŒ‡å®šç¬¬äºŒä¸ªå‚æ•° "id-match": 0,//å‘½åæ£€æµ‹ "require-yield": 0,//ç”Ÿæˆå™¨å‡½æ•°å¿…é¡»æœ‰yield "semi": [2, "always"],//è¯­å¥å¼ºåˆ¶åˆ†å·ç»“å°¾ "semi-spacing": [0, &#123;"before": false, "after": true&#125;],//åˆ†å·å‰åŽç©ºæ ¼ "sort-vars": 0,//å˜é‡å£°æ˜Žæ—¶æŽ’åº "space-after-keywords": [0, "always"],//å…³é”®å­—åŽé¢æ˜¯å¦è¦ç©ºä¸€æ ¼ "space-before-blocks": [0, "always"],//ä¸ä»¥æ–°è¡Œå¼€å§‹çš„å—&#123;å‰é¢è¦ä¸è¦æœ‰ç©ºæ ¼ "space-before-function-paren": [0, "always"],//å‡½æ•°å®šä¹‰æ—¶æ‹¬å·å‰é¢è¦ä¸è¦æœ‰ç©ºæ ¼ "space-in-parens": [0, "never"],//å°æ‹¬å·é‡Œé¢è¦ä¸è¦æœ‰ç©ºæ ¼ "space-infix-ops": 0,//ä¸­ç¼€æ“ä½œç¬¦å‘¨å›´è¦ä¸è¦æœ‰ç©ºæ ¼ "space-return-throw-case": 2,//return throw caseåŽé¢è¦ä¸è¦åŠ ç©ºæ ¼ "space-unary-ops": [0, &#123; "words": true, "nonwords": false &#125;],//ä¸€å…ƒè¿ç®—ç¬¦çš„å‰/åŽè¦ä¸è¦åŠ ç©ºæ ¼ "spaced-comment": 0,//æ³¨é‡Šé£Žæ ¼è¦ä¸è¦æœ‰ç©ºæ ¼ä»€ä¹ˆçš„ "strict": 2,//ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ "use-isnan": 2,//ç¦æ­¢æ¯”è¾ƒæ—¶ä½¿ç”¨NaNï¼Œåªèƒ½ç”¨isNaN() "valid-jsdoc": 0,//jsdocè§„åˆ™ "valid-typeof": 2,//å¿…é¡»ä½¿ç”¨åˆæ³•çš„typeofçš„å€¼ "vars-on-top": 2,//varå¿…é¡»æ”¾åœ¨ä½œç”¨åŸŸé¡¶éƒ¨ "wrap-iife": [2, "inside"],//ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼çš„å°æ‹¬å·é£Žæ ¼ "wrap-regex": 0,//æ­£åˆ™è¡¨è¾¾å¼å­—é¢é‡ç”¨å°æ‹¬å·åŒ…èµ·æ¥ "yoda": [2, "never"]//ç¦æ­¢å°¤è¾¾æ¡ä»¶ ä¸€äº›é”™è¯¯çš„æ­£ç¡®ä¿®æ”¹Prevent definitions of unused state (react/no-unused-state)ä»¥ä¸‹æ¨¡å¼è¢«è®¤ä¸ºæ˜¯è­¦å‘Š: 123456789101112131415class MyComponent extends React.Component &#123; state = &#123; foo: 0 &#125;; render() &#123; return &lt;SomeComponent /&gt;; &#125;&#125;var UnusedGetInitialStateTest = createReactClass(&#123; getInitialState: function() &#123; return &#123; foo: 0 &#125;; &#125;, render: function() &#123; return &lt;SomeComponent /&gt;; &#125;&#125;) ä»¥ä¸‹æ¨¡å¼ä¸è¢«è§†ä¸ºè­¦å‘Š: 123456789101112131415class MyComponent extends React.Component &#123; state = &#123; foo: 0 &#125;; render() &#123; return &lt;SomeComponent foo=&#123;this.state.foo&#125; /&gt;; &#125;&#125;var UnusedGetInitialStateTest = createReactClass(&#123; getInitialState: function() &#123; return &#123; foo: 0 &#125;; &#125;, render: function() &#123; return &lt;SomeComponent foo=&#123;this.state.foo&#125; /&gt;; &#125;&#125;) react prop-typespropTypesèƒ½ç”¨æ¥æ£€æµ‹å…¨éƒ¨æ•°æ®ç±»åž‹çš„å˜é‡ï¼ŒåŒ…æ‹¬åŸºæœ¬ç±»åž‹çš„çš„å­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼ï¼Œæ•°å­—ï¼Œä»¥åŠå¼•ç”¨ç±»åž‹çš„å¯¹è±¡ï¼Œæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³è¿˜æœ‰ES6æ–°å¢žçš„ç¬¦å·ç±»åž‹ 1234567891011Son.propTypes = &#123; optionalArray: PropTypes.array,//æ£€æµ‹æ•°ç»„ç±»åž‹ optionalBool: PropTypes.bool,//æ£€æµ‹å¸ƒå°”ç±»åž‹ optionalFunc: PropTypes.func,//æ£€æµ‹å‡½æ•°ï¼ˆFunctionç±»åž‹ï¼‰ optionalNumber: PropTypes.number,//æ£€æµ‹æ•°å­— optionalObject: PropTypes.object,//æ£€æµ‹å¯¹è±¡ optionalString: PropTypes.string,//æ£€æµ‹å­—ç¬¦ä¸² optionalSymbol: PropTypes.symbol,//ES6æ–°å¢žçš„symbolç±»åž‹&#125; ä½¿ç”¨parseInt()å‡½æ•°å½“ä½¿ç”¨parseInt()å‡½æ•°æ—¶ï¼Œé€šå¸¸çœç•¥ç¬¬äºŒä¸ªå‚æ•° radixï¼Œå¹¶è®©å‡½æ•°å°è¯•ä»Žç¬¬ä¸€ä¸ªå‚æ•°ç¡®å®šå®ƒæ˜¯ä»€ä¹ˆç±»åž‹çš„æ•°å­—ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒparseInt()å°†è‡ªåŠ¨æ£€æµ‹åè¿›åˆ¶å’Œåå…­è¿›åˆ¶ï¼ˆé€šè¿‡0xå‰ç¼€ï¼‰ã€‚åœ¨ ECMAScript 5ä¹‹å‰ï¼ŒparseInt()è¿˜ä¼šè‡ªåŠ¨æ£€æµ‹å…«è¿›åˆ¶æ–‡å­—ï¼Œè¿™ä¼šå¯¼è‡´é—®é¢˜ï¼Œå› ä¸ºè®¸å¤šå¼€å‘äººå‘˜è®¤ä¸ºé¢†å…ˆçš„æ–‡å­—0ä¼šè¢«å¿½ç•¥ã€‚ ä¸è¦è¿™æ ·åšï¼š 1var num = parseInt("071"); // 57 åšè¿™ä¸ªï¼š 1var num = parseInt("071", 10); // 71 æ¡ä»¶é€»è¾‘é‡Œä¸€å®šè¦åŠ å†…å®¹å¤„ç†123456789101112131415161718192021/*eslint no-empty: "error"*/if (foo) &#123; // empty&#125;while (foo) &#123; /* empty */&#125;try &#123; doSomething();&#125; catch (ex) &#123; // continue regardless of error&#125;try &#123; doSomething();&#125; finally &#123; /* continue regardless of error */&#125;]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[styled-componentså¿«é€Ÿå…¥é—¨]]></title>
    <url>%2Fblog%2F2019%2F01%2F03%2Fstyled-components%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[styled-componentsåˆ©ç”¨æ ‡è®°çš„æ¨¡æ¿æ–‡å­—æ¥è®¾ç½®ç»„ä»¶çš„æ ·å¼ã€‚ å®ƒåˆ é™¤äº†ç»„ä»¶å’Œæ ·å¼ä¹‹é—´çš„æ˜ å°„ã€‚è¿™æ„å‘³ç€å½“æ‚¨å®šä¹‰æ ·å¼æ—¶ï¼Œå®žé™…ä¸Šæ˜¯åœ¨åˆ›å»ºä¸€ä¸ªæ­£å¸¸çš„Reactç»„ä»¶ï¼Œå®ƒä¼šå°†æ ·å¼é™„åŠ åˆ°å®ƒä¸Šé¢ã€‚ styled-componentsstyled-components æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„css in js ç±»åº“ã€‚å’Œæ‰€æœ‰åŒç±»åž‹çš„ç±»åº“ä¸€æ ·ï¼Œé€šè¿‡ js èµ‹èƒ½è§£å†³äº†åŽŸç”Ÿ css æ‰€ä¸å…·å¤‡çš„èƒ½åŠ›ï¼Œæ¯”å¦‚å˜é‡ã€å¾ªçŽ¯ã€å‡½æ•°ç­‰ã€‚ æ–‡æ¡£å®˜æ–¹æ–‡æ¡£é“¾æŽ¥ ä¼˜åŠ¿className çš„å†™æ³•ä¼šè®©åŽŸæœ¬å†™cssçš„å†™æ³•ååˆ†éš¾ä»¥æŽ¥å—,sass ã€less ç­‰é¢„å¤„ç†å¯ä»¥è§£å†³éƒ¨åˆ† css çš„å±€é™æ€§ï¼Œè¿˜æ˜¯è¦å­¦ä¹ æ–°çš„è¯­æ³•ï¼Œè€Œä¸”éœ€è¦å¯¹å…¶ç¼–è¯‘ï¼Œå¦‚æžœé€šè¿‡å¯¼å…¥cssçš„æ–¹å¼ ä¼šå¯¼è‡´å˜é‡æ³„éœ²æˆä¸ºå…¨å±€ éœ€è¦é…ç½®webpackè®©å…¶æ¨¡å—åŒ–,å…¶å¤æ‚çš„ webpack é…ç½®ä¹Ÿæ€»æ˜¯è®©å¼€å‘è€…æŠµè§¦ã€‚ æœ‰è¿‡sass ã€lesså¼€å‘ç»éªŒï¼Œä¹Ÿèƒ½å¾ˆå¿«çš„åˆ‡æ¢åˆ°styled-componentsï¼Œå› ä¸ºå¤§éƒ¨åˆ†è¯­æ³•éƒ½ç±»ä¼¼ï¼Œæ¯”å¦‚åµŒå¥—ã€&amp; ã€ ç»§æ‰¿ç­‰ï¼Œ styled-componens å¾ˆå¥½çš„è§£å†³äº†å­¦ä¹ æˆæœ¬ä¸Žå¼€å‘çŽ¯å¢ƒé—®é¢˜ï¼Œå¾ˆé€‚åˆ React æŠ€æœ¯æ ˆ ã€React Nativeçš„é¡¹ç›®å¼€å‘ã€‚ å®‰è£…12npm install --save styled-components webstorméœ€è¦å®‰è£… styled-component æ’ä»¶ ; vscodeå·²æ”¯æŒæ™ºèƒ½æç¤º å®žæˆ˜ç®€å•çš„ç»„ä»¶åˆ›å»ºäº†ä¸¤ä¸ªç®€å•çš„ç»„ä»¶ï¼Œä¸€ä¸ªåŒ…è£…å™¨å’Œä¸€ä¸ªæ ‡é¢˜ï¼Œå¹¶é™„åŠ äº†ä¸€äº›æ ·å¼ï¼š 123456789101112131415161718192021222324import styled from 'styled-components';//åˆ›å»ºä¸€ä¸ªTitleç»„ä»¶ï¼Œå®ƒå°†ä½¿ç”¨æŸäº›æ ·å¼const Title = styled.h1` font-size: 1.5em; text-align: center; color: palevioletred;`;// åˆ›å»ºä¸€ä¸ªåŒ…è£…å™¨ç»„ä»¶ï¼Œå®ƒå°†ä½¿ç”¨æŸäº›æ ·å¼const Wrapper = styled.section` padding: 4em; background: papayawhip;`;//åƒä»»ä½•å…¶ä»–Reactç»„ä»¶ä¸€æ ·ä½¿ç”¨Titleå’ŒWrapper - é™¤äº†å®ƒä»¬çš„æ ·å¼ï¼render( &lt;Wrapper&gt; &lt;Title&gt; Hello World! &lt;/Title&gt; &lt;/Wrapper&gt;); å¯ä»¥çœ‹åˆ°æŽ§åˆ¶å°ä¸­è¾“å‡ºäº†ä¸€ä¸ªéšæœºçš„classNameï¼Œè¿™æ˜¯styled-componentså¸®æˆ‘ä»¬å®Œæˆçš„. æ³¨æ„: ç»„ä»¶åè¦ä»¥å¤§äº›å¼€å¤´ ä¸ç„¶ä¼šè¢«è§£æžæˆæ™®é€šæ ‡ç­¾ ä¼ é€’props123456789101112131415const Button = styled.button` background: $&#123;props =&gt; props.primary ? 'palevioletred' : 'white'&#125;; color: $&#123;props =&gt; props.primary ? 'white' : 'palevioletred'&#125;; font-size: 1em; margin: 1em; padding: 0.25em 1em; border: 2px solid palevioletred; border-radius: 3px;`render( &lt;div&gt; &lt;Button&gt;Normal&lt;/Button&gt; &lt;Button primary&gt;Primary&lt;/Button&gt; &lt;/div&gt;); åœ¨ç»„ä»¶ä¼ é€’çš„propséƒ½å¯ä»¥åœ¨å®šä¹‰ç»„ä»¶æ—¶èŽ·å–åˆ°ï¼Œè¿™æ ·å°±å¾ˆå®¹æ˜“å®žçŽ°å®šåˆ¶æŸäº›é£Žæ ¼ç»„ä»¶ propsé«˜çº§ç”¨æ³•è®¾ç½®é»˜è®¤å€¼ï¼Œåœ¨æœªè®¾å®šå¿…é¡»ä¼ å€¼çš„æƒ…å†µä¸‹æˆ‘ä»¬ä¼šç»™ä¸€ä¸ªé»˜è®¤å€¼(defaultProps) 1234567891011121314151617181920212223242526272829303132export default class ALbum extends React.Component &#123; constructor (props) &#123; super(props) this.state = &#123; // æŽ¥æ”¶ä¼ é€’çš„å€¼ imgSrc: props.imgSrc &#125; &#125; render () &#123; const &#123;imgSrc&#125; = this.state return ( &lt;Container imgSrc=&#123;imgSrc&#125;&gt; &lt;/Container&gt; ) &#125;&#125;// åœ¨è¿™é‡Œæ˜¯å¯ä»¥æ‹¿åˆ°propsçš„ const Container = styled.div` background-size: cover; background-image: url($&#123;props =&gt; props.imgSrc&#125;); width: 100%; height: 300px;`// å½“ç„¶æ²¡ä¼ å€¼ä¹Ÿæ²¡å…³ç³» æˆ‘ä»¬è®¾ç½®é»˜è®¤å€¼Container.defaultProps = &#123; imgSrc: Cover&#125; å¡‘é€ ç»„ä»¶è¿™ä¸ªéžå¸¸æœ‰ç”¨ ä½ å¯èƒ½ä¼šé‡åˆ°ä¸€äº›åŽŸæœ¬å°±å·²ç»æ˜¯ç»„ä»¶äº† ä½†æ˜¯ä½ è¦ä¸ºä»–æ·»åŠ ä¸€äº›æ ·å¼ï¼Œè¿™æ—¶å€™è¯¥æ€Žä¹ˆåŠžå‘¢ ? 12345678910111213141516// ä¼ é€’className åœ¨react-native ä¸­è¦ä½¿ç”¨ styleconst Link = (&#123;className , children&#125;) =&gt; ( &lt;a className=&#123;className&#125;&gt; &#123;children&#125; &lt;/a&gt;)const StyledLink = styled(Link)` color: palevioletred;`render( &lt;div&gt; &lt;Link&gt;æ™®é€šç»„ä»¶&lt;/Link&gt; &lt;StyledLink&gt;æœ‰é¢œè‰²å—ï¼Ÿ&lt;/StyledLink&gt; &lt;/div&gt;); ç»„ä»¶æ ·å¼ç»§æ‰¿12345678910111213const Button = styled.button` color: palevioletred; font-size: 1em; margin: 1em; padding: 0.25em 1em; border: 2px solid palevioletred; border-radius: 3px;`;const TomatoButton = Button.extend` color: tomato; border-color: tomato;`;// TomatoButton éƒ¨åˆ†æ ·å¼ç»§æ‰¿è‡ª Button è¿™ç§æƒ…å†µä¸‹ä¸ä¼šç”Ÿæˆä¸¤ä¸ªclass æ”¹å˜ç»„ä»¶æ ‡ç­¾åœ¨é—²çš„è›‹ç–¼çš„æƒ…å†µä¸‹ æˆ‘ä»¬æƒ³è¦æ”¹å˜ç»„ä»¶çš„æ ‡ç­¾ æ¯”å¦‚æŠŠ button å˜æˆ a æ ‡ç­¾ 12// åˆ©ç”¨ä¸Šé¢å®šä¹‰çš„ Button ç»„ä»¶ è°ƒç”¨ withComponent æ–¹æ³•const Link = Button.withComponent('a') ç»´æŠ¤å…¶ä»–å±žæ€§åœ¨æŸç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹åº“æ ·å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•è½»æ¾è¾¾åˆ°12345678910111213141516const Input = styled.input.attrs(&#123; // å®šä¹‰é™æ€ props type: 'password', // æ²¡ä¼ é»˜è®¤ä½¿ç”¨ 1em margin: props =&gt; props.size || '1em', padding: props =&gt; props.size || '1em'&#125;)` color: palevioletred; font-size: 1em; border: 2px solid palevioletred; border-radius: 3px; // åŠ¨æ€è®¡ç®—props margin: $&#123;props =&gt; props.margin&#125;; padding: $&#123;props =&gt; props.padding&#125;`render ( &lt;Input size='1em'&gt;&lt;/Input&gt; &lt;Input size='2em'&gt;&lt;/Input&gt; ) åŠ¨ç”»åŠ¨ç”»ä¼šç”Ÿæˆä¸€ä¸ªéšæœºç±»å è€Œä¸ä¼šæ±¡æŸ“åˆ°å…¨å±€1234567891011121314import &#123; keyframes &#125; from 'styled-components'// CSS åŠ¨ç”»const rotate360 = keyframes` from &#123; transform: rotate(0); &#125; to &#123; transform: rotate(360deg); &#125;`const Rotate = Button.extend` animation: $&#123;rotate360&#125; 2s linear infinite;`render ( &lt;Rotate&gt; ðŸ’… &lt;/Rotate&gt; ) æœ€åŽstyled-componentsè™½ç„¶è§£å†³äº†å¤§éƒ¨åˆ†é—®é¢˜ï¼Œå¢žåŠ äº†å¯ç»´æŠ¤æ€§ï¼Œä½†æ˜¯ç ´åäº†åŽŸç”Ÿä½“éªŒï¼Œæ—¶å¸¸æˆ‘ä»¬éœ€è¦å†™æ›´å¤šçš„ä»£ç æ¥è¾¾åˆ°ä¸šåŠ¡è¦æ±‚ï¼Œå¸Œæœ›æœªæ¥æœ‰æ›´å¥½çš„æ–¹æ¡ˆ.]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>React</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SQLite ä¹‹ INSERT OR REPLACEä½¿ç”¨]]></title>
    <url>%2Fblog%2F2018%2F12%2F28%2FSQLite-%E4%B9%8B-INSERT-OR-REPLACE%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[SQLiteæ˜¯ä¸€ä¸ªCè¯­è¨€åº“ï¼Œå®ƒå®žçŽ°äº†ä¸€ä¸ª å°åž‹ï¼Œ å¿«é€Ÿï¼Œ è‡ªåŒ…å«ï¼Œ é«˜å¯é æ€§ï¼Œ åŠŸèƒ½é½å…¨çš„ SQLæ•°æ®åº“å¼•æ“Žã€‚SQLiteæ˜¯ä¸–ç•Œä¸Šä½¿ç”¨æœ€å¤šçš„æ•°æ®åº“å¼•æ“Žã€‚å®ƒå†…ç½®äºŽæ‰€æœ‰ç§»åŠ¨ç”µè¯å’Œå¤§å¤šæ•°è®¡ç®—æœºä¸­ï¼Œå¹¶ä¸”æ†ç»‘åœ¨äººä»¬æ¯å¤©ä½¿ç”¨çš„æ— æ•°å…¶ä»–åº”ç”¨ç¨‹åºä¸­ã€‚ä¸‹é¢æ˜¯ä»‹ç»å¦‚ä½•ä½¿ç”¨INSERT OR REPLACEå‘½ä»¤ã€‚ ä¸šåŠ¡éœ€æ±‚å…·ä½“ä¸šåŠ¡ä¸­,é‡åˆ°éœ€è¦æ‰¹é‡æ’å…¥å’Œä¿®æ”¹æ•°æ®åº“çš„æƒ…å†µã€‚ å½“å‰æ•°æ®ä¸å­˜åœ¨ï¼Œè¿›è¡Œæ•°æ®æ’å…¥æ“ä½œ å½“å‰æ•°æ®å­˜åœ¨ï¼Œè¿›è¡Œæ•°æ®æ›´æ–°æ“ä½œ ä»¥ä¸Šçš„ä¸šåŠ¡æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨SQliteçš„ INSERT OR REPLACEå‘½ä»¤è¿›è¡Œæ“ä½œï¼Œå…·ä½“çš„è¯­æ³•ï¼š1INSERT OR REPLACE INTO table-name (column-name,...) VALUES (column-value,...) UNIQUE çº¦æŸ æˆ– PRIMARY KEYçº¦æŸ UNIQUEçº¦æŸ: å”¯ä¸€çº¦æŸ,é˜²æ­¢åœ¨ä¸€ä¸ªç‰¹å®šçš„åˆ—å­˜åœ¨ä¸¤ä¸ªè®°å½•å…·æœ‰ç›¸åŒçš„å€¼ PRIMARY KEYçº¦æŸ: çº¦æŸå”¯ä¸€æ ‡è¯†æ•°æ®åº“è¡¨ä¸­çš„æ¯æ¡è®°å½•ã€‚ ç›¸åŒç‚¹PRIMARY KEYä¹Ÿæ˜¯UNIQUE,å³ä¸å¯é‡å¤ ä¸åŒç‚¹ 1.PRIMARY KEYæ˜¯éžç©ºçš„,ä½†æ˜¯UNIQUEå¯ä»¥ä¸ºç©º 2.åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®,ä½†æ˜¯å”¯ä¸€ç´¢å¼•å¯ä»¥æœ‰å¤šä¸ª 3.å¦‚æžœæ²¡æœ‰æŒ‡å®šèšåˆç´¢å¼•,é‚£ä¹ˆä¸»é”®é»˜è®¤ä¸ºèšåˆç´¢å¼•,å”¯ä¸€ç´¢å¼•ä¸å…·å¤‡è¯¥ç‰¹æ€§ 1INSERT OR REPLACE INTO table-name (column-name,...) VALUES (column-value,...) åœ¨å¦‚ä¸Šçš„colunm-nameä¸­,å¦‚æžœå·²æ’å…¥çš„column-valueå‡æ— å·²å­˜åœ¨çš„å€¼,åˆ™åˆ¤æ–­æ’å…¥çš„è¯¥æ¡æ•°æ®ä¸å­˜åœ¨,åæ­£å­˜åœ¨. åˆ›å»ºè¡¨ï¼š 1CREATE TABLE TARD ( ID INT PRIMARY KEY, name TEXT NOT NULL UNIQUE, age INT NOT NULL , date CHAR(50),Dvalue REAL DEFAULT 300.00); 12345678910111213141516171819// åœ¨xiaomingä¸å­˜åœ¨çš„æƒ…å†µä¸‹è¿›è¡ŒINSERTINSERT OR REPLACE INTO TARD (ID, name, age, date) VALUES (1, 'xiaoming', 18, 'æ‰“ç”µè¯')// ç»“æžœID name age date Dvalue1 xiaoming 18 æ‰“ç”µè¯ 300// åœ¨xiaomingå·²ç»å­˜åœ¨çš„æƒ…å†µä¸‹è¿›è¡ŒupdateINSERT OR REPLACE INTO TARD (ID, name, age, date) VALUES (1, 'xiaoming', 118, 'åŽ»æ‰“ç”µè¯')// ç»“æžœID name age date Dvalue1 xiaoming 118 åŽ»æ‰“ç”µè¯ 300 åˆ›å»ºè¡¨çš„æ—¶å€™IDå’Œnameéƒ½æ˜¯UNIQUEçš„,å‘½ä»¤åªæœ‰åœ¨ä¸¤ä¸ªå€¼éƒ½ä¸å­˜åœ¨æ—¶,æ‰ä¼šè¿›è¡Œæ’å…¥,å¦åˆ™æ›´æ–°å½“å‰æ•°æ® æ³¨æ„å¦‚æžœINSERT OR REPLACE INTO table-name (column-name,...) VALUES (column-value,...)è¯¥æ•°æ®å·²å­˜åœ¨,åœ¨æ›´æ–°æ—¶,æŸè¡Œæ•°æ®æ²¡å¡«å†™,åˆ™é»˜è®¤ä¸ºç©º,è¦†ç›–ä¹‹å‰çš„æ•°æ®. ä¸¾ä¾‹: 1INSERT OR REPLACE INTO TARD (ID, name, age, date) VALUES (1, 'xiaoming', 118) xiaomingå·²åœ¨æ•°æ®åº“ä¸­,ä¼šè¿›è¡Œæ›´æ–°æ“ä½œ,æ²¡æœ‰å¡«å†™dateæ•°å€¼,åˆ™dateæ•°å€¼ä¸ä¼šè¢«ä¿ç•™,è€Œä¸”æ›¿æ¢ä¸ºNULL 12ID name age date Dvalue1 xiaoming 118 NULL 300]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AnyProxyç®€ä»‹ç§»åŠ¨ç«¯æŠ“åŒ…å·¥å…·]]></title>
    <url>%2Fblog%2F2018%2F12%2F26%2FAnyProxy%E7%AE%80%E4%BB%8B%E7%A7%BB%E5%8A%A8%E7%AB%AF%E6%8A%93%E5%8C%85%E5%B7%A5%E5%85%B7%2F</url>
    <content type="text"><![CDATA[ç§»åŠ¨ç«¯çš„å¼€å‘ï¼Œéš¾å…éœ€è¦æŠ“åŒ…æŸ¥çœ‹æƒ…å†µï¼Œåœ¨å®žé™…å·¥ä½œé‡Œå¼€å‘ç§»åŠ¨ç«¯ä¸šåŠ¡éœ€æ±‚ï¼Œæ‰¾åˆ°äº†AnyProxyæŠ“åŒ…ç¥žå™¨ï¼Œå®ƒæ˜¯é˜¿é‡Œå·´å·´åŸºäºŽ Node.js å¼€å‘çš„ä¸€æ¬¾å¼€æºä»£ç†æœåŠ¡å™¨ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¹¿ï¼Œæ»¡è¶³æ—¥å¸¸éœ€æ±‚å¼€å‘å’Œæµ‹è¯•ã€‚ 1. ç®€ä»‹ AnyProxy æ˜¯é˜¿é‡Œå·´å·´åŸºäºŽ Node.js å¼€å‘çš„ä¸€æ¬¾å¼€æºä»£ç†æœåŠ¡å™¨ã€‚AnyProxyé“¾æŽ¥ ä»£ç†æœåŠ¡å™¨ç«™åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ä¸­é—´ï¼Œå®ƒå¯ä»¥æ”¶é›†åŒæ–¹é€šä¿¡çš„æ¯ä¸ªæ¯”ç‰¹ã€‚ä¸€ä¸ªå®Œæ•´çš„ä»£ç†è¯·æ±‚è¿‡ç¨‹ä¸ºï¼šå®¢æˆ·ç«¯é¦–å…ˆä¸Žä»£ç†æœåŠ¡å™¨åˆ›å»ºè¿žæŽ¥ï¼ŒæŽ¥ç€æ ¹æ®ä»£ç†æœåŠ¡æ‰€ä½¿ç”¨çš„ä»£ç†åè®®ï¼Œè¯·æ±‚å¯¹ç›®æ ‡æœåŠ¡å™¨åˆ›å»ºè¿žæŽ¥æˆ–è€…èŽ·å–ç›®æ ‡æœåŠ¡å™¨çš„æŒ‡å®šèµ„æºã€‚ä¸€äº›ä»£ç†åè®®å…è®¸ä»£ç†æœåŠ¡å™¨æ”¹å˜å®¢æˆ·ç«¯çš„åŽŸå§‹è¯·æ±‚ã€ç›®æ ‡æœåŠ¡å™¨çš„åŽŸå§‹å“åº”ã€‚ AnyProxy æ˜¯å®Œå…¨å¯ä»¥çµæ´»é…ç½®çš„ä»£ç†æœåŠ¡å™¨ã€‚å®ƒæ”¯æŒ httpsæ˜Žæ–‡ä»£ç† ï¼Œä¸”æä¾›äº† Web ç•Œé¢ä¾¿äºŽè§‚æµ‹è¯·æ±‚æƒ…å†µï¼ŒåŒæ—¶æ”¯æŒäºŒæ¬¡å¼€å‘ï¼Œå¯ä»¥ç”¨ JavaScript æ¥æŽ§åˆ¶ä»£ç†çš„å…¨éƒ¨æµç¨‹ï¼Œæ­å»ºå‰ç«¯ä¸ªæ€§åŒ–è°ƒè¯•çŽ¯å¢ƒã€‚ 2. å®‰è£…å®‰è£… Node.js123~ brew update~ brew install node~ node --version å®‰è£… AnyProxyï¼ˆéœ€è¦node8ï¼‰12345~ å®‰è£…ç¨³å®šæ­£å¼ç‰ˆ$ npm install -g anyproxy~ æœ€æ–°æµ‹è¯•ç‰ˆï¼Œéœ€è¦ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ node è¿›è¡Œå®‰è£…$ npm install -g anyproxy@beta~ æœ‰æ—¶éœ€è¦æ·»åŠ  sudo ä½¿ç”¨AnyProxy1ã€å¯åŠ¨ anyproxy1~ anyproxy å¯åŠ¨ç»“æžœ123 ~ anyproxy[AnyProxy Log][2018-12-26 11:42:19]: Http proxy started on port 8001[AnyProxy Log][2018-12-26 11:42:19]: web interface started on port 8002 2ã€å¯åŠ¨æµè§ˆå™¨1http://192.168.0.195:8002/ æˆ– http://127.0.0.1:8002/ 3ã€å®¢æˆ·ç«¯é…ç½®ä»£ç† ip ç«¯å£å·8001 å¯åŠ¨anyproxy é…ç½® Https1ã€ ç”Ÿæˆ rootCA1234// ç¨³å®šç‰ˆæœ¬ç”Ÿæˆæ–¹æ³•~ sudo anyproxy --root// æœ€æ–°ç‰ˆæœ¬ç”Ÿæˆæ–¹æ³•~ anyproxy-ca ä»¥æ”¯æŒ Https æ–¹å¼é‡æ–°å¯åŠ¨ AnyProxy123~ anyproxy --intercept// ç®€å†™~ anyproxy -i å¯åŠ¨ç»“æžœ12345678910~ anyproxy -i[AnyProxy WARN][2018-12-26 11:55:54]: ROOT CA NOT INSTALLED YET? The rootCA is not trusted yet, install it to the trust store now? Yes[AnyProxy Log][2018-12-26 11:56:03]: About to trust the root CA, this may requires your passwordPassword:[AnyProxy Log][2018-12-26 11:56:07]: Root CA install, you are ready to intercept the https now[AnyProxy Log][2018-12-26 11:56:07]: The root CA file path is: /Users/xmaczone/.anyproxy/certificates/rootCA.crt[AnyProxy Log][2018-12-26 11:56:08]: Http proxy started on port 8001[AnyProxy Log][2018-12-26 11:56:08]: web interface started on port 8002 æ‰‹æœºå®‰è£…è¯ä¹¦ æ‹“å±•windowsä¸‹å®‰è£…AnyProxyæŠ“å–ç§»åŠ¨App Httpè¯·æ±‚]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[asyncwaitçš„ä½¿ç”¨ä»¥åŠæ³¨æ„äº‹é¡¹]]></title>
    <url>%2Fblog%2F2018%2F12%2F25%2Fasync-await%E7%9A%84%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%8F%8A%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%2F</url>
    <content type="text"><![CDATA[async / await, æ­é… promise, å¯ä»¥é€šè¿‡ç¼–å†™å½¢ä¼¼åŒæ­¥çš„ä»£ç æ¥å¤„ç†å¼‚æ­¥æµç¨‹, æé«˜ä»£ç çš„ç®€æ´æ€§å’Œå¯è¯»æ€§. è¿™é‡Œä»‹ç» async / awaitçš„åŸºæœ¬ç”¨æ³•å’Œä¸€äº›æ³¨æ„äº‹é¡¹. asyncä½¿ç”¨ async function å¯ä»¥å®šä¹‰ä¸€ä¸ªå¼‚æ­¥å‡½æ•°,å…¶è¯­æ³•ä¸º:1async function name([param[, param[, ... param]]]) &#123; statements &#125; async å‡½æ•°çš„è¿”å›žå€¼å¾ˆç‰¹æ®Š: ä¸ç®¡åœ¨å‡½æ•°ä½“å†… return äº†ä»€ä¹ˆå€¼, async å‡½æ•°çš„å®žé™…è¿”å›žå€¼æ€»æ˜¯ä¸€ä¸ª Promise å¯¹è±¡. è¯¦ç»†è®²å°±æ˜¯:è‹¥åœ¨ async å‡½æ•°ä¸­ return äº†ä¸€ä¸ªå€¼ a, ä¸ç®¡ a å€¼æ˜¯ä»€ä¹ˆç±»åž‹, async å‡½æ•°çš„å®žé™…è¿”å›žå€¼æ€»æ˜¯ Promise.resolve(a). é‚£ä¹ˆ Promise.resolve(a) æœ€ç»ˆè¿”å›žä¸€ä¸ªä»€ä¹ˆæ ·çš„promiseå‘¢? çœ‹ä¸€ä¸‹MDNçš„ä»‹ç»: Promise.resolve(value)æ–¹æ³•è¿”å›žä¸€ä¸ªä»¥ç»™å®šå€¼è§£æžåŽçš„Promiseå¯¹è±¡ã€‚ä½†å¦‚æžœè¿™ä¸ªå€¼æ˜¯ä¸ªthenableï¼ˆå³å¸¦æœ‰thenæ–¹æ³•ï¼‰ï¼Œè¿”å›žçš„promiseä¼šâ€œè·Ÿéšâ€è¿™ä¸ªthenableçš„å¯¹è±¡ï¼Œé‡‡ç”¨å®ƒçš„æœ€ç»ˆçŠ¶æ€ï¼ˆæŒ‡resolved/rejected/pending/settledï¼‰ï¼›å¦åˆ™ä»¥è¯¥å€¼ä¸ºæˆåŠŸçŠ¶æ€è¿”å›žpromiseå¯¹è±¡ã€‚ æ¥çœ‹ä¸€æ®µä»£ç æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯: éœ€è¦å…ˆé€šè¿‡ è¯·æ±‚a æ‹¿åˆ° æ•°æ®a, ç„¶åŽé€šè¿‡é€šè¿‡ è¯·æ±‚b å¹¶æºå¸¦å‘é€ æ•°æ®a èŽ·å–åˆ° æ•°æ®b, æ‹¿åˆ° æ•°æ®b ä¹‹åŽå†å±•ç¤ºåˆ°é¡µé¢ä¸Š. æ–¹æ¡ˆä¸€:1234567891011121314151617181920async function getData() &#123; // å‡è£…è¯·æ±‚æ•°æ®a var data_a = await new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; resolve('data_a'); &#125;, 1000); &#125;); // å‡è£…è¯·æ±‚æ•°æ®bä¸”æ­¤è¯·æ±‚ä¾èµ–æ•°æ®a var data_b = await new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; resolve('data_b'); &#125;, 1000); &#125;); // å±•ç¤ºæ•°æ®2 console.log(data_b);&#125;getData(); ä¸Šé¢ä¾æ¬¡èŽ·å–åˆ° æ•°æ®a å’Œ æ•°æ®b, ç„¶åŽå†å±•ç¤º æ•°æ®b. æ—¢ç„¶ asyncå‡½æ•°æ€»æ˜¯è¿”å›žä¸€ä¸ªpromise, é‚£ä¹ˆä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ª async å‡½æ•°è¿”å›žèŽ·å– æ•°æ®b çš„promise, è°ƒç”¨å‡½æ•°åŽå†ä½¿ç”¨ then æ–¹æ³•æ‹¿åˆ°æ•°æ®, ä»£ç å¦‚ä¸‹: 1234567891011121314151617181920212223async function getData() &#123; // å‡è£…è¯·æ±‚æ•°æ®a var data_a = await new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; resolve('data_a_value'); &#125;, 1000); &#125;); // å‡è£…è¯·æ±‚æ•°æ®bä¸”æ­¤è¯·æ±‚ä¾èµ–æ•°æ®a return new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; console.log(data_a); // ===&gt;data_a_value resolve('data_b_value'); &#125;, 1000); &#125;);&#125;getData().then((value) =&gt; &#123; console.log(value); // ===&gt;data_b_value &#125;);// ç»“æžœè¿”å›žé¡ºåºdata_a_valuedata_b_value awaitå¼•ç”¨MDNçš„ä»‹ç»: await æ“ä½œç¬¦ç”¨äºŽç­‰å¾…ä¸€ä¸ª Promise å¯¹è±¡, å®ƒåªèƒ½åœ¨å¼‚æ­¥å‡½æ•° async function å†…éƒ¨ä½¿ç”¨. await çš„ä½¿ç”¨è¯­æ³•éžå¸¸ç®€å•: 1[return_value] = await expression; å…¶ä¸­ expression æ˜¯ä¸€ä¸ª Promise å¯¹è±¡æˆ–è€…ä»»ä½•è¦ç­‰å¾…çš„å€¼; è€Œ await expression çš„æ‰§è¡Œç»“æžœæœ‰ä»¥ä¸‹å‡ ç§æƒ…å†µ: è‹¥ expression æ˜¯ä¸€ä¸ª Promise å¯¹è±¡, å¹¶ä¸”å…¶ä»¥å€¼ x è¢« fulfilled, åˆ™è¿”å›žå€¼ä¸º x. è‹¥ expression æ˜¯ä¸€ä¸ª Promise å¯¹è±¡, å¹¶ä¸”å…¶ä»¥å¼‚å¸¸ e è¢« rejected, åˆ™æŠ›å‡ºå¼‚å¸¸ e. è‹¥ expression ä¸æ˜¯ Promise å¯¹è±¡, åˆ™ä¼šå°† expression å¤„ç†æˆä¸€ä¸ªä»¥ expression å€¼è¢« fulfilled çš„ Promise å¯¹è±¡, ç„¶åŽè¿”å›žè¿™ä¸ª Promise å¯¹è±¡çš„æœ€ç»ˆå€¼ (å³ expression å€¼). è¿™ç§ç”¨æ³•æ²¡å¤ªå¤§æ„ä¹‰, å› æ­¤å®žé™…ä½¿ç”¨æ—¶è¿˜æ˜¯å°½é‡åœ¨ await åŽè·Ÿä¸€ä¸ª Promise å¯¹è±¡. å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯, await åœ¨ç­‰å¾… Promise å¯¹è±¡æ—¶ä¼šå¯¼è‡´ async function æš‚åœæ‰§è¡Œ, ä¸€ç›´åˆ° Promise å¯¹è±¡å†³è®®ä¹‹åŽæ‰ä¼š async function ç»§ç»­æ‰§è¡Œ. é€šè¿‡ä¸€æ®µä»£ç æ¥çœ‹ä¸€ä¸‹: 1234567891011121314151617181920212223242526272829303132333435363738async function foo() &#123; var a = await new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(1); &#125;, 2000); &#125;); console.log(a); // ç¬¬2ç§’æ—¶è¾“å‡º: 1 try &#123; var b = await new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; reject(2); &#125;, 1000); &#125;) &#125; catch (e) &#123; console.log(e); // ç¬¬3ç§’æ—¶è¾“å‡º: 2 &#125; // å‡½æ•°æš‚åœ2ç§’åŽå†ç»§ç»­æ‰§è¡Œ var sleep = await new Promise((resolve) =&gt; &#123; setTimeout(() =&gt; &#123; console.log('sleep_value'); resolve('sleep'); &#125;, 2000); &#125;); var c = await 3; console.log(c); // ç¬¬5ç§’æ—¶è¾“å‡º: 3&#125;foo();// ç»“æžœè¿”å›žé¡ºåº12sleep_value3]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¥½çš„ä¸œè¥¿æ”¶è—äºŽæ­¤]]></title>
    <url>%2Fblog%2F2018%2F12%2F24%2F%E5%A5%BD%E7%9A%84%E4%B8%9C%E8%A5%BF%E6%94%B6%E8%97%8F%E4%BA%8E%E6%AD%A4%2F</url>
    <content type="text"><![CDATA[è¿™é‡Œä¼šæ˜¯ä¸€ä¸ªçŸ¥è¯†çš„å®åº“ï¼Œé‡Œé¢ä¼šæœ‰æ•™ç¨‹ã€æ–‡æ¡£ã€æ¡†æž¶ã€æ–¹æ¡ˆã€ç†è®ºï¼Œå¤§å®¶æ…¢æ…¢åŽ»å“å‘³ã€‚ æ¡†æž¶1ã€dva é¦–å…ˆæ˜¯ä¸€ä¸ªåŸºäºŽ redux å’Œ redux-saga çš„æ•°æ®æµæ–¹æ¡ˆï¼Œç„¶åŽä¸ºäº†ç®€åŒ–å¼€å‘ä½“éªŒï¼Œdva è¿˜é¢å¤–å†…ç½®äº† react-router å’Œ fetchï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè½»é‡çº§çš„åº”ç”¨æ¡†æž¶ã€‚About DvaJSæ–‡æ¡£ é“¾æŽ¥ dva.js çŸ¥è¯†å¯¼å›¾ é“¾æŽ¥ AccountSystem ä¸€ä¸ªå°åž‹åº“å­˜ç®¡ç†ç³»ç»Ÿ é“¾æŽ¥ ç‰¹æ€§ æ˜“å­¦æ˜“ç”¨ï¼Œä»…æœ‰ 6 ä¸ª apiï¼Œå¯¹ redux ç”¨æˆ·å°¤å…¶å‹å¥½ï¼Œé…åˆ umi ä½¿ç”¨åŽæ›´æ˜¯é™ä½Žä¸º 0 API elm æ¦‚å¿µï¼Œé€šè¿‡ reducers, effects å’Œ subscriptions ç»„ç»‡ model æ’ä»¶æœºåˆ¶ï¼Œæ¯”å¦‚ dva-loading å¯ä»¥è‡ªåŠ¨å¤„ç† loading çŠ¶æ€ï¼Œä¸ç”¨ä¸€ééåœ°å†™ showLoading å’Œ hideLoading æ”¯æŒ HMRï¼ŒåŸºäºŽ babel-plugin-dva-hmr å®žçŽ° componentsã€routes å’Œ models çš„ HMR ä»–æ˜¯æ€Žä¹ˆæ¥çš„ï¼Ÿ Why dva and whatâ€™s dva æ”¯ä»˜å®å‰ç«¯åº”ç”¨æž¶æž„çš„å‘å±•å’Œé€‰æ‹© 2ã€AntD Admin ä¸€å¥—ä¼˜ç§€çš„ä¸­åŽå°å‰ç«¯è§£å†³æ–¹æ¡ˆAbout åœ¨çº¿æ¼”ç¤º - é“¾æŽ¥ ä½¿ç”¨æ–‡æ¡£ - é“¾æŽ¥ å¸¸è§é—®é¢˜ - é“¾æŽ¥ æ›´æ–°æ—¥å¿— - é“¾æŽ¥ ç‰¹æ€§ å›½é™…åŒ–ï¼Œæºç ä¸­æŠ½ç¦»ç¿»è¯‘å­—æ®µï¼ŒæŒ‰éœ€åŠ è½½è¯­è¨€åŒ… åŠ¨æ€æƒé™ï¼Œä¸åŒæƒé™å¯¹åº”ä¸åŒèœå• ä¼˜é›…ç¾Žè§‚ï¼ŒAnt Design è®¾è®¡ä½“ç³» Mock æ•°æ®ï¼Œæœ¬åœ°æ•°æ®è°ƒè¯• 3ã€12 æ­¥ 30 åˆ†é’Ÿï¼Œå®Œæˆç”¨æˆ·ç®¡ç†çš„ CURD åº”ç”¨ (react+dva+antd)About gité“¾æŽ¥ é“¾æŽ¥ å®žçŽ°æ—¥å¿— é“¾æŽ¥ Roadhog æ˜¯ä¸€ä¸ªåŒ…å« devã€build å’Œ test çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œä»–åŸºäºŽ react-dev-utilsï¼Œå’Œ create-react-app çš„ä½“éªŒä¿æŒä¸€è‡´ã€‚ä½ å¯ä»¥æƒ³è±¡ä»–ä¸ºå¯é…ç½®ç‰ˆçš„ create-react-appã€‚é“¾æŽ¥ 4ã€Ant Design of VueAbout Ant Design çš„ Vue å®žçŽ°ï¼Œå¼€å‘å’ŒæœåŠ¡äºŽä¼ä¸šçº§åŽå°äº§å“ã€‚ é“¾æŽ¥ ç‰¹æ€§ æç‚¼è‡ªä¼ä¸šçº§ä¸­åŽå°äº§å“çš„äº¤äº’è¯­è¨€å’Œè§†è§‰é£Žæ ¼ã€‚ å¼€ç®±å³ç”¨çš„é«˜è´¨é‡ Vue ç»„ä»¶ã€‚ å…±äº«Ant Design of Reactè®¾è®¡å·¥å…·ä½“ç³»ã€‚ 5ã€Vue-baidu-mapAbout Vue 2.xçš„ç™¾åº¦åœ°å›¾ç»„ä»¶\ ç‰¹æ€§ gité“¾æŽ¥ æ–‡æ¡£åœ°å€ 6ã€ Vue-element-adminAbout ä¸€ä¸ªç¥žå¥‡çš„vueåŽå°ç®¡ç†ç³»ç»Ÿ ç‰¹æ€§ gité“¾æŽ¥ 7ã€ Vue-element-adminAbout ç”¨Vueå’ŒLESSç®€å•ã€å¿«é€Ÿå»ºç«‹è®¸å¤šæ¼‚äº®çš„ç®€åŽ†ï¼Œå¹¶åˆ›å»ºä½ æœ€å¥½çš„ç®€åŽ† ç‰¹æ€§ gité“¾æŽ¥ 8ã€ ElementAbout ä¸€å¥—ä¸ºå¼€å‘è€…ã€è®¾è®¡å¸ˆå’Œäº§å“ç»ç†å‡†å¤‡çš„åŸºäºŽ Vue 2.0 çš„æ¡Œé¢ç«¯ç»„ä»¶åº“ ç‰¹æ€§ gité“¾æŽ¥ æ–‡æ¡£åœ°å€ å·¥å…·1ã€docsifyAboutæ–‡æ¡£åœ°å€ä¸€ä¸ªç¥žå¥‡çš„æ–‡æ¡£ç½‘ç«™ç”Ÿæˆå·¥å…· docsify æ˜¯ä¸€ä¸ªåŠ¨æ€ç”Ÿæˆæ–‡æ¡£ç½‘ç«™çš„å·¥å…·ã€‚ä¸åŒäºŽ GitBookã€Hexo çš„åœ°æ–¹æ˜¯å®ƒä¸ä¼šç”Ÿæˆå°† .md è½¬æˆ .html æ–‡ä»¶ï¼Œæ‰€æœ‰è½¬æ¢å·¥ä½œéƒ½æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œã€‚ ç‰¹æ€§ æ— éœ€æž„å»ºï¼Œå†™å®Œæ–‡æ¡£ç›´æŽ¥å‘å¸ƒ å®¹æ˜“ä½¿ç”¨å¹¶ä¸”è½»é‡ (~19kB gzipped) æ™ºèƒ½çš„å…¨æ–‡æœç´¢ æä¾›å¤šå¥—ä¸»é¢˜ ä¸°å¯Œçš„ API æ”¯æŒ Emoji å…¼å®¹ IE10+ æ”¯æŒ SSR (example)]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[é¢å‘å¯¹è±¡åŽŸåˆ™-é«˜å†…èšã€ä½Žè€¦åˆ]]></title>
    <url>%2Fblog%2F2018%2F12%2F19%2F%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%8E%9F%E5%88%99-%E9%AB%98%E5%86%85%E8%81%9A%E3%80%81%E4%BD%8E%E8%80%A6%E5%90%88%2F</url>
    <content type="text"><![CDATA[é¢å‘å¯¹è±¡åŽŸåˆ™ï¼šé«˜å†…èšã€ä½Žè€¦åˆ;å¤šèšåˆã€å°‘ç»§æ‰¿ï¼›ä½¿å¾—å„ä¸ªä¸šåŠ¡æ¨¡å—çš„â€œå¯é‡ç”¨æ€§â€ã€â€œç§»æ¤æ€§â€æ˜Žæ˜¾æå‡ã€‚ é«˜å†…èšã€ä½Žè€¦åˆ å†…èšï¼šå°±æ˜¯æ¯ä¸ªæ¨¡å—å°½å¯èƒ½å¯ä»¥ç‹¬ç«‹å®Œæˆè‡ªå·±çš„åŠŸèƒ½ï¼Œä¸ä¾èµ–äºŽå…¶ä»–å¤–éƒ¨æ¨¡å—çš„ä»£ç ã€‚ è€¦åˆï¼šå°±æ˜¯æ¨¡å—ä¸Žæ¨¡å—ä¹‹é—´æŽ¥å£çš„å¤æ‚ç¨‹åº¦ï¼Œæ¨¡å—ä¹‹é—´çš„è”ç³»å¦‚æžœè¶Šå¤æ‚é‚£ä¹ˆä»–ä»¬çš„è€¦åˆåº¦å°±è¶Šé«˜ï¼Œä¼šå‡ºçŽ°ä¿®æ”¹ä¸€å¤„ä»£ç å¼•å‘è´è¶æ•ˆåº”ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚ ç»“æžœï¼šä½¿å¾—å„ä¸ªä¸šåŠ¡æ¨¡å—çš„â€œå¯é‡ç”¨æ€§â€ã€â€œç§»æ¤æ€§â€æ˜Žæ˜¾æå‡ï¼›é€šå¸¸é¡¹ç›®ä»£ç ç»“æž„ä¸­å„æ¨¡å—çš„å†…èšç¨‹åº¦è¶Šé«˜ï¼Œé‚£ä¹ˆæ¨¡å—é—´çš„è€¦åˆç¨‹åº¦å°±è¶Šä½Ž æ¨¡å—ï¼šå‡½æ•° é«˜å†…èšï¼šå°½å¯èƒ½ç±»çš„æ¯ä¸ªæˆå‘˜æ–¹æ³•åªå®Œæˆä¸€ä»¶äº‹ï¼ˆæœ€å¤§é™åº¦çš„èšåˆï¼‰ ä½Žè€¦åˆï¼šå‡å°‘ç±»å†…éƒ¨ï¼Œä¸€ä¸ªæˆå‘˜æ–¹æ³•è°ƒç”¨å¦ä¸€ä¸ªæˆå‘˜æ–¹æ³• ç±» é«˜å†…èšä½Žè€¦åˆï¼šå‡å°‘ç±»å†…éƒ¨ï¼Œå¯¹å…¶ä»–ç±»çš„è°ƒç”¨ åŠŸèƒ½å— é«˜å†…èšä½Žè€¦åˆï¼šå‡å°‘æ¨¡å—ä¹‹é—´çš„äº¤äº’å¤æ‚åº¦ï¼ˆæŽ¥å£æ•°é‡ï¼Œå‚æ•°æ•°æ®ï¼‰ å¤šèšåˆã€å°‘ç»§æ‰¿ èšåˆï¼šäº‹ç‰©Aç”±è‹¥å¹²ä¸ªäº‹ç‰©Bç»„æˆï¼Œä½“çŽ°åœ¨ç±»ä¸Žç±»ä¹‹é—´çš„å…³ç³»å°±æ˜¯ï¼šâ€œç±»Bçš„å®žä¾‹â€ä½œä¸ºâ€œç±»Aâ€çš„â€œæˆå‘˜å¯¹è±¡â€å‡ºçŽ°ã€‚ ç»§æ‰¿ï¼šé¡¾åæ€ä¹‰ï¼Œä½“çŽ°åœ¨ç±»ä¸Žç±»ä¹‹é—´çš„å…³ç³»å°±æ˜¯ï¼šâ€œç±»Bâ€è¢«ç±»Aæ‰€ç»§æ‰¿æ˜¾ç„¶ï¼Œå½“è§‚å¯Ÿç±»Bæ‰€å…·æœ‰çš„è¡Œä¸ºèƒ½åŠ›æ—¶ï¼Œâ€œèšåˆâ€æ–¹å¼æ›´åŠ æ¸…æ™°ã€‚]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitmentä½¿ç”¨ GitHub Issues æ­å»ºè¯„è®ºç³»ç»Ÿ]]></title>
    <url>%2Fblog%2F2018%2F12%2F07%2FGitment%E4%BD%BF%E7%94%A8-GitHub-Issues-%E6%90%AD%E5%BB%BA%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F%2F</url>
    <content type="text"><![CDATA[Gitment æ˜¯ä¸€æ¬¾åŸºäºŽ GitHub Issues çš„è¯„è®ºç³»ç»Ÿã€‚æ”¯æŒåœ¨å‰ç«¯ç›´æŽ¥å¼•å…¥ï¼Œä¸éœ€è¦ä»»ä½•åŽç«¯ä»£ç ã€‚å¯ä»¥åœ¨é¡µé¢è¿›è¡Œç™»å½•ã€æŸ¥çœ‹ã€è¯„è®ºã€ç‚¹èµžç­‰æ“ä½œï¼ŒåŒæ—¶æœ‰å®Œæ•´çš„ Markdown / GFM å’Œä»£ç é«˜äº®æ”¯æŒã€‚å°¤ä¸ºé€‚åˆå„ç§åŸºäºŽ GitHub Pages çš„é™æ€åšå®¢æˆ–é¡¹ç›®é¡µé¢ã€‚ åŸºç¡€ä½¿ç”¨1. æ³¨å†Œ OAuth Applicationç‚¹å‡»æ­¤å¤„ æ¥æ³¨å†Œä¸€ä¸ªæ–°çš„ OAuth Applicationã€‚å…¶ä»–å†…å®¹å¯ä»¥éšæ„å¡«å†™ï¼Œä½†è¦ç¡®ä¿å¡«å…¥æ­£ç¡®çš„ callback URLï¼ˆä¸€èˆ¬æ˜¯è¯„è®ºé¡µé¢å¯¹åº”çš„åŸŸåï¼Œå¦‚ https://imsun.netï¼‰ã€‚ ä½ ä¼šå¾—åˆ°ä¸€ä¸ª client ID å’Œä¸€ä¸ª client secretï¼Œè¿™ä¸ªå°†è¢«ç”¨äºŽä¹‹åŽçš„ç”¨æˆ·ç™»å½•ã€‚ 2. å¼•å…¥ Gitmentå°†ä¸‹é¢çš„ä»£ç æ·»åŠ åˆ°ä½ çš„é¡µé¢ï¼š 123456789101112131415&lt;div id="container"&gt;&lt;/div&gt;&lt;link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css"&gt;&lt;script src="https://imsun.github.io/gitment/dist/gitment.browser.js"&gt;&lt;/script&gt;&lt;script&gt;var gitment = new Gitment(&#123; id: 'é¡µé¢ ID', // å¯é€‰ã€‚é»˜è®¤ä¸º location.href owner: 'ä½ çš„ GitHub ID', repo: 'å­˜å‚¨è¯„è®ºçš„ repo', oauth: &#123; client_id: 'ä½ çš„ client ID', client_secret: 'ä½ çš„ client secret', &#125;,&#125;)gitment.render('container')&lt;/script&gt; æ³¨æ„ï¼Œä¸Šè¿°ä»£ç å¼•ç”¨çš„ Gitment å°†ä¼šéšç€å¼€å‘å˜åŠ¨ã€‚å¦‚æžœä½ å¸Œæœ›å§‹ç»ˆä½¿ç”¨æœ€æ–°çš„ç•Œé¢ä¸Žç‰¹æ€§å³å¯å¼•å…¥ä¸Šè¿°ä»£ç ã€‚ å¦‚æžœä½ å¸Œæœ›å¼•ç”¨ç¡®å®šç‰ˆæœ¬çš„ Gitmentï¼Œåˆ™åº”è¯¥ä½¿ç”¨ npm è¿›è¡Œå®‰è£…ã€‚ $ npm install --save gitmentå…³äºŽæž„é€ å‡½æ•°ä¸­çš„æ›´å¤šå¯ç”¨å‚æ•°è¯·æŸ¥çœ‹ Gitment Options 3. åˆå§‹åŒ–è¯„è®ºé¡µé¢å‘å¸ƒåŽï¼Œä½ éœ€è¦è®¿é—®é¡µé¢å¹¶ä½¿ç”¨ä½ çš„ GitHub è´¦å·ç™»å½•ï¼ˆè¯·ç¡®ä¿ä½ çš„è´¦å·æ˜¯ç¬¬äºŒæ­¥æ‰€å¡« repo çš„ ownerï¼‰ï¼Œç‚¹å‡»åˆå§‹åŒ–æŒ‰é’®ã€‚ ä¹‹åŽå…¶ä»–ç”¨æˆ·å³å¯åœ¨è¯¥é¡µé¢å‘è¡¨è¯„è®ºã€‚ è‡ªå®šä¹‰Gitment å¾ˆå®¹æ˜“è¿›è¡Œè‡ªå®šä¹‰ï¼Œä½ å¯ä»¥å†™ä¸€ä»½è‡ªå®šä¹‰çš„ CSS æˆ–è€…ä½¿ç”¨ä¸€ä¸ªæ–°çš„ä¸»é¢˜ã€‚ï¼ˆä¸»é¢˜å¯ä»¥æ”¹å˜ DOM ç»“æž„è€Œè‡ªå®šä¹‰ CSS ä¸èƒ½ï¼‰ æ¯”å¦‚ä½ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ä¸»é¢˜å°†è¯„è®ºæ¡†æ”¾åœ¨è¯„è®ºåˆ—è¡¨å‰é¢ï¼š 1234567891011121314151617const myTheme = &#123; render(state, instance) &#123; const container = document.createElement('div') container.lang = "en-US" container.className = 'gitment-container gitment-root-container' container.appendChild(instance.renderHeader(state, instance)) container.appendChild(instance.renderEditor(state, instance)) container.appendChild(instance.renderComments(state, instance)) container.appendChild(instance.renderFooter(state, instance)) return container &#125;,&#125;const gitment = new Gitment(&#123; // ... theme: myTheme,&#125;)gitment.render('container') æ›´å¤šè‡ªå®šä¹‰å†…å®¹è¯·æŸ¥çœ‹æ–‡æ¡£ã€‚ å…¶ä»–é—®é¢˜è¯­è¨€é—®é¢˜è€ƒè™‘åˆ° GitHub æœ¬èº«ä½¿ç”¨è‹±æ–‡ï¼Œè€Œæœ¬é¡¹ç›®é¢å‘ç”¨æˆ·å‡ä¸º GitHub ç”¨æˆ·ï¼Œæ‰€ä»¥ä½œè€…æ²¡æœ‰æä¾›ä¸­æ–‡æ”¯æŒçš„æ‰“ç®—ã€‚å®žåœ¨æœ‰éœ€æ±‚çš„å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ä¸»é¢˜æ”¯æŒä¸­æ–‡ã€‚]]></content>
      <categories>
        <category>è½¯ä»¶</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>è½¯ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[React16æ–°ç‰¹æ€§æ¥è®¤è¯†ä¸€æ³¢]]></title>
    <url>%2Fblog%2F2018%2F11%2F29%2FReact16%E6%96%B0%E7%89%B9%E6%80%A7%E6%9D%A5%E8%AE%A4%E8%AF%86%E4%B8%80%E6%B3%A2%2F</url>
    <content type="text"><![CDATA[Reactçš„16ç‰ˆæœ¬ï¼Œé‡‡ç”¨äº†MITå¼€æºè®¸å¯è¯,React16æ–°ç‰¹æ€§æ¥è®¤è¯†ä¸€æ³¢ã€‚ Fragmentsï¼šrenderå‡½æ•°å¯ä»¥è¿”å›žæ•°ç»„å’Œå­—ç¬¦ä¸² error boundariesï¼šé”™è¯¯å¤„ç† portals ï¼šæ”¯æŒå£°æ˜Žæ€§åœ°å°†å­æ ‘æ¸²æŸ“åˆ°å¦ä¸€ä¸ªDOMèŠ‚ç‚¹ custom DOM attributes ï¼šReactDomå…è®¸ä¼ é€’éžæ ‡å‡†å±žæ€§ improved server-side rendering:æå‡æœåŠ¡ç«¯æ¸²æŸ“æ€§èƒ½ æ”¯æŒè‡ªå®šä¹‰DOMå±žæ€§ setStateä¼ å…¥nullæ—¶ä¸ä¼šå†è§¦å‘æ›´æ–° æ›´å¥½çš„æœåŠ¡å™¨ç«¯æ¸²æŸ“ æ–°çš„æ‰“åŒ…ç­–ç•¥ æ–°ç‰¹æ€§1ã€renderå¯ä»¥returnæ•°ç»„ ï¼Œå­—ç¬¦ä¸² React16æ–°å¢žåŠ äº†renderçš„è¿”å›žæ ¼å¼ï¼Œä½ å¯ä»¥returnè¿”å›žstringï¼Œnumberï¼Œbooleanï¼Œnullï¼Œportalï¼Œä»¥åŠfragments(å¸¦æœ‰keyå±žæ€§çš„æ•°ç»„)ï¼Œä¸”ä¸éœ€è¦å¤–å±‚åŒ…å«divæ ‡ç­¾ã€‚ä¸è¿‡éœ€è¦æ·»åŠ å¯¹åº”çš„keyå€¼ã€‚ 12345678910111213141516171819202122232425262728//stringrender()&#123; return 'Hello,world'&#125;//numberrender()&#123; return 0123456789&#125;//booleanrender()&#123; return isTrue ? true : false&#125;//nullrender()&#123; return null&#125;//fragmentsï¼Œé‡åˆ°æŽ§åˆ¶å°å‡ºçŽ°warning,æ˜¯æœªåŠ keyæ ‡è¯†ç¬¦ï¼Œrender()&#123; return [ &lt;div&gt;Hello&lt;/div&gt;, &lt;span&gt;world&lt;/span&gt;, &lt;p&gt;DRL&lt;/p&gt; ]&#125; 2ã€error boundariesé”™è¯¯å¤„ç†React16æ–°å¢žåŠ äº†æŠ›å¼‚å¸¸çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°componentDidCatch 123componentDidCatch(err,info)&#123; this.setState(&#123;isError:1&#125;); &#125; è¿ç”¨è¿™ä¸ªå¯¿å‘½å‘¨æœŸåœ¨é‡åˆ°é¡µé¢æŠ¥é”™çš„æ—¶å€™å°±å¯ä»¥å®šä¹‰æŠ¥é”™æ–¹å¼ï¼Œç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒã€‚React 16ä¹‹å‰é¡µé¢å†…çš„ç»„ä»¶å¦‚æžœå‘ç”Ÿé”™è¯¯ï¼Œé‚£ä¹ˆæ•´ä¸ªç»„ä»¶æ ‘å°±ä¼šä»Žæ ¹èŠ‚ç‚¹è¢«å¸è½½ï¼Œåˆ°äº†React 16 äº§ç”Ÿäº†ä¸€ä¸ªâ€œé”™è¯¯è¾¹ç•Œï¼ˆerror boundariesï¼‰â€çš„æ¦‚å¿µ,å®ƒä¼šæ•æ‰é¡µé¢å†…çš„é”™è¯¯å¹¶ä¸”å¯¹è¿™äº›é”™è¯¯è¿›è¡Œå¤„ç†ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ¯”å–»ä¸ºtry-catch åœ¨å®¹æ˜“å‡ºé”™çš„ç»„ä»¶å¤–ä½¿ç”¨ErrorBoundaryå°†å®ƒåŒ…è£¹èµ·æ¥: 12345678910111213141516171819202122232425262728293031//ä½¿ç”¨æ–¹å¼import React, &#123; Component &#125; from 'react'export default class ErrorBoundary extends Component &#123; constructor(props) &#123; super(props) this.state = &#123; hasError: false &#125; &#125; componentDidCatch(err, info) &#123; this.setState(&#123; hasError: true &#125;) &#125; render()&#123; if(this.state.hasError)&#123; return &lt;div&gt;Something wrong!&lt;/div&gt; &#125; return this.props.children &#125;&#125;render()&#123; return ( &lt;div&gt; &lt;ErrorBoundary&gt; &lt;Listview user=&#123;this.state.data&#125; /&gt; &lt;/ErrorBoundary&gt; &lt;button onClick=&#123;this.onClickChange&#125;&gt;toUpdate&lt;/button&gt; &lt;/div&gt; )&#125; å¦‚æžœListviewç»„ä»¶å‘ç”Ÿé”™è¯¯ï¼Œå°†ä¼šä½¿ç”¨ErrorBoundaryæä¾›çš„&lt;div&gt;Something went wrong&lt;/div&gt;ä»£æ›¿å®ƒï¼Œä¸ä¼šå¼•èµ·æ•´ä¸ªç»„ä»¶æ ‘çš„å¸è½½ã€‚ 3ã€portalsæ”¯æŒå£°æ˜Žæ€§åœ°å°†å­æ ‘æ¸²æŸ“åˆ°å¦ä¸€ä¸ªDOMèŠ‚ç‚¹Portalsæœºåˆ¶æä¾›äº†ä¸€ç§æœ€ç›´æŽ¥çš„æ–¹å¼å¯ä»¥æŠŠä¸€ä¸ªå­ç»„ä»¶æ¸²æŸ“åˆ°çˆ¶ç»„ä»¶æ¸²æŸ“çš„DOMæ ‘ä¹‹å¤–ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒReactç»„ä»¶æ ‘å’ŒDOMæ ‘æ˜¯å®Œå…¨å¯¹åº”çš„ï¼Œå› æ­¤å¯¹äºŽä¸€äº›Modal,Overlayä¹‹ç±»çš„ç»„ä»¶ï¼Œé€šå¸¸æ˜¯å°†å®ƒä»¬æ”¾åœ¨é¡¶å±‚ï¼Œä½†é€»è¾‘ä¸Šå®ƒä»¬å¯èƒ½åªæ˜¯å±žäºŽæŸä¸ªå­ç»„ä»¶ï¼Œä¸åˆ©äºŽç»„ä»¶çš„ä»£ç ç»„ç»‡ã€‚é€šè¿‡ä½¿ç”¨createPortalï¼Œæˆ‘ä»¬å¯ä»¥å°†ç»„ä»¶æ¸²æŸ“åˆ°æˆ‘ä»¬æƒ³è¦çš„ä»»æ„DOMèŠ‚ç‚¹ä¸­ï¼Œä½†è¯¥ç»„ä»¶ä¾ç„¶å¤„åœ¨Reactçš„çˆ¶ç»„ä»¶ä¹‹å†…ã€‚å¸¦æ¥çš„ä¸€ä¸ªç‰¹æ€§å°±æ˜¯ï¼Œåœ¨å­ç»„ä»¶äº§ç”Ÿçš„eventä¾ç„¶å¯ä»¥è¢«Reactçˆ¶ç»„ä»¶æ•èŽ·ï¼Œä½†åœ¨DOMç»“æž„ä¸­ï¼Œå®ƒå´ä¸æ˜¯ä½ çš„çˆ¶ç»„ä»¶ã€‚å¯¹äºŽç»„ä»¶ç»„ç»‡ï¼Œä»£ç åˆ‡å‰²æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å±žæ€§ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172//å®žçŽ°ä¸€ä¸ªç®€æ˜“è’™å±‚æ•ˆæžœï¼ŒæŠ½è±¡å‡ºä¸€ä¸ªé€šç”¨çš„Overlayç»„ä»¶import React, &#123; Component &#125; from 'react';import ReactDOM from 'react-dom';export default class Overlay extends Component &#123; constructor(props) &#123; super(props); this.container = document.createElement('div'); document.body.appendChild(this.container); &#125; componentWillUnmount() &#123; document.body.removeChild(this.container); &#125; render() &#123; return ReactDOM.createPortal( &lt;div className='overlay'&gt; &lt;span className='overlay-close' onClick=&#123;this.props.onClose&#125;&gt;&amp;times;&lt;/span&gt; &#123;this.props.children&#125; &lt;/div&gt;, this.container ) &#125;&#125;//è¯¥ç»„ä»¶å¯¹åº”çš„æ ·å¼å¦‚ä¸‹.overlay&#123; box-sizing:border-box; position: fixed; top:50%; left:50%; width:260px; height:200px; margin-left:-130px; margin-top:-100px; padding:10px; background-color: #fff; outline: rgba(0,0,0,.5) solid 9999px;&#125;.overlay-close&#123; position: absolute; top:10px; right:10px; color:red; cursor: pointer;&#125;ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼šclass App extends Component &#123; constructor(props) &#123; super(props); this.state = &#123; overlayActive: false &#125; this.closeOverlay = this.closeOverlay.bind(this); this.showOverlay = this.showOverlay.bind(this); &#125; closeOverlay() &#123; this.setState(&#123; overlayActive: false &#125;) &#125; showOverlay() &#123; this.setState(&#123; overlayActive: true &#125;) &#125; render() &#123; return ( &lt;div className="App"&gt; &lt;div&gt;hello world!&lt;/div&gt; &#123;this.state.overlayActive &amp;&amp; &lt;Overlay onClose=&#123;this.closeOverlay&#125;&gt;overlay content&lt;/Overlay&gt;&#125; &lt;button onClick=&#123;this.showOverlay&#125;&gt;show&lt;/button&gt; &lt;/div&gt; ); &#125;&#125; 4ã€custom DOM attributes ï¼šReactDomå…è®¸ä¼ é€’éžæ ‡å‡†å±žæ€§5ã€ improved server-side rendering:æå‡æœåŠ¡ç«¯æ¸²æŸ“æ€§èƒ½6ã€ æ”¯æŒè‡ªå®šä¹‰DOMå±žæ€§7ã€ setStateä¼ å…¥nullæ—¶ä¸ä¼šå†è§¦å‘æ›´æ–°8ã€ æ›´å¥½çš„æœåŠ¡å™¨ç«¯æ¸²æŸ“9ã€ æ–°çš„æ‰“åŒ…ç­–ç•¥]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaScript: ä»€ä¹ˆæ˜¯çº¯å‡½æ•°ä»¥åŠä¸ºä»€ä¹ˆè¦ç”¨çº¯å‡½æ•°]]></title>
    <url>%2Fblog%2F2018%2F11%2F11%2FJavaScript-%E4%BB%80%E4%B9%88%E6%98%AF%E7%BA%AF%E5%87%BD%E6%95%B0%E4%BB%A5%E5%8F%8A%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E7%94%A8%E7%BA%AF%E5%87%BD%E6%95%B0%2F</url>
    <content type="text"><![CDATA[å½“æˆ‘ç¬¬ä¸€æ¬¡å¬åˆ° â€œçº¯å‡½æ•° (Pure Function)â€ è¿™ä¸ªæœ¯è¯­çš„æ—¶å€™æˆ‘å¾ˆç–‘æƒ‘ã€‚å¸¸è§„çš„å‡½æ•°åšé”™äº†ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦å˜çº¯ï¼Ÿ ä¸ºä»€ä¹ˆæˆ‘éœ€è¦çº¯çš„å‡½æ•°ï¼Ÿ é™¤éžä½ å·²ç»çŸ¥é“ä»€ä¹ˆæ˜¯çº¯å‡½æ•°ï¼Œå¦åˆ™ä½ å¯èƒ½ä¼šé—®åŒæ ·çš„ç–‘æƒ‘ã€‚ä¸è¿‡è¿™ä¸ªæ¦‚å¿µå…¶å®žå¾ˆç®€å•ã€‚å¯ä»¥èŠ±ç‚¹æ—¶é—´ä¸€èµ·æ¥çœ‹ä»¥ä¸‹ã€‚ ä»€ä¹ˆå‡½æ•°æ˜¯çº¯çº¯å‡½æ•°çš„å®šä¹‰æ˜¯ï¼š 1ã€å¦‚æžœå‡½æ•°çš„è°ƒç”¨å‚æ•°ç›¸åŒï¼Œåˆ™æ°¸è¿œè¿”å›žç›¸åŒçš„ç»“æžœã€‚å®ƒä¸ä¾èµ–äºŽç¨‹åºæ‰§è¡ŒæœŸé—´å‡½æ•°å¤–éƒ¨ä»»ä½•çŠ¶æ€æˆ–æ•°æ®çš„å˜åŒ–ï¼Œå¿…é¡»åªä¾èµ–äºŽå…¶è¾“å…¥å‚æ•°ã€‚ 2ã€è¯¥å‡½æ•°ä¸ä¼šäº§ç”Ÿä»»ä½•å¯è§‚å¯Ÿçš„å‰¯ä½œç”¨ï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚ï¼Œè¾“å…¥å’Œè¾“å‡ºè®¾å¤‡æˆ–æ•°æ®çªå˜ï¼ˆmutationï¼‰ã€‚ è¿™å°±æ˜¯çº¯çš„å‡½æ•°ã€‚ å¦‚æžœä¸€ä¸ªå‡½æ•°ç¬¦åˆä¸Šè¿° 2 ä¸ªè¦æ±‚ï¼Œå®ƒå°±æ˜¯çº¯å‡½æ•°ã€‚ ä½ å¯èƒ½åœ¨è¿‡åŽ»ç”šè‡³æ— æ„åœ°æƒ…å†µä¸‹ç¼–å†™è¿‡çº¯å‡½æ•°ã€‚ åœ¨æˆ‘ä»¬ç ”ç©¶ä¸€ä¸ªå‡½æ•°ä¸€ä¸ªçº¯æˆ–ä¸çº¯ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆè®¨è®ºä¸€ä¸‹å¯æ€•çš„â€œå‰¯ä½œç”¨â€ã€‚ ä»€ä¹ˆæ˜¯å¯è§‚å¯Ÿçš„å‰¯ä½œç”¨ä¸€ä¸ªå¯ä»¥è¢«è§‚å¯Ÿçš„å‰¯ä½œç”¨æ˜¯åœ¨å‡½æ•°å†…éƒ¨ä¸Žå…¶å¤–éƒ¨çš„ä»»æ„äº¤äº’ã€‚è¿™å¯èƒ½æ˜¯åœ¨å‡½æ•°å†…ä¿®æ”¹å¤–éƒ¨çš„å˜é‡ï¼Œæˆ–è€…åœ¨å‡½æ•°é‡Œè°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°ç­‰ã€‚ æ³¨: å¦‚æžœçº¯å‡½æ•°è°ƒç”¨çº¯å‡½æ•°ï¼Œåˆ™ä¸äº§ç”Ÿå‰¯ä½œç”¨ä¾æ—§æ˜¯çº¯å‡½æ•°ã€‚ å‰¯ä½œç”¨æ¥è‡ªï¼Œä½†ä¸é™äºŽï¼š è¿›è¡Œä¸€ä¸ª HTTP è¯·æ±‚ Mutating data è¾“å‡ºæ•°æ®åˆ°å±å¹•æˆ–è€…æŽ§åˆ¶å° DOM æŸ¥è¯¢/æ“ä½œ Math.random() èŽ·å–çš„å½“å‰æ—¶é—´ å‰¯ä½œç”¨æœ¬èº«å¹¶ä¸æ˜¯æ¯’è¯ï¼ŒæŸäº›æ—¶å€™å¾€å¾€æ˜¯å¿…éœ€çš„ã€‚ ä½†æ˜¯ï¼Œå¯¹äºŽè¦ä¿æŒçº¯ç²¹çš„å‡½æ•°ï¼Œå®ƒä¸èƒ½åŒ…å«ä»»ä½•å‰¯ä½œç”¨ã€‚å½“ç„¶ï¼Œå¹¶éžæ‰€æœ‰å‡½æ•°éƒ½éœ€è¦æ˜¯çº¯å‡½æ•°ã€‚ æˆ‘å°†åœ¨ç¨åŽè®¨è®ºè¿™ä¸ªæƒ…å†µã€‚ ä¸è¿‡é¦–å…ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€äº›çº¯çš„å’Œä¸çº¯çš„å‡½æ•°å¯¹æ¯”çš„ä¾‹å­â€¦â€¦ çº¯å‡½æ•°ä»¥ä¸‹æ˜¯ä¸€ä¸ªè®¡ç®—äº§å“ç¨ŽåŽä»·æ ¼ï¼ˆè‹±å›½ç¨ŽçŽ‡æ˜¯20%ï¼‰çš„çº¯å‡½æ•°çš„ä¾‹å­ï¼š1function priceAfterTax(productPrice) &#123; return (productPrice * 0.20) + productPrice;&#125; å®ƒç¬¦åˆæˆ‘ä»¬æ‰€è¯´çš„ä¸¤æ¡çº¯å‡½æ•°çš„å®šä¹‰ã€‚ä¸ä¾èµ–äºŽä»»ä½•å¤–éƒ¨è¾“å…¥ï¼Œä¸æ”¹å˜ä»»ä½•å¤–éƒ¨æ•°æ®ã€æ²¡æœ‰å‰¯ä½œç”¨ã€‚ å³ä½¿ä½ ç”¨åŒæ ·çš„è¾“å…¥è¿è¡Œè¿è¡Œè¿™ä¸ªå‡½æ•° 100,000,000 æ¬¡å®ƒä¾æ—§äº§ç”ŸåŒæ ·çš„ç»“æžœã€‚ éžçº¯å‡½æ•°æˆ‘ä»¬å·²ç»çœ‹äº†çº¯å‡½æ•°çš„ä¾‹å­ï¼ŒçŽ°åœ¨ä¸€èµ·æ¥çœ‹ä¸€ä¸ªéžçº¯å‡½æ•°ï¼ˆImpure functionï¼‰çš„ JavaScript ä¾‹å­:1234var tax = 20;function calculateTax(productPrice) &#123; return (productPrice * (tax/100)) + productPrice;&#125; æš‚åœç‰‡åˆ»ï¼Œçœ‹çœ‹ä½ æ˜¯å¦èƒ½çœ‹å‡ºä¸ºä»€ä¹ˆè¿™ä¸ªå‡½æ•°ä¸çº¯ã€‚ å…¶ä¸­å‡½æ•°çš„è®¡ç®—ç»“æžœå–å†³äºŽå¤–éƒ¨ tax å˜é‡ï¼Œè€Œçº¯å‡½æ•°ä¸èƒ½ä¾èµ–å¤–éƒ¨å˜é‡ã€‚å®ƒæ²¡æœ‰æ»¡è¶³å®šä¹‰ä¸­çš„ç¬¬ä¸€ä¸ªè¦æ±‚ï¼Œå› æ­¤è¿™ä¸ªå‡½æ•°æ˜¯ä¸çº¯çš„ã€‚ ä¸ºä»€ä¹ˆè¯´çº¯å‡½æ•°åœ¨ JavaScript å¾ˆé‡è¦çº¯å‡½æ•°åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­è¢«å¤§é‡ä½¿ç”¨ã€‚è€Œä¸”è¯¸å¦‚ ReactJS å’Œ Redux ç­‰ä¼˜è´¨çš„åº“éƒ½éœ€è¦ä½¿ç”¨çº¯å‡½æ•°ã€‚ ä¸è¿‡ï¼Œçº¯å‡½æ•°ä¹Ÿå¯ä»¥ç”¨åœ¨å¹³å¸¸çš„ JavaScript å¼€å‘ä¸­ä½¿ç”¨ï¼Œä¸ä¸€å®šè¦é™æ­»åœ¨æŸä¸ªç¼–ç¨‹èŒƒä¾‹ä¸­ã€‚ ä½ å¯ä»¥æ··åˆçº¯çš„å’Œä¸çº¯çš„å‡½æ•°ï¼Œè¿™å®Œå…¨æ²¡é—®é¢˜ã€‚ å¹¶éžæ‰€æœ‰å‡½æ•°éƒ½éœ€è¦æ˜¯çº¯çš„ã€‚ ä¾‹å¦‚ï¼Œæ“ä½œ DOM çš„æŒ‰é’®æŒ‰ä¸‹çš„äº‹ä»¶å¤„ç†ç¨‹åºå°±ä¸é€‚åˆçº¯å‡½æ•°ã€‚ ä¸è¿‡ï¼Œè¿™ç§äº‹ä»¶å¤„ç†å‡½æ•°å¯ä»¥è°ƒç”¨å…¶ä»–çº¯å‡½æ•°æ¥å¤„ç†ï¼Œä»¥æ­¤å‡å°‘é¡¹ç›®ä¸­ä¸çº¯å‡½æ•°çš„æ•°é‡ã€‚ å¯æµ‹è¯•æ€§å’Œé‡æž„å¦ä¸€ä¸ªä½¿ç”¨çº¯å‡½æ•°çš„åŽŸå› æ˜¯æµ‹è¯•ä»¥åŠé‡æž„ã€‚ ä½¿ç”¨çº¯å‡½æ•°çš„ä¸€ä¸ªä¸»è¦å¥½å¤„æ˜¯å®ƒä»¬å¯ä»¥ç›´æŽ¥æµ‹ã€‚ å¦‚æžœä¼ å…¥ç›¸åŒçš„å‚æ•°ï¼Œå®ƒä»¬å°†å§‹ç»ˆäº§ç”Ÿç›¸åŒçš„ç»“æžœã€‚ åŒæ—¶çº¯å‡½æ•°è¿˜ä½¿å¾—ç»´æŠ¤å’Œé‡æž„ä»£ç å˜å¾—æ›´åŠ å®¹æ˜“ã€‚ä½ å¯ä»¥æ”¾å¿ƒåœ°é‡æž„ä¸€ä¸ªçº¯å‡½æ•°ï¼Œä¸å¿…æ“å¿ƒæ²¡æ³¨æ„åˆ°çš„å‰¯ä½œç”¨æžä¹±äº†æ•´ä¸ªåº”ç”¨è€Œå¯¼è‡´ç»ˆè°ƒè¯•åœ°ç‹±ã€‚ï¼ˆè¯‘æ³¨ï¼šå¦‚æžœé¡¹ç›®ä¸­å……æ–¥ç€å‰¯ä½œç”¨ï¼Œé‚£ä¹ˆå‡½æ•°/æ¨¡å—ä¹‹é—´çš„é€»è¾‘å¯èƒ½äº’ç›¸äº¤ç»‡è€¦åˆï¼Œåœ¨åŽæœŸæ–°å¢žé€»è¾‘æ—¶å¯èƒ½ç”±äºŽä¾èµ–å¤æ‚è€Œéš¾ä»¥é‡æž„ï¼Œæ›´å¸¸è§çš„æ˜¯å¼€å‘ä¸ºäº†åº”ä»˜éœ€æ±‚è€Œä¸æ–­çš„å¼•å…¥æ–°çš„å‰¯ä½œç”¨åˆ°åŽŸæœ¬çš„é€»è¾‘ä¸Šä»Žè€Œå¯¼è‡´ä»£ç å˜å¾—è¶Šæ¥è¶Šç³Ÿç³•ã€‚ï¼‰ æ­£ç¡®åœ°ä½¿ç”¨çº¯å‡½æ•°å¯ä»¥äº§ç”Ÿæ›´åŠ é«˜è´¨é‡çš„ä»£ç ã€‚å¹¶ä¸”ä¹Ÿæ˜¯ä¸€ç§æ›´åŠ å¹²å‡€çš„ç¼–ç æ–¹å¼ã€‚ æ­¤å¤–ï¼Œçº¯å‡½æ•°ä¸ä¸æ˜¯ JavaScript çš„ä¸“åˆ©ã€‚æƒ³è¦äº†è§£æ›´å¤šå†…å®¹å¯ä»¥å‚è§ Wikiã€‚åŒæ—¶ä¹ŸæŽ¨èé˜…è¯» å¼€å‘å»ºè®®æ‰‹å†Œ ä»¥åŠ çº¯å‡½æ•° vs. éžçº¯å‡½æ•°. åŽŸæ–‡é“¾æŽ¥ï¼š medium.com]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨PHPé‡Œå¾ˆå¥½çš„ä½¿ç”¨ImageMagick---convertç¯‡]]></title>
    <url>%2Fblog%2F2018%2F09%2F18%2F%E5%9C%A8PHP%E9%87%8C%E5%BE%88%E5%A5%BD%E7%9A%84%E4%BD%BF%E7%94%A8ImageMagick-convert%E7%AF%87%2F</url>
    <content type="text"><![CDATA[ImageMagick åŒ…æ‹¬ä¸€ç»„å‘½ä»¤è¡Œå·¥å…·æ¥æ“ä½œå›¾ç‰‡ï¼Œä¹‹å‰çš„ImageMagickå®žçŽ°base64å›¾ç‰‡çš„é€»è¾‘åœ¨æœåŠ¡å™¨ç«¯å¯èƒ½ä¼šé€ æˆæº¢å‡ºçš„äº‹æ•…ï¼Œæ‰€ä»¥åœ¨æŽ¥ä¸‹çš„æ–‡ç« é‡Œä¼šä»‹ç»å¦å¤–ä¸€ç§å¥½çš„å®žçŽ°æ–¹å¼å°±æ˜¯â€”-convertå‘½ä»¤ã€‚ä½¿ç”¨å‘½ä»¤æ ¼å¼çš„å½¢å¼åŽ»ç”Ÿæˆå›¾ç‰‡å’Œå¤§å°çš„è£å‰ªæ•°æ®æ ¼å¼çš„è½¬æ¢ã€‚ åŸºæœ¬å‘½ä»¤ä¸Žæ ¼å¼1ã€åŸºæœ¬å‘½ä»¤ magick: åˆ›å»ºã€ç¼–è¾‘å›¾åƒï¼Œè½¬æ¢å›¾åƒæ ¼å¼ï¼Œä»¥åŠè°ƒæ•´å›¾åƒå¤§å°ã€æ¨¡ç³Šã€è£åˆ‡ã€é™¤åŽ»æ‚ç‚¹ã€æŠ–åŠ¨ ( dither )ã€ç»˜å›¾ã€ç¿»è½¬ã€åˆå¹¶ã€é‡æ–°é‡‡æ ·ç­‰ã€‚ convert: ç­‰åŒäºŽ magick å‘½ä»¤ã€‚ identify: è¾“å‡ºä¸€ä¸ªæˆ–å¤šä¸ªå›¾åƒæ–‡ä»¶çš„æ ¼å¼å’Œç‰¹å¾ä¿¡æ¯ï¼Œå¦‚åˆ†è¾¨çŽ‡ã€å¤§å°ã€å°ºå¯¸ã€è‰²å½©ç©ºé—´ç­‰ã€‚ mogrify: ä¸Ž magick åŠŸèƒ½ä¸€æ ·ï¼Œä¸è¿‡ä¸éœ€è¦æŒ‡å®šè¾“å‡ºæ–‡ä»¶ï¼Œè‡ªåŠ¨è¦†ç›–åŽŸå§‹å›¾åƒæ–‡ä»¶ã€‚ composite: å°†ä¸€ä¸ªå›¾ç‰‡æˆ–å¤šä¸ªå›¾ç‰‡ç»„åˆæˆæ–°å›¾ç‰‡ã€‚ montage: ç»„åˆå¤šä¸ªç‹¬ç«‹çš„å›¾åƒæ¥åˆ›å»ºåˆæˆå›¾åƒã€‚æ¯ä¸ªå›¾åƒéƒ½å¯ä»¥ç”¨è¾¹æ¡†ï¼Œé€æ˜Žåº¦ç­‰ç‰¹æ€§è¿›è¡Œè£…é¥°ã€‚ compare: ä»Žæ•°å­¦å’Œè§†è§‰è§’åº¦æ¯”è¾ƒæºå›¾åƒä¸Žé‡å»ºå›¾åƒä¹‹é—´çš„å·®å¼‚ã€‚ display:åœ¨ä»»ä½• X server ä¸Šæ˜¾ç¤ºä¸€ä¸ªå›¾åƒæˆ–å›¾åƒåºåˆ—ã€‚ animate: åœ¨ä»»ä½• X server ä¸Šæ˜¾ç¤ºå›¾åƒåºåˆ—ã€‚ import: ä¿å­˜ X server ä¸Šçš„ä»»ä½•å¯è§çª—å£å¹¶æŠŠå®ƒä½œä¸ºå›¾åƒæ–‡ä»¶è¾“å‡ºã€‚å¯ä»¥æ•æ‰å•ä¸ªçª—å£ï¼Œæ•´ä¸ªå±å¹•æˆ–å±å¹•çš„ä»»æ„çŸ©å½¢éƒ¨åˆ†ã€‚ conjure:è§£é‡Šå¹¶æ‰§è¡Œ MSL ( Magick Scripting Language ) å†™çš„è„šæœ¬ã€‚ stream: ä¸€ä¸ªè½»é‡çº§å·¥å…·ï¼Œç”¨äºŽå°†å›¾åƒæˆ–éƒ¨åˆ†å›¾åƒçš„ä¸€ä¸ªæˆ–å¤šä¸ªåƒç´ ç»„ä»¶æµå¼ä¼ è¾“åˆ°å­˜å‚¨è®¾å¤‡ã€‚åœ¨å¤„ç†å¤§å›¾åƒæˆ–åŽŸå§‹åƒç´ ç»„ä»¶æ—¶å¾ˆæœ‰ç”¨ã€‚ 2ã€å‘½ä»¤æ ¼å¼åŸºæœ¬å‘½ä»¤çš„ä½¿ç”¨ï¼Œéµå¾ª Unix é£Žæ ¼çš„æ ‡å‡†æ ¼å¼ï¼Œä¾‹å¦‚ command [options] input_image output_image å°†ä¸€å¼ å®½é«˜ 300x300 çš„å›¾ç‰‡ goods.png è½¬æ¢æˆ 200x200 çš„goods.jpgï¼Œå¯ä»¥è¿™æ ·ç”¨ 1convert -resize 200x200 goods.png goods.jpg å¼€å§‹ç»˜åˆ¶ç”Ÿæˆå›¾ç‰‡ä¸€äº›å‰æœŸå‚æ•°1ã€å…¥å‚123456789101112131415$item_img='https://img.alicdn.com/bao/uploaded/i1/1750208593/TB1rgM3hhtnkeRjSZSgXXXAuXXa_!!0-item_pic.jpg';$item_title='æµ‹è¯•å­—ä½“';$shop_title='æµ‹è¯•åº—é“º';$shop_img='http://q.aiyongbao.com/item/web/images/qap_img/mobile/userAvatar.png';$qr_img='https://img.alicdn.com/tfscom/TB1uJDStYZnBKNjSZFKwu3GOVXa.png';$numid_share='0000000';$qr_title='é•¿æŒ‰è¯†åˆ«äºŒç»´ç ';// å¯¹å®è´æ ‡é¢˜è£å‰ª$drawtitone=mb_substr($item_title,0,13, 'utf-8');$drawtittow=mb_substr($item_title,13,13, 'utf-8');$drawtitthree=mb_substr($item_title,26,13, 'utf-8');$time_date = time(); // æ—¶é—´æˆ³$workDir = '/data/tmp/'.$numid_share.'_con'.$time_date; // ç›®æ ‡è·¯å¾„----&gt;æŒ‡å®šä¸€ä¸ªæ–‡ä»¶å¤¹ä¿å­˜ç”Ÿæˆå›¾ç‰‡è¿‡ç¨‹é‡Œçš„å›¾ç‰‡ 2ã€å…ˆä¸‹è½½ç´ ææ–‡ä»¶æˆ‘ä»¬è¿™é‡Œéœ€è¦ä¸€ä¸ªæ‹¼æŽ¥å›¾ç‰‡çš„é“¾æŽ¥ï¼Œæ‰€ä»¥å…ˆä¸‹è½½åˆ°ä¹‹å‰çš„åˆ›å»ºçš„æ–‡ä»¶å¤¹ä¸‹ï¼Œå› ä¸ºè¿™äº›ç´ æå›¾ç‰‡åªæ˜¯ä¸ºäº†æœ€åŽçš„æ‹¼æŽ¥ï¼Œæœ€åŽå¯ä»¥å®Œå…¨åˆ é™¤ã€‚12345678910$item_img_down = $workDir.'/itemimage.jpg';$shop_img_down = $workDir.'/shopimage.jpg';$qr_img_down = $workDir.'/qrimage.jpg';// ä¸‹è½½å®è´ä¸»å›¾\NetworkUtils::curlDownload($item_img, $item_img_down);// ä¸‹è½½åº—é“ºå›¾ç‰‡\NetworkUtils::curlDownload($shop_img, $shop_img_down);// ä¸‹è½½äºŒç»´ç \NetworkUtils::curlDownload($qr_img, $qr_img_down); \NetworkUtils::curlDownload($item_img, $item_img_down); ä¸‹è½½$item_imgä¿å­˜åœ¨ç›®æ ‡è·¯å¾„æ–‡ä»¶å¤¹ä¸‹çš„$workDir.&#39;/itemimage.jpg&#39;è·¯å¾„ã€‚ 3ã€æŒ‡å®šå­—ä½“å’Œé¢œè‰²1234$fontFamily = '/usr/share/fonts/chinese/msyh.ttf';$fontColor = '#333333';$fontColor_shoptitle = '#999999';$fontColor_qrtitlt = '#666666'; 4ã€åˆ›å»ºä¸€ä¸ªåº•å›¾åˆ›å»ºä¸€ä¸ª750x1046ç™½è‰²çš„åº•å›¾ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸Šé¢ç»˜åˆ¶æ–‡å­— 123456// åˆ›å»ºä¸€ä¸ªåº•å›¾(å¹¶ä¸”åŠ ä¸Šä¸€äº›æ–‡å­—)$back_img=$workDir.'/bg.jpg'; //è¦ç”Ÿæˆçš„å›¾ç‰‡çš„è·¯å¾„----&gt;å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯çœ‹åˆ°$back_cmds="convert 'xc:[750x1046!]' -background white -font &#123;$fontFamily&#125; -draw 'text 580,994 \"&#123;$qr_title&#125;\"' -fill \"&#123;$fontColor_qrtitlt&#125;\" -pointsize 20 -draw 'text 114,990 \"&#123;$shop_title&#125;\"' -font &#123;$fontFamily&#125; -pointsize 22 -fill '#999999' &#123;$workDir&#125;/bg.jpg";$result_back_cmds = \SystemCommon::runningCmd($back_cmds); è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹æ–‡å­—çš„ç»˜åˆ¶å‘½ä»¤é¡ºåºï¼Œå¦åˆ™ä¼šå‡ºçŽ°æ²¡æœ‰ç”Ÿæ•ˆçš„é—®é¢˜ã€‚-font {$fontFamily} -draw &#39;text 580,994 \&quot;{$qr_title}\&quot;&#39; -fill \&quot;{$fontColor_qrtitlt}\&quot; -pointsize 20 è§£é‡Šä¸€ä¸‹ï¼š xc:[100x40!]: è®¾ç½®ç”»å¸ƒå¤§å°çš„ä¸€ç§ç®€å†™æ–¹å¼ï¼Œæ–¹æ‹¬å·é‡Œå†™å…¥ç”»å¸ƒå®½é«˜ï¼Œæ³¨æ„è¦åŠ  ! -fill &#39;rgba(0, 0, 0, 0)&#39;ï¼šè®¾ç½®äº†æ–‡æœ¬çš„å¡«å……é¢œè‰² text 114,990: å¯¹æ–‡å­—è¿›è¡Œå®šä½ -fontï¼šæŒ‡å®šå­—ä½“ -pointsizeï¼šæŒ‡å®šæ–‡æœ¬çš„å­—ä½“å¤§å° -drawï¼šç»˜å›¾é€‰é¡¹ï¼Œtext å£°æ˜Žç»˜åˆ¶æ–‡æœ¬ï¼Œ 0,0 å£°æ˜Žæ–‡æœ¬è·ç¦»å›¾ç‰‡å·¦ä¸Šè§’çš„åç§»å€¼ï¼Œç»˜åˆ¶æ–‡æœ¬çš„æ ¼å¼ä¸º text x,y stringï¼Œå½“ç„¶è¿˜å¯ä»¥ç»˜åˆ¶å…¶ä»–ç±»åž‹ï¼Œè¯¸å¦‚åœ† ( circle )ã€æŠ˜çº¿ ( polyline ) ç»§ç»­æ·»åŠ æ–‡å­—ï¼š 12345$back_img_shoptitle=$workDir.'/btitle.jpg'; //è¦ç”Ÿæˆçš„å›¾ç‰‡çš„è·¯å¾„$back_cmds_shoptitle="convert -draw 'text 40,820 \"&#123;$drawtitone&#125;\"' -font &#123;$fontFamily&#125; -pointsize 32 -fill \"&#123;$fontColor&#125;\" -draw 'text 40,866 \"&#123;$drawtittow&#125;\"' -font &#123;$fontFamily&#125; -pointsize 32 -fill \"&#123;$fontColor&#125;\" -draw 'text 40,912 \"&#123;$drawtitthree&#125;\"' -font &#123;$fontFamily&#125; -pointsize 32 -fill \"&#123;$fontColor&#125;\" &#123;$back_img&#125; &#123;$workDir&#125;/btitle.jpg";$result_back_cmds_shoptitle = \SystemCommon::runningCmd($back_cmds_shoptitle); æ•ˆæžœï¼š 5ã€æ‹¼æŽ¥å›¾ç‰‡çŽ°åœ¨å°±å¯ä»¥åœ¨ä¹‹å‰å¾—åˆ°çš„å›¾ç‰‡ä¸Šæ‹¼æŽ¥æ‰€éœ€è¦çš„å›¾ç‰‡äº† 12345678 // åœ¨åº•å›¾ä¸Šåˆå¹¶å•†å“ä¸»å›¾$back_img_itemimg='/data/tmp/' . md5(microtime(true)).'.jpg'; //è¦ç”Ÿæˆçš„å›¾ç‰‡çš„è·¯å¾„$geometryX = "+" . 0; // å®šä½$geometryY = "+" . 0; // å®šä½$customPicPos = "northwest";$back_cmds_itemimg = "convert &#123;$back_img_shoptitle&#125; &#123;$workDir&#125;/item_img_mag.jpg -gravity &#123;$customPicPos&#125; -geometry &#123;$geometryX&#125;&#123;$geometryY&#125; -compose over -composite -antialias -set colorspace sRGB -colorspace sRGB &#123;$workDir&#125;/result.jpg";$result_back_cmds_itemimg = \SystemCommon::runningCmd($back_cmds_itemimg); è§£é‡Šä¸€ä¸‹ï¼š -geometry: è®¾ç½®æ–‡æœ¬åœ¨å›¾ç‰‡é‡Œçš„æŽ’åˆ—æ–¹å¼ ( ç±»ä¼¼ CSS é‡Œçš„ align-items + justify-content )ï¼Œcenter è¡¨ç¤ºæ°´å¹³åž‚ç›´éƒ½å±…ä¸­ï¼Œå…¶ä»–å€¼è¿˜å¯ä»¥æ˜¯ï¼šNorthWest, North, NorthEast, West, East, SouthWest, South, SouthEastï¼Œä¸è®°å¤§å°å†™ composite: å°†ä¸€ä¸ªå›¾ç‰‡æˆ–å¤šä¸ªå›¾ç‰‡ç»„åˆæˆæ–°å›¾ç‰‡ã€‚ è¿™é‡Œæ˜¯æŠŠ{$workDir}/item_img_mag.jpgè·¯å¾„çš„å›¾ç‰‡ç»˜åˆ¶åˆ°ä¹‹å‰ç»˜åˆ¶æ–‡å­—çš„å›¾ç‰‡ä¸Š$back_img_shoptitleï¼Œæœ€ç»ˆå¾—åˆ°çš„å›¾ç‰‡ä¿å­˜è·¯å¾„æ˜¯åœ¨{$workDir}/result.jpg è®©æˆ‘ä»¬ç»§ç»­æ“ä½œå›¾ç‰‡ 1234567891011// åˆå¹¶äºŒç»´ç  $geometryXshop = "+" . 40;$geometryYshop = "+" . 950;$back_cmds_shopimg = "convert &#123;$workDir&#125;/result.jpg &#123;$workDir&#125;/shop_img_mag.jpg -gravity &#123;$customPicPos&#125; -geometry &#123;$geometryXshop&#125;&#123;$geometryYshop&#125; -compose over -composite -antialias -set colorspace sRGB -colorspace sRGB &#123;$workDir&#125;/result1.jpg";$result_back_cmds_shopimg = \SystemCommon::runningCmd($back_cmds_shopimg); // åˆå¹¶åº—é“ºå›¾æ ‡$geometryXqr = "+" . 520;$geometryYqr = "+" . 784;$back_cmds_qrimg = "convert &#123;$workDir&#125;/result1.jpg &#123;$workDir&#125;/qr_img_mag.jpg -gravity &#123;$customPicPos&#125; -geometry &#123;$geometryXqr&#125;&#123;$geometryYqr&#125; -compose over -composite -antialias -set colorspace sRGB -colorspace sRGB &#123;$workDir&#125;/result2.jpg";$result_back_cmds_qrimg = \SystemCommon::runningCmd($back_cmds_qrimg); æ•ˆæžœï¼š å‘çŽ°å›¾ç‰‡å¹¶ä¸æ˜¯æˆ‘ä»¬é¢„æœŸçš„æ•ˆæžœï¼Œæ‹¼æŽ¥æˆ‘ä»¬ä¹Ÿè®¾ç½®äº†å›¾ç‰‡çš„å¤§å°ï¼Œä½†æ˜¯æ²¡æœ‰èµ·ä½œç”¨ï¼Œå°è¯•è¿‡ä¸åŒçš„æ–¹æ¡ˆåŽå†³å®šåœ¨æ‹¼æŽ¥ä¹‹å‰æŠŠå›¾ç‰‡ç»Ÿä¸€æ”¾å¤§ä¸ºéœ€è¦æ‹¼æŽ¥çš„å°ºå¯¸æ¥æ“ä½œã€‚ 6ã€æ”¾å¤§æ‹¼æŽ¥å›¾ç‰‡å°ºå¯¸éœ€è¦å¯¹å¤šæ‹¼æŽ¥çš„å›¾ç‰‡éƒ½è¿›è¡Œæ“ä½œ 123456789 // çœ‹æ¥éœ€è¦å…ˆæ”¾å¤§ä¸»å›¾$item_img_m="convert -resize '750x766!' &#123;$item_img_down&#125; &#123;$workDir&#125;/item_img_mag.jpg";$item_img_mag = \SystemCommon::runningCmd($item_img_m); // çœ‹æ¥éœ€è¦å…ˆæ”¾å¤§äºŒç»´ç $shop_img_m="convert -resize 64x64 &#123;$shop_img_down&#125; &#123;$workDir&#125;/shop_img_mag.jpg";$shop_img_mag = \SystemCommon::runningCmd($shop_img_m); // çœ‹æ¥éœ€è¦å…ˆæ”¾å¤§åº—é“ºå›¾æ ‡$qr_img_m="convert -resize 200x200 &#123;$qr_img_down&#125; &#123;$workDir&#125;/qr_img_mag.jpg";$qr_img_mag = \SystemCommon::runningCmd($qr_img_m); -resize å»¶ä¼¸è§£è¯» IamgeMagick æä¾›äº†å‡ ç§ç¬¦å·æ¥å®šä¹‰ç¼©æ”¾ 12345convert -resize '150x100!' goods.jpg thumbnail.jpgconvert -resize '150x100&gt;' goods.jpg thumbnail.jpgconvert -resize '150x100&lt;' goods.jpg thumbnail.jpg !ï¼šä¸ç®¡å›¾ç‰‡å®½é«˜å¦‚ä½•ï¼Œéƒ½ç¼©æ”¾æˆ 150x100 è¿™æ ·çš„å°ºå¯¸ã€‚ &gt;ï¼šåªæœ‰å®½é«˜å‡å¤§äºŽ 150x100 çš„å›¾ç‰‡æ‰ç¼©æ”¾æˆè¯¥å°ºå¯¸ ( æŒ‰æ¯”ä¾‹å–æœ€å¤§å€¼ )ï¼Œå°äºŽçš„å›¾ç‰‡ä¸åšå¤„ç†ã€‚ &lt;ï¼šä¸Ž &gt; åŠŸèƒ½ç›¸å ç¼©æ”¾å¯¹æ¯” è¿™æ ·çš„ç»“æžœä¹Ÿä¸æ˜¯æˆ‘ä»¬éœ€è¦çš„ åªæœ‰convert -resize &#39;750x766!&#39; {$item_img_down} {$workDir}/item_img_mag.jpgè¿™æ ·å›ºå®šå°ºå¯¸ä¹‹åŽå¯ä»¥å¾—åˆ°ï¼š 7ã€å›¾ç‰‡è½¬æ¢ä¸º base64æ ¼å¼æˆ‘ä»¬æœ€åŽåŒæ ·çš„ä»¥base64æ ¼å¼è¾“å‡ºç»™å‰ç«¯ 12345678910111213141516171819$stdout = trim($result_back_cmds_qrimg["stdout"]);$Return = array();if (empty($stdout) || strpos($result_back_cmds_qrimg["stderr"], "identify") != false) &#123; // runningCmdæ‰§è¡ŒæˆåŠŸ $dest_img = $workDir.'/result2.jpg'; // /*å›¾ç‰‡è½¬æ¢ä¸º base64æ ¼å¼ç¼–ç */ $base64_image = ''; $image_info = getimagesize($dest_img); $image_data = fread(fopen($dest_img, 'r'), filesize($dest_img)); $base64_image = 'data:' . $image_info['mime'] . ';base64,' . chunk_split(base64_encode($image_data)); $Return['data']=$base64_image; $Return['dest_img']=$dest_img; $Return['type']='success'; $Return['msg']=1; return $Return;&#125;$Return['data']='';$Return['msg']=2;return $Return; $workDir.&#39;/result2.jpgæ˜¯æˆ‘ä»¬æœ€ç»ˆçš„æ‹¼æŽ¥å›¾ç‰‡ï¼Œè‡³äºŽæ–‡ä»¶å¤¹ä¸‹çš„å…¶ä»–å›¾ç‰‡ï¼Œå¯ä»¥é€‰æ‹©åˆ é™¤ã€‚æˆ‘ä»¬åªè¦å¾—åˆ°ç»“æžœå°±å¥½äº†ã€‚ ï¼ˆå°å§å§æ‹¼æŽ¥å›¾ï¼‰ è¿™æ¬¡convertå‘½ä»¤çš„ä»‹ç»æ˜¯ä»¥è§£è¯»æ•´ä¸ªæ–¹æ³•çš„å½¢å¼ï¼Œå¯¹æ‹¼æŽ¥çš„å¼€å§‹è¿›è¡Œåˆ°ç»“å°¾ç”Ÿæˆæœ€ç»ˆçš„å›¾ç‰‡ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰åŠ›æ‰€èƒ½åŠçš„å¸®åŠ©ã€‚ æ¬¢è¿Žå…‰é¡¾ä¸ªäººBlog]]></content>
      <categories>
        <category>åŽç«¯</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>PHP</tag>
        <tag>åŽç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åœ¨PHPé‡Œä½¿ç”¨ImageMagickç”Ÿæˆbase64å›¾ç‰‡]]></title>
    <url>%2Fblog%2F2018%2F09%2F05%2F%E5%9C%A8PHP%E9%87%8C%E5%BE%88%E5%A5%BD%E7%9A%84%E4%BD%BF%E7%94%A8ImageMagick%2F</url>
    <content type="text"><![CDATA[æœ€è¿‘çš„PHPé¡¹ç›®ä¸­ï¼Œéœ€è¦ç”¨åˆ°ç”»å›¾å’Œå›¾ç‰‡æ‹¼æŽ¥æ•ˆæžœï¼Œè¿™é‡Œæ˜¯ä¸€äº›å¼€å‘è¿‡ç¨‹é‡Œç”¨åˆ°çš„ä¸€äº›ç‚¹è¿˜æœ‰å°±æ˜¯ä¸€äº›è¸©è¿‡çš„å‘ã€‚é€šè¿‡ImageMagickç”Ÿæˆbase64å›¾ç‰‡æ ¼å¼ï¼Œä¸ºå‰ç«¯æ‰€ä½¿ç”¨ã€‚ ä¸€äº›éœ€è¦çš„çŸ¥è¯†ç‚¹ PHPå°†å›¾ç‰‡è½¬base64ç¼–ç ä»¥åŠbase64å›¾ç‰‡è½¬æ¢ä¸ºå›¾ç‰‡å¹¶ä¿å­˜ä»£ç å›¾ç‰‡è½¬base64ç¼–ç 12345678910111213/*å›¾ç‰‡è½¬æ¢ä¸º base64æ ¼å¼ç¼–ç */$img = 'uploads/about.png';$base64_img = base64EncodeImage($img);echo '&lt;img src="' . $base64_img . '" /&gt;'; function base64EncodeImage ($image_file) &#123; $base64_image = ''; $image_info = getimagesize($image_file); $image_data = fread(fopen($image_file, 'r'), filesize($image_file)); $base64_image = 'data:' . $image_info['mime'] . ';base64,' . chunk_split(base64_encode($image_data)); return $base64_image;&#125; base64å›¾ç‰‡è½¬æ¢ä¸ºå›¾ç‰‡å¹¶ä¿å­˜12345678910111213141516171819202122/* base64æ ¼å¼ç¼–ç è½¬æ¢ä¸ºå›¾ç‰‡å¹¶ä¿å­˜å¯¹åº”æ–‡ä»¶å¤¹ */function base64_image_content($base64_image_content,$path)&#123; //åŒ¹é…å‡ºå›¾ç‰‡çš„æ ¼å¼ if (preg_match('/^(data:\s*image\/(\w+);base64,)/', $base64_image_content, $result))&#123; $type = $result[2]; $new_file = $path."/".date('Ymd',time())."/"; if(!file_exists($new_file))&#123; //æ£€æŸ¥æ˜¯å¦æœ‰è¯¥æ–‡ä»¶å¤¹ï¼Œå¦‚æžœæ²¡æœ‰å°±åˆ›å»ºï¼Œå¹¶ç»™äºˆæœ€é«˜æƒé™ mkdir($new_file, 0700); &#125; $new_file = $new_file.time().".&#123;$type&#125;"; if (file_put_contents($new_file, base64_decode(str_replace($result[1], '', $base64_image_content))))&#123; return '/'.$new_file; &#125;else&#123; return false; &#125; &#125;else&#123; return false; &#125;&#125; echo base64_image_content($base64_img,"uploads/"); base64Base64æ˜¯ä¸€ç§ç”¨64ä¸ªå­—ç¬¦æ¥è¡¨ç¤ºä»»æ„äºŒè¿›åˆ¶æ•°æ®çš„æ–¹æ³•ã€‚Base64çš„åŽŸç†å¾ˆç®€å•ï¼Œé¦–å…ˆï¼Œå‡†å¤‡ä¸€ä¸ªåŒ…å«64ä¸ªå­—ç¬¦çš„æ•°ç»„ï¼š [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, ... &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, ... &#39;0&#39;, &#39;1&#39;, ... &#39;+&#39;, &#39;/&#39;]ç„¶åŽï¼Œå¯¹äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œå¤„ç†ï¼Œæ¯3ä¸ªå­—èŠ‚ä¸€ç»„ï¼Œä¸€å…±æ˜¯3x8=24bitï¼Œåˆ’ä¸º4ç»„ï¼Œæ¯ç»„æ­£å¥½6ä¸ªbit å¦‚æžœè¦ç¼–ç çš„äºŒè¿›åˆ¶æ•°æ®ä¸æ˜¯3çš„å€æ•°ï¼Œæœ€åŽä¼šå‰©ä¸‹1ä¸ªæˆ–2ä¸ªå­—èŠ‚æ€Žä¹ˆåŠžï¼ŸBase64ç”¨\x00å­—èŠ‚åœ¨æœ«å°¾è¡¥è¶³åŽï¼Œå†åœ¨ç¼–ç çš„æœ«å°¾åŠ ä¸Š1ä¸ªæˆ–2ä¸ª=å·ï¼Œè¡¨ç¤ºè¡¥äº†å¤šå°‘å­—èŠ‚ï¼Œè§£ç çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åŽ»æŽ‰ã€‚ ä½¿ç”¨jpgå›¾ç‰‡ä½“ç§¯è¦æ¯”pngå°ä½¿ç”¨PHPçš„Imagickç±»è¿›è¡Œå›¾åƒçš„æ“ä½œ å…·ä½“æ“ä½œ(1).åˆ›å»ºä¸€ä¸ªåº•å›¾,å®½750pxï¼Œé«˜1046pxï¼Œç™½è‰²èƒŒæ™¯ï¼Œæ ¼å¼ä¸ºjpgçš„å›¾ç‰‡123// åˆå§‹åŒ–ä¸€ä¸ªç”»æ¿ $img =new Imagick(); $img-&gt;newImage(750,1046,'white','jpg') ; (2).åœ¨åº•å›¾ä¸Šæ·»åŠ éœ€æ±‚å›¾ç‰‡å‰ææ˜¯æˆ‘ä»¬å·²ç»çŸ¥é“äº†éœ€è¦åˆå¹¶çš„å›¾ç‰‡é“¾æŽ¥åœ°å€12345678910111213141516171819202122232425262728293031323334353637383940414243$item_img='https://img.alicdn.com/bao/uploaded/i1/1750208593/TB1rgM3hhtnkeRjSZSgXXXAuXXa_!!0-item_pic.jpg'ç¬¬ä¸€æ­¥ï¼šå®žä¾‹åŒ–å›¾ç‰‡$imgtwo = new Imagick($item_img);ç¬¬äºŒæ­¥ï¼šè®¾ç½®æ·»åŠ å›¾ç‰‡çš„å¤§å°$imgtwo-&gt;resizeImage(750,764,Imagick::FILTER_LANCZOS,1);å…³äºŽresizeImageå‚æ•°è¯´æ˜Ž bool Imagick::resizeImage ( int $columns , int $rows , int $filter , float $blur [, bool $bestfit = false ] )å‚æ•°ï¼š â— columns å›¾ç‰‡çš„å®½åº¦ â— rows å›¾ç‰‡é«˜åº¦ â— filter è¿‡æ»¤å™¨ï¼Œç”¨äºŽè¿‡æ»¤å›¾ç‰‡ï¼Œæœ‰é«˜æ–¯filteæ ¹æ®æƒ…å†µè€Œå®š â— blur blur=1 ä¸ºè™šåŒ–ï¼Œ blur =-1 ä¸ºé”åŒ–ç¬¬ä¸‰æ­¥ï¼šä¸Žåº•å›¾åˆå¹¶$img-&gt;compositeImage($imgtwo,$imgtwo-&gt;getImageCompose(),0,0);ä½¿ç”¨compositeImage(); bool Imagick::compositeImage ( Imagick $composite_object , int $composite , int $x , int $y [, int $channel = Imagick::CHANNEL_ALL ] )å‚æ•°ï¼š â— composite_object ï¼šç”¨äºŽåˆå¹¶çš„å›¾ç‰‡çš„Imagickå¯¹è±¡ â— compositeï¼šåˆå¹¶æ“ä½œï¼Œå®šä¹‰æ“ä½œå¸¸é‡ã€‚ å…·ä½“è¯·æŸ¥çœ‹ åˆå¹¶æ“ä½œå¸¸é‡åˆ—è¡¨ â— xï¼šç›¸å¯¹å›¾åƒé¡¶ç‚¹å·¦ä¸Šä½ç½®ï¼ˆ0,0ï¼‰çš„æ¨ªåæ ‡ â— yï¼šç›¸å¯¹å›¾åƒé¡¶ç‚¹å·¦ä¸Šä½ç½®ï¼ˆ0,0ï¼‰çš„çºµåæ ‡ â— channelï¼šé€šè¿‡ä¼ å…¥ä¸€ä¸ªé€šé“å¸¸é‡ï¼Œæ¥å¼€å¯é€šé“æ¨¡å¼ã€‚ä¸ºäº†æ”¯æŒå¤šä¸ªé€šé“ï¼Œå¯ä»¥é€šè¿‡äºŒè¿›åˆ¶è¿ç®—çš„æ“ä½œæ¥åˆå¹¶å¤šä¸ªé€šé“å¸¸é‡ã€‚åˆ°è¿™é‡Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªåˆå¹¶çš„å›¾ç‰‡äº†1ã€åŠ ä¸€ä¸ªheaderä¿¡æ¯ï¼Œå¯ä»¥ç›´æŽ¥åœ¨ç½‘é¡µä¸ŠæŸ¥çœ‹å›¾ç‰‡ header("Content-Type: img/png"); echo $img;2ã€å¯ä»¥æŠŠå›¾ç‰‡åœ¨æŒ‡å®šç›®å½•ä¸­ç”Ÿæˆï¼Œåœ¨æŒ‡å®šç›®å½•ä¸‹ç”Ÿæˆä¸ºimg.png $file="./img.png"; $img-&gt;writeImage($file);æˆ‘è¿™é‡Œæ˜¯è¿™æ ·å¤„ç†ï¼š header ( 'Content-type: ' . strtolower ($img-&gt;getImageFormat ()) ); $type = strtolower($img-&gt;getImageFormat()); $dest_img='/data/tmp/' . md5(microtime(true)).'.'.$type; //è¦ç”Ÿæˆçš„å›¾ç‰‡çš„è·¯å¾„ï¼Œéšæœºç”Ÿæˆå›¾ç‰‡åç§° (3).å›¾ç‰‡ä¸Šæ‹¼æŽ¥æ–‡å­—å†™å…¥æ–‡å­—ä»¥æ·»åŠ åº—é“ºæ–‡å­—ä¸ºä¾‹ï¼Œé€æ­¥å®Œæˆæ–‡å­—çš„å†™å…¥ã€‚1234567891011$shop_title='æµ‹è¯•åº—é“º'ï¼›// æ·»åŠ åº—é“ºæ–‡å­—$drawQr = new ImagickDraw(); // å®žä¾‹åŒ–ImagickDraw$drawQr -&gt; setFillColor(new ImagickPixel('#999999')); // é¢œè‰²$drawQr -&gt; setFontSize('24'); // å¤§å°$drawQr -&gt; setFont('../../conf/Microsoftyahei.ttf'); // å­—ä½“$drawQr -&gt; setTextAlignment(Imagick::ALIGN_LEFT); // å­—ä½“æ–¹å‘// psï¼š Imagick::ALIGN_RIGHT æœå³è¾¹ Imagick::ALIGN_LEFT å·¦è¾¹ Imagick::ALIGN_CENTER ä¸­é—´$drawQr -&gt; setTextEncoding("utf-8"); // å­—ä½“ç¼–ç $drawQr -&gt; annotation(114,990,$shop_title); // ç”»å‡ºæ–‡å­—$img -&gt; drawImage($drawQr); // ç”»åœ¨åœ°æ¿ä¸Š è¯¦ç»†è§£è¯»ï¼š 1ã€å®žä¾‹åŒ–ImagickDrawç±»ï¼š $drawQr = new ImagickDraw(); 2ã€è®¾ç½®å­—ä½“é¢œè‰²$drawQr -&gt; setFillColor(new ImagickPixel(&#39;#999999&#39;)); 3ã€è®¾ç½®å­—ä½“å¤§å°$drawQr -&gt; setFontSize(&#39;24&#39;); 4ã€è®¾ç½®å­—ä½“æ ¼å¼$drawQr -&gt; setFont(&#39;../../conf/Microsoftyahei.ttf&#39;); 5ã€è®¾ç½®å­—ä½“æ–¹å‘$draw-&gt;setTextAlignment(Imagick::ALIGN_RIGHT); psï¼š Imagick::ALIGN_RIGHT æœå³è¾¹ Imagick::ALIGN_LEFT å·¦è¾¹ Imagick::ALIGN_CENTER ä¸­é—´ 6ã€è®¾ç½®å­—ä½“ç¼–ç $drawQr -&gt; setTextEncoding(&quot;utf-8&quot;); 7ã€ç”»å‡ºæ–‡å­—$drawQr -&gt; annotation(114,990,$shop_title); 8ã€åœ¨åº•å›¾ä¸Šå†™å…¥å­—ä½“$img -&gt; drawImage($drawQr); å†™å…¥æ–‡å­—è¿™ä¸ªåœ°æ–¹çš„ä¸€äº›å‘ï¼š æ²¡æœ‰è®¾ç½®å­—ä½“æ ¼å¼æ—¶ï¼Œä¸­æ–‡å­—ä¼šè§£æžé”™è¯¯ï¼ˆè‹±æ–‡æ²¡æœ‰é—®é¢˜ï¼‰ ï¼ˆæ±‰å­—è§£æžå¤±è´¥ï¼‰ (è®¾ç½®å­—ä½“æ ¼å¼æ­£å¸¸æ˜¾ç¤º) (4).å›¾ç‰‡base64å¯¼å‡ºæœ€ç»ˆå¾—åˆ°çš„å›¾ç‰‡æˆ‘ä»¬ç»„è¦ä»¥base64çš„æ ¼å¼ä¼ é€’ç»™å‰ç«¯ï¼Œè¿›è¡Œä»¥ä¸‹æ“ä½œï¼ŒæŠŠæˆ‘ä»¬æœ€åŽæ‹¼æŽ¥çš„åˆ°çš„å›¾ç‰‡base64è½¬æ¢è¾“å‡ºã€‚123456789$dest_img='/data/tmp/' . md5(microtime(true)).'.'.$type; //è¦ç”Ÿæˆçš„å›¾ç‰‡çš„è·¯å¾„$Return = array();// *å›¾ç‰‡è½¬æ¢ä¸º base64æ ¼å¼ç¼–ç *$base64_image = '';$image_info = getimagesize($dest_img);$image_data = fread(fopen($dest_img, 'r'), filesize($dest_img));$base64_image = 'data:' . $image_info['mime'] . ';base64,' . chunk_split(base64_encode($image_data));$Return['data']=$base64_image;return $Return; $base64_imageå°±æ˜¯base64æ ¼å¼çš„å›¾ç‰‡ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯å‰ç«¯å¾—åˆ°çš„é¢base64æ•°æ®é‡ŒåŒ…å«æœ‰&#39;\r\n&#39;å›žè½¦å­—ç¬¦ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†æ‰å¯ä»¥æ­£ç¡®æ˜¾ç¤ºå›¾ç‰‡ã€‚ ï¼ˆæœ€åŽå¾—åˆ°çš„åˆå¹¶å›¾ç‰‡ï¼‰ (è°ƒæ•´æ‹¼æŽ¥å›¾ç‰‡å¤§å°å¾—åˆ°ä¸åŒçš„å›¾ç‰‡)]]></content>
      <categories>
        <category>åŽç«¯</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>PHP</tag>
        <tag>åŽç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°ç¨‹åºä¹‹æ—…(ä¸ƒ)]]></title>
    <url>%2Fblog%2F2018%2F08%2F08%2F%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B9%8B%E6%97%85-%E4%B8%83%2F</url>
    <content type="text"><![CDATA[å°ç¨‹åºæ˜¯ä¸€ç§æ–°çš„å¼€æ”¾èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°å¼€å‘ä¸€ä¸ªå°ç¨‹åºã€‚å°ç¨‹åºå¯ä»¥åœ¨å¾®ä¿¡å†…è¢«ä¾¿æ·åœ°èŽ·å–å’Œä¼ æ’­ï¼ŒåŒæ—¶å…·æœ‰å‡ºè‰²çš„ä½¿ç”¨ä½“éªŒã€‚è¿™æ˜¯å…³äºŽå°ç¨‹åºçš„åŠ¨æ€åŠ è½½ä¸€ä¸ªåˆ—è¡¨é¡µå°æ —å­ã€‚ è¿™é‡Œçš„åˆ—è¡¨å¸ƒå±€æ–¹å¼ï¼Œé‡‡ç”¨flexå¼¹æ€§å¸ƒå±€å®žçŽ°ï¼Œå…·ä½“å†…å®¹å¯ä»¥å‚è€ƒflex é˜®ä¸€å³° Num1ç®€å•è¯´ä¸€ä¸‹å¸ƒå±€ï¼Œå¤´éƒ¨æ˜¯ä¸€ä¸ªtitleï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªlistï¼Œlistæ˜¯ç”±ä¸€ä¸ªä¸€ä¸ªçš„cardç»„æˆï¼Œè€Œå¯¹äºŽcardå¸ƒå±€ï¼Œä¸»è¦æ˜¯å¤–éƒ¨ä¸€ä¸ªboxï¼Œé‡Œé¢åˆ†å·¦å³imgå’Œå†…å®¹ã€‚ list.wxml 12345678910111213&lt;!--pages/list/list.wxml--&gt;&lt;view class="box"&gt; &lt;text class="list_header"&gt;æ¯æ—¥ä¸€çœ‹&lt;/text&gt; &lt;view class="list" wx:for="&#123;&#123;list&#125;&#125;"&gt; &lt;view class='list_img'&gt; &lt;image src="&#123;&#123;item.img&#125;&#125;" class='avatar'&gt;&lt;/image&gt; &lt;/view&gt; &lt;view class='list_main'&gt; &lt;view class='list_title'&gt;&#123;&#123;item.title&#125;&#125;&lt;/view&gt; &lt;view class='list_content'&gt;&#123;&#123;item.content&#125;&#125;&lt;/view&gt; &lt;/view&gt; &lt;/view&gt;&lt;/view&gt; list.wxss123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/* pages/list/list.wxss *//*æ•´ä¸ªå®¹å™¨*/.box&#123;display: flex;flex-direction: column;/*ç«–ç›´æŽ’åˆ—*/&#125;/*titleæ–‡å­—*/.list_header&#123;font-size: 32rpx;font-weight: bold;color: #444;padding:20rpx;border-bottom: 2rpx solid #ccc;&#125;/*åˆ—è¡¨é¡¹å®¹å™¨*/.list&#123;display:flex;flex-direction: row;/*æ¨ªå‘æŽ’åˆ—*/align-content: center;border-bottom:1rpx solid #ccc;&#125;/*å›¾ç‰‡å®¹å™¨*/.list_img&#123;display: flex;align-content: center;padding:20rpx 10rpx;&#125;/*å›¾ç‰‡*/.avatar&#123;width:130rpx;height:130rpx;border-radius: 4rpx;border: 1rpx solid #F2F2F2;&#125;/*æ–‡å­—å®¹å™¨ï¼ŒåŒ…å«æ ‡é¢˜å’Œå†…å®¹*/.list_main&#123;display: flex;flex-direction: column;/*æ–‡å­—ç«–ç›´æŽ’åˆ—*/align-content: center;padding:40rpx 20rpx;overflow: hidden;&#125;.list_title&#123;font-size: 28rpx;color: #717171;font-weight: bold;padding-bottom: 10rpx;&#125;.list_content&#123;font-size: 24rpx;color: #999;&#125; list.jsé‡Œçš„æ•°æ®å…ˆå†™æˆå‡æ•°æ®ã€‚123456789101112131415161718192021222324// pages/list/list.jsPage(&#123; /** * é¡µé¢çš„åˆå§‹æ•°æ® */ data: &#123; list:[&#123; img: 'http://localhost:9999/image/a1.jpg', title: 'ç¾Žä¸½çš„å¤§æµ·å•Šï¼', content: 'å¤§æµ·å•Šå…¨æ˜¯æ°´ï¼Œç¾Žä¸½çš„æµ·æ™¯è®©äººèµå¿ƒæ‚¦ç›®ï¼æµ·æ™¯å£çº¸è¯·æ¬£èµï¼' &#125;, &#123; img: 'http://localhost:9999/image/a2.jpg', title: 'å›žä¸åŽ»çš„é‚£å«ä»Žå‰', content: 'å›žä¸åŽ»çš„é‚£å«ä»Žå‰ï¼Œåˆ°ä¸äº†çš„æ‰æ˜¯è¿œæ–¹ï¼›ä¸ä¿ç•™çš„é‚£å«é’æ˜¥ï¼Œä¸å®Œç¾Žçš„æ‰æ˜¯äººç”Ÿã€‚' &#125;, &#123; img: 'http://localhost:9999/image/a3.jpg', title: 'æ£®æž—ç”Ÿå­˜ææ€–æ¸¸æˆ', content: 'ã€Šæ£®æž—ã€‹æ˜¯ä¸€æ¬¾PCå¹³å°å¼€æ”¾ä¸–ç•Œç”Ÿå­˜ææ€–æ¸¸æˆï¼Œæ¸¸æˆä¸­çŽ©å®¶å¿…é¡»å»ºé€ è®¾æ–½ï¼ŒæŽ¢ç´¢ä¸–ç•Œï¼Œç”Ÿå­˜ä¸‹åŽ»ã€‚ã€Šæ£®æž—ã€‹å°†æ‰“é€ ä¸€ä¸ªæ´»ç”Ÿç”Ÿçš„ï¼Œæ°”å€™å¤šå˜ï¼Œæ¤è¢«åŠ¨æ€ç”Ÿé•¿å‡‹é›¶ï¼Œåœ°ä¸‹æ´žç©´é”™ç»¼å¤æ‚çš„æ£®æž—ï¼Œç­‰å¾…çŽ©å®¶æŽ¢ç´¢ã€‚' &#125;, ] &#125;, ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨æœ¬åœ°nodeæœåŠ¡ï¼‰12345678910111213141516171819202122232425262728var express = require('express');var fs = require('fs');var app = express();//å¤„ç†é™æ€èµ„æºapp.use(express.static('./'));app.get('/list', function (req, res) &#123; res.send(&#123; code: 200, data: [&#123; img: 'http://localhost:9999/image/a1.jpg', title: 'ç¾Žä¸½çš„å¤§æµ·å•Šï¼', content: 'å¤§æµ·å•Šå…¨æ˜¯æ°´ï¼Œç¾Žä¸½çš„æµ·æ™¯è®©äººèµå¿ƒæ‚¦ç›®ï¼æµ·æ™¯å£çº¸è¯·æ¬£èµï¼' &#125;, &#123; img: 'http://localhost:9999/image/a2.jpg', title: 'å›žä¸åŽ»çš„é‚£å«ä»Žå‰', content: 'å›žä¸åŽ»çš„é‚£å«ä»Žå‰ï¼Œåˆ°ä¸äº†çš„æ‰æ˜¯è¿œæ–¹ï¼›ä¸ä¿ç•™çš„é‚£å«é’æ˜¥ï¼Œä¸å®Œç¾Žçš„æ‰æ˜¯äººç”Ÿã€‚' &#125;, &#123; img: 'http://localhost:9999/image/a3.jpg', title: 'æ£®æž—ç”Ÿå­˜ææ€–æ¸¸æˆ', content: 'ã€Šæ£®æž—ã€‹æ˜¯ä¸€æ¬¾PCå¹³å°å¼€æ”¾ä¸–ç•Œç”Ÿå­˜ææ€–æ¸¸æˆï¼Œæ¸¸æˆä¸­çŽ©å®¶å¿…é¡»å»ºé€ è®¾æ–½ï¼ŒæŽ¢ç´¢ä¸–ç•Œï¼Œç”Ÿå­˜ä¸‹åŽ»ã€‚ã€Šæ£®æž—ã€‹å°†æ‰“é€ ä¸€ä¸ªæ´»ç”Ÿç”Ÿçš„ï¼Œæ°”å€™å¤šå˜ï¼Œæ¤è¢«åŠ¨æ€ç”Ÿé•¿å‡‹é›¶ï¼Œåœ°ä¸‹æ´žç©´é”™ç»¼å¤æ‚çš„æ£®æž—ï¼Œç­‰å¾…çŽ©å®¶æŽ¢ç´¢ã€‚' &#125;, ] &#125;);&#125;);app.listen(9999); //ç›‘å¬ç«¯å£ Num2æŽ¥ä¸‹æ¥æ˜¯imgåœ¨å¤´éƒ¨ï¼Œä¸‹æ–¹æ˜¯æ–‡å­—å†…å®¹ã€‚ list.wxml 1234567891011121314&lt;!--pages/listview/listview.wxml--&gt;&lt;view class="box"&gt; &lt;text class="list_header"&gt;æ¯æ—¥ä¸€çœ‹&lt;/text&gt; &lt;view class="list" wx:for="&#123;&#123;list&#125;&#125;"&gt; &lt;view class='list_img'&gt; &lt;image src="&#123;&#123;item.img&#125;&#125;" class='avatar'&gt;&lt;/image&gt; &lt;/view&gt; &lt;view class='list_main'&gt; &lt;view class='list_title'&gt;&#123;&#123;item.title&#125;&#125;&lt;/view&gt; &lt;view class='list_content'&gt;&#123;&#123;item.address&#125;&#125;&lt;/view&gt; &lt;view class='list_content'&gt;&#123;&#123;item.content&#125;&#125;&lt;/view&gt; &lt;/view&gt; &lt;/view&gt;&lt;/view&gt; list.wxss1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859/* pages/listview/listview.wxss *//*æ•´ä¸ªå®¹å™¨*/.box&#123;display: flex;background: #ccc;flex-direction: column;/*ç«–ç›´æŽ’åˆ—*/align-content: center;&#125;/*åˆ—è¡¨é¡¹å®¹å™¨*/.list&#123;background: #FFF;display:flex;flex-direction: column;/*ç«–ç›´æŽ’åˆ—*/align-content: center;width:90%;margin:20rpx auto;/*å±…ä¸­å¯¹é½*/&#125;/*å›¾ç‰‡å®¹å™¨*/.list_img&#123;display: flex;align-content: center;width:100%;padding:20rpx 0rpx;&#125;/*å›¾ç‰‡*/.avatar&#123;width:100%;height:400rpx;border-radius: 4rpx;border: 1rpx solid #F2F2F2;&#125;/*æ–‡å­—å®¹å™¨ï¼ŒåŒ…å«æ ‡é¢˜å’Œå†…å®¹*/.list_main&#123;display: flex;flex-direction: column;/*æ–‡å­—ç«–ç›´æŽ’åˆ—*/align-content: center;padding:20rpx;overflow: hidden;&#125;.list_title&#123;font-size: 28rpx;color: #717171;font-weight: bold;padding-bottom: 10rpx;&#125;.list_address&#123;font-size: 24rpx;color: #717171;font-weight: bold;padding-bottom: 10rpx;&#125;.list_content&#123;font-size: 24rpx;color: #999;&#125; list.jsé‡Œçš„æ•°æ®å…ˆå†™æˆå‡æ•°æ®ã€‚123456789101112131415161718192021222324// pages/list/list.jsPage(&#123; /** * é¡µé¢çš„åˆå§‹æ•°æ® */ data: &#123; list:[&#123; img: 'http://localhost:9999/image/a1.jpg', title: 'ç¾Žä¸½çš„å¤§æµ·å•Šï¼', content: 'å¤§æµ·å•Šå…¨æ˜¯æ°´ï¼Œç¾Žä¸½çš„æµ·æ™¯è®©äººèµå¿ƒæ‚¦ç›®ï¼æµ·æ™¯å£çº¸è¯·æ¬£èµï¼' &#125;, &#123; img: 'http://localhost:9999/image/a2.jpg', title: 'å›žä¸åŽ»çš„é‚£å«ä»Žå‰', content: 'å›žä¸åŽ»çš„é‚£å«ä»Žå‰ï¼Œåˆ°ä¸äº†çš„æ‰æ˜¯è¿œæ–¹ï¼›ä¸ä¿ç•™çš„é‚£å«é’æ˜¥ï¼Œä¸å®Œç¾Žçš„æ‰æ˜¯äººç”Ÿã€‚' &#125;, &#123; img: 'http://localhost:9999/image/a3.jpg', title: 'æ£®æž—ç”Ÿå­˜ææ€–æ¸¸æˆ', content: 'ã€Šæ£®æž—ã€‹æ˜¯ä¸€æ¬¾PCå¹³å°å¼€æ”¾ä¸–ç•Œç”Ÿå­˜ææ€–æ¸¸æˆï¼Œæ¸¸æˆä¸­çŽ©å®¶å¿…é¡»å»ºé€ è®¾æ–½ï¼ŒæŽ¢ç´¢ä¸–ç•Œï¼Œç”Ÿå­˜ä¸‹åŽ»ã€‚ã€Šæ£®æž—ã€‹å°†æ‰“é€ ä¸€ä¸ªæ´»ç”Ÿç”Ÿçš„ï¼Œæ°”å€™å¤šå˜ï¼Œæ¤è¢«åŠ¨æ€ç”Ÿé•¿å‡‹é›¶ï¼Œåœ°ä¸‹æ´žç©´é”™ç»¼å¤æ‚çš„æ£®æž—ï¼Œç­‰å¾…çŽ©å®¶æŽ¢ç´¢ã€‚' &#125;, ] &#125;, ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨æœ¬åœ°nodeæœåŠ¡ï¼‰12345678910111213141516171819202122232425262728293031var express = require('express');var fs = require('fs');var app = express();//å¤„ç†é™æ€èµ„æºapp.use(express.static('./'));app.get('/list', function (req, res) &#123; res.send(&#123; code: 200, data: [&#123; img: 'http://localhost:9999/image/a1.jpg', title: 'ç¾Žä¸½çš„å¤§æµ·å•Šï¼', address: '1ç¾Žä¸½çš„å¤§æµ·å•Šï¼', content: 'å¤§æµ·å•Šå…¨æ˜¯æ°´ï¼Œç¾Žä¸½çš„æµ·æ™¯è®©äººèµå¿ƒæ‚¦ç›®ï¼æµ·æ™¯å£çº¸è¯·æ¬£èµï¼' &#125;, &#123; img: 'http://localhost:9999/image/a2.jpg', title: 'å›žä¸åŽ»çš„é‚£å«ä»Žå‰', address: '1å›žä¸åŽ»çš„é‚£å«ä»Žå‰', content: 'å›žä¸åŽ»çš„é‚£å«ä»Žå‰ï¼Œåˆ°ä¸äº†çš„æ‰æ˜¯è¿œæ–¹ï¼›ä¸ä¿ç•™çš„é‚£å«é’æ˜¥ï¼Œä¸å®Œç¾Žçš„æ‰æ˜¯äººç”Ÿã€‚' &#125;, &#123; img: 'http://localhost:9999/image/a3.jpg', title: 'æ£®æž—ç”Ÿå­˜ææ€–æ¸¸æˆ', address: '1æ£®æž—ç”Ÿå­˜ææ€–æ¸¸æˆ', content: 'ã€Šæ£®æž—ã€‹æ˜¯ä¸€æ¬¾PCå¹³å°å¼€æ”¾ä¸–ç•Œç”Ÿå­˜ææ€–æ¸¸æˆï¼Œæ¸¸æˆä¸­çŽ©å®¶å¿…é¡»å»ºé€ è®¾æ–½ï¼ŒæŽ¢ç´¢ä¸–ç•Œï¼Œç”Ÿå­˜ä¸‹åŽ»ã€‚ã€Šæ£®æž—ã€‹å°†æ‰“é€ ä¸€ä¸ªæ´»ç”Ÿç”Ÿçš„ï¼Œæ°”å€™å¤šå˜ï¼Œæ¤è¢«åŠ¨æ€ç”Ÿé•¿å‡‹é›¶ï¼Œåœ°ä¸‹æ´žç©´é”™ç»¼å¤æ‚çš„æ£®æž—ï¼Œç­‰å¾…çŽ©å®¶æŽ¢ç´¢ã€‚' &#125;, ] &#125;);&#125;);app.listen(9999); //ç›‘å¬ç«¯å£ Num3ä¸Šé¢çš„æ ·å¼éƒ½æ˜¯å¾ˆå¸¸è§çš„åˆ—è¡¨é¡µï¼Œæˆ‘ä»¬æœ€ç»ˆçš„ç”¨æˆ·äº¤äº’æ•ˆæžœè¿™æ ·æ˜¯å¾ˆä¸å‹å¥½çš„ï¼Œé‚£å°±åœ¨é‡Œé¢åŠ å…¥ä¸‹æ‹‰åˆ·æ–°ï¼Œåº•éƒ¨åŠ è½½æ›´å¤šï¼Œè¿™æ ·æ‰ç¬¦åˆç”¨æˆ·çš„æ“ä½œä¹ æƒ¯ã€‚ ä¸»è¦ç‚¹ï¼š123456789list.jsoné…ç½®:"enablePullDownRefresh": trueéœ€è¦æ•èŽ·è¿™ä¸¤ä¸ªäº‹ä»¶ï¼šonReachBottomï¼ˆæ»šåŠ¨åˆ°åº•éƒ¨äº‹ä»¶ï¼‰onPullDownRefreshï¼ˆä¸‹æ‹‰åˆ·æ–°äº‹ä»¶ï¼‰ æœ¬åœ°æœåŠ¡ï¼š 1234567891011121314151617181920212223var express = require('express');var fs = require('fs');var app = express();//å¤„ç†é™æ€èµ„æºapp.use(express.static('./'));app.get('/list/:num',function(req,res)&#123;var num = req.params.num;//é¡µç var arr = [];(function()&#123;for(var i=(num*5-5);i&lt;(num*5);i++)&#123;var obj = &#123;id:i+1,img:'http://localhost:9999/image/1.jpg',title:'è¿™æ˜¯ç¬¬'+(i+1)+'æ¡æ•°æ®',address:'éŸ©å›½ï¼ŒæµŽå·žå²›',content:'æ®è¯´åŠä¸ªäºšæ´²çš„å¥³ç”Ÿéƒ½æƒ³åŽ»æƒå¿—é¾™çš„å’–å•¡åŽ…ä¸Šç­ã€‚è¦æ˜¯ä½ ä¹Ÿæƒ³åŽ»æµŽå·žå²›çš„è“å¤©ç™½äº‘ä¸‹å–å’–å•¡ï¼Œå¶é‡æƒå¿—é¾™ï¼Œé‚£ä¹ˆå°†æ˜¯ä¸€ä»¶éžå¸¸ä»¤äººå…´å¥‹çš„äº‹æƒ…ï¼'&#125;;arr.push(obj);&#125;&#125;)();res.send(&#123;code: 200,page:num,data: arr&#125;);&#125;);app.listen(9999);//ç›‘å¬ç«¯å£ 12345678910111213141516171819202122&lt;!--pages/listview/listview.wxml--&gt;&lt;loading hidden="&#123;&#123;isLoading&#125;&#125;"&gt;åŠ è½½ä¸­...&lt;/loading&gt;&lt;view class="box"&gt; &lt;view wx:if="&#123;&#123;isRefesh&#125;&#125;"&gt; &lt;icon type='waiting' size='45'&gt;&lt;/icon&gt; &lt;text&gt;åˆ·æ–°ä¸­...&lt;/text&gt; &lt;/view&gt; &lt;view class="list" wx:for="&#123;&#123;list&#125;&#125;" id="&#123;&#123;page&#125;&#125;"&gt; &lt;view class='list_img'&gt; &lt;image src="&#123;&#123;item.img&#125;&#125;" class='avatar'&gt;&lt;/image&gt; &lt;/view&gt; &lt;view class='list_main'&gt; &lt;view class='list_title'&gt;&#123;&#123;item.title&#125;&#125;&lt;/view&gt; &lt;view class='list_content'&gt;&#123;&#123;item.address&#125;&#125;&lt;/view&gt; &lt;view class='list_content'&gt;&#123;&#123;item.content&#125;&#125;&lt;/view&gt; &lt;/view&gt; &lt;/view&gt;&lt;/view&gt; 123&lt;!-- listview.json --&gt;&#123;"enablePullDownRefresh": true&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364// pages/listview/listview.jsPage(&#123; data: &#123; list: [],//åˆ—è¡¨é¡¹æ•°æ® page: 1,//é¡µç  isRefesh: false,//æ˜¯å¦åˆ·æ–° isLoading: true//æ­£åœ¨åŠ è½½ &#125;, //ä¸‹æ‹‰åˆ·æ–° onPullDownRefresh: function () &#123; var that = this; that.setData(&#123; isRefesh: true &#125;);//åˆ·æ–°æ¡å‡ºçŽ° wx.request(&#123; url: 'http://localhost:9999/list/1', method: 'GET', success: function (res) &#123; var listdata = res.data.data; setTimeout(function () &#123; wx.stopPullDownRefresh;//åœæ­¢ä¸‹æ‹‰åˆ·æ–°æ•ˆæžœ that.setData(&#123; page: 1 &#125;);//é‡ç½®é¡µç  that.setData(&#123; list: listdata, isRefesh: false &#125;);//é‡æ–°è®¾ç½®åˆ—è¡¨é¡¹å’Œåˆ·æ–°æ¡æ¶ˆå¤± &#125;, 1000); &#125; &#125;); &#125;, //æ»‘åˆ°åº•éƒ¨åŠ è½½ onReachBottom: function () &#123; var that = this; var page = that.data.page + 1; var oldData = this.data.list;//è€æ•°æ® that.setData(&#123; isLoading: false &#125;);//loadingå‡ºçŽ° wx.request(&#123; url: 'http://localhost:9999/list/' + page, method: 'GET', success: function (res) &#123; var allData = []; var listdata = res.data.data;//æ–°æ•°æ® allData = oldData.concat(listdata);//è€æ•°æ®å’Œæ–°æ•°æ®åˆå¹¶ that.setData(&#123; list: allData, page: page &#125;);//é‡æ–°è®¾ç½®åˆ—è¡¨é¡¹å’Œé¡µç  setTimeout(function () &#123; that.setData(&#123; isLoading: true &#125;);//loadingæ¶ˆå¤± &#125;, 1000); &#125; &#125;) &#125;, //é¡µç åˆå§‹åŒ– onLoad: function (options) &#123; var that = this; that.setData(&#123; isLoading: false &#125;);//loadingå‡ºçŽ° wx.request(&#123; url: 'http://localhost:9999/list/1', method: 'GET', success: function (res) &#123; var listdata = res.data.data; that.setData(&#123; list: listdata &#125;); setTimeout(function () &#123; that.setData(&#123; isLoading: true &#125;);//loadingæ¶ˆå¤± &#125;, 1000); &#125; &#125;) &#125;&#125;)]]></content>
      <categories>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯å°ç¬”è®°æœ¬]]></title>
    <url>%2Fblog%2F2018%2F08%2F01%2F%E5%89%8D%E7%AB%AF%E5%B0%8F%E7%AC%94%E8%AE%B0%E6%9C%AC%2F</url>
    <content type="text"><![CDATA[è¿™é‡Œä¼šæ”¶å½•ä¸€äº›å¶å°”ä¸çŸ¥é“äº†ï¼Œå°±åŽ»æ‰¾ä¸€ä¸‹çš„ä¸œè¥¿ï¼Œæ…¢æ…¢ç§¯ç´¯ã€‚ NodeçŽ¯å¢ƒèµ·ä¸€ä¸ªæœåŠ¡å‡†å¤‡å·¥ä½œéœ€è¦å®‰è£…NodeJSçŽ¯å¢ƒ 1ã€å®‰è£…Expressnpm install express -gnpm install express-generator -g 2ã€åˆå§‹åŒ–é¡¹ç›®æ–°å»ºé¡¹ç›®express é¡¹ç›®åç§° 1234567891011121314151617181920212223242526272829303132âžœ Weichat express serverDmo warning: the default view engine will not be jade in future releases warning: use `--view=jade' or `--help' for additional options create : serverDmo/ create : serverDmo/public/ create : serverDmo/public/javascripts/ create : serverDmo/public/images/ create : serverDmo/public/stylesheets/ create : serverDmo/public/stylesheets/style.css create : serverDmo/routes/ create : serverDmo/routes/index.js create : serverDmo/routes/users.js create : serverDmo/views/ create : serverDmo/views/error.jade create : serverDmo/views/index.jade create : serverDmo/views/layout.jade create : serverDmo/app.js create : serverDmo/package.json create : serverDmo/bin/ create : serverDmo/bin/www change directory: $ cd serverDmo install dependencies: $ npm install run the app: $ DEBUG=serverdmo:* npm start ç›®å½•ä»‹ç»ï¼š/bin:ç”¨æ¥å¯åŠ¨åº”ç”¨ï¼ˆæœåŠ¡å™¨ï¼‰/public: å­˜æ”¾é™æ€èµ„æºç›®å½•/routesï¼šè·¯ç”±ç”¨äºŽç¡®å®šåº”ç”¨ç¨‹åºå¦‚ä½•å“åº”å¯¹ç‰¹å®šç«¯ç‚¹çš„å®¢æˆ·æœºè¯·æ±‚ï¼ŒåŒ…å«ä¸€ä¸ª URIï¼ˆæˆ–è·¯å¾„ï¼‰å’Œä¸€ä¸ªç‰¹å®šçš„ HTTP è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POST ç­‰ï¼‰ã€‚æ¯ä¸ªè·¯ç”±å¯ä»¥å…·æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå¤„ç†ç¨‹åºå‡½æ•°ï¼Œè¿™äº›å‡½æ•°åœ¨è·¯ç”±åŒ¹é…æ—¶æ‰§è¡Œã€‚/views: æ¨¡æ¿æ–‡ä»¶æ‰€åœ¨ç›®å½• æ–‡ä»¶æ ¼å¼ä¸º.jadeç›®å½•app.jsç¨‹åºmainæ–‡ä»¶ è¿™ä¸ªæ˜¯æœåŠ¡å™¨å¯åŠ¨çš„å…¥å£ é¦–å…ˆå¯åŠ¨æœåŠ¡å™¨npm start //å¯åŠ¨æœåŠ¡å™¨ åœ¨æµè§ˆå™¨ä¸­è®¿é—® http://localhost:3000/ åŸºæœ¬ä½¿ç”¨æ‰“å¼€app.js è¿™é‡Œä»‹ç»ä¸‹ä¸»è¦ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839 var express = require('express'); var path = require('path'); var favicon = require('serve-favicon'); var logger = require('morgan'); var cookieParser = require('cookie-parser'); var bodyParser = require('body-parser'); var app = express();///=======è·¯ç”±ä¿¡æ¯ ï¼ˆæŽ¥å£åœ°å€ï¼‰å¼€å§‹ å­˜æ”¾åœ¨./routesç›®å½•ä¸‹===========// var routes = require('./routes/index');//home pageæŽ¥å£ var users = require('./routes/users'); //ç”¨æˆ·æŽ¥å£ app.use('/', routes); //åœ¨appä¸­æ³¨å†Œroutesè¯¥æŽ¥å£ app.use('/users', users);//åœ¨appä¸­æ³¨å†ŒusersæŽ¥å£///=======è·¯ç”±ä¿¡æ¯ ï¼ˆæŽ¥å£åœ°å€ ä»‹ç»===========/////=======æ¨¡æ¿ å¼€å§‹===========//// view engine setup app.set('views', path.join(__dirname, 'views')); app.set('view engine', 'jade');///=======æ¨¡æ¿ ç»“æŸ===========//å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­ è®¿é—® http://localhost:3000/ è°ƒç”¨çš„å°±æ˜¯indexä¸­çš„æŽ¥å£æˆ‘ä»¬æ‰“å¼€index.jså°±å¯ä»¥çœ‹åˆ°è¯¥æŽ¥å£çš„å®šä¹‰ï¼švar express = require('express');var router = express.Router();//å®šä¹‰ä¸€ä¸ªgetè¯·æ±‚ pathä¸ºæ ¹ç›®å½•/* GET home page. */router.get('/', function(req, res, next) &#123; res.render('index', &#123; title: 'Express' &#125;);&#125;);module.exports = router; å®šä¹‰ä¸€ä¸ªè·¯ç”±çš„åŸºæœ¬æ ¼å¼ä¸ºï¼šapp.METHOD(PATH, HANDLER)å…¶ä¸­ï¼šapp æ˜¯ express çš„å®žä¾‹ã€‚METHODæ˜¯ HTTP è¯·æ±‚æ–¹æ³•ã€‚PATH æ˜¯æœåŠ¡å™¨ä¸Šçš„è·¯å¾„ã€‚HANDLER æ˜¯åœ¨è·¯ç”±åŒ¹é…æ—¶æ‰§è¡Œçš„å‡½æ•°ã€‚ä»¥ä¸Šçš„å®šä¹‰ä»£è¡¨]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>React</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°ç¨‹åºä¹‹æ—…(å…­)]]></title>
    <url>%2Fblog%2F2018%2F07%2F31%2F%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B9%8B%E6%97%85-%E5%85%AD%2F</url>
    <content type="text"><![CDATA[å°ç¨‹åºæ˜¯ä¸€ç§æ–°çš„å¼€æ”¾èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°å¼€å‘ä¸€ä¸ªå°ç¨‹åºã€‚å°ç¨‹åºå¯ä»¥åœ¨å¾®ä¿¡å†…è¢«ä¾¿æ·åœ°èŽ·å–å’Œä¼ æ’­ï¼ŒåŒæ—¶å…·æœ‰å‡ºè‰²çš„ä½¿ç”¨ä½“éªŒã€‚è¿™æ˜¯å…³äºŽå°ç¨‹åºçš„æ•°æ®æœ¬åœ°å­˜å‚¨è¿›ä¸€æ­¥çš„è®¤è¯†ï¼Œæ¯”å¦‚å¾ˆå¤šå›¾ç‰‡å’Œè§†é¢‘æ—…è¡Œã€‚ æœ‰æ—¶å€™çš„éœ€æ±‚å°±æ˜¯ä¸å•å•åªæ˜¯ä¿å­˜åˆ°ä½ è‡ªå·±çš„æ‰‹æœºä¸Šå°±å¯ä»¥äº†ï¼Œè¦è€ƒè™‘åˆ°å¤šåœºæ™¯çš„åº”ç”¨ã€‚è¿˜æœ‰æ–‡ä»¶çš„å†…å®¹å¹¿åº¦ä¸Šä¹Ÿè¦æ‹“å±•ã€‚é‚£ä¹ˆè¿™å°±éœ€è¦ä¸€äº›å‡†å¤‡å·¥ä½œï¼Œæ¯”å¦‚æœåŠ¡å™¨ï¼Œä½¿ç”¨Nodejsæ¥å®žçŽ°æœåŠ¡å™¨çš„ä¸œè¥¿ï¼Œè‡³äºŽAPIä¸»è¦æ˜¯å®˜æ–¹çš„wx.uploadFile(obj) 12npm install expressnpm install formidable Node-serveræ–‡ä»¶ 1234567891011121314151617181920212223242526272829var express = require('express');//å¤„ç†postéœ€è¦å¼•å…¥è¿™ä¸ªä¸­é—´ä»¶,å¤„ç†çš„æ˜¯form-datavar formidable = require('formidable');var fs = require('fs');var app = express();// å¤„ç†é™æ€èµ„æºapp.use(express.static('./'));// å¤„ç†postçš„form-data ç±»åž‹app.post('/postformdata',function (req,res) &#123; var form = new formidable.IncomingForm(); // è¾“å…¥æµ form.encoding = 'utf-8'; form.uploadDir = 'upload'; //è¿™é‡Œè®¾ç½®ä¸Šä¼ ç›®å½• form.parse(req,function(err,fields,files)&#123; // è¿™é‡Œè§£æžè¯·æ±‚ if (err) &#123; res.send(err); return; &#125; var avatarName = Date.now() + '.jpg'; // ä»¥æ—¶é—´ä½œä¸ºåå­— var newPath = form.uploadDir + avatarName; fs.renameSync(files.my_upload.path,newPath); // my_uploadæ˜¯å‰ç«¯è®¾ç½®çš„nameï¼ŒæŠŠå›¾ç‰‡å‚¨å­˜ä¸‹æ¥å¹¶ä¸”é‡æ–°å‘½å res.send(&#123; code:200, path:'http:localhost:9998/'+newPath &#125;) &#125;)&#125;)app.listen(9998); // ç›‘å¬ç«¯å£ Num 1 ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œé€‰æ‹©æœ¬åœ°å›¾ç‰‡ï¼Œç„¶åŽä¿å­˜åˆ°æœåŠ¡å™¨ï¼Œä¸Šä¼ æˆåŠŸä¹‹åŽå¯ä»¥çœ‹åˆ°ç¼©ç•¥å›¾ï¼Œä½†æ˜¯ ç‚¹å‡»æ¯ä¸€å¼ å›¾ç‰‡åˆå¯ä»¥å¹»ç¯ç‰‡å¼é¢„è§ˆã€‚ åœ¨uploadæ–‡ä»¶ç›®å½•ä¸‹æ“ä½œ 1234567&lt;!--pages/upload/upload.wxml--&gt;&lt;view class='container'&gt; &lt;button type='primary' bindtap='uploadImg'&gt;ä¸Šä¼ å›¾ç‰‡&lt;/button&gt; &lt;view class="imginfo" wx:for="&#123;&#123;imglist&#125;&#125;" wx:for-index="id" wx:for-item="item"&gt; &lt;image src='&#123;&#123;item&#125;&#125;' bindtap='previewImg' data-imgid="&#123;&#123;id&#125;&#125;" class='myimg'&gt;&lt;/image&gt; &lt;/view&gt;&lt;/view&gt; 123456789101112/* pages/upload/upload.wxss */.imginfo&#123; display: flex; flex-direction: column; align-items: center;&#125;.myimg&#123; width: 70px; height: 70px; border:1px solid #ccc;&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// pages/upload/upload.jsPage(&#123; /** * é¡µé¢çš„åˆå§‹æ•°æ® */ data: &#123; imgList:[] // å›¾ç‰‡åˆ—è¡¨ &#125;, // ä¸Šä¼ å›¾ç‰‡ uploadImg:function()&#123; var that = this; wx.chooseImage(&#123; success: function(res) &#123; var tempFilePaths = res.tempFilePaths; wx.uploadFile(&#123; url: 'http://localhost:9998/postformdata', //nodeJSæ•°æ®æŽ¥å£ filePath: tempFilePaths[0], name: 'my_upload',//è¿™ä¸ªå‰åŽå°åç§°éœ€è¦ä¿æŒä¸€è‡´ï¼Œåˆ«ä¹±å†™ã€‚ formData: &#123; 'user': 'test' &#125;, success:function(res)&#123; var data = JSON.parse(res.data);//è¿”å›žæ¥çš„æ˜¯å­—ç¬¦ä¸²æ ¼å¼ã€‚ var arr = that.data.imgList; arr.push(data.path); that.setData(&#123; imgList: arr &#125;);//åªæœ‰è¿™ç§æ–¹å¼æ‰èƒ½æ›´æ–°è§†å›¾ console.log(that.data.imgList); wx.showToast(&#123; title: 'æ–‡ä»¶ä¸Šä¼ æˆåŠŸ', icon: 'success', duration: 2000 &#125;) &#125; &#125;) &#125; &#125;) &#125;, //é¢„è§ˆå›¾ç‰‡ previewImg: function (e) &#123; var index = e.target.dataset.imgid;//èŽ·å–å›¾ç‰‡çš„id var that = this; console.log(index); wx.previewImage(&#123; current: that.data.imgList[index],//å½“å‰çš„å›¾ç‰‡ urls: that.data.imgList // éœ€è¦é¢„è§ˆçš„å›¾ç‰‡httpé“¾æŽ¥åˆ—è¡¨ &#125;); &#125;, ä»¥ä¸Šå°±æ˜¯ä¸è¦çš„æ­¥éª¤ã€‚]]></content>
      <categories>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¼€å‘å°é”¦å›Š]]></title>
    <url>%2Fblog%2F2018%2F07%2F30%2F%E5%BC%80%E5%8F%91%E5%B0%8F%E9%94%A6%E5%9B%8A%2F</url>
    <content type="text"><![CDATA[è¿™é‡Œä¼šæ”¶å½•ä¸€ä¸‹é‡åˆ°çš„ï¼Œæˆ–è€…è§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚ä¸æ–­æ”¶é›†ï¼Œä¸æ–­å£®å¤§ã€‚ å¼€å‘å°é”¦å›Š JavaScript1ã€js åˆ¤æ–­å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå­—ç¬¦ä¸² Stringå¯¹è±¡çš„æ–¹æ³• æ–¹æ³•ä¸€: indexOf() (æŽ¨è) 123var str = "123";console.log(str.indexOf("3") != -1 ); // trueindexOf() æ–¹æ³•å¯è¿”å›žæŸä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²å€¼åœ¨å­—ç¬¦ä¸²ä¸­é¦–æ¬¡å‡ºçŽ°çš„ä½ç½®ã€‚å¦‚æžœè¦æ£€ç´¢çš„å­—ç¬¦ä¸²å€¼æ²¡æœ‰å‡ºçŽ°ï¼Œåˆ™è¯¥æ–¹æ³•è¿”å›ž -1ã€‚ æ–¹æ³•äºŒ: search() 123var str = "123";console.log(str.search("3") != -1 ); // truesearch() æ–¹æ³•ç”¨äºŽæ£€ç´¢å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å­å­—ç¬¦ä¸²ï¼Œæˆ–æ£€ç´¢ä¸Žæ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„å­å­—ç¬¦ä¸²ã€‚å¦‚æžœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•åŒ¹é…çš„å­ä¸²ï¼Œåˆ™è¿”å›ž -1ã€‚ æ–¹æ³•ä¸‰:match() 123456var str = "123";var reg = RegExp(/3/);if(str.match(reg))&#123; // åŒ…å« &#125;match() æ–¹æ³•å¯åœ¨å­—ç¬¦ä¸²å†…æ£€ç´¢æŒ‡å®šçš„å€¼ï¼Œæˆ–æ‰¾åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ã€‚ RegExp å¯¹è±¡æ–¹æ³• æ–¹æ³•å››:test() 1234var str = "123";var reg = RegExp(/3/);console.log(reg.test(str)); // truetest() æ–¹æ³•ç”¨äºŽæ£€ç´¢å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼ã€‚è¿”å›ž true æˆ– falseã€‚ æ–¹æ³•äº”:exec() 123456var str = "123";var reg = RegExp(/3/);if(reg.exec(str))&#123; // åŒ…å« &#125;exec() æ–¹æ³•ç”¨äºŽæ£€ç´¢å­—ç¬¦ä¸²ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ã€‚è¿”å›žä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­å­˜æ”¾åŒ¹é…çš„ç»“æžœã€‚å¦‚æžœæœªæ‰¾åˆ°åŒ¹é…ï¼Œåˆ™è¿”å›žå€¼ä¸º nullã€‚ 2ã€ JSä¸­every()å’Œsome()çš„ç”¨æ³• every()ä¸Žsome()æ–¹æ³•éƒ½æ˜¯JSä¸­æ•°ç»„çš„è¿­ä»£æ–¹æ³•ã€‚ every()æ˜¯å¯¹æ•°ç»„ä¸­æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œå¦‚æžœè¯¥å‡½æ•°å¯¹æ¯ä¸€é¡¹è¿”å›žtrue,åˆ™è¿”å›žtrueã€‚ some()æ˜¯å¯¹æ•°ç»„ä¸­æ¯ä¸€é¡¹è¿è¡Œç»™å®šå‡½æ•°ï¼Œå¦‚æžœè¯¥å‡½æ•°å¯¹ä»»ä¸€é¡¹è¿”å›žtrueï¼Œåˆ™è¿”å›žtrueã€‚ 1234567891011var arr = [ 1, 2, 3, 4, 5, 6 ]; console.log( arr.some( function( item, index, array )&#123; console.log( 'item=' + item + ',index='+index+',array='+array ); return item &gt; 3; &#125;)); console.log( arr.every( function( item, index, array )&#123; console.log( 'item=' + item + ',index='+index+',array='+array ); return item &gt; 3; &#125;)); 3ã€ ç”¨Setä¸ºæ•°ç»„åŽ»é‡123456var arr = [1,2,2,3,4] // éœ€è¦åŽ»é‡çš„æ•°ç»„var set = new Set(arr) // &#123;1,2,3,4&#125;var newArr = Array.from(set) // å†æŠŠsetè½¬å˜æˆarrayconsole.log(newArr) // [1,2,3,4] 4ã€ åˆ é™¤æ•°ç»„å°¾éƒ¨å…ƒç´ ä¸€ä¸ªç®€å•çš„ç”¨æ¥æ¸…ç©ºæˆ–åˆ™åˆ é™¤æ•°ç»„å°¾éƒ¨å…ƒç´ çš„ç®€å•æ–¹æ³•å°±æ˜¯æ”¹å˜æ•°ç»„çš„lengthå±žæ€§å€¼ã€‚12345678const arr = [11, 22, 33, 44, 55, 66];// truncantingarr.length = 3;console.log(arr); //=&gt; [11, 22, 33]// clearingarr.length = 0;console.log(arr); //=&gt; []console.log(arr[2]); //=&gt; undefined 5ã€ å¹³é“ºå¤šç»´æ•°ç»„ä½¿ç”¨Spreadæ“ä½œï¼Œå¯ä»¥å¾ˆå®¹æ˜“åŽ»å¹³é“ºåµŒå¥—å¤šç»´æ•°ç»„ï¼š12const arr = [11, [22, 33], [44, 55], 66];const flatArr = [].concat(...arr); //=&gt; [11, 22, 33, 44, 55, 66] å¯æƒœï¼Œä¸Šé¢çš„æ–¹æ³•ä»…ä»…é€‚ç”¨äºŽäºŒç»´æ•°ç»„ã€‚ä¸è¿‡ï¼Œé€šè¿‡é€’å½’ï¼Œæˆ‘ä»¬å¯ä»¥å¹³é“ºä»»æ„ç»´åº¦çš„åµŒå¥—æ•°ç»„ã€‚123456789unction flattenArray(arr) &#123; const flattened = [].concat(...arr); return flattened.some(item =&gt; Array.isArray(item)) ? flattenArray(flattened) : flattened;&#125;const arr = [11, [22, 33], [44, [55, 66, [77, [88]], 99]]];const flatArr = flattenArray(arr); //=&gt; [11, 22, 33, 44, 55, 66, 77, 88, 99] 6ã€ æ ¼å¼åŒ–JSONä»£ç JSON.stringifyä¸æ­¢å¯ä»¥å°†ä¸€ä¸ªå¯¹è±¡å­—ç¬¦åŒ–ï¼Œè¿˜å¯ä»¥æ ¼å¼åŒ–è¾“å‡ºJSONå¯¹è±¡ã€‚1234567891011121314151617181920const obj = &#123; foo: &#123; bar: [11, 22, 33, 44], baz: &#123; bing: true, boom: 'Hello' &#125; &#125; &#125;;// The third parameter is the number of spaces used to // beautify the JSON output.JSON.stringify(obj, null, 4); // =&gt;"&#123;// =&gt; "foo": &#123;// =&gt; "bar": [// =&gt; 11,// =&gt; 22,// =&gt; 33,// =&gt; 44// =&gt; ],// =&gt; "baz": &#123;// =&gt; "bing": true,// =&gt; "boom": "Hello"// =&gt; &#125;// =&gt; &#125;// =&gt;&#125;" 7ã€ awaitå¤šä¸ªasyncå‡½æ•°åœ¨ä½¿ç”¨async/awaitçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨Promise.allæ¥awaitå¤šä¸ªasyncå‡½æ•°ã€‚1await Promise.all([anAsyncCall(), thisIsAlsoAsync(), oneMore()]) 8ã€JSONå¯¹è±¡å’ŒJSONæ•°ç»„æ·»åŠ åˆ é™¤å…ƒç´ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354ï¼ˆ1ï¼‰çº¯JSONæ–‡æœ¬å¯ä»¥è¿™æ ·var json=&#123; id:"id1", name:"å¼€å¿ƒ"&#125;; //æ·»åŠ json["gender"]="ç”·"json["age"]=26;alert(json.age); //åˆ é™¤delete json["age"];alert(json.age);alert(json.gender);æ­£å¸¸å¯¹è±¡çš„åˆ é™¤ï¼švar o = new Object;o.name = "David";alert(o.name); //è¾“å‡º "David"delete o.name;alert(o.name); //è¾“å‡º "undefined"ï¼ˆ2çº¯jsonå¯¹è±¡çš„è¯å°±æŠŠä»¥ä¸Šçš„var jsonå…ˆjson1 = JSON.parse(json)å°±å¯ä»¥äº†ï¼ˆ3)å¦‚æžœç”¨JSONæ•°ç»„æ–‡æœ¬çš„è¯å¯ä»¥è¿™æ ·var mainArray = [ &#123;"tag" :"ä»»åŠ¡","num":2&#125;, &#123;"tag" :"å·¥ä½œ" ,"num":6&#125;]; mainArray .push(&#123; "tag":"å¼€ä¼š","num":3&#125;); mainArray.shift();//åˆ é™¤æ•°ç»„å¤´å…ƒç´ mainArray.pop();//åˆ é™¤æ•°ç»„å°¾å…ƒç´  ----------------------ç”±objectåˆ›å»ºjsonæ–‡æœ¬æ ¼å¼çš„æ–¹æ³•----------------------&lt;p id="a"&gt;ssss&lt;/p&gt;&lt;script&gt;var data = new Object();data.name = "airuikun";data.sex = "man";var s = JSON.stringify(data);document.getElementById("a").innerHTML = s;&lt;/script&gt; 9ã€éšæœºç”ŸæˆéªŒè¯ç 123456789var str=Math.floor((1 + Math.random()) * 0x10000) .toString(16) .substring(1);// ç»“æžœå¦‚ä¸‹=&gt; 8a51 Reactç¯‡ 1ã€ å…³äºŽthis.setStateæ›´æ–°çš„é—®é¢˜this.setStateæ˜¯å¼‚æ­¥ï¼Œæ‰€ä»¥åœ¨this.setStateä¹‹åŽç«‹å³è°ƒç”¨this.stateæ˜¯èŽ·å–ä¸åˆ°æœ€æ–°çš„æ•°æ®çš„ï¼Œé‚£ä¹ˆæ€Žä¹ˆèŽ·å–æœ€æ–°çš„æ•°æ®å‘¢ï¼Ÿä¸‹é¢ä»‹ç»ä¸‰ä¸ªæ–¹æ³•: 1.å›žè°ƒå‡½æ•°callback12345this.setState(&#123; val: this.state.val+1&#125;, () =&gt; &#123; console.log(this.state.val)&#125;); 2.componentDidUpdate 123componentDidUpdate()&#123; console.log(this.state.val);&#125; åœ¨this.setStateä¹‹åŽåŽ»componentDidUpdateå‡½æ•°ä¸­è°ƒç”¨ï¼Œæ­¤æ—¶çš„this.stateå·²ç»æ›´æ–° 3.å°†this.setStateæ”¾å…¥setTimeoutå‡½æ•°ä¸­1234567let self = this;setTimeout(function () &#123; self.setState(&#123; val:self.state.val+1 &#125;); console.log(self.state.val);&#125;) åœ¨setTimeoutå‡½æ•°ä¸­ï¼Œåœ¨this.setStateä¹‹åŽthis.stateæ˜¯ç«‹å³æ›´æ–°çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥èŽ·å–åˆ°æ›´æ–°åŽçš„æ•°æ®ã€‚ PHPç¯‡php å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šå­—ç¬¦ä¸²çš„å¤šç§æ–¹æ³•1. strstrstrstr() å‡½æ•°æœç´¢ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€æ¬¡å‡ºçŽ°ã€‚è¯¥å‡½æ•°è¿”å›žå­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†ï¼ˆä»ŽåŒ¹é…ç‚¹ï¼‰ã€‚å¦‚æžœæœªæ‰¾åˆ°æ‰€æœç´¢çš„å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›ž falseã€‚ ä»£ç å¦‚ä¸‹:1234567&lt;?php /*å¦‚æ‰‹å†Œä¸Šçš„ä¸¾ä¾‹*/ $email = 'user@example.com'; $domain = strstr($email, '@'); echo $domain; // prints @example.com?&gt; 2. stristrstristr() å‡½æ•°æŸ¥æ‰¾å­—ç¬¦ä¸²åœ¨å¦ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºçŽ°çš„ä½ç½®ã€‚å¦‚æžœæˆåŠŸï¼Œåˆ™è¿”å›žå­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†ï¼ˆä»ŽåŒ¹é…ç‚¹ï¼‰ã€‚å¦‚æžœæ²¡æœ‰æ‰¾åˆ°è¯¥å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›ž falseã€‚ å®ƒå’Œstrstrçš„ä½¿ç”¨æ–¹æ³•å®Œå…¨ä¸€æ ·.å”¯ä¸€çš„åŒºåˆ«æ˜¯stristrä¸åŒºåˆ†å¤§å°å†™. 3. strposstrposå‡½æ•°è¿”å›žbooleanå€¼.FALSEå’ŒTRUEä¸ç”¨å¤šè¯´.ç”¨ â€œ===â€è¿›è¡Œåˆ¤æ–­.strposåœ¨æ‰§è¡Œé€Ÿåº¦ä¸Šéƒ½æ¯”ä»¥ä¸Šä¸¤ä¸ªå‡½æ•°å¿«,å¦å¤–strposæœ‰ä¸€ä¸ªå‚æ•°æŒ‡å®šåˆ¤æ–­çš„ä½ç½®,ä½†æ˜¯é»˜è®¤ä¸ºç©º.æ„æ€æ˜¯åˆ¤æ–­æ•´ä¸ªå­—ç¬¦ä¸².ç¼ºç‚¹æ˜¯å¯¹ä¸­æ–‡çš„æ”¯æŒä¸å¥½. å®žä¾‹112345if(strpos('www.jb51.net','jb51') !== false)&#123; echo 'åŒ…å«jb51'; &#125;else&#123; echo 'ä¸åŒ…å«jb51'; &#125; å®žä¾‹2123$str= 'abc';$needle= 'a';$pos = strpos($str, $needle); // è¿”å›žç¬¬ä¸€æ¬¡æ‰¾åˆ°æ”¹å­—ç¬¦ä¸²çš„ä½ç½®ï¼Œè¿™é‡Œè¿”å›žä¸º1ï¼Œè‹¥æŸ¥ä¸åˆ°åˆ™è¿”å›žFalse 4. explodeç”¨explodeè¿›è¡Œåˆ¤æ–­PHPåˆ¤æ–­å­—ç¬¦ä¸²çš„åŒ…å«ä»£ç å¦‚ä¸‹:123456789function checkstr($str)&#123; $needle ='a';//åˆ¤æ–­æ˜¯å¦åŒ…å«aè¿™ä¸ªå­—ç¬¦ $tmparray = explode($needle,$str); if(count($tmparray)&gt;1)&#123; return true; &#125; else&#123; return false; &#125;&#125; 5ã€substrä¾‹å¦‚æˆ‘ä»¬éœ€è¦åˆ¤æ–­æœ€åŽä¸€ä¸ªå­—ç¬¦æ˜¯ä¸æ˜¯åˆ¶å®šå­—ç¬¦123456&lt;?php/*$str1="&lt;p&gt;è¿™æ˜¯ä¸ªwinrarä¸“ç”¨çš„dllç„¶åŽä¸‹å“¦å•Šä¸é”™çš„dllæ–‡ä»¶ï¼ŒQlogWin32.dll&lt;/p&gt;";if(substr($str1,-8)==".dll&lt;/p&gt;")&#123;echo substr($str1,0,-4);&#125; 6ã€substr_countç»Ÿè®¡â€œå­å­—ç¬¦ä¸²â€åœ¨â€œåŽŸå§‹å­—ç¬¦ä¸²ä¸­å‡ºçŽ°çš„æ¬¡æ•°â€substr_count()å‡½æ•°æœ¬æ˜¯ä¸€ä¸ªå°å­—ç¬¦ä¸²åœ¨ä¸€ä¸ªå¤§å­—ç¬¦ä¸²ä¸­å‡ºçŽ°çš„æ¬¡æ•°ï¼š$number = substr_count(big_string, small_string);æ­£å¥½ä»Šå¤©éœ€è¦ä¸€ä¸ªæŸ¥æ‰¾å­—ç¬¦ä¸²çš„å‡½æ•°ï¼Œè¦å®žçŽ°åˆ¤æ–­å­—ç¬¦ä¸²big_stringæ˜¯å¦åŒ…å«å­—ç¬¦ä¸²small_stringï¼Œè¿”å›žtrueæˆ–fasleï¼› æŸ¥äº†åŠå¤©æ‰‹å†Œæ²¡æœ‰æ‰¾åˆ°çŽ°æˆçš„å‡½æ•°ï¼ŒäºŽæ˜¯æƒ³åˆ°å¯ä»¥ç”¨substr_countå‡½æ•°æ¥å®žçŽ°ä»£ç å¦‚ä¸‹ï¼š123456789101112function check_str($str, $substr)&#123; $nums=substr_count($str,$substr); if ($nums&gt;=1) &#123; return true; &#125; else &#123; return false; &#125;&#125; phpä¸­æ•°ç»„å’Œå­—ç¬¦ä¸²çš„ç›¸äº’è½¬æ¢æ•°ç»„è½¬å­—ç¬¦ä¸²ï¼š1implode('!', $arr);//å°†ä¸€ç»´æ•°ç»„ä»¥ï¼åˆ†éš”ç»„åˆæˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå‚æ•°ä¸€å¯ä»¥ä¸º"" å­—ç¬¦ä¸²è½¬æ•°ç»„ï¼š123explode('!', $str);//å°†å­—ç¬¦ä¸²ä»¥!åˆ†å‰²ä¸ºä¸€ä¸ªä¸€ç»´æ•°ç»„,å‚æ•°ä¸€ä¸å¯ä»¥ä¸º""str_split($str, 3);//å°†å­—ç¬¦ä¸²åˆ†å‰²æˆæ•°ç»„ï¼Œå‚æ•°äºŒå°†å­—ç¬¦ä¸²ä»Žå·¦å‘å³æ¯3ä¸ªå­—ç¬¦åˆ†å‰²ä¸€æ¬¡ï¼Œæœ€åŽçš„ä¸å¤Ÿ3ä¸ªäº† æœ‰å‡ ä¸ªç®—å‡ ä¸ªã€‚ phpçš„strpos() å‡½æ•°åˆ¤æ–­å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æŸå­—ç¬¦ä¸²çš„æ–¹æ³•åˆ¤æ–­æŸå­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æŸå­—ç¬¦ä¸²çš„æ–¹æ³•12345if(strpos('www.idc-gz.com','idc-gz') !== false)&#123; echo 'åŒ…å«';&#125;else&#123; echo 'ä¸åŒ…å«';&#125; PHPä¸­å®žçŽ°ä¸­æ–‡å­—ä¸²æˆªå–æ— ä¹±ç çš„æ–¹æ³•åœ¨PHPä¸­ï¼Œsubstr()å‡½æ•°æˆªå–å¸¦æœ‰ä¸­æ–‡å­—ç¬¦ä¸²çš„è¯ï¼Œå¯èƒ½ä¼šå‡ºçŽ°ä¹±ç ï¼Œè¿™æ˜¯å› ä¸ºä¸­è¥¿æ–‡ä¸€ä¸ªå­—èŠ‚æ‰€å æœ‰çš„å­—èŠ‚æ•°ä¸ä¸€æ ·ï¼Œè€Œsubstrçš„é•¿åº¦å‚æ•°æ˜¯æŒ‰ç…§å­—èŠ‚åŽ»ç®—çš„ï¼Œåœ¨GB2312ç¼–ç æ—¶ï¼Œä¸€ä¸ªä¸­æ–‡å 2ä¸ªå­—èŠ‚ï¼Œè‹±æ–‡ä¸º1ä¸ªå­—èŠ‚ï¼Œè€Œåœ¨UTF-8ç¼–ç å½“ä¸­ï¼Œä¸€ä¸ªä¸­æ–‡å¯èƒ½å æœ‰2ä¸ªæˆ–3ä¸ªå­—èŠ‚ï¼Œè‹±æ–‡æˆ–åŠè§’æ ‡ç‚¹å 1å­—èŠ‚ã€‚ ç›´æŽ¥ä½¿ç”¨PHPå‡½æ•°substræˆªå–ä¸­æ–‡å­—ç¬¦å¯èƒ½ä¼šå‡ºçŽ°ä¹±ç ï¼Œä¸»è¦æ˜¯substrå¯èƒ½ç¡¬ç”Ÿç”Ÿçš„å°†ä¸€ä¸ªä¸­æ–‡å­—ç¬¦â€œé”¯â€æˆä¸¤åŠã€‚è§£å†³åŠžæ³•ï¼š123451ã€ä½¿ç”¨mbstringæ‰©å±•åº“çš„mb_substræˆªå–å°±ä¸ä¼šå‡ºçŽ°ä¹±ç äº†ã€‚2ã€è‡ªå·±ä¹¦å†™æˆªå–å‡½æ•°ï¼Œä½†æ•ˆçŽ‡ä¸å¦‚ç”¨mbstringæ‰©å±•åº“æ¥å¾—é«˜ã€‚3ã€å¦‚æžœä»…æ˜¯ä¸ºäº†è¾“å‡ºæˆªå–çš„ä¸²ï¼Œå¯ç”¨å¦‚ä¸‹æ–¹å¼å®žçŽ°ï¼šsubstr($str, 0, 30).chr(0)ã€‚ substr()å‡½æ•°å¯ä»¥åˆ†å‰²æ–‡å­—ï¼Œä½†è¦åˆ†å‰²çš„æ–‡å­—å¦‚æžœåŒ…æ‹¬ä¸­æ–‡å­—ç¬¦å¾€å¾€ä¼šé‡åˆ°é—®é¢˜ï¼Œè¿™æ—¶å¯ä»¥ç”¨mb_substr()/mb_strcutè¿™ä¸ªå‡½æ•°ï¼Œmb_substr()/mb_strcutçš„ç”¨æ³•ä¸Žsubstr()ç›¸ä¼¼ï¼Œåªæ˜¯åœ¨mb_substr()/mb_strcutæœ€åŽè¦åŠ å…¥å¤šä¸€ä¸ªå‚æ•°ï¼Œä»¥è®¾å®šå­—ç¬¦ä¸²çš„ç¼–ç ï¼Œä½†æ˜¯ä¸€èˆ¬çš„æœåŠ¡å™¨éƒ½æ²¡æ‰“å¼€php_mbstring.dllï¼Œéœ€è¦åœ¨php.iniåœ¨æŠŠphp_mbstring.dllæ‰“å¼€ã€‚ä¸¾ä¸ªä¾‹å­ï¼š123456789&lt;?phpecho mb_substr('è¿™æ ·ä¸€æ¥æˆ‘çš„å­—ç¬¦ä¸²å°±ä¸ä¼šæœ‰ä¹±ç ^_^', 0, 7, 'utf-8');?&gt;è¾“å‡ºï¼šè¿™æ ·ä¸€æ¥æˆ‘çš„å­—&lt;?phpecho mb_strcut('è¿™æ ·ä¸€æ¥æˆ‘çš„å­—ç¬¦ä¸²å°±ä¸ä¼šæœ‰ä¹±ç ^_^', 0, 7, 'utf-8');?&gt;è¾“å‡ºï¼šè¿™æ ·ä¸€ä»Žä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œmb_substræ˜¯æŒ‰å­—æ¥åˆ‡åˆ†å­—ç¬¦ï¼Œè€Œmb_strcutæ˜¯æŒ‰å­—èŠ‚æ¥åˆ‡åˆ†å­—ç¬¦ï¼Œä½†æ˜¯éƒ½ä¸ä¼šäº§ç”ŸåŠä¸ªå­—ç¬¦çš„çŽ°è±¡ã€‚]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>React</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æ€Žæ ·åœ¨JSé‡Œå°½é‡å°‘å†™forå¾ªçŽ¯]]></title>
    <url>%2Fblog%2F2018%2F07%2F29%2F%E6%80%8E%E6%A0%B7%E5%9C%A8JS%E9%87%8C%E5%B0%BD%E9%87%8F%E5%B0%91%E5%86%99for%E5%BE%AA%E7%8E%AF%2F</url>
    <content type="text"><![CDATA[â€œå¾ˆå¤šåœºæ™¯ï¼Œforæ¥çš„æ›´ç›´æŽ¥ï¼Œæ›´æ˜Žäº†ã€‚â€ â€œæœ€å–œæ¬¢forå¾ªçŽ¯äº†ã€‚æƒ³breakå°±breakã€‚å¯èƒ½ä¼šå¤šæ•°æ®çš„è¿˜æ˜¯forå¾ªçŽ¯ã€‚â€ â€œforå¾ªçŽ¯çµæ´»æ˜“ç”¨ï¼Œé«˜é˜¶å‡½æ•°ç®€æ´æ˜Žäº†ï¼Œåˆé€‚çš„ç”¨åˆé€‚æ–¹å¼ï¼Œè¿˜æ˜¯ä¸èƒ½é™åˆ¶çš„å¤ªæ­»å§ï¼Œä¸ç„¶æ€ç»´ä¹Ÿä¼šå—å½±å“â€,è¿™æ˜¯å¾ˆå¤šæ—¶å€™éƒ½ä¼šè€ƒè™‘çš„é—®é¢˜ã€‚ ç”¨å¥½ filterï¼Œmapï¼Œå’Œå…¶å®ƒ ES6 æ–°å¢žçš„é«˜é˜¶éåŽ†å‡½æ•°é—®é¢˜ä¸€ï¼š å°†æ•°ç»„ä¸­çš„ç©ºå€¼åŽ»é™¤123456const arrContainsEmptyVal = [3, 4, 5, 2, 3, undefined, null, 0, ""];ç­”æ¡ˆï¼šconst compact = arr =&gt; arr.filter(Boolean); é—®é¢˜äºŒï¼š å°†æ•°ç»„ä¸­çš„ VIP ç”¨æˆ·ä½™é¢åŠ  1012345678910111213141516const users = [ &#123; username: "Kelly", isVIP: true, balance: 20 &#125;, &#123; username: "Tom", isVIP: false, balance: 19 &#125;, &#123; username: "Stephanie", isVIP: true, balance: 30 &#125;];ç­”æ¡ˆï¼šusers.map( user =&gt; (user.isVIP ? &#123; ...user, balance: user.balance + 10 &#125; : user));è¡¥å……ï¼šæœ‰äººè¯´å¾ˆæ˜Žæ˜¾è¿™é‡Œè¯¥ç”¨ forEachï¼Œä½ ä¸ºäº†ä¸¾ä¾‹è€Œä¸¾ä¾‹ï¼æˆ‘æ¯”è¾ƒæ— è¯­ã€‚forEach æ˜¯ç”¨æ¥æ‰§è¡Œå‰¯ä½œç”¨çš„å¥½å—ï¼Ÿä½ æŠŠåŽŸæ•°æ®éƒ½æ”¹äº†ã€‚æˆ‘çš„ä¹ æƒ¯æ˜¯ä½¿ç”¨ Immutable æ•°æ®ã€‚ä½ è¦æ”¹æ•°æ®çš„è¯ï¼Œå¼€å¿ƒå°±å¥½ã€‚ é—®é¢˜ä¸‰ï¼š åˆ¤æ–­å­—ç¬¦ä¸²ä¸­æ˜¯å¦å«æœ‰å…ƒéŸ³å­—æ¯123456789const randomStr = "hdjrwqpi";ç­”æ¡ˆï¼šconst isVowel = char =&gt; ["a", "e", "o", "i", "u"].includes(char);const containsVowel = str =&gt; [...str].some(isVowel);containsVowel(randomStr); é—®é¢˜å››ï¼š åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å…¨éƒ¨æ˜¯æˆå¹´äºº123456789const users = [ &#123; name: "Jim", age: 23 &#125;, &#123; name: "Lily", age: 17 &#125;, &#123; name: "Will", age: 25 &#125;];ç­”æ¡ˆï¼šusers.every(user =&gt; user.age &gt;= 18); é—®é¢˜äº”ï¼š æ‰¾å‡ºä¸Šé¢ç”¨æˆ·ä¸­çš„æœªæˆå¹´äºº1234567891011const users = [ &#123; name: "Jim", age: 23 &#125;, &#123; name: "Lily", age: 17 &#125;, &#123; name: "Will", age: 25 &#125;];ç­”æ¡ˆï¼šconst findTeen = users =&gt; users.find(user =&gt; user.age &lt; 18);findTeen(users); é—®é¢˜å…­ï¼š å°†æ•°ç»„ä¸­é‡å¤é¡¹æ¸…é™¤12345678const dupArr = [1, 2, 3, 3, 3, 3, 6, 7];ç­”æ¡ˆï¼šconst uniq = arr =&gt; [...new Set(arr)];uniq(dupArr); é—®é¢˜ä¸ƒï¼š ç”Ÿæˆç”±éšæœºæ•´æ•°ç»„æˆçš„æ•°ç»„ï¼Œæ•°ç»„é•¿åº¦å’Œå…ƒç´ å¤§å°å¯è‡ªå®šä¹‰12345ç­”æ¡ˆï¼šconst genNumArr = (length, limit) =&gt; Array.from(&#123; length &#125;, _ =&gt; Math.floor(Math.random() * limit));genNumArr(10, 100); ç†è§£å’Œç†Ÿç»ƒä½¿ç”¨ reduceé—®é¢˜ä¸€ï¼š ä¸å€ŸåŠ©åŽŸç”Ÿé«˜é˜¶å‡½æ•°ï¼Œå®šä¹‰ reduce123456ç­”æ¡ˆï¼šconst reduce = (f, acc, arr) =&gt; &#123; if (arr.length === 0) return acc; const [head, ...tail] = arr; return reduce(f, f(head, acc), tail);&#125;; é—®é¢˜äºŒï¼š å°†å¤šå±‚æ•°ç»„è½¬æ¢æˆä¸€å±‚æ•°ç»„12345678910const nestedArr = [1, 2, [3, 4, [5, 6]]];ç­”æ¡ˆï¼šconst flatten = arr =&gt; arr.reduce( (flat, next) =&gt; flat.concat(Array.isArray(next) ? flatten(next) : next), [] ); é—®é¢˜ä¸‰ï¼šå°†ä¸‹é¢æ•°ç»„è½¬æˆå¯¹è±¡ï¼Œkey/value å¯¹åº”é‡Œå±‚æ•°ç»„çš„ä¸¤ä¸ªå€¼123456789const objLikeArr = [["name", "Jim"], ["age", 18], ["single", true]];ç­”æ¡ˆï¼šconst fromPairs = pairs =&gt; pairs.reduce((res, pair) =&gt; ((res[pair[0]] = pair[1]), res), &#123;&#125;);fromPairs(objLikeArr); é—®é¢˜å››ï¼š å–å‡ºå¯¹è±¡ä¸­çš„æ·±å±‚å±žæ€§123456789const deepAttr = &#123; a: &#123; b: &#123; c: 15 &#125; &#125; &#125;;ç­”æ¡ˆï¼šconst pluckDeep = path =&gt; obj =&gt; path.split(".").reduce((val, attr) =&gt; val[attr], obj);pluckDeep("a.b.c")(deepAttr); é—®é¢˜äº”ï¼šå°†ç”¨æˆ·ä¸­çš„ç”·æ€§å’Œå¥³æ€§åˆ†åˆ«æ”¾åˆ°ä¸åŒçš„æ•°ç»„é‡Œï¼š1234567891011121314151617181920const users = [ &#123; name: "Adam", age: 30, sex: "male" &#125;, &#123; name: "Helen", age: 27, sex: "female" &#125;, &#123; name: "Amy", age: 25, sex: "female" &#125;, &#123; name: "Anthony", age: 23, sex: "male" &#125;,];ç­”æ¡ˆï¼šconst partition = (arr, isValid) =&gt; arr.reduce( ([pass, fail], elem) =&gt; isValid(elem) ? [[...pass, elem], fail] : [pass, [...fail, elem]], [[], []], ); const isMale = person =&gt; person.sex === "male";const [maleUser, femaleUser] = partition(users, isMale); é—®é¢˜å…­ï¼š reduce çš„è®¡ç®—è¿‡ç¨‹ï¼Œåœ¨èŒƒç•´è®ºé‡Œé¢å« catamorphismï¼Œå³ä¸€ç§è¿žæŽ¥çš„å˜å½¢ã€‚å’Œå®ƒç›¸åçš„å˜å½¢å« anamorphismã€‚çŽ°åœ¨æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå’Œ reduce è®¡ç®—è¿‡ç¨‹ç›¸åçš„å‡½æ•° unfoldï¼ˆæ³¨ï¼šreduce åœ¨ Haskell é‡Œé¢å« foldï¼Œå¯¹åº” unfoldï¼‰ 12345678910111213const unfold = (f, seed) =&gt; &#123; const go = (f, seed, acc) =&gt; &#123; const res = f(seed); return res ? go(f, res[1], acc.concat(res[0])) : acc; &#125;; return go(f, seed, []);&#125;;æ ¹æ®è¿™ä¸ª unfold å‡½æ•°ï¼Œå®šä¹‰ä¸€ä¸ª Python é‡Œé¢çš„ range å‡½æ•°ã€‚ç­”æ¡ˆï¼šconst range = (min, max, step = 1) =&gt; unfold(x =&gt; x &lt; max &amp;&amp; [x, x + step], min); ç”¨é€’å½’ä»£æ›¿å¾ªçŽ¯ï¼ˆå¯ä»¥breakï¼ï¼‰é—®é¢˜ä¸€ï¼š å°†ä¸¤ä¸ªæ•°ç»„æ¯ä¸ªå…ƒç´ ä¸€ä¸€å¯¹åº”ç›¸åŠ ã€‚æ³¨æ„ï¼Œç¬¬äºŒä¸ªæ•°ç»„æ¯”ç¬¬ä¸€ä¸ªå¤šå‡ºä¸¤ä¸ªï¼Œä¸è¦æŠŠç¬¬äºŒä¸ªæ•°ç»„éåŽ†å®Œã€‚12345678910111213141516const num1 = [3, 4, 5, 6, 7];const num2 = [43, 23, 5, 67, 87, 3, 6];ç­”æ¡ˆï¼šconst zipWith = f =&gt; xs =&gt; ys =&gt; &#123; if (xs.length === 0 || ys.length === 0) return []; const [xHead, ...xTail] = xs; const [yHead, ...yTail] = ys; return [f(xHead)(yHead), ...zipWith(f)(xTail)(yTail)];&#125;;const add = x =&gt; y =&gt; x + y;zipWith(add)(num1)(num2); é—®é¢˜äºŒï¼š å°† Stark å®¶æ—æˆå‘˜æå–å‡ºæ¥ã€‚æ³¨æ„ï¼Œç›®æ ‡æ•°æ®åœ¨æ•°ç»„å‰é¢ï¼Œä½¿ç”¨ filter æ–¹æ³•éåŽ†æ•´ä¸ªæ•°ç»„æ˜¯æµªè´¹ã€‚123456789101112131415161718192021222324252627const houses = [ "Eddard Stark", "Catelyn Stark", "Rickard Stark", "Brandon Stark", "Rob Stark", "Sansa Stark", "Arya Stark", "Bran Stark", "Rickon Stark", "Lyanna Stark", "Tywin Lannister", "Cersei Lannister", "Jaime Lannister", "Tyrion Lannister", "Joffrey Baratheon"];ç­”æ¡ˆï¼šconst takeWhile = f =&gt; ([head, ...tail]) =&gt; f(head) ? [head, ...takeWhile(f)(tail)] : [];const isStark = name =&gt; name.toLowerCase().includes("stark");takeWhile(isStark)(houses); é—®é¢˜äºŒï¼š æ‰¾å‡ºæ•°ç»„ä¸­çš„å¥‡æ•°ï¼Œç„¶åŽå–å‡ºå‰4ä¸ªï¼š12345678910111213141516const numList = [1, 3, 11, 4, 2, 5, 6, 7];ç­”æ¡ˆï¼šconst takeFirst = (limit, f, arr) =&gt; &#123; if (limit === 0 || arr.length === 0) return []; const [head, ...tail] = arr; return f(head) ? [head, ...takeFirst(limit - 1, f, tail)] : takeFirst(limit, f, tail);&#125;;const isOdd = n =&gt; n % 2 === 1;takeFirst(4, isOdd, numList); ä½¿ç”¨é«˜é˜¶å‡½æ•°éåŽ†æ•°ç»„æ—¶å¯èƒ½é‡åˆ°çš„é™·é˜±é—®é¢˜ä¸€ï¼š ä»Žé•¿åº¦ä¸º 100 ä¸‡çš„éšæœºæ•´æ•°ç»„æˆçš„æ•°ç»„ä¸­å–å‡ºå¶æ•°ï¼Œå†æŠŠæ‰€æœ‰æ•°å­—ä¹˜ä»¥ 3123456789101112131415161718192021222324252627282930// ç”¨æˆ‘ä»¬åˆšåˆšå®šä¹‰çš„è¾…åŠ©å‡½æ•°æ¥ç”Ÿæˆç¬¦åˆè¦æ±‚çš„æ•°ç»„const bigArr = genNumArr(1e6, 100);ç­”æ¡ˆï¼šconst isEven = num =&gt; num % 2 === 0;const triple = num =&gt; num * 3;bigArr.filter(isEven).map(triple);// æ³¨æ„ï¼Œä¸Šé¢çš„è§£å†³æ–¹æ¡ˆå°†æ•°ç»„éåŽ†äº†ä¸¤æ¬¡ï¼Œæ— ç–‘æ˜¯æµªè´¹ã€‚å¦‚æžœå†™ for å¾ªçŽ¯ï¼Œåªç”¨éåŽ†ä¸€æ¬¡ï¼šconst results = [];for (let i = 0; i &lt; bigArr.length; i++) &#123; if (isEven(bigArr[i])) &#123; results.push(triple(bigArr[i])); &#125;&#125;// æµ‹è¯•ï¼Œå…ˆ filter å† map çš„æ–¹æ³•è€—æ—¶ 105.024 msï¼Œè€Œé‡‡ç”¨ for å¾ªçŽ¯çš„æ–¹æ³•è€—æ—¶ä»… 25.598 msï¼é‚£æ˜¯å¦è¯´æ˜Žé‡åˆ°æ­¤ç±»æƒ…å†µå¿…é¡»ç”¨ for å¾ªçŽ¯è§£å†³å‘¢? Noï¼# Transduceå…ˆç”¨ reduce æ¥å®šä¹‰ filter å’Œ mapï¼Œè‡³äºŽä¸ºä»€ä¹ˆè¿™æ ·åšç­‰ä¸‹å†è§£é‡Šã€‚```hconst filter = (f, arr) =&gt; arr.reduce((acc, val) =&gt; (f(val) &amp;&amp; acc.push(val), acc), []);const map = (f, arr) =&gt; arr.reduce((acc, val) =&gt; (acc.push(f(val)), acc), []); é‡æ–°å®šä¹‰çš„ filter å’Œ map æœ‰å…±æœ‰çš„é€»è¾‘ã€‚æˆ‘ä»¬æŠŠè¿™éƒ¨åˆ†å…±æœ‰çš„é€»è¾‘å«åš reducerã€‚æœ‰äº†å…±æœ‰çš„é€»è¾‘åŽï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥åœ°æŠ½è±¡ï¼ŒæŠŠ reducer æŠ½ç¦»å‡ºæ¥ï¼Œç„¶åŽä¼ å…¥ filter å’Œ mapï¼š123456const filter = f =&gt; reducer =&gt; (acc, value) =&gt; &#123; if (f(value)) return reducer(acc, value); return acc;&#125;;const map = f =&gt; reducer =&gt; (acc, value) =&gt; reducer(acc, f(value)); çŽ°åœ¨ filter å’Œ map çš„å‡½æ•° signature ä¸€æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œå‡½æ•°ç»„åˆï¼ˆfunction compositionï¼‰äº†ã€‚123const pushReducer = (acc, value) =&gt; (acc.push(value), acc);bigNum.reduce(map(triple)(filter(isEven)(pushReducer)), []); ä½†æ˜¯è¿™æ ·åµŒå¥—å†™æ³•æ˜“è¯»æ€§å¤ªå·®ï¼Œå¾ˆå®¹æ˜“å‡ºé”™ã€‚æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªå·¥å…·å‡½æ•°æ¥è¾…åŠ©å‡½æ•°ç»„åˆï¼š1const pipe = (...fns) =&gt; (...args) =&gt; fns.reduce((fx, fy) =&gt; fy(fx), ...args); ç„¶åŽæˆ‘ä»¬å°±å¯ä»¥ä¼˜é›…åœ°ç»„åˆå‡½æ•°äº†ï¼š1234567bigNum.reduce( pipe( filter(isEven), map(triple) )(pushReducer), []); ç»è¿‡æµ‹è¯•ï¼ˆç”¨ console.time()/console.timeEnd()ï¼‰,ä¸Šé¢çš„å†™æ³•è€—æ—¶ 33.898 msï¼Œä»…æ¯” for å¾ªçŽ¯æ…¢ 8 msã€‚ä¸ºäº†ä»£ç çš„æ˜“ç»´æŠ¤æ€§å’Œæ˜“è¯»æ€§ï¼Œè¿™ç‚¹æ€§èƒ½ä¸Šçš„å¾®å°ç‰ºç‰²ï¼Œæˆ‘è®¤ä¸ºæ˜¯å¯ä»¥æŽ¥å—çš„ã€‚è¿™ç§å†™æ³•å« transduceã€‚æœ‰å¾ˆå¤šå·¥å…·åº“æä¾›äº† transducer å‡½æ•°ã€‚æ¯”å¦‚ transducers-jsã€‚é™¤äº†ç”¨ transducer æ¥éåŽ†æ•°ç»„ï¼Œè¿˜èƒ½ç”¨å®ƒæ¥éåŽ†å¯¹è±¡å’Œå…¶å®ƒæ•°æ®é›†ã€‚åŠŸèƒ½ç›¸å½“å¼ºå¤§ã€‚ for å¾ªçŽ¯å’Œ for â€¦ of å¾ªçŽ¯çš„åŒºåˆ«for â€¦ of å¾ªçŽ¯æ˜¯åœ¨ ES6 å¼•å…¥ Iterator åŽï¼Œä¸ºäº†éåŽ† Iterable æ•°æ®ç±»åž‹æ‰äº§ç”Ÿçš„ã€‚EcmaScript çš„ Iterable æ•°æ®ç±»åž‹æœ‰æ•°ç»„ï¼Œå­—ç¬¦ä¸²ï¼ŒSet å’Œ Mapã€‚for â€¦ of å¾ªçŽ¯å±žäºŽé‡åž‹çš„æ“ä½œï¼ˆå…·ä½“ç»†èŠ‚æˆ‘ä¹Ÿæ²¡äº†è§£è¿‡ï¼‰ï¼Œå¦‚æžœç”¨ AirBNB çš„ ESLint è§„åˆ™ï¼Œåœ¨ä»£ç ä¸­ä½¿ç”¨ for â€¦ of æ¥éåŽ†æ•°ç»„æ˜¯ä¼šè¢«ç¦æ­¢çš„ã€‚é‚£ä¹ˆï¼Œfor â€¦ of å¾ªçŽ¯åº”è¯¥åœ¨å“ªäº›åœºæ™¯ä½¿ç”¨å‘¢ï¼Ÿç›®å‰æˆ‘å‘çŽ°çš„åˆç†ä½¿ç”¨åœºæ™¯æ˜¯éåŽ†è‡ªå®šä¹‰çš„ Iterableã€‚æ¥çœ‹è¿™ä¸ªï¼š 12345678910111213141516171819202122232425262728293031323334353637383940é—®é¢˜ï¼š å°† Stark å®¶æ—æˆå‘˜åå­—éåŽ†ï¼Œæ¯æ¬¡éåŽ†æš‚åœä¸€ç§’ï¼Œç„¶åŽå°†å½“å‰éåŽ†çš„åå­—æ‰“å°æ¥ï¼ŒéåŽ†å®ŒåŽå›žåˆ°ç¬¬ä¸€ä¸ªå…ƒç´ å†é‡æ–°å¼€å§‹ï¼Œæ— é™å¾ªçŽ¯ã€‚```hconst starks = [ &quot;Eddard Stark&quot;, &quot;Catelyn Stark&quot;, &quot;Rickard Stark&quot;, &quot;Brandon Stark&quot;, &quot;Rob Stark&quot;, &quot;Sansa Stark&quot;, &quot;Arya Stark&quot;, &quot;Bran Stark&quot;, &quot;Rickon Stark&quot;, &quot;Lyanna Stark&quot;];ç­”æ¡ˆï¼šfunction* repeatedArr(arr) &#123; let i = 0; while (true) &#123; yield arr[i++ % arr.length]; &#125;&#125;const infiniteNameList = repeatedArr(starks);const wait = ms =&gt; new Promise(resolve =&gt; &#123; setTimeout(() =&gt; &#123; resolve(); &#125;, ms); &#125;);(async () =&gt; &#123; for (const name of infiniteNameList) &#123; await wait(1000); console.log(name); &#125;&#125;)(); å‰é¢è®²åˆ°çš„é—®é¢˜åŸºæœ¬è¦†ç›–äº†å¤§éƒ¨åˆ†éœ€è¦ä½¿ç”¨ for å¾ªçŽ¯çš„åœºæ™¯ã€‚é‚£æ˜¯å¦æˆ‘ä»¬å¯ä»¥ä¿è¯æ°¸è¿œä¸ç”¨ for å¾ªçŽ¯å‘¢ï¼Ÿå…¶å®žä¸æ˜¯ã€‚å¸¸ç”¨çš„æ•°ç»„åŽŸåž‹é“¾ä¸Šçš„ mapï¼Œfilter ç­‰é«˜é˜¶å‡½æ•°ï¼Œåº•å±‚å…¶å®žæ˜¯ç”¨ for å¾ªçŽ¯å®žçŽ°çš„ã€‚åœ¨éœ€è¦å†™ä¸€äº›åº•å±‚ä»£ç çš„æ—¶å€™ï¼Œè¿˜æ˜¯éœ€è¦å†™ for å¾ªçŽ¯çš„ã€‚]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°ç¨‹åºä¹‹æ—…(äº”)]]></title>
    <url>%2Fblog%2F2018%2F07%2F22%2F%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B9%8B%E6%97%85-%E4%BA%94%2F</url>
    <content type="text"><![CDATA[å°ç¨‹åºæ˜¯ä¸€ç§æ–°çš„å¼€æ”¾èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°å¼€å‘ä¸€ä¸ªå°ç¨‹åºã€‚å°ç¨‹åºå¯ä»¥åœ¨å¾®ä¿¡å†…è¢«ä¾¿æ·åœ°èŽ·å–å’Œä¼ æ’­ï¼ŒåŒæ—¶å…·æœ‰å‡ºè‰²çš„ä½¿ç”¨ä½“éªŒã€‚è¿™æ˜¯å…³äºŽå°ç¨‹åºçš„æ•°æ®æœ¬åœ°å­˜å‚¨çš„æ—…è¡Œã€‚ å‰è¨€æ•°æ®å­˜å‚¨æ˜¯éžå¸¸é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚é¡µé¢ä¹‹é—´çš„åˆ‡æ¢ï¼Œå‚æ•°ä¿å­˜æ˜¯å¿…ä¸å¯å°‘çš„ã€‚html5çš„æœ¬åœ°å­˜å‚¨å…¶å®žä¸æ€Žä¹ˆå¥½ä½¿ï¼Œå› ä¸ºå®ƒåªæ”¯æŒå­˜å‚¨å­—ç¬¦ä¸²ï¼Œå¯¹äºŽobjectå¯¹è±¡ï¼Œå°±åªèƒ½ç”¨åºåˆ—åŒ–çš„æ–¹å¼æ¥å›žæŠ˜è…¾ï¼Œä¿©å­—â€”â€”éº»çƒ¦ã€‚è€Œè‡ªä»Žæœ‰äº†å°ç¨‹åºçš„æ•°æ®å­˜å‚¨ï¼Œå†™ä»£ç çš„æ•ˆçŽ‡æ˜Žæ˜¾ä¸Šæ¥äº†ï¼Œè¿™å¯éƒ½æ˜¯å’±å°ç¨‹åºçš„æ•°æ®å­˜å‚¨çš„åŠŸåŠ³å“‡ï¼ é‚£ä¹ˆæ¥çœ‹ä¸ªéœ€æ±‚ï¼š åšä¸€ä¸ªæŒ‰é’®ã€‚è¦æ±‚ç‚¹å‡»æŒ‰é’®åŽå¯ä»¥æµè§ˆç›¸å†Œï¼Œé€‰æ‹©ä¸€å¼ å›¾ç‰‡ï¼Œå¯ä»¥ä¿å­˜åœ¨å°ç¨‹åºé‡Œã€‚å½“ä¸‹æ¬¡æ‰“å¼€å°ç¨‹åºæ—¶ï¼Œè¿™å¼ å›¾ç‰‡è¿˜å­˜åœ¨ã€‚ å‡†å¤‡å·¥ä½œ wx.chooseImageï¼šé€‰æ‹©å›¾ç‰‡ wx.saveFile(OBJ)ï¼šå°†ä¸´æ—¶å›¾ç‰‡ä¿å­˜åœ¨æœ¬åœ° wx.setStorage(OBJ)ï¼šä¿å­˜å›¾ç‰‡çš„è·¯å¾„ã€‚ å½“æˆ‘ä»¬é¢„è§ˆå®Œä¸€å¼ å›¾ç‰‡å¹¶é€‰ä¸­åŽï¼Œé¦–å…ˆè¦å°†è¿™ä¸ªä¸´æ—¶æ–‡ä»¶ä¿å­˜åœ¨æœ¬åœ°ï¼ŒæˆåŠŸåŽä¼šè¿”å›žå›¾ç‰‡çš„æœ¬åœ°ä¿å­˜è·¯å¾„äº†ï¼Œç„¶åŽæˆ‘ä»¬å°±ä¿å­˜è¿™ä¸ªè·¯å¾„ï¼Œä¸‹æ¬¡è¿›æ¥æ—¶ç›´æŽ¥è¯»å–å°±è¡Œäº†ã€‚å¥½äº†ï¼Œç†é¡ºäº†æ€è·¯ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ä»£ç ï¼š 1234567891011121314151617// &lt;!--index.wxml--&gt;&lt;view class="container"&gt; &lt;view class="userinfo"&gt; &lt;button wx:if="&#123;&#123;!hasUserInfo &amp;&amp; canIUse&#125;&#125;" open-type="getUserInfo" bindgetuserinfo="getUserInfo"&gt; èŽ·å–å¤´åƒæ˜µç§° &lt;/button&gt; &lt;block wx:else&gt; &lt;image bindtap="bindViewTap" class="userinfo-avatar" src="&#123;&#123;userInfo.avatarUrl&#125;&#125;" mode="cover"&gt;&lt;/image&gt; &lt;text class="userinfo-nickname"&gt;&#123;&#123;userInfo.nickName&#125;&#125;&lt;/text&gt; &lt;/block&gt; &lt;/view&gt; &lt;view class="usermotto"&gt; &lt;text class="user-motto"&gt;&#123;&#123;motto&#125;&#125;&lt;/text&gt; &lt;button bindtap='keepImg'&gt;ä¿å­˜å›¾ç‰‡&lt;/button&gt; &lt;button bindtap='deleteImg'&gt;åˆ é™¤å›¾ç‰‡&lt;/button&gt; &lt;image src='&#123;&#123;imgPath&#125;&#125;'&gt;&lt;/image&gt; &lt;/view&gt;&lt;/view&gt; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107//index.js//èŽ·å–åº”ç”¨å®žä¾‹const app = getApp()Page(&#123; data: &#123; motto: 'Hello World', userInfo: &#123;&#125;, hasUserInfo: false, canIUse: wx.canIUse('button.open-type.getUserInfo'), imgPath:'' &#125;, //äº‹ä»¶å¤„ç†å‡½æ•° bindViewTap: function() &#123; wx.navigateTo(&#123; url: '../logs/logs' &#125;) &#125;, keepImg:function()&#123; var that = this; // æµè§ˆæ–‡ä»¶ wx.chooseImage(&#123; count:1, sizeType: ['original', 'compressed'], // å¯ä»¥æŒ‡å®šæ˜¯åŽŸå›¾è¿˜æ˜¯åŽ‹ç¼©å›¾ï¼Œé»˜è®¤äºŒè€…éƒ½æœ‰ sourceType: ['album', 'camera'], //// å¯ä»¥æŒ‡å®šæ¥æºæ˜¯ç›¸å†Œè¿˜æ˜¯ç›¸æœºï¼Œé»˜è®¤äºŒè€…éƒ½æœ‰ success: function(res) &#123; // è¿”å›žé€‰å®šç…§ç‰‡çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„åˆ—è¡¨ï¼ŒtempFilePathå¯ä»¥ä½œä¸ºimgæ ‡ç­¾çš„srcå±žæ€§æ˜¾ç¤ºå›¾ç‰‡ var tempFilePaths = res.tempFilePaths; console.log(tempFilePaths) //å°†æœ¬åœ°ç…§ç‰‡ä¿å­˜åœ¨å°ç¨‹åºå†… wx.saveFile(&#123; tempFilePath: tempFilePaths[0], success:function(res)&#123; var savedFilePath = res.savedFilePath; // å›¾ç‰‡æˆåŠŸä¹‹åŽå­˜å‚¨åœ¨æœ¬åœ°çš„è·¯å¾„ console.log(savedFilePath) if (!wx.getStorageSync('storageImgPath')) &#123; //æ•°æ®å­˜å‚¨ï¼Œä¿å­˜å›¾ç‰‡çš„è·¯å¾„ wx.setStorageSync('storageImgPath', savedFilePath) &#125; that.setData(&#123; imgPath: wx.getStorageSync('storageImgPath')&#125;) &#125; &#125;) &#125;, &#125;) &#125;, deleteImg:function()&#123; wx.removeStorageSync('storageImgPath'); //ä»Žæ•°æ®ç¼“å­˜ä¸­åˆ é™¤ var that = this; wx.getSavedFileList(&#123; //èŽ·å–æœ¬åœ°çš„æ–‡ä»¶åˆ—è¡¨ success:function(res)&#123; console.log(res.errMsg); var files = res.fileList; if(res.fileList.length&gt;0)&#123; // åˆ é™¤ç¬¬ä¸€å¼  wx.removeSavedFile(&#123; filePath:res.fileList[0].filePath, success:function(res)&#123; // æç¤ºè¯­ wx.showToast(&#123; title: 'åˆ é™¤æˆåŠŸ', icon:'success', duration:2000 &#125;) &#125; &#125;) &#125; &#125; &#125;) &#125;, onLoad: function () &#123; if (app.globalData.userInfo) &#123; this.setData(&#123; userInfo: app.globalData.userInfo, hasUserInfo: true &#125;) &#125; else if (this.data.canIUse)&#123; // ç”±äºŽ getUserInfo æ˜¯ç½‘ç»œè¯·æ±‚ï¼Œå¯èƒ½ä¼šåœ¨ Page.onLoad ä¹‹åŽæ‰è¿”å›ž // æ‰€ä»¥æ­¤å¤„åŠ å…¥ callback ä»¥é˜²æ­¢è¿™ç§æƒ…å†µ app.userInfoReadyCallback = res =&gt; &#123; this.setData(&#123; userInfo: res.userInfo, hasUserInfo: true &#125;) &#125; &#125; else &#123; // åœ¨æ²¡æœ‰ open-type=getUserInfo ç‰ˆæœ¬çš„å…¼å®¹å¤„ç† wx.getUserInfo(&#123; success: res =&gt; &#123; app.globalData.userInfo = res.userInfo this.setData(&#123; userInfo: res.userInfo, hasUserInfo: true &#125;) &#125; &#125;) &#125; &#125;, getUserInfo: function(e) &#123; console.log(e) app.globalData.userInfo = e.detail.userInfo this.setData(&#123; userInfo: e.detail.userInfo, hasUserInfo: true &#125;) &#125;&#125;) æ•ˆæžœ]]></content>
      <categories>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iTerm2 + oh my zshæ‰“é€ æœ€å¼ºMacç»ˆç«¯]]></title>
    <url>%2Fblog%2F2018%2F07%2F22%2FiTerm2-oh-my-zsh-agnoster-%E6%89%93%E9%80%A0%E6%9C%80%E5%BC%BAMac%E7%BB%88%E7%AB%AF%2F</url>
    <content type="text"><![CDATA[iTerm2 + oh my zsh æ‰“é€ æœ€å¼ºMacç»ˆç«¯ #å®‰è£…iTerm2iTerm2å®˜æ–¹ä¸‹è½½åœ°å€ http://www.iterm2.com/downloads.html #å®‰è£… oh-my-zsh 1curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh #é…ç½®åˆ›å»ºé…ç½®æ–‡ä»¶1cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc è®¾ç½®zshä¸ºé»˜è®¤çš„shellchsh -s /bin/zsh æ­¤æ—¶ï¼Œzshå·²ç»å®‰è£…æˆåŠŸ æŽ¥æ¥ä¸‹ï¼Œå¯ä»¥åŽ»https://github.com/robbyrussell/oh-my-zsh/wiki/themes ä¸Šä¸‹è½½ä¸€äº›zshçš„ä¸»é¢˜ï¼Œæ”¾ç½®åœ¨ ~/.oh-my-zsh/themes ç›®å½•ç›®å½•ä¸‹ï¼Œå¹¶åœ¨é…ç½®æ–‡ä»¶.zshrcä¸­è¿›è¡Œé€‚å½“çš„é…ç½®ã€‚å…¶å®žï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œthemesç›®å½•ä¸‹å·²æœ‰å¾ˆå¤šæ ·å¼ã€‚]]></content>
      <categories>
        <category>è½¯ä»¶</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>è½¯ä»¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Async Functions (å¼‚æ­¥å‡½æ•°)]]></title>
    <url>%2Fblog%2F2018%2F07%2F15%2FAsync-Functions-%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%2F</url>
    <content type="text"><![CDATA[ECMAScript 2017 æ–°ç‰¹æ€§ Async Functions(å¼‚æ­¥å‡½æ•°) ã€‚ async(å¼‚æ­¥) å‡½æ•°å˜ä½“ä»¥ä¸‹æ˜¯å·²ç»å­˜åœ¨çš„å¼‚æ­¥å‡½æ•°å˜ä½“ã€‚è¯·æ³¨æ„æ— å¤„ä¸åœ¨çš„ async å…³é”®å­—ã€‚ å¼‚æ­¥å‡½æ•°å£°æ˜Žï¼š async function foo() {} å¼‚æ­¥å‡½æ•°è¡¨è¾¾å¼ï¼š const foo = async function () {}; å¼‚æ­¥å‡½æ•°å®šä¹‰ï¼šlet obj = { async foo() {} } å¼‚æ­¥ç®­å¤´å‡½æ•°ï¼š const foo = async () =&gt; {}; async(å¼‚æ­¥) å‡½æ•°æ€»æ˜¯è¿”å›ž Promisesasync(å¼‚æ­¥) å‡½æ•°çš„ Promise å®ŒæˆçŠ¶æ€ï¼š 1234567async function asyncFunc() &#123; return 123;&#125; asyncFunc().then(x =&gt; console.log(x)); // 123 async(å¼‚æ­¥) å‡½æ•°çš„ Promise æ‹’ç»çŠ¶æ€ï¼š 1234567async function asyncFunc() &#123; throw new Error('Problem!');&#125; asyncFunc().catch(err =&gt; console.log(err)); // Error: Problem! é€šè¿‡ await å¤„ç† async(å¼‚æ­¥) è®¡ç®—çš„ç»“æžœå’Œé”™è¯¯awaitï¼ˆåªå…è®¸åœ¨ async(å¼‚æ­¥) å‡½æ•°å†…éƒ¨ä½¿ç”¨ï¼‰ç­‰å¾…å…¶æ“ä½œå¯¹è±¡ Promise è¿”å›žï¼š å¦‚æžœ Promise æ˜¯å®ŒæˆçŠ¶æ€ï¼Œawait çš„ç»“æžœæ˜¯å®Œæˆæ€çš„å€¼ã€‚ å¦‚æžœ Promise æ˜¯æ‹’ç»çŠ¶æ€ï¼Œawait ä¼šæŠ›å‡ºæ‹’ç»å€¼ã€‚ å¤„ç†å•ä¸ª async(å¼‚æ­¥) è¿”å›žå€¼ï¼š123456789101112async function asyncFunc() &#123; const result = await otherAsyncFunc(); console.log(result);&#125; // ç­‰ä»·äºŽ:function asyncFunc() &#123; return otherAsyncFunc() .then(result =&gt; &#123; console.log(result); &#125;);&#125; æŒ‰é¡ºåºå¤„ç†å¤šä¸ª async(å¼‚æ­¥) è¿”å›žå€¼ï¼š 123456789101112131415161718async function asyncFunc() &#123; const result1 = await otherAsyncFunc1(); console.log(result1); const result2 = await otherAsyncFunc2(); console.log(result2);&#125; // ç­‰ä»·äºŽ:function asyncFunc() &#123; return otherAsyncFunc1() .then(result1 =&gt; &#123; console.log(result1); return otherAsyncFunc2(); &#125;) .then(result2 =&gt; &#123; console.log(result2); &#125;);&#125; å¹¶è¡Œå¤„ç†å¤šä¸ª async(å¼‚æ­¥) è¿”å›žå€¼ï¼š 123456789101112131415161718async function asyncFunc() &#123; const [result1, result2] = await Promise.all([ otherAsyncFunc1(), otherAsyncFunc2(), ]); console.log(result1, result2);&#125; // ç­‰ä»·äºŽ:function asyncFunc() &#123; return Promise.all([ otherAsyncFunc1(), otherAsyncFunc2(), ]) .then([result1, result2] =&gt; &#123; console.log(result1, result2); &#125;);&#125; é”™è¯¯å¤„ç†ï¼š 123456789101112131415async function asyncFunc() &#123; try &#123; await otherAsyncFunc(); &#125; catch (err) &#123; console.error(err); &#125;&#125; // ç­‰ä»·äºŽ:function asyncFunc() &#123; return otherAsyncFunc() .catch(err =&gt; &#123; console.error(err); &#125;);&#125; ç†è§£ async(å¼‚æ­¥) å‡½æ•°è§£é‡Š async(å¼‚æ­¥) å‡½æ•°ä¹‹å‰ï¼Œæˆ‘éœ€è¦è§£é‡Šä¸€ä¸‹å¦‚ä½•ç»„åˆä½¿ç”¨ Promises å’Œ Generator ï¼Œé€šè¿‡çœ‹èµ·æ¥åŒæ­¥çš„ä»£ç æ¥æ‰§è¡Œ async(å¼‚æ­¥) æ“ä½œã€‚ å¯¹äºŽèƒ½å¤Ÿ async(å¼‚æ­¥) è®¡ç®—å…¶ä¸€æ¬¡æ€§ç»“æžœçš„å‡½æ•°ï¼Œä½œä¸º ES6 ä¸€éƒ¨åˆ†çš„ Promises å·²ç»å˜å¾—æµè¡Œèµ·æ¥ã€‚ä¸€ä¸ªä¾‹å­æ˜¯ å®¢æˆ·ç«¯ fetch API ï¼Œå®ƒæ˜¯ XMLHttpRequest èŽ·å–æ•°æ®çš„æ›¿ä»£æ–¹æ³•ã€‚ä½¿ç”¨ç¤ºä¾‹å¦‚ä¸‹ï¼š 123456789101112function fetchJson(url) &#123; return fetch(url) .then(request =&gt; request.text()) .then(text =&gt; &#123; return JSON.parse(text); &#125;) .catch(error =&gt; &#123; console.log(`ERROR: $&#123;error.stack&#125;`); &#125;);&#125;fetchJson('http://example.com/some_file.json').then(obj =&gt; console.log(obj)); é€šè¿‡ generator æ¥ç¼–å†™å¼‚æ­¥ä»£ç co æ˜¯ä¸€ä¸ªä½¿ç”¨ Promise å’Œ generator æ¥å®žçŽ°çœ‹ä¼¼åŒæ­¥ç¼–ç çš„åº“ï¼Œä½†ä¸Žä¸Šä¸€ç¤ºä¾‹ä¸­ä½¿ç”¨çš„æ ·å¼ç›¸åŒï¼š 12345678910const fetchJson = co.wrap(function* (url) &#123; try &#123; let request = yield fetch(url); let text = yield request.text(); return JSON.parse(text); &#125; catch (error) &#123; console.log(`ERROR: $&#123;error.stack&#125;`); &#125;&#125;); æ¯æ¬¡å›žè°ƒå‡½æ•°ï¼ˆ generator å‡½æ•°ï¼‰äº§ç”Ÿä¸€ä¸ª Promise å¯¹è±¡ç»™ co ï¼Œå›žè°ƒä¼šè¢«æš‚åœï¼Œåªæœ‰å½“ Promise æ‰§è¡Œå®ŒæˆåŽï¼Œco æ‰ä¼šç»§ç»­æ‰§è¡Œå›žè°ƒ ã€‚ å¦‚æžœ Promise å¤„äºŽå®ŒæˆçŠ¶æ€ï¼Œyield è¿”å›žå®ŒæˆçŠ¶æ€çš„å€¼ï¼Œå¦‚æžœå¤„äºŽæ‹’ç»çŠ¶æ€ï¼Œyield æŠ›å‡ºæ‹’ç»çŠ¶æ€çš„é”™è¯¯ã€‚æ­¤å¤–ï¼Œco ä¿è¯ç»“æžœæ˜¯é€šè¿‡å›žè°ƒæ‰§è¡Œå®Œæˆæ‰è¿”å›žçš„ï¼ˆç±»ä¼¼äºŽ then() æ‰€åšçš„å·¥ä½œï¼‰ã€‚ é€šè¿‡ async(å¼‚æ­¥) å‡½æ•°æ¥ç¼–å†™å¼‚æ­¥ä»£ç async(å¼‚æ­¥) å‡½æ•°ç”¨çš„ç‰¹å®šè¯­æ³•åŸºæœ¬ä¸Šå’Œ co ç±»ä¼¼ï¼š12345678910async function fetchJson(url) &#123; try &#123; let request = await fetch(url); let text = await request.text(); return JSON.parse(text); &#125; catch (error) &#123; console.log(`ERROR: $&#123;error.stack&#125;`); &#125;&#125; åœ¨å†…éƒ¨ï¼Œå¼‚æ­¥å‡½æ•°å†™æ³•æ›´ç±»ä¼¼äºŽ generators ã€‚ ä»¥åŒæ­¥å¼€å§‹ï¼Œå¼‚æ­¥å¤„ç†çš„ async(å¼‚æ­¥) å‡½æ•°ä»¥ä¸‹æ˜¯ async(å¼‚æ­¥)å‡½æ•°æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼š 1ã€async(å¼‚æ­¥) å‡½æ•°æ€»æ˜¯è¿”å›žä¸€ä¸ª Promise å¯¹è±¡ p ã€‚Promise å¯¹è±¡åœ¨ async(å¼‚æ­¥) å‡½æ•°å¼€å§‹æ‰§è¡Œæ—¶è¢«åˆ›å»ºã€‚ 2ã€å‡½æ•°ä½“æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€šè¿‡ return æˆ– throw ç»ˆæ­¢æ‰§è¡Œã€‚æˆ–è€…é€šè¿‡ await æš‚åœæ‰§è¡Œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šå¸¸ä¼šåœ¨ä»¥åŽç»§ç»­æ‰§è¡Œã€‚ 3ã€è¿”å›ž Promise å¯¹è±¡ pã€‚ å½“æ‰§è¡Œ async(å¼‚æ­¥) å‡½æ•°çš„å‡½æ•°ä½“æ—¶ï¼Œreturn x ä¸­çš„ x æ˜¯ Promise å¯¹è±¡ p çš„å®ŒæˆçŠ¶æ€çš„ç»“æžœï¼Œè€Œ throw err æ˜¯ p çš„æ‹’ç»çŠ¶æ€çš„ç»“æžœã€‚æ‰§è¡Œç»“æžœæ˜¯å¼‚æ­¥è¿”å›žçš„ã€‚æ¢å¥è¯è¯´ï¼šthen() å’Œ catch() çš„å›žè°ƒæ€»æ˜¯åœ¨å½“å‰ä»£ç å®ŒæˆåŽæ‰§è¡Œã€‚ ä»¥ä¸‹æ˜¯ä»£ç ç¤ºä¾‹ï¼š 12345678910111213async function asyncFunc() &#123; console.log('asyncFunc()'); // (A) return 'abc';&#125;asyncFunc().then(x =&gt; console.log(`Resolved: $&#123;x&#125;`)); // (B)console.log('main'); // (C) // Output:// asyncFunc()// main// Resolved: abc æ‚¨å¯ä»¥è®¤ä¸ºæ˜¯ä»¥ä¸‹çš„æ‰§è¡Œé¡ºåºï¼š 1ã€è¡ŒAï¼šasync(å¼‚æ­¥) å‡½æ•°ä»¥åŒæ­¥å¼€å§‹ã€‚async(å¼‚æ­¥) å‡½æ•°çš„ Promise é€šè¿‡ return æ¥è¿”å›žå®ŒæˆçŠ¶æ€çš„ç»“æžœã€‚ 2ã€è¡ŒCï¼šæ‰§è¡Œç»§ç»­ã€‚ 3ã€è¡ŒBï¼šPromise å®ŒæˆçŠ¶æ€é€šçŸ¥æ˜¯å¼‚æ­¥å‘ç”Ÿçš„ã€‚ è¿”å›žä¸è¢«åŒ…è£¹çš„ Promise å¯¹è±¡Promise çš„ resolve æ˜¯ä¸€é¡¹æ ‡å‡†æ“ä½œã€‚ return å°±æ˜¯ä½¿ç”¨å®ƒæ¥ resolve async(å¼‚æ­¥) å‡½æ•°çš„ Promise p çš„ã€‚è¿™æ„å‘³ç€ï¼š 1ã€è¿”å›žä¸€ä¸ªéž Promise å€¼ï¼Œè¯¥å€¼å°†è¢«å¤„ç†æˆ p çš„å®ŒæˆçŠ¶æ€å€¼ã€‚ 2ã€è¿”å›žä¸€ä¸ª Promise å¯¹è±¡ï¼Œé‚£ä¹ˆ p æ­¤æ—¶ç›¸å½“äºŽæ˜¯è¯¥ Promise çš„çŠ¶æ€ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥è¿”å›žä¸€ä¸ª Promise ï¼Œå¹¶ä¸”è¿™ä¸ª Promise ä¸ä¼šåŒ…è£¹åœ¨åˆ«çš„ Promise ä¸­ï¼š12345async function asyncFunc() &#123; return Promise.resolve(123);&#125;asyncFunc().then(x =&gt; console.log(x)) // 123 æœ‰è¶£çš„æ˜¯ï¼Œè¿”å›žä¸€ä¸ªæ‹’ç»çŠ¶æ€ï¼ˆrejectï¼‰çš„ Promise å¯¹è±¡ä¼šå¯¼è‡´ async(å¼‚æ­¥) å‡½æ•°è¢«æ‹’ç»ï¼ˆrejectï¼‰ï¼ˆé€šå¸¸ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ throw ï¼‰ï¼š 123456JavaScript ä»£ç :async function asyncFunc() &#123; return Promise.reject(new Error('Problem!'));&#125;asyncFunc().catch(err =&gt; console.error(err)); // Error: Problem! è¿™ä¸Ž Promise è§£å†³æ–¹æ¡ˆçš„å·¥ä½œæ–¹å¼æ˜¯ä¸€è‡´çš„ã€‚ ä½¿ä½ èƒ½å¤Ÿåœ¨ä¸ä½¿ç”¨ await çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨å…¶ä»– async(å¼‚æ­¥) è®¡ç®—æ¥æ‰§è¡Œå®Œæˆå’Œæ‹’ç»å¤„ç†ï¼š1234JavaScript ä»£ç :async function asyncFunc() &#123; return anotherAsyncFunc();&#125; ä¸Šé¢çš„ä»£ç ç¤ºä¾‹å’Œä¸‹é¢çš„ç±»ä¼¼ï¼Œä½†æ˜¯æ¯”ä¸‹é¢çš„æ›´é«˜æ•ˆã€‚ï¼ˆä»¥ä¸‹ä»£ç ç¤ºä¾‹æ²¡æœ‰åŒ…è£¹ anotherAsyncFunc() çš„ Promise ï¼Œè€Œæ˜¯åŒ…è£¹ anotherAsyncFunc() æœ¬èº« ï¼‰ï¼š1234JavaScript ä»£ç :async function asyncFunc() &#123; return await anotherAsyncFunc();&#125; ä½¿ç”¨ await å°è´´å£«ä¸è¦å¿˜è®°ä½¿ç”¨ awaitåœ¨ async(å¼‚æ­¥) å‡½æ•°ä¸­å®¹æ˜“çŠ¯çš„ä¸€ä¸ªé”™è¯¯å°±æ˜¯åœ¨è°ƒç”¨ async(å¼‚æ­¥) å‡½æ•°æ—¶å¿˜è®°ä½¿ç”¨ await ï¼š12345JavaScript ä»£ç :async function asyncFunc() &#123; const value = otherAsyncFunc(); // missing `await`! Â·Â·Â·&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ–¹æ³•æ‰§è¡Œè¿”å›žçš„ Promise å¯¹è±¡èµ‹å€¼ç»™äº† value ï¼Œå®ƒé€šå¸¸ä¸æ˜¯ä½ åœ¨ async(å¼‚æ­¥) å‡½æ•°ä¸­æƒ³è¦çš„ç»“æžœã€‚ await ç”šè‡³å¯ä»¥åœ¨ async(å¼‚æ­¥) å‡½æ•°ä¸è¿”å›žä»»ä½•å€¼çš„æƒ…å†µä¸‹èµ·ä½œç”¨ã€‚å®ƒçš„ Promise åªæ˜¯ç”¨æ¥å‘Šè¯‰è°ƒç”¨è€…å®ŒæˆçŠ¶æ€ã€‚ä¾‹å¦‚ï¼š12345JavaScript ä»£ç :async function foo() &#123; await step1(); // (A) Â·Â·Â·&#125; è¡ŒAä¸­çš„ await ç¡®ä¿åœ¨æ‰§è¡Œ foo() å‰©ä½™éƒ¨åˆ†ä¹‹å‰ï¼Œ step1() å·²ç»æ‰§è¡Œå®Œæˆã€‚ ä¸éœ€è¦ä½¿ç”¨ await çš„æƒ…å†µæœ‰æ—¶ï¼Œä½ åªæƒ³è§¦å‘å¼‚æ­¥è®¡ç®—ï¼Œå¹¶ä¸”ä¸éœ€è¦å…³æ³¨å®ƒä»€ä¹ˆæ—¶å€™å®Œæˆã€‚ä»¥ä¸‹æ˜¯ä»£ç ç¤ºä¾‹ï¼š1234567JavaScript ä»£ç :async function asyncFunc() &#123; const writer = openFile('someFile.txt'); writer.write('hello'); // donâ€™t wait writer.write('world'); // donâ€™t wait await writer.close(); // wait for file to close&#125; åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸å…³å¿ƒå•ä¸ªçš„å†™å…¥æ“ä½œæ˜¯å¦å®Œæˆï¼Œåªéœ€è¦ä»–ä»¬ä»¥æ­£ç¡®çš„é¡ºåºæ‰§è¡Œ (APIå¿…é¡»ä¿è¯ï¼Œä½†è¿™æ˜¯ç”± async(å¼‚æ­¥) å‡½æ•°çš„æ‰§è¡Œæ¨¡åž‹æ‰€é¼“åŠ±çš„ï¼Œæ­£å¦‚æˆ‘ä»¬æ‰€è§)ã€‚ asyncFunc() å‡½æ•°æœ€åŽä¸€è¡Œçš„ await ç¡®ä¿è¯¥å‡½æ•°ä»…åœ¨æ–‡ä»¶å†™å…¥å…³é—­åŽæ‰ä¼šæ‰§è¡Œã€‚ ç”±äºŽè¿”å›žçš„ Promises æ²¡æœ‰è¢«å…¶ä»– async(å¼‚æ­¥) å‡½æ•°åŒ…è£¹ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç”¨ return æ›¿æ¢ await writer.close() ï¼š1234567JavaScript ä»£ç :async function asyncFunc() &#123; const writer = openFile('someFile.txt'); writer.write('hello'); writer.write('world'); return writer.close();&#125; è¿™ä¸¤ä¸ªç‰ˆæœ¬å„æœ‰åˆ©å¼Šï¼Œawait ç‰ˆæœ¬å¯èƒ½ç¨å¾®æ›´å®¹æ˜“ç†è§£ã€‚ await æ˜¯é¡ºåºæ‰§è¡Œçš„ï¼ŒPromise.all() æ˜¯å¹¶è¡Œçš„ä¸‹é¢çš„ä»£ç è°ƒç”¨äº†ä¸¤ä¸ª async(å¼‚æ­¥) å‡½æ•°ï¼Œ asyncFunc1() å’Œ asyncFunc1() ã€‚12345JavaScript ä»£ç :async function foo() &#123; const result1 = await asyncFunc1(); const result2 = await asyncFunc2();&#125; è¿™ä¸¤ä¸ªå‡½æ•°è°ƒç”¨é¡ºåºæ‰§è¡Œã€‚ä½†æ˜¯å¹¶è¡Œæ‰§è¡Œå®ƒä»¬å¾€å¾€ä¼šåŠ å¿«é€Ÿåº¦ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Promise.all() ï¼š 1234567JavaScript ä»£ç :async function foo() &#123; const [result1, result2] = await Promise.all([ asyncFunc1(), asyncFunc2(), ]);&#125; æˆ‘ä»¬çŽ°åœ¨æ­£åœ¨ç­‰å¾…ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„çš„ Promise ï¼Œè€Œä¸æ˜¯ç­‰å¾…ä¸¤ä¸ª Promiseã€‚ å¼‚æ­¥å‡½æ•°å’Œå›žè°ƒasync(å¼‚æ­¥) å‡½æ•°çš„ä¸€ä¸ªé™åˆ¶æ˜¯ await(ç­‰å¾…) åªå½±å“ç›´æŽ¥ç›¸å…³çš„ async(å¼‚æ­¥) å‡½æ•°ã€‚å› æ­¤ï¼Œasync(å¼‚æ­¥) å‡½æ•°æ— æ³•åœ¨å›žè°ƒï¼ˆä½†æ˜¯ï¼Œå›žè°ƒå¯ä»¥æ˜¯ async(å¼‚æ­¥) å‡½æ•°æœ¬èº«ï¼Œç¨åŽæˆ‘ä»¬å°†ä¼šçœ‹åˆ°ï¼‰ä¸­ä½¿ç”¨ await(ç­‰å¾…)ã€‚è¿™ä½¿å¾—åŸºäºŽå›žè°ƒçš„å®žç”¨å‡½æ•°å’Œæ–¹æ³•éš¾ä»¥ä½¿ç”¨ã€‚ä¾‹å­ä¸­æˆ‘ä»¬å°†ä½¿ç”¨æ•°ç»„æ–¹æ³• map() å’Œ forEach() ã€‚ Array.prototype.map()æˆ‘ä»¬ä»Žæ•°ç»„æ–¹æ³• map() å¼€å§‹è®²è§£ã€‚åœ¨ä¸‹é¢çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æƒ³è¦åŠ è½½ç”± URLs æ•°ç»„æŒ‡å‘çš„æ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬è¿”å›žåˆ°æ•°ç»„ä¸­ã€‚12345678JavaScript ä»£ç :async function downloadContent(urls) &#123; return urls.map(url =&gt; &#123; // é”™è¯¯çš„è¯­æ³•! const content = await httpGet(url); return content; &#125;);&#125; è¿™ä¸èµ·ä½œç”¨ï¼Œå› ä¸ºåœ¨æ­£å¸¸ç®­å¤´å‡½æ•°ä¸­ await è¯­æ³•ä¸Šæ˜¯éžæ³•çš„(æ„šäººç å¤´æ³¨ï¼š await(ç­‰å¾…) åªå½±å“ç›´æŽ¥ç›¸å…³çš„ async(å¼‚æ­¥) å‡½æ•°)ã€‚é‚£ä¹ˆå¦‚ä½•ä½¿ç”¨å¼‚æ­¥çš„ç®­å¤´å‡½æ•°å‘¢ï¼Ÿ1234567JavaScript ä»£ç :async function downloadContent(urls) &#123; return urls.map(async (url) =&gt; &#123; // æ³¨æ„è¿™ä¸€è¡Œä¸­çš„ async ; const content = await httpGet(url); return content; &#125;);&#125; è¿™æ®µä»£ç æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š çŽ°åœ¨è¿”å›žçš„ç»“æžœæ˜¯ä¸€ä¸ª Promises å¯¹è±¡çš„æ•°ç»„ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„ã€‚ä¸€æ—¦ map() æ‰§è¡Œå®Œæˆï¼Œå›žè°ƒæ‰§è¡Œçš„å·¥ä½œå¹¶ä¸èƒ½åŒæ—¶å®Œæˆï¼Œå› ä¸º await åªæš‚åœäº†åŒ…è£¹å®ƒçš„ç®­å¤´å‡½æ•° å’Œ httpGet() å¼‚æ­¥æ‰§è¡Œè¾¾åˆ°å®ŒæˆçŠ¶æ€ã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½ä½¿ç”¨ awaitï¼Œæ¥ç­‰å¾… downloadContent() æ‰§è¡Œç»“æŸã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ Promise.all() æ¥è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼ŒPromise.all() å¯ä»¥å°†ä¸€ç³»åˆ—çš„ Promise è½¬æ¢ä¸ºä¸€ä¸ª Promise æ•°ç»„ï¼ˆæ‰€æœ‰å€¼éƒ½æ˜¯ç»è¿‡ Promise å®Œæˆå¹¶è¿”å›žï¼‰ï¼š12345678JavaScript ä»£ç :async function downloadContent(urls) &#123; const promiseArray = urls.map(async (url) =&gt; &#123; const content = await httpGet(url); return content; &#125;); return await Promise.all(promiseArray);&#125; map() çš„å›žè°ƒå¹¶ä¸å¯¹ httpGet() çš„ç»“æžœèµ·ä½œç”¨ï¼Œåªæ˜¯èµ·åˆ°ä¸æ–­æ‰§è¡Œçš„ä½œç”¨ã€‚å› æ­¤ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸éœ€è¦ä¸€ä¸ªå¼‚æ­¥çš„ç®­å¤´å‡½æ•°ï¼Œåªéœ€è¦ä¸€ä¸ªæ™®é€šçš„ç®­å¤´å‡½æ•°å°±èƒ½è¾¾åˆ°ç›¸åŒçš„ç»“æžœã€‚123456JavaScript ä»£ç :async function downloadContent(urls) &#123; const promiseArray = urls.map( url =&gt; httpGet(url)); return await Promise.all(promiseArray);&#125; æˆ‘ä»¬ä»ç„¶å¯ä»¥åšä¸€ä¸ªå°çš„æ”¹è¿›ï¼šè¿™ä¸ªå¼‚æ­¥å‡½æ•°ç¨å¾®æœ‰ç‚¹ä½Žæ•ˆ â€“ é¦–å…ˆé€šè¿‡ await æ¥è§£å¼€ Promise.all() çš„ç»“æžœï¼Œç„¶åŽé€šè¿‡ return å†æ¬¡åŒ…è£¹å®ƒã€‚ å‡è®¾ return ä¸åŒ…è£¹ Promisesï¼Œæˆ‘ä»¬å¯ä»¥ç›´æŽ¥è¿”å›ž Promise.all() çš„ç»“æžœï¼š123456JavaScript ä»£ç :async function downloadContent(urls) &#123; const promiseArray = urls.map( url =&gt; httpGet(url)); return Promise.all(promiseArray);&#125; Array.prototype.forEach()æˆ‘ä»¬ä½¿ç”¨æ•°ç»„çš„ forEach() æ–¹æ³•åœ¨æŽ§åˆ¶å°ä¸­æ‰“å°å‡ ä¸ªé€šè¿‡ URLs åŠ è½½çš„æ–‡ä»¶çš„å†…å®¹ï¼š12345678JavaScript ä»£ç :async function logContent(urls) &#123; urls.forEach(url =&gt; &#123; // Wrong syntax const content = await httpGet(url); console.log(content); &#125;);&#125; åŒæ ·çš„ï¼Œè¿™é‡Œçš„ä»£ç ä¼šäº§ç”Ÿä¸€ä¸ªè¯­æ³•é”™è¯¯ï¼Œå› ä¸ºä½ ä¸èƒ½åœ¨é€šå¸¸çš„ç®­å¤´å‡½æ•°å†…éƒ¨ä½¿ç”¨ await ã€‚ æˆ‘ä»¬æ¢ä½œå¼‚æ­¥ç®­å¤´å‡½æ•°ï¼š12345678JavaScript ä»£ç :async function logContent(urls) &#123; urls.forEach(async url =&gt; &#123; const content = await httpGet(url); console.log(content); &#125;); // Not finished here&#125; è¿™æ®µä»£ç èµ·ä½œç”¨äº†ï¼Œä½†æ˜¯ä¼šå‡ºçŽ°ä¸€ä¸ªè­¦å‘Šï¼šhttpGet() è¿”å›žçš„ Promise å¯¹è±¡æ˜¯å¼‚æ­¥å®Œæˆçš„ï¼Œè¿™ä¹Ÿæ„å‘³ç€å½“ forEach() è¿”å›žçš„æ—¶å€™å›žè°ƒå¯èƒ½è¿˜æ²¡æœ‰ç»“æŸï¼Œå› æ­¤ä½ æ— æ³•ç­‰åˆ° logContent() åªèƒ½ç»“æŸã€‚ å¦‚æžœä½ å¹¶ä¸æƒ³è¦è¿™ä¸ªç»“æžœï¼Œä½ å¯ä»¥å°† forEach() è½¬æ¢ä¸º for-of å¾ªçŽ¯ã€‚1234567JavaScript ä»£ç :async function logContent(urls) &#123; for (const url of urls) &#123; const content = await httpGet(url); console.log(content); &#125;&#125; çŽ°åœ¨ä¸€åˆ‡éƒ½åœ¨ for-of å¾ªçŽ¯å®ŒæˆåŽå®Œæˆã€‚ä½†æ˜¯ï¼Œå¤„ç†æ­¥éª¤ä¾æ¬¡å‘ç”Ÿï¼šhttpGet() åªæ˜¯åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨å®ŒæˆåŽå†æ¬¡è°ƒç”¨ã€‚å¦‚æžœæ‚¨å¸Œæœ›å¤„ç†æ­¥éª¤å¹¶è¡Œæ‰§è¡Œï¼Œä½ å¿…é¡»ä½¿ç”¨ Promise.all()ï¼š12345678JavaScript ä»£ç :async function logContent(urls) &#123; await Promise.all(urls.map( async url =&gt; &#123; const content = await httpGet(url); console.log(content); &#125;));&#125; map() ç”¨äºŽåˆ›å»ºä¸€ä¸ª Promises æ•°ç»„ã€‚ æˆ‘ä»¬å¯¹ä»–ä»¬çš„å®Œæˆç»“æžœå¹¶ä¸æ„Ÿå…´è¶£ï¼Œæˆ‘ä»¬åªè¦ await(ç­‰å¾…) æ‰€æœ‰æ–¹æ³•æ‰§è¡Œå®Œæˆã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¸Œæœ›çš„æ˜¯åœ¨ async(å¼‚æ­¥) å‡½æ•°å®Œæˆä¹‹åŽæ‰€æœ‰çš„æ‰§è¡Œéƒ½å·²ç»å®Œæˆã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿”å›ž Promise.all() ï¼Œä½†æ˜¯è¯¥å‡½æ•°çš„ç»“æžœæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶å…ƒç´ éƒ½æ˜¯æœªå®ŒæˆçŠ¶æ€çš„ã€‚ ä½¿ç”¨å¼‚æ­¥å‡½æ•°å°è´´å£«äº†è§£ä½ çš„ Promisesasync(å¼‚æ­¥) å‡½æ•°çš„åŸºç¡€å°±æ˜¯ Promises å¯¹è±¡ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆç†è§£ Promises å¯¹äºŽç†è§£ async(å¼‚æ­¥) å‡½æ•°è‡³å…³é‡è¦ã€‚ç‰¹åˆ«æ˜¯å½“é‡åˆ°ä¸æ˜¯åŸºäºŽ Promises çš„è€ä»£ç æ¥å®žçŽ° async(å¼‚æ­¥) å‡½æ•°æ—¶ï¼Œä½ é€šå¸¸åˆ«æ— é€‰æ‹©ï¼Œåªèƒ½ç”¨ Promise æ¥é‡æž„ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œè¿™é‡Œæœ‰ä¸ª â€œpromisifiedâ€ ç‰ˆæœ¬çš„ XMLHttpRequest ï¼š1234567891011121314151617181920212223JavaScript ä»£ç :function httpGet(url, responseType="") &#123; return new Promise( function (resolve, reject) &#123; const request = new XMLHttpRequest(); request.onload = function () &#123; if (this.status === 200) &#123; // Success resolve(this.response); &#125; else &#123; // Something went wrong (404 etc.) reject(new Error(this.statusText)); &#125; &#125;; request.onerror = function () &#123; reject(new Error( 'XMLHttpRequest Error: '+this.statusText)); &#125;; request.open('GET', url); xhr.responseType = responseType; request.send(); &#125;);&#125; XMLHttpRequest çš„ API æ˜¯åŸºäºŽå›žè°ƒçš„ã€‚é€šè¿‡ä¸€ä¸ª async(å¼‚æ­¥) å‡½æ•°æ¥å®žçŽ°å®ƒï¼Œæ„å‘³ç€ä½ å¿…é¡»åœ¨å›žè°ƒä¸­è¿”å›ž Promise çš„å®Œæˆ(fulfill) æˆ–æ‹’ç»(reject) çŠ¶æ€ã€‚è¿™æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºä½ åªèƒ½é€šè¿‡ return æˆ–è€… throw æ¥å®Œæˆè¿™æ ·çš„æ“ä½œã€‚ä½ ä¸èƒ½ä»Žå›žè°ƒå‡½æ•°å†…éƒ¨ return ä¸€ä¸ªå‡½æ•°çš„ç»“æžœã€‚throwä¹Ÿæœ‰ç±»ä¼¼çš„çº¦æŸã€‚ å› æ­¤ï¼Œå¼‚æ­¥å‡½æ•°çš„é€šç”¨ç¼–ç é£Žæ ¼æ˜¯ï¼š ç›´æŽ¥ä½¿ç”¨ Promise å¯¹è±¡æ¥æž„å»ºå¼‚æ­¥åŽŸè¯­ã€‚ ç”¨å¼‚æ­¥å‡½æ•°æ¥ä½¿ç”¨è¿™äº›åŽŸè¯­ã€‚æ‰©å±•é˜…è¯»ï¼šâ€œExploring ES6â€ ä¸­çš„ â€œå¼‚æ­¥ç¼–ç¨‹ä¸­çš„ Promises å¯¹è±¡â€ ç« èŠ‚ ç«‹å³è°ƒç”¨å¼‚æ­¥å‡½æ•°è¡¨è¾¾å¼æœ‰æ—¶ï¼Œå¦‚æžœä½ å¯ä»¥åœ¨æ¨¡å—æˆ–è„šæœ¬çš„é¡¶å±‚ä½¿ç”¨ await ï¼Œé‚£å°†æ˜¯ä¸€ç§å¾ˆå¥½çš„é€‰æ‹©ã€‚å½“ç„¶ï¼Œå®ƒåªèƒ½åœ¨å¼‚æ­¥å‡½æ•°ä¸­ä½¿ç”¨ã€‚æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªå¼‚æ­¥å‡½æ•° main()  å¹¶ç«‹å³è°ƒç”¨å®ƒï¼š1234JavaScript ä»£ç :async function main() &#123; console.log(await asyncFunction());&#125; main();æˆ–è€…æ‚¨å¯ä»¥ä½¿ç”¨ç«‹å³è°ƒç”¨å¼‚æ­¥å‡½æ•°è¡¨è¾¾å¼ï¼š1234JavaScript ä»£ç :(async function () &#123; console.log(await asyncFunction());&#125;)(); å¦ä¸€ä¸ªé€‰æ‹©æ˜¯ç«‹å³è°ƒç”¨å¼‚æ­¥ç®­å¤´å‡½æ•°ï¼š1234JavaScript ä»£ç :(async () =&gt; &#123; console.log(await asyncFunction());&#125;)(); ç”¨å¼‚æ­¥å‡½æ•°è¿›è¡Œå•å…ƒæµ‹è¯•ä»¥ä¸‹ä»£ç ä½¿ç”¨ æµ‹è¯•æ¡†æž¶ mocha å¯¹å¼‚æ­¥å‡½æ•° asyncFun1() å’Œ asyncFun2() æ¥è¿›è¡Œå•å…ƒæµ‹è¯•ï¼š 12345678910111213import assert from 'assert'; // Bug: the following test always succeedstest('Testing async code', function () &#123; asyncFunc1() // (A) .then(result1 =&gt; &#123; assert.strictEqual(result1, 'a'); // (B) return asyncFunc2(); &#125;) .then(result2 =&gt; &#123; assert.strictEqual(result2, 'b'); // (C) &#125;);&#125;); ç„¶è€Œï¼Œè¿™ä¸ªæµ‹è¯•æ€»æ˜¯æˆåŠŸçš„ï¼Œå› ä¸º mocha ä¸ä¼šç­‰å¾… B è¡Œå’Œ C è¡Œæ–­è¨€æ‰§è¡Œå®Œæˆã€‚ ä½ å¯ä»¥é€šè¿‡è¿”å›žé“¾å¼è°ƒç”¨çš„ Promise æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸º mocha ä¼šè¯†åˆ«ä¸€ä¸ªæµ‹è¯•æ˜¯å¦è¿”å›žä¸€ä¸ª Promise ï¼Œç„¶åŽç­‰å¾…è¯¥ Promise å®Œæˆ å†è¿›è¡Œä¸‹ä¸€æ­¥ï¼ˆé™¤éžè¶…æ—¶ï¼‰ã€‚12JavaScript ä»£ç :return asyncFunc1() // (A) å¼‚æ­¥å‡½æ•°æ€»æ˜¯è¿”å›ž Promises ï¼Œè¿™ä½¿å¾—å®ƒä»¬èƒ½æ–¹ä¾¿çš„ã€å®Œç¾Žçš„æ¥è¿›è¡Œè¿™ç§å•å…ƒæµ‹è¯•ï¼š12345678JavaScript ä»£ç :import assert from 'assert';test('Testing async code', async function () &#123; const result1 = await asyncFunc1(); assert.strictEqual(result1, 'a'); const result2 = await asyncFunc2(); assert.strictEqual(result2, 'b');&#125;); åœ¨ mocha ä¸­ä½¿ç”¨å¼‚æ­¥å•å…ƒæµ‹è¯•å¼‚æ­¥å‡½æ•°æœ‰ä¸¤ä¸ªä¼˜ç‚¹ï¼šä»£ç æ›´ç®€æ´ï¼Œèƒ½å¤Ÿå‡†ç¡®å¤„ç†è¿”å›žçš„ Promise å¯¹è±¡ã€‚ ä¸è¦æ‹…å¿ƒæ²¡æœ‰å¤„ç†çš„æ‹’ç»æ‹’æ€å½“å‰çš„ JavaScript å¼•æ“Žå¯ä»¥åœ¨æ‹’ç»æ€æœªå¤„ç†çš„æƒ…å†µä¸‹æå‡ºè­¦å‘Šã€‚ä»¥ä¸‹ä»£ç åœ¨è¿‡åŽ»ä¼šç»å¸¸æ‰§è¡Œå¤±è´¥ï¼Œä½†æ˜¯å½“å‰çš„ JavaScript å¼•æ“Žå¯ä»¥è¿›è¡Œè­¦å‘Šï¼š12345JavaScript ä»£ç :async function foo() &#123; throw new Error('Problem!');&#125;foo(); é˜…è¯»å»¶ä¼¸ å¼‚æ­¥å‡½æ•° ï¼ˆæå‡ºè€…Brian Terlsonï¼‰ é€šè¿‡generatorsæ¥ç®€åŒ–å¼‚æ­¥è®¡ç®—ï¼ˆâ€œExporing ES6â€ä¸­çš„éƒ¨åˆ†ç« èŠ‚ï¼‰åŽŸæ–‡åœ°å€ï¼šhttp://exploringjs.com/es2016-es2017/ch_async-functions.html]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°ç¨‹åºä¹‹æ—…(å››)]]></title>
    <url>%2Fblog%2F2018%2F06%2F28%2F%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B9%8B%E6%97%85-%E5%9B%9B%2F</url>
    <content type="text"><![CDATA[å°ç¨‹åºæ˜¯ä¸€ç§æ–°çš„å¼€æ”¾èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°å¼€å‘ä¸€ä¸ªå°ç¨‹åºã€‚å°ç¨‹åºå¯ä»¥åœ¨å¾®ä¿¡å†…è¢«ä¾¿æ·åœ°èŽ·å–å’Œä¼ æ’­ï¼ŒåŒæ—¶å…·æœ‰å‡ºè‰²çš„ä½¿ç”¨ä½“éªŒã€‚è¿™æ˜¯å…³äºŽå°ç¨‹åºwebsocketä¹‹æ—…ã€‚websocketæ˜¯html5å®šä¹‰çš„ä¸€ç§æ–°åè®®ï¼ŒåŽŸç†å°±æ˜¯åœ¨å®¢æˆ·ç«¯(æµè§ˆå™¨)å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€æ¡ä¸“ç”¨é€šé“è¿žæŽ¥ï¼ŒäºŒè€…å¯ä»¥å®žæ—¶é€šä¿¡ï¼Œç±»ä¼¼äºŽæˆ‘ä»¬æ—¥å¸¸é‡Œçš„æ‰“ç”µè¯ä¸€æ ·ã€‚ ä¸€ä¸ªå°æ —å­ä»¥å®žçŽ°ä¸€ä¸ªè‚¡ç¥¨èµ°åŠ¿å›¾çš„åŠŸèƒ½ä¸ºä¾‹ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“è‚¡ç¥¨è¿™ä¸ªä¸œè¥¿çš„å®žæ—¶æ€§å’Œå‡†ç¡®æ€§æ˜¯å¾ˆé‡è¦çš„ï¼Œä¸€èˆ¬å¯ä»¥ä½¿ç”¨ajaxè½®è¯¢ï¼ˆsetintervalå‡½æ•°ï¼‰çš„æ–¹å¼æ¥è§£å†³ï¼Œå¯ä»¥æ¯åŠç§’è½®è¯¢ä¸€æ¬¡æ•°æ®æŽ¥å£ï¼Œå†æ¸²æŸ“é¡µé¢è§†å›¾ã€‚ä½†æ˜¯è¿™ä¸ªæ–¹å¼æ˜¯æœ‰ä¸€äº›ç¼ºç‚¹çš„ï¼Œæ¯”å¦‚ï¼Œæµè§ˆå™¨è¦æ—¶åˆ»ä¸æ–­çš„å‘æœåŠ¡å™¨å‘é€æ•°æ®è¯·æ±‚å¹¶ä¸”æŽ¥å—æ•°æ®ï¼Œè¿™æ ·å¾ˆæ¶ˆè€—å¸¦å®½ï¼Œè¿˜å¾ˆå®¹æ˜“æŠŠæœåŠ¡å™¨ç»™æžå¡æ­»äº†ã€‚å¯¹äºŽwebsocketæŠ€æœ¯æ¥è¯´ï¼Œå®¢æˆ·ç«¯å°±ä¸ŽæœåŠ¡å™¨ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªä¸“ç”¨é€šé“ï¼Œä»–ä»¬ä¹‹é—´çš„æ•°æ®é€šä¿¡å°±ä¸éœ€è¦è½®è¯¢å¯ä»¥ä¸€ç›´è¿›è¡Œæ•°æ®äº¤äº’ï¼ŒæœåŠ¡å™¨ä¸å†æ˜¯è¢«åŠ¨çš„è¿”å›žæ•°æ®ï¼Œè€Œæ˜¯æœ‰äº†æ–°æ•°æ®ä¹‹åŽå°±ä¼šä¸»åŠ¨çš„æŽ¨é€ç»™å®¢æˆ·ç«¯ã€‚websocketå¾ˆé€‚åˆå¯¹å®žæ—¶æ€§è¦æ±‚çš„åœºæ™¯ï¼Œå®žæ—¶æ€§ä¸é«˜è¿˜æ˜¯ç”¨ajaxå°±å¯ä»¥å®žçŽ°äº†ã€‚ å¿«é€Ÿç”Ÿæˆæ ‡å‡†æ–‡ä»¶ ä»¥chartsä¸ºä¾‹ï¼Œåªéœ€è¦åœ¨app.jsonæ–‡ä»¶ä¸‹æ·»åŠ è·¯åŠ²ï¼Œä¿å­˜ä¹‹åŽå°±ä¼šè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶å¤¹ã€‚ 123456789101112131415&lt;!-- app.jsonæ–‡ä»¶ --&gt;&#123; "pages":[ "pages/index/index", "pages/logs/logs", "pages/charts/charts" ], "window":&#123; "backgroundTextStyle":"light", "navigationBarBackgroundColor": "#fff", "navigationBarTitleText": "WeChat", "navigationBarTextStyle":"black" &#125;&#125; å‰æœŸå‡†å¤‡1ã€å°æ —å­è¯•å›¾æ’ä»¶å›¾è¡¨ç±»çš„æ’ä»¶ä¸€èˆ¬å°±æ˜¯echartså’Œhighcharts,è€Œåœ¨å°ç¨‹åºé‡Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨wxcharts,wxchartsçš„å®žçŽ°æ–¹å¼æ˜¯canvas,å°ç¨‹åºæœ¬èº«ä¹Ÿæ˜¯æ”¯æŒçš„ã€‚æŠŠjsæ–‡ä»¶æ”¾åˆ°chartsæ–‡ä»¶ä¸‹ï¼Œä¸‹è½½é“¾æŽ¥ 2ã€æ•°æ®æŽ¥å£æ”¯æŒè¿™é‡Œçš„æ•°æ®æ”¯æŒä½¿ç”¨çš„æ˜¯Nodejsï¼Œè¿˜è¦äº†è§£ä¸€ä¸‹websocket,å®ƒå…¶å®žå°±æ˜¯webç‰ˆçš„socketæŠ€æœ¯ã€‚å› ä¸ºæµè§ˆå™¨æ”¯æŒçš„javascriptè¯­è¨€å¹¶ä¸æ”¯æŒsocketï¼Œæ‰€ä»¥åœ¨html5æŠ€æœ¯æ ‡å‡†ä¸­æ–°æ·»åŠ äº†è¿™é¡¹ç‰¹æ€§ã€‚ç”¨é€šä¿—çš„è¯è¯­è§£é‡Šå°±æ˜¯ï¼šsocketå…¶å®žå°±æ˜¯åœ¨æµè§ˆå™¨å’ŒæœåŠ¡ç«¯å„å¼€è¾Ÿä¸€ä¸ªä¸“é—¨çš„ç«¯å£ï¼ŒåŒæ–¹éƒ½ç›‘å¬è¿™ä¸ªç«¯å£ï¼Œç„¶åŽäº’ç›¸å‘é€å’ŒæŽ¥æ”¶æ•°æ®ã€‚ Nodejsæœ‰ä¸ªæ’ä»¶å°è£…äº†socketï¼Œå«nodejs-websocketã€‚ä½¿ç”¨npmå®‰è£…ä¸€ä¸‹:npm install nodejs-websocket 123âžœ ~ npm i nodejs-websocket -g/usr/local/libâ””â”€â”€ nodejs-websocket@1.7.1 server.js 12345678910111213141516171819var ws = require('nodejs-websocket');// åˆ›å»ºservervar server = ws.createServer(function(conn)&#123; conn.on("text",function(str)&#123; // ç›‘å¬æ–‡æœ¬è¾“å…¥ if (str == "stock") &#123; setInterval(function()&#123; var arr=[]; for (let i = 0; i &lt; 6; i++) &#123; var count = (Math.ceil((Math.random()*100))/100).toFixed(2); arr.push(count) &#125; var obj = &#123;data:arr&#125; conn.send(JSON.stringify(obj)) &#125;,2000); &#125; &#125;)&#125;).listen(8000) websocketå»ºç«‹ä¸“ç”¨é€šé“åŽï¼ŒæœåŠ¡ç«¯åªè¦ç›‘å¬åˆ°å®¢æˆ·ç«¯å‘æ¥çš„æ–‡æœ¬å†…å®¹æ˜¯â€stockâ€,å°±æ¯éš”2sä¿®æ”¹ä¸€æ¬¡æ•°æ®ï¼Œä¿®æ”¹åŽçš„æ•°æ®ï¼Œå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰é©¬ä¸Šå°±ä¼šç›‘å¬åˆ°ï¼Œåˆ©ç”¨è¿™ç§æ–¹å¼æ¥æ¨¡æ‹Ÿè‚¡ç¥¨æ•°æ®çš„å˜åŒ–ã€‚ æ³¨æ„ åˆ©ç”¨webstormçš„runæˆ–ä½¿ç”¨å‘½ä»¤è¡Œè¿è¡Œè„šæœ¬åŽï¼Œwebsocketçš„åè®®æ˜¯wsåè®®å’Œwssåè®®ã€‚wså°±ç›¸å½“äºŽhttpï¼Œwsså°±ç›¸å½“äºŽhttpsï¼Œæ‰€ä»¥æ­£ç¡®çš„å†™æ³•åº”è¯¥æ˜¯ï¼šws://localhost:8000 å¾®ä¿¡å®¢æˆ·ç«¯ ä½¿ç”¨websocketå¾ˆå®¹æ˜“ï¼Œä¸»è¦å°±æ˜¯ä½ è¿™å‡ ä¸ªæ­¥éª¤ï¼š å»ºç«‹è¿žæŽ¥ å‘é€æ•°æ® æŽ¥æ”¶æ•°æ® ç»“æŸ charts.js 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970// pages/charts/charts.jsvar wxCharts = require('wxcharts.js');Page(&#123; data: &#123;&#125;, onLoad: function (options) &#123; // var data1 = [0.15, 0.2, 0.45, 0.37, 0.4, 0.8]; // var data2 = [0.30, 0.37, 0.65, 0.78, 0.69, 0.94]; //å»ºç«‹è¿žæŽ¥ wx.connectSocket(&#123; url: 'ws://localhost:8000',//è¿™é‡Œè¿žæŽ¥çš„å°±æ˜¯æœåŠ¡ç«¯çš„socket &#125;); //è¿žæŽ¥æˆåŠŸç›‘å¬ wx.onSocketOpen(function (res) &#123; //å‘é€ä¿¡æ¯ wx.sendSocketMessage(&#123; data: "stock" &#125;); console.log('WebSocketè¿žæŽ¥å·²æ‰“å¼€ï¼') &#125;); //è¿žæŽ¥å¤±è´¥ç›‘å¬ wx.onSocketError(function (res) &#123; console.log('WebSocketè¿žæŽ¥æ‰“å¼€å¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼') &#125;); //æŽ¥æ”¶æ•°æ® wx.onSocketMessage(function (res) &#123; //æ”¶åˆ°çš„ä¿¡æ¯ console.log('æ”¶åˆ°æœåŠ¡å™¨å†…å®¹ï¼š' + res.data); var obj = JSON.parse(res.data); console.log(obj); //ç»˜åˆ¶å›¾è¡¨ï¼Œåˆ©ç”¨canvasç»˜å›¾æŠ€æœ¯ã€‚ new wxCharts(&#123; canvasId: 'lineCanvas',//æŒ‡å®šcanvasçš„id type: 'line',//ç±»åž‹æ˜¯çº¿å½¢å›¾ categories: ['2012', '2013', '2014', '2015', '2016', '2017'], series: [&#123; name: 'æˆäº¤é‡1', data: obj.data,//websocketæŽ¥æ”¶åˆ°çš„æ•°æ® format: function (val) &#123; if (typeof val == "string") &#123; val = parseFloat(val); &#125; return val.toFixed(2) + 'ä¸‡'; &#125; &#125;, &#123; name: 'æˆäº¤é‡2', data: [0.30, 0.37, 0.65, 0.78, 0.69, 0.94], format: function (val) &#123; return val.toFixed(2) + 'ä¸‡'; &#125; &#125;], yAxis: &#123; title: 'æˆäº¤é‡‘é¢ (ä¸‡å…ƒ)', format: function (val) &#123; return val.toFixed(2); &#125;, min: 0 &#125;, width: 320, height: 200 &#125;); &#125;); &#125;&#125;) charts.wxml: 123&lt;!--pages/charts/charts.wxml--&gt;&lt;canvas style="width: 100%; height: 200px;border:1px solid #ccc;" canvas-id="lineCanvas"&gt;&lt;/canvas&gt; çœ‹ä¸‹æŽ§åˆ¶å°ï¼Œåªæœ‰ä¸€æ¬¡è¯·æ±‚è€Œå·²ï¼Œæ²¡æœ‰åƒè½®è¯¢é‚£æ ·ä¸€å¨ä¸€å¨çš„å‘è¯·æ±‚äº†ã€‚ä¸‹é¢é€šè¿‡æŽ§åˆ¶å°ï¼Œçœ‹ä¸‹websocketè¯·æ±‚çš„ç‰¹å¾ï¼š]]></content>
      <categories>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ES6é‡Œ ä¸‰ç§å¼‚æ­¥è§£å†³æ–¹æ¡ˆ]]></title>
    <url>%2Fblog%2F2018%2F06%2F27%2FES6%E9%87%8C-%E4%B8%89%E7%A7%8D%E5%BC%82%E6%AD%A5%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%2F</url>
    <content type="text"><![CDATA[ä»‹ç»ä¸€ä¸‹ES6é‡Œçš„ä¸‰ç§å¼‚æ­¥æ–¹æ¡ˆã€‚ çŸ¥è¯†å°é²œ 1ã€newGenerator å‡½æ•°ï¼Œå®ƒæ‰§è¡Œä¹‹åŽä¼šè¿”å›žä¸€ä¸ªè¿­ä»£å™¨ï¼Œåœ¨è¿™ä¸ªè¿­ä»£å™¨ä¸Šæˆ‘ä»¬å¯ä»¥åŽ»è°ƒç”¨next() æ–¹æ³•ï¼›2ã€next() æ–¹æ³•ï¼Œå¯ä»¥ç»™ä»–ä¼ å…¥ä¸€ä¸ªå‚æ•°ã€‚è°ƒç”¨next()æ–¹æ³•ï¼Œä¼šè¿”å›žä¸€ä¸ªå¯¹è±¡{value: res,done: false} ,è¿™é‡Œçš„done è¡¨ç¤ºè¿­ä»£å™¨ã€‚ æ–¹æ³•ä¸€ï¼š Generator + Promise1234567891011121314151617181920212223242526272829303132333435363738394041const fund = require('fund')// Promise ç‰ˆçš„readFileconst readFile = function (fileName) &#123; return new Promise(function(resolve, reject) &#123; fund.readFile(fileName, function(err, data)&#123; if (err) return reject(error); resolve(data); &#125;) &#125;)&#125;const newgen = function * () &#123; let demo1 = yield readFile('a.txt'); let demo2 = yield readFile('b.txt'); console.log('demo1---&gt;', demo1.toString()); console.log('demo2---&gt;', demo2.toString());&#125;// åŸºäºŽ Generator å’Œ Promise çš„è‡ªåŠ¨æ‰§è¡Œå™¨function run(gen) &#123; let g = gen(); function next(data) &#123; let result = g.next(data); if (result.done) return result.value; result.value.then(function(data) &#123; next(data); &#125;); &#125; next();&#125;run(gen); æ‰§è¡Œå™¨ ä¸­çš„ result.value çŽ°åœ¨æ˜¯ä¸€ä¸ªPromise, é€šè¿‡ then æ–¹æ³•æ‹¿åˆ°éœ€è¦çš„ç»“æžœï¼Œä¼ ä¸‹ä¸€æ¬¡ next æ–¹æ³•ï¼Œè¿™æ · let f1 = yield readFile(&#39;a.txt&#39;);å°±å¯ä»¥æ‹¿åˆ°å€¼. æ–¹æ³•äºŒï¼š Generator + Thunkå‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839const fs = require('fs')// æŠŠä¸€ä¸ªå•ä¸€æ‰§è¡Œçš„å‡½æ•° ï¼Œå˜æˆéœ€è¦å†æ¬¡è°ƒç”¨çš„å‡½æ•°ï¼Œå›ºå®šä¸€éƒ¨åˆ†å‚æ•°function thunkify(fn, obj = &#123;&#125;) &#123; return function () &#123; let args = Array.from(arguments); return function (m) &#123; args.push(m) return fn.apply(obj, args) &#125; &#125;&#125;const readFile = thunkify(fs.readFile, fs);const gen = function* () &#123; let f1 = yield readFile('a.txt'); let f2 = yield readFile('b.txt'); console.log('F1--&gt;', f1.toString()); console.log('F2--&gt;', f2.toString());&#125;// åŸºäºŽ Generator å’Œ Thunkå‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œå™¨function run(fn) &#123; let gen = fn(); function next(err, data) &#123; let result = gen.next(data); if (result.done) return 1; result.value(next); &#125; next();&#125;run(gen); Thunkè½¬æ¢å™¨ï¼ŒæŠŠåŽŸæ¥çš„ fs.readFile å‡½æ•° è½¬æ¢æˆéœ€è¦ä¸¤æ¬¡è°ƒç”¨çš„å‡½æ•° ï¼ŒreadFile çš„æ‰§è¡Œç»“æžœï¼Œå¯ä»¥é€šè¿‡å›žè°ƒå‡½æ•°èƒ½å‚æ•°ä¼ é€’å‡ºæ¥ï¼Œå†ä¼ ç»™ next æ–¹æ³• æ–¹æ³•ä¸‰ï¼šasync å‡½æ•° + await çš„å¼‚æ­¥å¤„ç†æ–¹å¼123456789101112131415161718192021const fs = require('fs')// Promise ç‰ˆçš„readFileconst readFile = function (fileName) &#123; return new Promise(function(resolve, reject) &#123; fs.readFile(fileName, function(err, data)&#123; if (err) return reject(err); resolve(data); &#125;) &#125;)&#125;const asyncReadFile = async function () &#123; const f1 = await readFile('a.txt'); const f2 = await readFile('b.txt'); console.log(f1.toString()); console.log(f2.toString());&#125;;asyncReadFile(); readFileå‡½æ•° å¯¹æ¯”æ–¹æ³•ä¸€æ²¡æœ‰å¤§çš„å˜åŒ– ï¼ŒGenerator å‡½æ•°å˜æˆ äº† async å‡½æ•°ï¼Œå¯è§è¿™å¤„æ–¹å¼ åªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œasync å‡½æ•°è‡ªå¸¦äº†æ‰§è¡Œå™¨ã€‚]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°ç¨‹åºä¹‹æ—…(ä¸‰)]]></title>
    <url>%2Fblog%2F2018%2F06%2F19%2F%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B9%8B%E6%97%85-%E4%B8%89%2F</url>
    <content type="text"><![CDATA[å°ç¨‹åºæ˜¯ä¸€ç§æ–°çš„å¼€æ”¾èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°å¼€å‘ä¸€ä¸ªå°ç¨‹åºã€‚å°ç¨‹åºå¯ä»¥åœ¨å¾®ä¿¡å†…è¢«ä¾¿æ·åœ°èŽ·å–å’Œä¼ æ’­ï¼ŒåŒæ—¶å…·æœ‰å‡ºè‰²çš„ä½¿ç”¨ä½“éªŒã€‚è¿™æ˜¯å…³äºŽå°ç¨‹åºç”Ÿå‘½å‘¨æœŸå’Œæ¨¡æ¿çš„å¼•ç”¨ä¹‹æ—…ã€‚ ä¿®æ”¹å¯¼èˆªæ ä¿¡æ¯å…ˆä»Žä¿®æ”¹å¯¼èˆªæ ä¿¡æ¯å¼€å§‹ï¼Œä¸»è¦ä¿®æ”¹çš„æ–‡ä»¶æ˜¯app.jsonæ–‡ä»¶ï¼Œåœ¨é‡Œé¢å¯ä»¥å®šä¹‰ä¸€äº›æ ·å¼ å®šä¹‰åº•éƒ¨tabå¯¼èˆªæ å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚è‡ªå®šä¹‰åº•éƒ¨å¯¼èˆªæ çš„æ ·å¼å’Œiconï¼Œè¿™äº›æ“ä½œåŒæ ·æ˜¯åœ¨app.jsonæ–‡ä»¶é‡Œæ“ä½œã€‚ app.json æ˜¯å¯¹å½“å‰å°ç¨‹åºçš„å…¨å±€é…ç½®ï¼ŒåŒ…æ‹¬äº†å°ç¨‹åºçš„æ‰€æœ‰é¡µé¢è·¯å¾„ã€ç•Œé¢è¡¨çŽ°ã€ç½‘ç»œè¶…æ—¶æ—¶é—´ã€åº•éƒ¨ tab ç­‰ã€‚ ç®€å•è¯´ä¸€ä¸‹è¿™ä¸ªé…ç½®å„ä¸ªé¡¹çš„å«ä¹‰: 1ã€pageså­—æ®µ â€”â€” ç”¨äºŽæè¿°å½“å‰å°ç¨‹åºæ‰€æœ‰é¡µé¢è·¯å¾„ï¼Œè¿™æ˜¯ä¸ºäº†è®©å¾®ä¿¡å®¢æˆ·ç«¯çŸ¥é“å½“å‰ä½ çš„å°ç¨‹åºé¡µé¢å®šä¹‰åœ¨å“ªä¸ªç›®å½•ã€‚2ã€windowå­—æ®µ â€”â€” å°ç¨‹åºæ‰€æœ‰é¡µé¢çš„é¡¶éƒ¨èƒŒæ™¯é¢œè‰²ï¼Œæ–‡å­—é¢œè‰²å®šä¹‰åœ¨è¿™é‡Œçš„ã€‚å…¶ä»–é…ç½®é¡¹ç»†èŠ‚å¯ä»¥å‚è€ƒæ–‡æ¡£ å°ç¨‹åºçš„é…ç½® app.json ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŒ…å«äº†æ‰€æœ‰é…ç½®é€‰é¡¹çš„ app.json ï¼šå‚è€ƒåœ°å€1234567891011121314151617181920212223&#123; "pages": [ "pages/index/index", "pages/logs/index" ], "window": &#123; "navigationBarTitleText": "Demo" &#125;, "tabBar": &#123; "list": [&#123; "pagePath": "pages/index/index", "text": "é¦–é¡µ" &#125;, &#123; "pagePath": "pages/logs/logs", "text": "æ—¥å¿—" &#125;] &#125;, "networkTimeout": &#123; "request": 10000, "downloadFile": 10000 &#125;, "debug": true&#125; app.json é…ç½®é¡¹åˆ—è¡¨ tabBarçš„é…ç½®å‚æ•°å¯ä»¥åœ¨listé‡Œé¢é…ç½®ï¼ŒåŒ…æ‹¬iconçš„è®¾ç½®ï¼Œå¯ä»¥åŽ»iconfontåŽ»ä¸‹è½½ï¼ŒæŠŠä¸‹è½½å¥½çš„iconå›¾ç‰‡æ”¾åˆ°imagesæ–‡ä»¶å¤¹ä¸‹ï¼Œæ­£ç¡®å¼•ç”¨å›¾ç‰‡å°±å¥½äº†ã€‚ iconPathä¸ŽselectedIconPathå°±å¯ä»¥å®žçŽ°é€‰ä¸­ä¸Žæ²¡æœ‰é€‰ä¸­æ•ˆæžœã€‚å…·ä½“é…ç½®å‚è€ƒä¸‹å›¾ï¼š æŠ½ç¦»å…¬å…±éƒ¨åˆ†æŠŠå¤´åƒå’Œæ˜µç§°æŠ½ç¦»æˆå…¬å…±éƒ¨åˆ†å…±ç”¨ï¼Œå°ç¨‹åºæä¾›äº†importå’Œincludeä¸¤ç§æ–¹å¼ï¼Œå¾®ä¿¡å¤´åƒå’Œæ˜µç§°ï¼Œæ˜¾ç„¶æ˜¯å¼‚æ­¥èŽ·å–çš„ã€‚ä¸ºé¿å…é‡å¤è¯·æ±‚æ•°æ®ï¼Œå¯ä»¥åˆ©ç”¨ç¼“å­˜ï¼Œåœ¨é¦–é¡µèŽ·å–ä¸€æ¬¡æ•°æ®åŽï¼Œç¼“å­˜åˆ°æœ¬åœ°ä¿å­˜èµ·æ¥ï¼Œåœ¨å…¶ä»–é¡µé¢ç›´æŽ¥è°ƒå–ç¼“å­˜çš„æ•°æ®å°±å¯ä»¥äº†ã€‚ä¸ºé¿å…æ¯ä¸ªé¡µé¢éƒ½å†™ä¸€éæ ·å¼ï¼Œå¯ä»¥æŠŠå±•ç¤ºå¤´åƒå’Œæ˜µç§°ç›¸å…³çš„æ ·å¼ï¼Œç»Ÿä¸€å†™åˆ°app.wxsså…¨å±€æ ·å¼è¡¨æ–‡ä»¶ä¸­ã€‚é€€å‡ºçš„æ—¶å€™ï¼Œé”€æ¯æœ¬åœ°å­˜å‚¨ï¼Œä¿è¯æ•°æ®çš„å‡†ç¡®æ€§ã€‚ æŠŠindex.wxssé‡Œçš„ç”¨æˆ·æ ·å¼ç§»åŠ¨åˆ°app.wxssä¸‹ï¼š123456789101112131415161718192021/**index.wxssç”¨æˆ·ä¿¡æ¯æ ·å¼**/.userinfo &#123; display: flex; flex-direction: column; align-items: center;&#125;.userinfo-avatar &#123; width: 128rpx; height: 128rpx; margin: 20rpx; border-radius: 50%;&#125;.userinfo-nickname &#123; color: #aaa;&#125;.usermotto &#123; margin-top: 200px;&#125; æŽ¥ä¸‹æ¥æ–°å»ºcommonç›®å½•ï¼Œæ–°å»ºæ–‡ä»¶header.wxml 123456789&lt;!-- åœ¨è¿™ä¸ªæ–‡ä»¶é‡ŒæŠŠindexé¡µé¢çš„ç”¨æˆ·ä¿¡æ¯ç§»åŠ¨è¿‡æ¥ --&gt;&lt;view class="userinfo"&gt; &lt;button wx:if="&#123;&#123;!hasUserInfo &amp;&amp; canIUse&#125;&#125;" open-type="getUserInfo" bindgetuserinfo="getUserInfo"&gt; èŽ·å–å¤´åƒæ˜µç§° &lt;/button&gt; &lt;block wx:else&gt; &lt;image bindtap="bindViewTap" class="userinfo-avatar" src="&#123;&#123;userInfo.avatarUrl&#125;&#125;" background-size="cover"&gt;&lt;/image&gt; &lt;text class="userinfo-nickname"&gt;&#123;&#123;userInfo.nickName&#125;&#125;&lt;/text&gt; &lt;/block&gt;&lt;/view&gt; åœ¨ index.wxmlåˆé€‚ä½ç½®å¼•å…¥æ–‡ä»¶ï¼š 1&lt;include src="../common/header.wxml"/&gt; åœ¨ index.jsåˆé€‚ä½ç½®ç¼“å­˜æœ¬åœ°ï¼š 12// ç¼“å­˜æœ¬åœ°wx.setStorageSync('userData', this.data.userInfo) åœ¨éœ€è¦å±•ç¤ºçš„é¡µé¢å°±å¯ä»¥å¼•å…¥å…¬å…±æ¨¡å—ï¼Œå’Œæ•°æ®å…·ä½“é…ç½®ï¼š 1&lt;include src="../common/header.wxml"/&gt; åŒæ—¶å°ç¨‹åºè¿˜æä¾›äº†templateæ¨¡æ¿ç»„ä»¶ï¼Œå¯ä»¥åœ¨æ¨¡æ¿é‡Œè‡ªå®šä¹‰ä»£ç ç‰‡æ®µï¼Œåœ¨ä¸åŒçš„éœ€è¦çš„åœ°æ–¹è°ƒç”¨ã€‚æŽ¥ä¸‹æ¥å¯ä»¥è¯•ç€åŠ å…¥ä¸€ä¸ªfooter.wxmlå…¬å…±ç»„ä»¶æ–‡ä»¶å§ã€‚ footer.wxmlï¼š éœ€è¦å¼•å…¥çš„æ–‡ä»¶é…ç½®ï¼š æ³¨æ„name ä¸Ž is çš„å¯¹åº”å…³ç³»ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰å‡ºå¤šä¸ªnameæ¨¡æ¿é€‚åº”ä¸åŒçš„çŽ¯å¢ƒã€‚ ç”Ÿå‘½å‘¨æœŸapp.jsæ–‡ä»¶,å°±æ˜¯ä¸ªApp()å‡½æ•°,App()å‡½æ•°çš„æ„æ€ï¼Œå…¶å®žå°±æ˜¯æ³¨å†Œä¸€ä¸ªå°ç¨‹åºã€‚çœ‹åˆ°index.jsæ–‡ä»¶ä¸­ï¼Œä¼šæœ‰var app = getApp()è¿™æ ·çš„ä»£ç å‡ºçŽ°ï¼Œè¿™æ˜¯èŽ·å–å°ç¨‹åºå®žä¾‹çš„æ„æ€ã€‚å…¶å®žè¿™æ˜¯é…å¥—çš„ã€‚åªæœ‰å…ˆæ³¨å†Œäº†å°ç¨‹åºï¼ŒåŽé¢æ‰èƒ½èŽ·å¾—å°ç¨‹åºçš„å®žä¾‹ã€‚å†æ¥çœ‹ä¸‹App()çš„ä½¿ç”¨æ–¹æ³•ã€‚å°±æ˜¯æŽ¥æ”¶äº†ä¸€ä¸ªobjectå‚æ•°è€Œå·²ã€‚è¿™ä¸ªå¯¹è±¡å‚æ•°ä½ å¯ä»¥æŠŠå®ƒæ‹†å‡ºæ¥ï¼Œå•ç‹¬ç”¨ä¸ªå˜é‡å‘½åã€‚è¿™ä¸ªobjectï¼Œé™¤äº†getUserInfoè¿™ä¸ªè‡ªå®šä¹‰å‡½æ•°ï¼Œè¿˜æœ‰onLaunchæ˜¯å†…ç½®çš„å‡½æ•°ï¼Œé‚£ä¹ˆonLaunchæ˜¯å•¥æ„æ€å‘¢ï¼Ÿå…ˆæ¥è¯´ä¸‹ç”Ÿå‘½å‘¨æœŸçš„æ¦‚å¿µã€‚ç”Ÿå‘½å‘¨æœŸï¼Œå°±æ˜¯ç¨‹åºä»Žåˆ›å»ºåˆ°é”€æ¯çš„å…¨è¿‡ç¨‹ã€‚æ¯”å¦‚reactçš„ç”Ÿå‘½å‘¨æœŸï¼Œå¤§ä½“åˆ†ä¸ºï¼šåˆå§‹åŒ–ï¼Œæ¸²æŸ“å‰ï¼Œæ¸²æŸ“ä¸­ï¼Œæ¸²æŸ“åŽï¼Œé”€æ¯ç­‰æƒ…æ™¯ï¼Œè¿™ä¸ªä¸»è¦æ˜¯è€ƒè™‘webç½‘é¡µçš„ç‰¹æ€§åˆ’åˆ†çš„ï¼›è€Œå°ç¨‹åºæœ¬èº«å¹¶ä¸æ˜¯ç½‘é¡µï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ›´åƒæ˜¯appã€‚ä»¥å®‰å“çš„Activity(å¯ä»¥ç†è§£ä¸ºè§†å›¾)ä¸ºä¾‹,appçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸‹å›¾ç¤ºï¼š 1.å¯åŠ¨Activityï¼šç³»ç»Ÿä¼šå…ˆè°ƒç”¨onCreateæ–¹æ³•ï¼Œç„¶åŽè°ƒç”¨onStartæ–¹æ³•ï¼Œæœ€åŽè°ƒç”¨onResumeï¼ŒActivityè¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚2.å½“å‰Activityè¢«å…¶ä»–Activityè¦†ç›–å…¶ä¸Šæˆ–è¢«é”å±ï¼šç³»ç»Ÿä¼šè°ƒç”¨onPauseæ–¹æ³•ï¼Œæš‚åœå½“å‰Activityçš„æ‰§è¡Œã€‚3.å½“å‰Activityç”±è¢«è¦†ç›–çŠ¶æ€å›žåˆ°å‰å°æˆ–è§£é”å±ï¼šç³»ç»Ÿä¼šè°ƒç”¨onResumeæ–¹æ³•ï¼Œå†æ¬¡è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚4.å½“å‰Activityè½¬åˆ°æ–°çš„Activityç•Œé¢æˆ–æŒ‰Homeé”®å›žåˆ°ä¸»å±ï¼Œè‡ªèº«é€€å±…åŽå°ï¼šç³»ç»Ÿä¼šå…ˆè°ƒç”¨onPauseæ–¹æ³•ï¼Œç„¶åŽè°ƒç”¨onStopæ–¹æ³•ï¼Œè¿›å…¥åœæ»žçŠ¶æ€ã€‚5.ç”¨æˆ·åŽé€€å›žåˆ°æ­¤Activityï¼šç³»ç»Ÿä¼šå…ˆè°ƒç”¨onRestartæ–¹æ³•ï¼Œç„¶åŽè°ƒç”¨onStartæ–¹æ³•ï¼Œæœ€åŽè°ƒç”¨onResumeæ–¹æ³•ï¼Œå†æ¬¡è¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚6.å½“å‰Activityå¤„äºŽè¢«è¦†ç›–çŠ¶æ€æˆ–è€…åŽå°ä¸å¯è§çŠ¶æ€ï¼Œå³ç¬¬2æ­¥å’Œç¬¬4æ­¥ï¼Œç³»ç»Ÿå†…å­˜ä¸è¶³ï¼Œæ€æ­»å½“å‰Activityï¼Œè€ŒåŽç”¨æˆ·é€€å›žå½“å‰Activityï¼šå†æ¬¡è°ƒç”¨onCreateæ–¹æ³•ã€onStartæ–¹æ³•ã€onResumeæ–¹æ³•ï¼Œè¿›å…¥è¿è¡ŒçŠ¶æ€ã€‚7.ç”¨æˆ·é€€å‡ºå½“å‰Activityï¼šç³»ç»Ÿå…ˆè°ƒç”¨onPauseæ–¹æ³•ï¼Œç„¶åŽè°ƒç”¨onStopæ–¹æ³•ï¼Œæœ€åŽè°ƒç”¨onDestoryæ–¹æ³•ï¼Œç»“æŸå½“å‰Activityã€‚ æ­£å¸¸ä¸€ä¸ªappçš„ç”Ÿå‘½å‘¨æœŸè¿˜æ˜¯ååˆ†ç¹ççš„ï¼Œæœ‰å¾ˆå¤šçš„ä½¿ç”¨åœºæ™¯éƒ½å¾—è€ƒè™‘åˆ°ã€‚å°ç¨‹åºç”Ÿå‘½å‘¨æœŸï¼Œåˆ†ä¸ºæ³¨å†ŒAppå’Œæ³¨å†ŒPageä¸¤æ®µã€‚å…¶å®žä¹Ÿç®€å•ã€‚Appå¯ä»¥æ¯”ä½œæµè§ˆå™¨ï¼ŒPageå¯ä»¥æ¯”ä½œç½‘é¡µã€‚é‚£ä¹ˆAppçš„ç”Ÿå‘½å‘¨æœŸå‘¢ï¼Œå°±æ˜¯ä½ åŒå‡»æµè§ˆå™¨æ‰“å¼€çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ï¼šåˆ›å»ºã€å±•ç¤ºã€éšè—ï¼ŒåŒºåŒºä¸‰ä¸ªè€Œå·². onShowå’ŒonHideï¼Œä¹Ÿå°±æ˜¯å‰å°å’ŒåŽå°çš„å®šä¹‰ã€‚ å½“ç”¨æˆ·ç‚¹å‡»å·¦ä¸Šè§’å…³é—­ï¼Œæˆ–è€…æŒ‰äº†è®¾å¤‡ Home é”®ç¦»å¼€å¾®ä¿¡ï¼Œå°ç¨‹åºå¹¶æ²¡æœ‰ç›´æŽ¥é”€æ¯ï¼Œè€Œæ˜¯è¿›å…¥äº†åŽå°(onHide)ï¼›å½“å†æ¬¡è¿›å…¥å¾®ä¿¡æˆ–å†æ¬¡æ‰“å¼€å°ç¨‹åºï¼Œåˆä¼šä»ŽåŽå°è¿›å…¥å‰å°(onShow)ã€‚å½“onShowçš„åŠ¨ä½œæ‰§è¡Œå®Œæ¯•åŽï¼Œç´§æŽ¥ç€å°±è¿›å…¥Pageçš„ç”Ÿå‘½å‘¨æœŸäº†ï¼ˆonLoadï¼‰ã€‚è€Œå¯¹äºŽonErrorå’Œå…¶ä»–é€‰é¡¹ï¼Œä¸€èˆ¬ä¸ç»å¸¸ä½¿ç”¨ã€‚ Pageï¼ˆç½‘é¡µï¼‰çš„ç”Ÿå‘½å‘¨æœŸã€‚Page() å‡½æ•°ç”¨æ¥æ³¨å†Œä¸€ä¸ªé¡µé¢ã€‚æŽ¥å—ä¸€ä¸ª object å‚æ•°ï¼Œå…¶æŒ‡å®šé¡µé¢çš„åˆå§‹æ•°æ®ã€ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€äº‹ä»¶å¤„ç†å‡½æ•°ç­‰ã€‚ è¿™é‡Œä¹Ÿæœ‰onShowå’ŒonHideï¼Œé‚£ä¹ˆè¿™ä¿©å“¥ä»¬åˆæ˜¯å•¥æ—¶å€™è§¦å‘å‘¢ï¼ŸonShowæ˜¯é¡µé¢åŠ è½½ï¼ˆonLoadï¼‰åŽé©¬ä¸Šè§¦å‘çš„ï¼Œä¹Ÿå°±å±•ç¤ºé¡µé¢çš„æ„æ€ã€‚ä½†æ˜¯ï¼Œå±•ç¤ºå¹¶ä¸ä»£è¡¨æ¸²æŸ“å®Œæˆï¼Œæ‰€ä»¥è¿˜æœ‰ä¸ªç›‘å¬æ¸²æŸ“æ˜¯å¦å®Œæˆï¼ˆonReadyï¼‰çš„è¿‡ç¨‹ï¼›å½“è·³åˆ°å¦å¤–ä¸€ä¸ªé¡µé¢åŽï¼Œå°±è§¦å‘äº†onHideéšè—é¡µé¢ï¼Œæœ€åŽå½“é¡µé¢å…³é—­æ—¶ï¼Œå°±è§¦å‘äº†onUnloadäº‹ä»¶ã€‚å•¥å«é¡µé¢å…³é—­å‘¢ï¼Ÿå°ç¨‹åºä¸æ˜¯ç½‘é¡µå•Šï¼Œä¹Ÿæ²¡å…³é—­æŒ‰é’®ï¼Œæ€Žä¹ˆå…³é—­å‘¢ï¼Ÿ é¡µé¢è·³è½¬åˆ†ä¸¤ç§æƒ…å†µï¼š1ã€wx.navigateToä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬2ã€wx.redirectToå…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬ è¿™äºŒè€…çš„åŒºåˆ«å°±æ˜¯æ˜¯å¦èƒ½å¤Ÿè¿”å›žä¸Šä¸€ä¸ªé¡µé¢ã€‚å¦‚æžœæ˜¯å…³é—­äº†å½“å‰é¡µé¢è·³è½¬ï¼Œå°±æ— æ³•è¿”å›žäº†ã€‚ 12&lt;button open-type="getUserInfo" bindtap="keepJump"&gt;ä¿ç•™å½“å‰é¡µé¢å¹¶è·³è½¬ &lt;/button&gt;&lt;button open-type="getUserInfo" bindtap="closeJump"&gt;å…³é—­å½“å‰é¡µé¢å¹¶è·³è½¬ &lt;/button&gt;]]></content>
      <categories>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°ç¨‹åºä¹‹æ—…(äºŒ)]]></title>
    <url>%2Fblog%2F2018%2F06%2F15%2F%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B9%8B%E6%97%85-%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[å°ç¨‹åºæ˜¯ä¸€ç§æ–°çš„å¼€æ”¾èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°å¼€å‘ä¸€ä¸ªå°ç¨‹åºã€‚å°ç¨‹åºå¯ä»¥åœ¨å¾®ä¿¡å†…è¢«ä¾¿æ·åœ°èŽ·å–å’Œä¼ æ’­ï¼ŒåŒæ—¶å…·æœ‰å‡ºè‰²çš„ä½¿ç”¨ä½“éªŒã€‚è¿™æ˜¯å…³äºŽformç»„ä»¶ã€æœ¬åœ°å­˜å‚¨å’Œé¡µé¢çš„è·³è½¬å’Œå›žé€€çš„å°ç¨‹åºä¹‹æ—…ã€‚ ä»‹ç»ä¸‹ formç»„ä»¶ã€æœ¬åœ°å­˜å‚¨å’Œé¡µé¢çš„è·³è½¬å’Œå›žé€€ è¡¨å•ç»„ä»¶å’Œæ•°æ®å­˜å‚¨åŠŸèƒ½æ–°å»ºä¸€ä¸ªç™»å½•é¡µé¢ï¼Œè¡¨å•é‡Œé¢åŒ…æ‹¬å§“åã€å¯†ç ã€æŒ‰é’®ã€‚ç‚¹å‡»æŒ‰é’®éœ€ä¿å­˜æ•°æ®ã€‚å¯ä»¥äº†è§£åˆ°è¡¨å•ç»„ä»¶å’Œæ•°æ®å­˜å‚¨åŠŸèƒ½ åœ¨pagesä¸‹æ–°å¢žä¸€ä¸ªloginæ–‡ä»¶å¤¹ã€‚ æ“ä½œæ­¥éª¤ä¸ºï¼špagesæ–‡ä»¶å¤¹å³é”®-&gt;æ–°å»º-&gt;ç›®å½•ï¼Œ ç„¶åŽæ–°å»ºä¸‰ä¸ªåŸºæœ¬æ–‡ä»¶,åœ¨å…¥å£app.jsonçš„pagesæ•°ç»„ä¸­ï¼Œæ·»åŠ ä¸Šæ–°åŠ çš„é¡µé¢è·¯å¾„ã€‚ é…ç½®ä»£ç ï¼š login.wxml:1234567891011&lt;!--login.wxml--&gt;&lt;form bindsubmit="formSubmit"&gt; &lt;view class="container"&gt; &lt;input name="userName" type="text" class="myinput" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" value="&#123;&#123;userName&#125;&#125;"/&gt; &lt;input name="userPass" type="text" class="myinput" password placeholder="è¯·è¾“å…¥å¯†ç " value="&#123;&#123;userPass&#125;&#125;"/&gt; &lt;button formType="submit"&gt;æ ‡è®°æˆ‘&lt;/button&gt; &lt;/view&gt;&lt;/form&gt; login.js: 12345678910111213141516171819202122232425262728//login.jsPage(&#123; data: &#123; userName: '',//ç”¨æˆ·å userPass: '',//å¯†ç  &#125;, //è¡¨å•æäº¤å‡½æ•°ï¼Œæ¯ä¸ªinputéœ€è¦æœ‰nameï¼Œå¦åˆ™èŽ·å–ä¸åˆ°å€¼ã€‚ formSubmit: function (e) &#123; console.log(e.detail.value);//è¿”å›žæ ¼å¼ï¼šObject &#123;userName: "hello", userPass: "123"&#125; var obj = e.detail.value; if (obj.userName &amp;&amp; obj.userPass) &#123; //æœ¬åœ°å­˜å‚¨ç”¨æˆ·åå’Œå¯†ç  wx.setStorageSync('userName', obj.userName); wx.setStorageSync('userPass', obj.userPass); &#125; &#125;, //åŠ è½½äº‹ä»¶ï¼Œå¦‚æžœåˆ¤æ–­æœ‰ç¼“å­˜ä¿¡æ¯ï¼Œå°±è¯»å–å¹¶æ˜¾ç¤ºåœ¨inputé‡Œã€‚ onLoad: function () &#123; var name = wx.getStorageSync('userName'); var password = wx.getStorageSync('userPass'); if (name) &#123; this.setData(&#123; userName: name &#125;); &#125; if (password) &#123; this.setData(&#123; userPass: password &#125;); &#125; &#125;&#125;) login.wxsss: 12345.myinput&#123; border:1px solid cyan; border-radius: 40px; margin-bottom: 10px;&#125; å¯ä»¥åœ¨é¦–é¡µåˆ›å»ºä¸€ä¸ªæŒ‰é’®ï¼Œç„¶åŽåˆ©ç”¨wx.navigateToç»„ä»¶è·³è½¬ä¸€ä¸‹å³å¯ï¼Œç›´æŽ¥çœ‹ä¸€ä¸‹æ•ˆæžœï¼š å°ç¨‹åºçš„è¡¨å•ï¼Œé»˜è®¤æ˜¯å¼‚æ­¥æäº¤çš„ã€‚å®ƒåœ¨formä¸Šå…¨å±€ç»‘å®šä¸€ä¸ªäº‹ä»¶ï¼Œç„¶åŽæ ¹æ®nameåŽ»å¯»æ‰¾è¡¨å•å…ƒç´ çš„å€¼ã€‚æ‰€ä»¥æ¯ä¸ªinputè¾“å…¥æ¡†ä¸€å®šè¦è·Ÿä¸Šnameï¼Œå¦åˆ™æ‰¾ä¸åˆ°ã€‚è¿™é‡Œåªæ˜¯inputï¼Œè‡³äºŽå…¶ä»–çš„è¡¨å•å…ƒç´ å¯ä»¥å†åŽ»çœ‹çœ‹ã€‚è¿˜æœ‰å°±æ˜¯æœ‰å…³æ•°æ®å­˜å‚¨ï¼Œè¦ç”¨å°ç¨‹åºæä¾›çš„apiï¼š wx.setStorage(OBJ)ï¼šå¼‚æ­¥å­˜å‚¨å†…å®¹ã€‚wx.setStorageSync(key,data)ï¼šåŒæ­¥å­˜å‚¨å†…å®¹ã€‚dataå¯ä»¥æ˜¯stringæˆ–objectã€‚wx.getStorage(OBJ)ï¼šå¼‚æ­¥èŽ·å–å†…å®¹ã€‚wx.getStorageSync(key)ï¼šåŒæ­¥èŽ·å–å†…å®¹ã€‚ ä¸€èˆ¬æ¥è¯´ï¼ŒåŒæ­¥å­˜å‚¨çš„æ¯”è¾ƒå¸¸ç”¨ï¼Œå› ä¸ºä¸æ¶‰åŠåˆ°å›žè°ƒï¼Œæ¯”è¾ƒç®€å•ã€‚è€Œå¼‚æ­¥å­˜å‚¨çš„è¯ï¼Œè¦æ³¨æ„å…¶OBJå‚æ•°çš„ä¹¦å†™æ ¼å¼ï¼Œå®ƒåŒ…æ‹¬ï¼š keyï¼Œdataï¼Œsuccesså›žè°ƒå‡½æ•°ï¼Œfailå›žè°ƒå‡½æ•°ç­‰å‚æ•°çš„å¯¹è±¡ å°ç¨‹åºçš„æœ¬åœ°æ•°æ®å­˜å‚¨ä¹Ÿæœ‰å¤§å°é™åˆ¶ï¼šä¸èƒ½è¶…è¿‡10MB å¼‚æ­¥å­˜å‚¨ç™»å½•é¡µçš„ç”¨æˆ·åå’Œå¯†ç åœ¨å¼‚æ­¥å­˜å‚¨ç™»å½•é¡µçš„ç”¨æˆ·åå’Œå¯†ç ä¹‹åŽå­˜å‚¨æˆåŠŸï¼Œè¿”å›žåˆ°ä¸Šä¸€ä¸ªé¡µé¢ï¼Œè¿™é‡Œæœ‰å¼‚æ­¥å­˜å‚¨å’Œå†…å®¹èŽ·å–ã€‚ login.jsï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657//login.jsPage(&#123; data: &#123; userName: null, userPass: null &#125;, //è¡¨å•æäº¤å‡½æ•°ï¼Œæ¯ä¸ªinputéœ€è¦æœ‰nameï¼Œå¦åˆ™èŽ·å–ä¸åˆ°å€¼ã€‚ formSubmit: function (e) &#123; console.log(e.detail.value);//è¿”å›žæ ¼å¼ï¼šObject &#123;userName: "hello", userPass: "123"&#125; var obj = e.detail.value; if (obj.userName &amp;&amp; obj.userPass) &#123; //å¼‚æ­¥å­˜å‚¨ wx.setStorage(&#123; key: 'userInfo', data: obj, success: function (res) &#123; // success wx.navigateBack(&#123; delta: 1, // å›žé€€å‰ delta(é»˜è®¤ä¸º1) é¡µé¢ &#125;); &#125;, fail: function () &#123; // fail console.log('error'); &#125;, complete: function () &#123; // complete console.log('complete'); &#125; &#125;) &#125; &#125;, //åŠ è½½äº‹ä»¶ï¼Œå¦‚æžœåˆ¤æ–­æœ‰ç¼“å­˜ä¿¡æ¯ï¼Œå°±è¯»å–å¹¶æ˜¾ç¤ºåœ¨inputé‡Œã€‚ onLoad: function () &#123; var that = this; wx.getStorage(&#123; key: 'userInfo', success: function (res) &#123; // success that.setData(&#123; userName: res.data.userName &#125;); that.setData(&#123; userPass: res.data.userPass &#125;); &#125;, fail: function () &#123; // fail console.log('error'); &#125;, complete: function () &#123; // complete console.log('complete'); &#125; &#125;) &#125;&#125;) è¿˜æœ‰å°±æ˜¯å¯¹äºŽå­˜å‚¨çš„æ•°æ®è¦æ€Žä¹ˆé”€æ¯å‘¢ï¼Ÿå°ç¨‹åºåŒæ ·æä¾›äº†apiï¼š wx.removeStorage(OBJ)ï¼šå¼‚æ­¥ç§»é™¤æŸæ¡æ•°æ®ã€‚wx.removeStorageSync(key)ï¼šåŒæ­¥ç§»é™¤æŸæ¡æ•°æ®ã€‚wx.clearStorage()ï¼šå¼‚æ­¥æ¸…é™¤æ‰€æœ‰æ•°æ®ã€‚wx.clearStorageSync()ï¼šåŒæ­¥æ¸…é™¤æ‰€æœ‰æ•°æ®ã€‚ åœ¨ä¹‹å‰çš„é¡µé¢é‡ŒåŠ å…¥ä¸€ä¸ªæ¸…é™¤æœ¬åœ°ç¼“å­˜æ•°æ®çš„ä¸€ä¸ªæŒ‰é’® index.js:12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364//index.js//èŽ·å–åº”ç”¨å®žä¾‹const app = getApp()Page(&#123; data: &#123; motto: 'Hello World', userInfo: &#123;&#125;, hasUserInfo: false, canIUse: wx.canIUse('button.open-type.getUserInfo') &#125;, //äº‹ä»¶å¤„ç†å‡½æ•° bindViewTap: function () &#123; wx.navigateTo(&#123; url: '../logs/logs' &#125;) &#125;, //é¡µé¢è·³è½¬äº‹ä»¶å¤„ç†å‡½æ•° bindViewLogin: function () &#123; wx.navigateTo(&#123; url: '../login/login' &#125;) &#125;, clearData: function () &#123; //æ¸…é™¤æ‰€æœ‰æ•°æ® wx.clearStorageSync(); &#125;, onLoad: function () &#123; if (app.globalData.userInfo) &#123; this.setData(&#123; userInfo: app.globalData.userInfo, hasUserInfo: true &#125;) &#125; else if (this.data.canIUse)&#123; // ç”±äºŽ getUserInfo æ˜¯ç½‘ç»œè¯·æ±‚ï¼Œå¯èƒ½ä¼šåœ¨ Page.onLoad ä¹‹åŽæ‰è¿”å›ž // æ‰€ä»¥æ­¤å¤„åŠ å…¥ callback ä»¥é˜²æ­¢è¿™ç§æƒ…å†µ app.userInfoReadyCallback = res =&gt; &#123; this.setData(&#123; userInfo: res.userInfo, hasUserInfo: true &#125;) &#125; &#125; else &#123; // åœ¨æ²¡æœ‰ open-type=getUserInfo ç‰ˆæœ¬çš„å…¼å®¹å¤„ç† wx.getUserInfo(&#123; success: res =&gt; &#123; app.globalData.userInfo = res.userInfo this.setData(&#123; userInfo: res.userInfo, hasUserInfo: true &#125;) &#125; &#125;) &#125; &#125;, getUserInfo: function(e) &#123; console.log(e) app.globalData.userInfo = e.detail.userInfo this.setData(&#123; userInfo: e.detail.userInfo, hasUserInfo: true &#125;) &#125;&#125;) æ€»ç»“ä»¥ä¸Šå°±æ˜¯è¡¨å•å’Œæœ¬åœ°æ•°æ®å­˜å‚¨çš„ä¸€äº›ç»ƒä¹ ã€‚]]></content>
      <categories>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactå¼€å‘å¸¸ç”¨è®¾è®¡æ¨¡å¼-é›†æˆç¬¬ä¸‰æ–¹åº“]]></title>
    <url>%2Fblog%2F2018%2F06%2F14%2FReact%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%9B%86%E6%88%90%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%2F</url>
    <content type="text"><![CDATA[React æˆ–è®¸æ˜¯æž„å»º UI çš„æœ€ä½³é€‰æ‹©ä¹‹ä¸€ã€‚è‰¯å¥½çš„è®¾è®¡ä¸Žå¼ºå¤§çš„æ”¯æŒï¼Œè¿˜æœ‰åºžå¤§çš„ç¤¾åŒºã€‚ä½†æ˜¯ï¼Œæœ‰äº›æƒ…å†µä¸‹ï¼Œæƒ³è¦ä½¿ç”¨å¤–éƒ¨æœåŠ¡æˆ–æƒ³è¦é›†æˆä¸€äº›å®Œå…¨ä¸åŒçš„ä¸œè¥¿ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒReact åœ¨åº•å±‚ä¸Žå®žé™… DOM æœ‰å¤§é‡çš„äº¤äº’å¹¶æŽ§åˆ¶é¡µé¢ä¸Šæ¸²æŸ“ä»€ä¹ˆï¼ŒåŸºæœ¬ä¸Šå®ƒæ˜¯å¼€å‘è€…ä¸Žå®žé™… DOM é—´çš„æ¡¥æ¢ã€‚è¿™ä¹Ÿæ­£æ˜¯ä¸ºä»€ä¹ˆ React é›†æˆç¬¬ä¸‰æ–¹ç»„ä»¶æœ‰äº›éº»çƒ¦çš„åœ°æ–¹ã€‚ é›†æˆç¬¬ä¸‰æ–¹åº“æŽ¥ä¸‹æ¥ä»‹ç»å¦‚ä½•å®‰å…¨åœ°æ··ç”¨ React å’Œ jQuery çš„ UI æ’ä»¶ã€‚ ç¤ºä¾‹è¿™ä¸ªç¤ºä¾‹æŒ‘é€‰äº† tag-it è¿™ä¸ª jQuery æ’ä»¶ã€‚å®ƒå°†æ— åºåˆ—è¡¨è½¬æ¢æˆå¯ä»¥ç®¡ç†æ ‡ç­¾çš„è¾“å…¥æ¡†ï¼š 1234&lt;ul&gt; &lt;li&gt;JavaScript&lt;/li&gt; &lt;li&gt;CSS&lt;/li&gt;&lt;/ul&gt; è½¬æ¢æˆ: è¦è¿è¡Œèµ·æ¥ï¼Œéœ€è¦å¼•å…¥ jQueyrã€jQuery UI å’Œ tag-itæ’ä»¶ã€‚è¿™æ˜¯è¿è¡Œçš„ä»£ç 1$('&lt;dom element selector&gt;').tagit(); é€‰æ‹© DOM å…ƒç´ ï¼Œç„¶åŽè°ƒç”¨ tagit() ã€‚ çŽ°åœ¨ï¼Œæ¥åˆ›å»ºä¸€ä¸ªç®€å•çš„ React åº”ç”¨ï¼Œå®ƒå°†ä½¿ç”¨ jQuery æ’ä»¶: 1234567891011121314151617181920212223242526272829303132// Tags.jsxclass Tags extends React.Component &#123; render() &#123; return ( &lt;ul&gt; &#123; this.props.tags.map( (tag, i) =&gt; &lt;li key=&#123; i &#125;&gt;&#123; tag &#125; &lt;/li&gt; ) &#125; &lt;/ul&gt; ); &#125;&#125;;// App.jsxclass App extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; tags: ['JavaScript', 'CSS' ] &#125;; &#125; render() &#123; return ( &lt;div&gt; &lt;Tags tags=&#123; this.state.tags &#125; /&gt; &lt;/div&gt; ); &#125;&#125;ReactDOM.render(&lt;App /&gt;, document.querySelector('#container')); App ç±»æ˜¯å…¥å£ã€‚å®ƒä½¿ç”¨äº†Tagsç»„ä»¶ï¼ŒTags ç»„ä»¶ä¼šæ ¹æ®ä¼ å…¥çš„ tags å±žæ€§æ¥å±•ç¤ºæ— åºåˆ—è¡¨ã€‚å½“ React åœ¨é¡µé¢ä¸Šæ¸²æŸ“åˆ—è¡¨æ—¶å°±æœ‰äº†&lt;ul&gt;æ ‡ç­¾ï¼Œè¿™æ ·å°±å¯ä»¥å’Œ jQuery æ’ä»¶è¿žæŽ¥èµ·æ¥ã€‚ å¼ºåˆ¶å•é€šé“æ¸²æŸ“é¦–å…ˆï¼Œè¦åšçš„å°±æ˜¯å¼ºåˆ¶ Tags ç»„ä»¶è¿›è¡Œå•é€šé“æ¸²æŸ“ã€‚è¿™æ˜¯å› ä¸ºå½“ React åœ¨å®žé™… DOMä¸­æ·»åŠ å®Œå®¹å™¨å…ƒç´ åŽï¼Œæƒ³å°†æŽ§åˆ¶æƒäº¤ç»™ jQuery ã€‚å¦‚æžœä¸åšæŽ§åˆ¶çš„è¯ï¼Œé‚£ä¹ˆ React å’Œ jQuery å°†ä¼šæ“çºµåŒä¸€ä¸ª DOM å…ƒç´ è€Œå½¼æ­¤ä¹‹é—´ä¸çŸ¥æƒ…ã€‚è¦å®žçŽ°å•é€šé“æ¸²æŸ“ï¼Œéœ€è¦ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³• shouldComponentUpdateï¼Œåƒè¿™æ ·:123456class Tags extends React.Component &#123; shouldComponentUpdate() &#123; return false; &#125; ... è¿™é‡Œæ°¸è¿œéƒ½è¿”å›ž false ï¼Œæƒ³è®©ç»„ä»¶çŸ¥é“æ°¸è¿œä¸è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚å®šä¹‰ shouldComponentUpdate å¯¹äºŽ React ç»„ä»¶æ¥è¯´ï¼Œæ˜¯è®©å…¶çŸ¥é“æ˜¯å¦è§¦å‘ render æ–¹æ³•ã€‚è¿™é€‚ç”¨äºŽçš„åœºæ™¯ï¼Œå› ä¸ºæƒ³ä½¿ç”¨ React æ¥æ·»åŠ  HTML æ ‡è®°ï¼Œæ·»åŠ å®ŒåŽå°±ä¸æƒ³å†ä¾é  React ã€‚ åˆå§‹åŒ–æ’ä»¶React æä¾›äº† API æ¥è®¿é—®å®žé™… DOM èŠ‚ç‚¹ã€‚éœ€è¦åœ¨ç›¸åº”çš„èŠ‚ç‚¹ä¸Šä½¿ç”¨ ref å±žæ€§ï¼Œç¨åŽå¯ä»¥é€šè¿‡ this.refs æ¥è®¿é—® DOM ã€‚componentDidMount æ˜¯æœ€é€‚åˆåˆå§‹åŒ– tag-it æ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚è¿™æ˜¯å› ä¸ºå½“ React å°† render æ–¹æ³•è¿”å›žçš„ç»“æžœæŒ‚è½½åˆ° DOM æ—¶æ‰è°ƒç”¨æ­¤æ–¹æ³•ã€‚ 123456789101112131415161718class Tags extends React.Component &#123; ... componentDidMount() &#123; this.list = $(this.refs.list); this.list.tagit(); &#125; render() &#123; return ( &lt;ul ref='list'&gt; &#123; this.props.tags.map( (tag, i) =&gt; &lt;li key=&#123; i &#125;&gt;&#123; tag &#125; &lt;/li&gt; ) &#125; &lt;/ul&gt; ); &#125; ... ä¸Šé¢çš„ä»£ç å’Œ shouldComponentUpdate ä¸€èµ·ä½¿ç”¨å°±ä¼šä½¿ React æ¸²æŸ“å‡ºæœ‰ä¸¤é¡¹çš„ &lt;ul&gt;ï¼Œç„¶åŽ tag-it ä¼šå…¶è½¬æ¢æˆæ ‡ç­¾å¯ç¼–è¾‘çš„æ’ä»¶ã€‚ ä½¿ç”¨ React æŽ§åˆ¶æ’ä»¶å‡å¦‚è¯´æˆ‘ä»¬æƒ³è¦é€šè¿‡ä»£ç æ¥ä¸ºå·²ç»è¿è¡Œçš„ tag-it æ’ä»¶æ·»åŠ æ–°æ ‡ç­¾ã€‚è¿™ç§æ“ä½œå°†ç”± React ç»„ä»¶è§¦å‘ï¼Œå¹¶éœ€è¦ä½¿ç”¨ jQuery API ã€‚æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ç§æ–¹å¼å°†æ•°æ®ä¼ é€’ç»™ Tags ç»„ä»¶ï¼Œä½†åŒæ—¶è¿˜è¦ä¿æŒå•é€šé“æ¸²æŸ“ã€‚ ä¸ºäº†è¯´æ˜Žæ•´ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ App ç±»ä¸­æ·»åŠ ä¸€ä¸ªè¾“å…¥æ¡†å’ŒæŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®æ—¶å°†è¾“å…¥æ¡†çš„å€¼ä¼ ç»™ Tags ç»„ä»¶ã€‚ 12345678910111213141516171819202122232425262728class App extends React.Component &#123; constructor(props) &#123; super(props); this._addNewTag = this._addNewTag.bind(this); this.state = &#123; tags: ['JavaScript', 'CSS' ], newTag: null &#125;; &#125; _addNewTag() &#123; this.setState(&#123; newTag: this.refs.field.value &#125;); &#125; render() &#123; return ( &lt;div&gt; &lt;p&gt;Add new tag:&lt;/p&gt; &lt;div&gt; &lt;input type='text' ref='field' /&gt; &lt;button onClick=&#123; this._addNewTag &#125;&gt;Add&lt;/button&gt; &lt;/div&gt; &lt;Tags tags=&#123; this.state.tags &#125; newTag=&#123; this.state.newTag &#125; /&gt; &lt;/div&gt; ); &#125;&#125; æˆ‘ä»¬ä½¿ç”¨å†…éƒ¨çŠ¶æ€æ¥å­˜å‚¨æ–°æ·»åŠ çš„æ ‡ç­¾åç§°ã€‚æ¯æ¬¡ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæˆ‘å°±æ›´æ–°çŠ¶æ€å¹¶è§¦å‘ Tags ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚ä½†ç”±äºŽ shouldComponentUpdateçš„å­˜åœ¨ï¼Œé¡µé¢ä¸Šä¸ä¼šæœ‰ä»»ä½•çš„æ›´æ–°ã€‚å”¯ä¸€çš„å˜åŒ–å°±æ˜¯å¾—åˆ° newTagå±žæ€§çš„æ–°å€¼ï¼Œå¦ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³• componentWillReceiveProps ä¼šæ•èŽ·åˆ°å±žæ€§çš„æ–°å€¼: 123456class Tags extends React.Component &#123; ... componentWillReceiveProps(newProps) &#123; this.list.tagit('createTag', newProps.newTag); &#125; ... .tagit(&#39;createTag&#39;, newProps.newTag)æ˜¯çº¯ç²¹çš„ jQuery ä»£ç ã€‚å¦‚æžœæƒ³è°ƒç”¨ç¬¬ä¸‰æ–¹åº“çš„æ–¹æ³•ï¼ŒcomponentWillReceivePropsæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ ä¸‹é¢æ˜¯ Tags ç»„ä»¶çš„å®Œæ•´ä»£ç : 1234567891011121314151617181920212223class Tags extends React.Component &#123; componentDidMount() &#123; this.list = $(this.refs.list); this.list.tagit(); &#125; shouldComponentUpdate() &#123; return false; &#125; componentWillReceiveProps(newProps) &#123; this.list.tagit('createTag', newProps.newTag); &#125; render() &#123; return ( &lt;ul ref='list'&gt; &#123; this.props.tags.map( (tag, i) =&gt; &lt;li key=&#123; i &#125;&gt;&#123; tag &#125; &lt;/li&gt; ) &#125; &lt;/ul&gt; ); &#125;&#125;; ç»“è¯­å°½ç®¡ React æ‰¿æ‹…äº†æ“çºµ DOM æ ‘çš„å·¥ä½œï¼Œä½†ä»å¯ä»¥é›†æˆç¬¬ä¸‰æ–¹çš„åº“å’ŒæœåŠ¡ã€‚ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è®©åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­å¯ä»¥è¿›è¡Œè¶³å¤Ÿçš„æŽ§åˆ¶ï¼Œè¿™æ ·æ‰èƒ½å¤Ÿå®Œç¾Žåœ°è¿žæŽ¥ React å’Œéž React ä¸–ç•Œã€‚ æ€»ç»“React å·²ç„¶æˆä¸ºæœ€æµè¡Œçš„ UI æž„å»ºåº“ã€‚å®ƒè‡ªå¸¦çš„ API å¾ˆæ£’ï¼Œç®€å•è€Œå¼ºå¤§ã€‚éº»çƒ¦çš„éƒ¨åˆ†æ˜¯æž„å»ºå¤æ‚åº”ç”¨çš„è¯ï¼Œ React æœ¬èº«å¾€å¾€å¹¶ä¸è¶³å¤Ÿã€‚æœ‰äº›æ¦‚å¿µå¿…é¡»è¦çŸ¥é“ï¼Œæ‰èƒ½åšå‡ºæ­£ç¡®çš„é€‰æ‹©ã€‚ç”±ç¤¾åŒºæ‰€æå‡ºçš„è¿™äº›è®¾è®¡æ¨¡å¼åœ¨å¤§è§„æ¨¡åº”ç”¨ä¸­è¿è¡Œè‰¯å¥½ã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactå¼€å‘å¸¸ç”¨è®¾è®¡æ¨¡å¼-ç»„ä»¶æ ·å¼]]></title>
    <url>%2Fblog%2F2018%2F06%2F14%2FReact%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[React æ˜¯è§†å›¾å±‚ã€‚å› æ­¤ï¼Œå®ƒå¯ä»¥æŽ§åˆ¶åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“çš„æ ‡è®°ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œé¡µé¢ä¸Šçš„ HTML æ ‡è®°ä¸Ž CSS çš„æ ·å¼æ˜¯ç´§å¯†è”ç³»åœ¨ä¸€èµ·çš„ã€‚æœ‰å‡ ç§æ–¹å¼æ¥å¤„ç† React åº”ç”¨çš„æ ·å¼ï¼ŒæŽ¥ä¸‹æ¥ä»‹ç»è¿™äº›æœ€æµè¡Œçš„æ–¹å¼ã€‚ ç»„ä»¶æ ·å¼ç»å…¸ CSS ç±»JSX è¯­æ³•ç›¸å½“æŽ¥è¿‘äºŽ HTML è¯­æ³•ã€‚å› æ­¤ï¼Œæ‹¥æœ‰ä¸Ž HTML å‡ ä¹Žç›¸åŒçš„æ ‡ç­¾å±žæ€§ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨ CSS ç±»æ¥å¤„ç†æ ·å¼ã€‚ç±»æ˜¯å®šä¹‰åœ¨å¤–éƒ¨çš„ .cssæ–‡ä»¶ä¸­çš„ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ React ä¸­ä½¿ç”¨çš„æ˜¯ classNameï¼Œè€Œä¸æ˜¯ class ã€‚ä¾‹å¦‚: 1&lt;h1 className='title'&gt;Styling&lt;/h1&gt; å†…è”æ ·å¼å†…è”æ ·å¼ä¹Ÿèƒ½å¾ˆå¥½çš„å·¥ä½œã€‚ç±»ä¼¼äºŽ HTML ï¼Œå¯ä»¥é€šè¿‡ style å±žæ€§æ¥ç›´æŽ¥ä¼ å…¥æ ·å¼ã€‚ä½†æ˜¯ï¼Œstyle å±žæ€§åœ¨ HTML ä¸­æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œåœ¨ JSX ä¸­å¿…é¡»å¾—æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ 12345678const inlineStyles = &#123; color: 'red', fontSize: '10px', marginTop: '2em', 'border-top': 'solid 1px #000'&#125;;&lt;h2 style=&#123; inlineStyles &#125;&gt;Inline styling&lt;/h2&gt; å› ä¸ºç”¨ JavaScript ç¼–å†™æ ·å¼ï¼Œæ‰€ä»¥ä»Žè¯­æ³•è§’åº¦æ¥çœ‹ï¼Œæ˜¯æœ‰ä¸€äº›é™åˆ¶çš„ã€‚å¦‚æžœæƒ³è¦ä½¿ç”¨åŽŸå§‹çš„ CSS å±žæ€§åç§°ï¼Œé‚£ä¹ˆéœ€è¦ç”¨å¼•å·åŒ…è£¹èµ·æ¥ï¼Œå¦åˆ™éœ€è¦éµå¾ªé©¼å³°å¼å‘½åè§„åˆ™ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ JavaScript ç¼–å†™æ ·å¼å´éžå¸¸æœ‰è¶£ï¼Œå®ƒæ¯”æ™®é€šçš„ CSS æ›´å…·çµæ´»æ€§ã€‚ä¾‹å¦‚æ ·å¼çš„ç»§æ‰¿: 12345678const theme = &#123; fontFamily: 'Georgia', color: 'blue'&#125;;const paragraphText = &#123; ...theme, fontSize: '20px'&#125;; themeä¸­æœ‰ä¸€äº›åŸºç¡€æ ·å¼ï¼Œç„¶åŽåœ¨ paragraphText ä¸­æ··å…¥ theme çš„æ ·å¼ã€‚ç®€è€Œè¨€ä¹‹ï¼Œèƒ½å¤Ÿä½¿ç”¨ JavaScript çš„å…¨éƒ¨èƒ½åŠ›æ¥ç»„ç»‡ CSS ã€‚é‡è¦çš„æ˜¯æœ€ç»ˆç”Ÿæˆäº†ä¸€ä¸ªä¼ ç»™ style å±žæ€§çš„å¯¹è±¡ã€‚ CSS æ¨¡å—CSS æ¨¡å— æ˜¯å»ºç«‹åœ¨åˆ°ç›®å‰ä¸ºæ­¢æ‰€ä»‹ç»è¿‡çš„å†…å®¹ä¹‹ä¸Šçš„ã€‚å¦‚æžœä½ ä¸å–œæ¬¢ JavaScript ç”¨æ³•æ¥å†™ CSS ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ CSS æ¨¡å—ï¼Œå®ƒå¯ä»¥è®©ç»§ç»­ç¼–å†™æ™®é€šçš„ CSS ã€‚é€šå¸¸ï¼Œè¿™ä¸ªåº“æ˜¯åœ¨æ‰“åŒ…é˜¶æ®µå‘æŒ¥ä½œç”¨çš„ã€‚å¯ä»¥å°†å®ƒä½œä¸ºç¼–è¯‘æ­¥éª¤çš„ä¸€éƒ¨åˆ†è¿›è¡Œè¿žæŽ¥ï¼Œä½†é€šå¸¸ä½œä¸ºæž„å»ºç³»ç»Ÿæ’ä»¶åˆ†å‘ã€‚ ä¸‹é¢çš„ç¤ºä¾‹å¯ä»¥è®©ä½ å¿«é€Ÿå¯¹å…¶è¿è¡ŒåŽŸç†æœ‰ä¸ªå¤§è‡´çš„äº†è§£:1234567891011/* style.css */.title &#123; color: green;&#125;// App.jsximport styles from "./style.css";function App() &#123; return &lt;h1 style=&#123; styles.title &#125;&gt;Hello world&lt;/h1&gt;;&#125; é»˜è®¤æƒ…å†µä¸‹æ˜¯æ— æ³•è¿™æ ·ä½¿ç”¨çš„ï¼Œåªæœ‰ä½¿ç”¨äº† CSS æ¨¡å—ï¼Œæ‰èƒ½ç›´æŽ¥å¯¼å…¥æ™®é€šçš„ CSS æ–‡ä»¶å¹¶ä½¿ç”¨å…¶ä¸­çš„ç±»ã€‚ å½“æåˆ° æ™®é€šçš„ CSS ï¼Œå¹¶éžçœŸçš„æŒ‡æœ€åŽŸå§‹çš„ CSS ã€‚å®ƒæ”¯æŒä¸€äº›éžå¸¸æœ‰ç”¨çš„ç»„åˆæŠ€å·§ã€‚ä¾‹å¦‚:1234.title &#123; composes: mainColor from "./brand-colors.css";&#125; Styled-componentsStyled-components åˆ™æ˜¯å¦ä¸€ç§å®Œå…¨ä¸åŒçš„æ–¹å‘ã€‚æ­¤åº“ä¸å†ä¸º React ç»„ä»¶æä¾›å†…è”æ ·å¼ã€‚éœ€è¦ä½¿ç”¨ç»„ä»¶æ¥è¡¨ç¤ºå®ƒçš„å¤–è§‚æ„Ÿå—ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºäº† Linkç»„ä»¶ï¼Œå®ƒå…·æœ‰ç‰¹å®šçš„é£Žæ ¼å’Œç”¨æ³•ï¼Œè€Œå†ä½¿ç”¨ &lt;a&gt;æ ‡ç­¾ã€‚ 12345678const Link = styled.a` text-decoration: none; padding: 4px; border: solid 1px #999; color: black;`;&lt;Link href='http://google.com'&gt;Google&lt;/Link&gt; è¿˜æœ‰ä¸€ç§æ‰©å±•ç±»çš„æœºåˆ¶ã€‚è¿˜å¯ä»¥ä½¿ç”¨ Link ç»„ä»¶ï¼Œä½†æ˜¯ä¼šæ”¹å˜å®ƒçš„æ–‡å­—é¢œè‰²ï¼Œåƒè¿™æ ·:12345const AnotherLink = styled(Link)` color: blue;`;&lt;AnotherLink href='http://facebook.com'&gt;Facebook&lt;/AnotherLink&gt; åˆ°ç›®å‰ä¸ºæ­¢ styled-components å¯èƒ½æ˜¯å¤šç§å¤„ç† React æ ·å¼çš„æ–¹æ³•ä¸­æˆ‘æœ€æ„Ÿå…´è¶£çš„ã€‚ç”¨å®ƒæ¥åˆ›å»ºç»„ä»¶éžå¸¸ç®€å•ï¼Œå¹¶å¯ä»¥å¿˜è®°æ ·å¼æœ¬èº«çš„å­˜åœ¨ã€‚å¦‚æžœä½ çš„å…¬å¸æœ‰èƒ½åŠ›åˆ›å»ºä¸€ä¸ªè®¾è®¡ç³»ç»Ÿå¹¶ç”¨å®ƒæž„å»ºäº§å“çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªé€‰é¡¹å¯èƒ½æ˜¯æœ€åˆé€‚çš„ã€‚ ç»“è¯­å¤„ç† React åº”ç”¨çš„æ ·å¼æœ‰å¤šç§æ–¹å¼ã€‚åœ¨ç”Ÿäº§çŽ¯å¢ƒä¸­è¯•éªŒè¿‡æ‰€æœ‰æ–¹å¼ï¼Œå¯ä»¥è¯´æ— æ‰€è°“å¯¹ä¸Žé”™ã€‚æ­£å¦‚ JavaScript ä¸­å¤§å¤šæ•°æŠ€æœ¯ä¸€æ ·ï¼Œä½ éœ€è¦æŒ‘é€‰ä¸€ä¸ªæ›´é€‚åˆä½ çš„æ–¹å¼ã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactå¼€å‘å¸¸ç”¨è®¾è®¡æ¨¡å¼-ä¾èµ–æ³¨å…¥]]></title>
    <url>%2Fblog%2F2018%2F06%2F13%2FReact%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5%2F</url>
    <content type="text"><![CDATA[å†™çš„å¥½å¤šæ¨¡å—å’Œç»„ä»¶éƒ½æœ‰ä¾èµ–ã€‚èƒ½å¦ç®¡ç†è¿™äº›ä¾èµ–å¯¹äºŽé¡¹ç›®çš„æˆåŠŸè‡³å…³é‡è¦ã€‚æœ‰ä¸€ç§å«åš ä¾èµ–æ³¨å…¥ çš„æŠ€æœ¯ (å¤§å¤šæ•°äººè®¤ä¸ºå®ƒæ˜¯ä¸€ç§æ¨¡å¼) ç”¨æ¥è§£å†³è¿™ç§é—®é¢˜ã€‚ åœ¨ React ä¸­ï¼Œå¯¹ä¾èµ–æ³¨å…¥çš„éœ€è¦æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ ä¾èµ–æ³¨å…¥æ¥è€ƒè™‘ä¸‹é¢çš„åº”ç”¨çš„ç»„ä»¶æ ‘:12345678910111213141516171819202122232425262728// Title.jsxexport default function Title(props) &#123; return &lt;h1&gt;&#123; props.title &#125;&lt;/h1&gt;;&#125;// Header.jsximport Title from './Title.jsx';export default function Header() &#123; return ( &lt;header&gt; &lt;Title /&gt; &lt;/header&gt; );&#125;// App.jsximport Header from './Header.jsx';class App extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; title: 'React in patterns' &#125;; &#125; render() &#123; return &lt;Header /&gt;; &#125;&#125;; å­—ç¬¦ä¸² â€œReact in patternsâ€ åº”è¯¥ä»¥æŸç§æ–¹å¼åˆ°è¾¾ Title ç»„ä»¶ã€‚æœ€ç›´æŽ¥çš„æ–¹å¼å°±ä»Ž App ä¼ åˆ° Headerï¼Œå†ä»Ž Header ä¼ åˆ° Title ã€‚ä½†æ˜¯ï¼Œå¯¹äºŽä¸‰å±‚ç»„ä»¶è¿˜å¥½ï¼Œä½†æ˜¯å¦‚æžœåµŒå¥—çš„å±‚çº§å¾ˆæ·±ï¼Œå¹¶ä¸”éœ€è¦ä¼ å¤šä¸ªå±žæ€§å‘¢ï¼Ÿå¤§å¤šæ•°ç»„ä»¶éƒ½æ‰®æ¼”ç€ä»£ç†çš„è§’è‰²ï¼Œå°†å±žæ€§è½¬å‘ç»™å­ç»„ä»¶ã€‚ å·²ç»äº†è§£è¿‡ é«˜é˜¶ç»„ä»¶ ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ³¨å…¥æ•°æ®ã€‚æ¥ä½¿ç”¨åŒæ ·çš„æŠ€æœ¯æ¥æ³¨å…¥ title å˜é‡: 1234567891011121314151617181920212223242526272829// inject.jsxconst title = 'React in patterns';export default function inject(Component) &#123; return class Injector extends React.Component &#123; render() &#123; return ( &lt;Component &#123;...this.props&#125; title=&#123; title &#125; /&gt; ) &#125; &#125;;&#125;// -----------------------------------// Header.jsximport inject from './inject.jsx';import Title from './Title.jsx';var EnhancedTitle = inject(Title);export default function Header() &#123; return ( &lt;header&gt; &lt;EnhancedTitle /&gt; &lt;/header&gt; );&#125; titleéšè—åœ¨äº†ä¸­é—´å±‚ (é«˜é˜¶ç»„ä»¶) ï¼Œåœ¨ä¸­é—´å±‚å°†titleå±žæ€§ä¼ ç»™äº†åŽŸå§‹çš„ Title ç»„ä»¶ã€‚ä¸€åˆ‡éƒ½å¾ˆä¸é”™ï¼Œä½†å®ƒåªè§£å†³äº†ä¸€åŠé—®é¢˜ã€‚çŽ°åœ¨ä¸å†éœ€è¦åœ¨ç»„ä»¶æ ‘ä¸­å°† title å‘ä¸‹å±‚å±‚ä¼ é€’ï¼Œä½†æ˜¯éœ€è¦è€ƒè™‘æ•°æ®å¦‚ä½•åˆ°è¾¾ inject.jsx è¾…åŠ©å‡½æ•°ã€‚ ä½¿ç”¨ React context (16.3 ä¹‹å‰çš„ç‰ˆæœ¬) åœ¨ React 16.3 ç‰ˆæœ¬ä¸­ï¼ŒReact å›¢é˜Ÿå¼•å…¥äº†æ–°ç‰ˆçš„ context API ï¼Œå¦‚æžœä½ æƒ³ä½¿ç”¨æ–°ç‰ˆ API ï¼Œé‚£ä¹ˆå¯ä»¥è·³è¿‡æ­¤å¤„ã€‚ React æœ‰ context çš„æ¦‚å¿µã€‚æ¯ä¸ª React ç»„ä»¶éƒ½å¯ä»¥è®¿é—® contextã€‚å®ƒæœ‰äº›ç±»ä¼¼äºŽ äº‹ä»¶æ€»çº¿ ï¼Œä½†æ˜¯ä¸ºæ•°æ®è€Œç”Ÿã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆåœ¨ä»»æ„åœ°æ–¹éƒ½å¯ä»¥è®¿é—®çš„å•ä¸€ store ã€‚1234567891011121314151617181920212223// å®šä¹‰ context çš„åœ°æ–¹var context = &#123; title: 'React in patterns' &#125;;class App extends React.Component &#123; getChildContext() &#123; return context; &#125; ...&#125;;App.childContextTypes = &#123; title: React.PropTypes.string&#125;;// ä½¿ç”¨ context çš„åœ°æ–¹class Inject extends React.Component &#123; render() &#123; var title = this.context.title; ... &#125;&#125;Inject.contextTypes = &#123; title: React.PropTypes.string&#125;; æ³¨æ„ï¼Œéœ€è¦ä½¿ç”¨childContextTypeså’Œ contextTypes æ¥æŒ‡å®š contextå¯¹è±¡çš„å…·ä½“ç­¾åã€‚å¦‚æžœä¸æŒ‡å®šçš„è¯ï¼Œé‚£ä¹ˆ context å¯¹è±¡å°†ä¸ºç©ºã€‚è¿™ç‚¹å¯èƒ½æœ‰ç‚¹ä»¤äººæ²®ä¸§ï¼Œå› ä¸ºå¯èƒ½ä¼šå¤šå†™å¾ˆå¤šä»£ç ã€‚æ‰€ä»¥å°† contextå†™æˆå…è®¸å‚¨å­˜å’ŒèŽ·å–æ•°æ®çš„æœåŠ¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡æ˜¯ä¸€ç§æœ€ä½³å®žè·µã€‚ä¾‹å¦‚: 12345678910// dependencies.jsexport default &#123; data: &#123;&#125;, get(key) &#123; return this.data[key]; &#125;, register(key, value) &#123; this.data[key] = value; &#125;&#125; ç„¶åŽï¼Œå›žåˆ°ç¤ºä¾‹ä¸­ï¼ŒApp ç»„ä»¶åº”è¯¥æ˜¯è¿™æ ·çš„:1234567891011121314151617import dependencies from './dependencies';dependencies.register('title', 'React in patterns');class App extends React.Component &#123; getChildContext() &#123; return dependencies; &#125; render() &#123; return &lt;Header /&gt;; &#125;&#125;;App.childContextTypes = &#123; data: React.PropTypes.object, get: React.PropTypes.func, register: React.PropTypes.func&#125;; Title ç»„ä»¶é€šè¿‡ context æ¥èŽ·å–æ•°æ®:123456789101112// Title.jsxexport default class Title extends React.Component &#123; render() &#123; return &lt;h1&gt;&#123; this.context.get('title') &#125;&lt;/h1&gt; &#125;&#125;Title.contextTypes = &#123; data: React.PropTypes.object, get: React.PropTypes.func, register: React.PropTypes.func&#125;; ç†æƒ³æƒ…å†µä¸‹ï¼Œä¸æƒ³æ¯æ¬¡éœ€è¦è®¿é—® contextæ—¶éƒ½æŒ‡å®šcontextTypesã€‚å¯ä»¥ä½¿ç”¨é«˜é˜¶ç»„ä»¶æ¥åŒ…è£…ç±»åž‹ç»†èŠ‚ã€‚ä½†æ›´å¥½çš„åšæ³•æ˜¯ï¼Œå¯ä»¥ç¼–å†™ä¸€ä¸ªæ›´å…·æè¿°æ€§çš„å·¥å…·å‡½æ•°ï¼Œä»Žè€Œå¸®åŠ©å£°æ˜Žç¡®åˆ‡çš„ç±»åž‹ã€‚ä¾‹å¦‚ï¼Œä¸å†ç›´æŽ¥ä½¿ç”¨this.context.get(&#39;title&#39;) æ¥è®¿é—® context ï¼Œè€Œæ˜¯å‘Šè¯‰é«˜é˜¶ç»„ä»¶éœ€è¦ä¼ é€’ç»™ç»„ä»¶çš„å±žæ€§ã€‚ä¾‹å¦‚:1234567891011// Title.jsximport wire from './wire';function Title(props) &#123; return &lt;h1&gt;&#123; props.title &#125;&lt;/h1&gt;;&#125;export default wire(Title, ['title'], function resolve(title) &#123; return &#123; title &#125;;&#125;); wireå‡½æ•°æŽ¥æ”¶ React ç»„ä»¶ã€æ‰€éœ€ä¾èµ– (ä¾èµ–éƒ½å·²ç»æ³¨å†Œè¿‡äº†) çš„æ•°ç»„å’Œæˆ‘å–œæ¬¢ç§°ä¹‹ä¸º mapperçš„è½¬æ¢å‡½æ•°ã€‚mapper å‡½æ•°æŽ¥æ”¶å­˜å‚¨åœ¨ context ä¸­çš„åŽŸå§‹æ•°æ®ï¼Œå¹¶è¿”å›žç»„ä»¶ ( Title ) ç¨åŽä½¿ç”¨çš„å±žæ€§ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä¼ å…¥åªæ˜¯å­—ç¬¦ä¸²ï¼Œå³ title å˜é‡ã€‚ä½†æ˜¯ï¼Œåœ¨çœŸæ­£çš„åº”ç”¨ä¸­ï¼Œè¿™ä¸ªä¾èµ–é¡¹å¯ä»¥æ˜¯å¤§åž‹çš„æ•°æ®é›†åˆï¼Œé…ç½®å¯¹è±¡æˆ–å…¶ä»–ä¸œè¥¿ã€‚ wire å‡½æ•°çš„ä»£ç å¦‚ä¸‹æ‰€ç¤º:123456789101112131415161718export default function wire(Component, dependencies, mapper) &#123; class Inject extends React.Component &#123; render() &#123; var resolved = dependencies.map( this.context.get.bind(this.context) ); var props = mapper(...resolved); return React.createElement(Component, props); &#125; &#125; Inject.contextTypes = &#123; data: React.PropTypes.object, get: React.PropTypes.func, register: React.PropTypes.func &#125;; return Inject;&#125;; Inject æ˜¯é«˜é˜¶ç»„ä»¶ï¼Œå®ƒå¯ä»¥è®¿é—® contextå¹¶èŽ·å– dependenciesæ•°ç»„ä¸­çš„æ‰€æœ‰é¡¹ã€‚mapper å‡½æ•°æŽ¥æ”¶ context æ•°æ®å¹¶å°†å…¶è½¬æ¢æˆæˆ‘ä»¬ç»„å»ºæ‰€éœ€è¦çš„å±žæ€§ã€‚ ä½¿ç”¨ React context (16.3 åŠä¹‹åŽçš„ç‰ˆæœ¬)Fackbook å¹¶ä¸æŽ¨èä½¿ç”¨ context API ã€‚åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿæœ‰æåˆ°ï¼Œæ­¤ API ä¸ç¨³å®šï¼Œéšæ—¶å¯èƒ½æ›´æ”¹ã€‚ç¡®å®žä¹Ÿè¨€ä¸­äº†ã€‚16.3 ç‰ˆæœ¬æä¾›äº†ä¸€ä¸ªæ–°çš„ context API ï¼Œæˆ‘è®¤ä¸ºæ–°ç‰ˆ API æ›´è‡ªç„¶ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿæ›´ç®€å•ã€‚ è¿˜æ˜¯ä½¿ç”¨åŒä¸€ä¸ªç¤ºä¾‹ï¼Œè®©å­—ç¬¦ä¸²æŠµè¾¾&lt;Title&gt;ç»„ä»¶ã€‚ å…ˆæ¥å®šä¹‰åŒ…å« contextåˆå§‹åŒ–çš„æ–‡ä»¶:1234567// context.jsimport &#123; createContext &#125; from 'react';const Context = createContext(&#123;&#125;);export const Provider = Context.Provider;export const Consumer = Context.Consumer; createContextè¿”å›žçš„å¯¹è±¡å…·æœ‰ Provider å’Œ Consumerå±žæ€§ã€‚å®ƒä»¬å®žé™…ä¸Šæ˜¯æœ‰æ•ˆçš„ React ç±»ã€‚Provicer ä»¥ value å±žæ€§çš„å½¢å¼æŽ¥æ”¶ context ã€‚Consumer ç”¨æ¥è®¿é—® context å¹¶ä»Žä¸­è¯»å–æ•°æ®ã€‚å› ä¸ºå®ƒä»¬é€šå¸¸å­˜åœ¨äºŽä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥å•ç‹¬åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ¥è¿›è¡Œå®ƒä»¬çš„åˆå§‹åŒ–æ˜¯ä¸ªä¸é”™çš„ä¸»æ„ã€‚ å‡è®¾è¯´ App ç»„ä»¶æ˜¯æ ¹ç»„ä»¶ã€‚åœ¨æ­¤éœ€è¦ä¼ å…¥ contextã€‚ 12345678910111213import &#123; Provider &#125; from './context';const context = &#123; title: 'React In Patterns' &#125;;class App extends React.Component &#123; render() &#123; return ( &lt;Provider value=&#123; context &#125;&gt; &lt;Header /&gt; &lt;/Provider&gt; ); &#125;&#125;; åŒ…è£…ç»„ä»¶ä»¥åŠå­ç»„ä»¶çŽ°åœ¨å…±äº«åŒä¸€ä¸ª context ã€‚&lt;Title&gt;ç»„ä»¶æ˜¯éœ€è¦ title å­—ç¬¦ä¸²çš„ç»„ä»¶ä¹‹ä¸€ï¼Œæ‰€ä»¥è¦åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ &lt;Consumer&gt; ã€‚123456789import &#123; Consumer &#125; from './context';function Title() &#123; return ( &lt;Consumer&gt;&#123; (&#123; title &#125;) =&gt; &lt;h1&gt;Title: &#123; title &#125;&lt;/h1&gt; &#125;&lt;/Consumer&gt; );&#125; æ³¨æ„ï¼ŒConsumerç±»ä½¿ç”¨å‡½æ•°ä½œä¸ºåµŒå¥—å­å…ƒç´  ( render prop æ¨¡å¼) æ¥ä¼ é€’ context ã€‚ æ–°çš„ API è®©äººæ„Ÿè§‰æ›´å®¹æ˜“ç†è§£ï¼ŒåŒæ—¶æ ·æ¿æ–‡ä»¶ä»£ç æ›´å°‘ã€‚æ­¤ API ä»ç„¶è¿˜å¾ˆæ–°ï¼Œä½†çœ‹èµ·æ¥å¾ˆæœ‰å‰é€”ã€‚å®ƒå¼€å¯äº†ä¸€ç³»åˆ—å…¨æ–°çš„å¯èƒ½æ€§ã€‚ ä½¿ç”¨æ¨¡å—ç³»ç»Ÿå¦‚æžœä¸åƒä½¿ç”¨ context çš„è¯ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹å¼æ¥å®žçŽ°æ³¨å…¥ã€‚å®ƒä»¬å¹¶éž React ç›¸å…³çš„ï¼Œä½†æ˜¯å€¼å¾—ä¸€æã€‚æ–¹å¼ä¹‹ä¸€å°±æ˜¯ä½¿ç”¨æ¨¡å—ç³»ç»Ÿã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScript ä¸­çš„å…¸åž‹æ¨¡å—ç³»ç»Ÿå…·æœ‰ç¼“å­˜æœºåˆ¶ã€‚åœ¨ Node å®˜æ–¹æ–‡æ¡£ ä¸­å¯ä»¥çœ‹åˆ°: æ¨¡å—åœ¨ç¬¬ä¸€æ¬¡åŠ è½½åŽä¼šè¢«ç¼“å­˜ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼ˆç±»ä¼¼å…¶ä»–ç¼“å­˜æœºåˆ¶ï¼‰å¦‚æžœæ¯æ¬¡è°ƒç”¨ require(â€˜fooâ€™) éƒ½è§£æžåˆ°åŒä¸€æ–‡ä»¶ï¼Œåˆ™è¿”å›žç›¸åŒçš„å¯¹è±¡ã€‚å¤šæ¬¡è°ƒç”¨ require(foo) ä¸ä¼šå¯¼è‡´æ¨¡å—çš„ä»£ç è¢«æ‰§è¡Œå¤šæ¬¡ã€‚è¿™æ˜¯ä¸€ä¸ªé‡è¦çš„ç‰¹æ€§ã€‚å€ŸåŠ©å®ƒ, å¯ä»¥è¿”å›žâ€œéƒ¨åˆ†å®Œæˆâ€çš„å¯¹è±¡ï¼Œä»Žè€Œå…è®¸åŠ è½½ä¾èµ–çš„ä¾èµ–, å³ä½¿å®ƒä»¬ä¼šå¯¼è‡´å¾ªçŽ¯ä¾èµ–ã€‚ è¿™å¯¹ä¾èµ–æ³¨å…¥æœ‰ä»€ä¹ˆå¸®åŠ©å—ï¼Ÿå½“ç„¶ï¼Œå¦‚æžœå¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œå®žé™…ä¸Šå¯¼å‡ºçš„æ˜¯ä¸€ä¸ª å•ä¾‹ï¼Œå¹¶ä¸”æ¯ä¸ªå¯¼å…¥è¯¥æ–‡ä»¶çš„å…¶ä»–æ¨¡å—éƒ½å°†èŽ·å¾—åŒä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä½¿å¾—å¯ä»¥ register ä¾èµ–ï¼Œå¹¶ç¨åŽåœ¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­ fetch å®ƒä»¬ã€‚ æ¥åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶di.jsx ï¼Œå®ƒçš„ä»£ç å¦‚ä¸‹æ‰€ç¤º: 12345678910111213141516171819202122232425262728var dependencies = &#123;&#125;;export function register(key, dependency) &#123; dependencies[key] = dependency;&#125;export function fetch(key) &#123; if (dependencies[key]) return dependencies[key]; throw new Error(`"$&#123; key &#125; is not registered as dependency.`);&#125;export function wire(Component, deps, mapper) &#123; return class Injector extends React.Component &#123; constructor(props) &#123; super(props); this._resolvedDependencies = mapper(...deps.map(fetch)); &#125; render() &#123; return ( &lt;Component &#123;...this.state&#125; &#123;...this.props&#125; &#123;...this._resolvedDependencies&#125; /&gt; ); &#125; &#125;;&#125; å°†ä¾èµ–ä¿å­˜åœ¨äº† dependenciesè¿™ä¸ªå…¨å±€å˜é‡ä¸­ (å¯¹äºŽæ¨¡å—å®ƒæ˜¯å…¨å±€çš„ï¼Œä½†å¯¹äºŽæ•´ä¸ªåº”ç”¨æ¥æ˜¯å¹¶ä¸æ˜¯) ã€‚ç„¶åŽï¼Œå¯¼å‡º register å’Œ fetchè¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå®ƒä»¬è´Ÿè´£è¯»å†™ä¾èµ–å…³ç³»çš„æ•°æ®ã€‚å®ƒçœ‹èµ·æ¥æœ‰ç‚¹åƒå¯¹ç®€å•çš„ JavaScript å¯¹è±¡å®žçŽ°çš„ setter å’Œ getterã€‚å†ç„¶åŽæ˜¯ wireå‡½æ•°ï¼Œå®ƒæŽ¥æ”¶ React ç»„ä»¶å¹¶è¿”å›ž é«˜é˜¶ç»„ä»¶ ã€‚åœ¨ç»„ä»¶çš„æž„é€ å‡½æ•°ä¸­ï¼Œè§£æžäº†ä¾èµ–ï¼Œå¹¶åœ¨ç¨åŽæ¸²æŸ“åŽŸå§‹ç»„ä»¶æ—¶å°†å…¶ä½œä¸ºå±žæ€§ä¼ ç»™ç»„ä»¶ã€‚æŒ‰ç…§ç›¸åŒçš„æ¨¡å¼æ¥æè¿°éœ€è¦çš„ä¸œè¥¿ (deps å‚æ•°)ï¼Œå¹¶ä½¿ç”¨ mapper å‡½æ•°æ¥æå–æ‰€éœ€å±žæ€§ã€‚ æœ‰äº†di.jsx è¾…åŠ©å‡½æ•°ï¼Œæˆ‘ä»¬åˆèƒ½å¤Ÿåœ¨åº”ç”¨çš„å…¥å£ç‚¹ ( app.jsx ) æ³¨å†Œä¾èµ–ï¼Œå¹¶ä¸”åœ¨ä»»æ„ç»„ä»¶ ( Title.jsx ) ä¸­è¿›è¡Œæ³¨å…¥ã€‚ 12345678910111213141516171819202122232425262728293031323334353637// app.jsximport Header from './Header.jsx';import &#123; register &#125; from './di.jsx';register('my-awesome-title', 'React in patterns');class App extends React.Component &#123; render() &#123; return &lt;Header /&gt;; &#125;&#125;;// -----------------------------------// Header.jsximport Title from './Title.jsx';export default function Header() &#123; return ( &lt;header&gt; &lt;Title /&gt; &lt;/header&gt; );&#125;// -----------------------------------// Title.jsximport &#123; wire &#125; from './di.jsx';var Title = function(props) &#123; return &lt;h1&gt;&#123; props.title &#125;&lt;/h1&gt;;&#125;;export default wire( Title, ['my-awesome-title'], title =&gt; (&#123; title &#125;)); å¦‚æžœæŸ¥çœ‹ Title.jsx æ–‡ä»¶çš„è¯ï¼Œå¯ä»¥çœ‹åˆ°å®žé™…çš„ç»„ä»¶å’Œ wire å­˜åœ¨äºŽä¸åŒçš„æ–‡ä»¶ä¸­ã€‚è¿™ç§æ–¹å¼è®©ç»„ä»¶å’Œ mapper å‡½æ•°çš„å•å…ƒæµ‹è¯•æ›´ç®€å•ã€‚ ç»“è¯­ä¾èµ–æ³¨å…¥æ˜¯ä¸€ä¸ªå¤§é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨ JavaScript ä¸­ã€‚è®¸å¤šäººå¹¶æ²¡æœ‰æ„è¯†åˆ°ï¼Œä½†æ˜¯ï¼Œæ­£ç¡®çš„ä¾èµ–ç®¡ç†æ˜¯æ¯ä¸ªå¼€å‘å‘¨æœŸä¸­çš„å…³é”®è¿‡ç¨‹ã€‚JavaScript ç”Ÿæ€æä¾›äº†ä¸åŒçš„å·¥å…·ï¼Œä½œä¸ºå¼€å‘è€…çš„æˆ‘ä»¬åº”è¯¥æŒ‘é€‰æœ€é€‚åˆè‡ªå·±çš„å·¥å…·ã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactå¼€å‘å¸¸ç”¨è®¾è®¡æ¨¡å¼-Redux]]></title>
    <url>%2Fblog%2F2018%2F06%2F11%2FReact%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-Redux%2F</url>
    <content type="text"><![CDATA[Redux æ˜¯ä¸€ä¸ªåº“ï¼Œå®ƒæ‰®æ¼”ç€çŠ¶æ€å®¹å™¨çš„è§’è‰²ï¼Œå¹¶è´Ÿè´£ç®¡ç†åº”ç”¨çš„æ•°æ®æµã€‚å®ƒæ˜¯ Dan Abramov åœ¨ 2015 å¹´çš„ ReactEurope å¼€å‘è€…å¤§ä¼šä¸ŠæŽ¨å‡ºçš„ (è§†é¢‘)ã€‚å®ƒç±»ä¼¼äºŽ Flux æž¶æž„ å¹¶æœ‰å¾ˆå¤šå…±åŒç‚¹ã€‚ ReduxRedux æž¶æž„åŠå…¶ä¸»è¦ç‰¹ç‚¹ ç±»ä¼¼äºŽ Flux æž¶æž„ï¼Œç”±è§†å›¾ç»„ä»¶ (React) æ¥æ´¾å‘åŠ¨ä½œã€‚åŒä¸€ä¸ªåŠ¨ä½œä¹Ÿå¯èƒ½æ˜¯ç”±ç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†æ´¾å‘çš„ï¼Œä¾‹å¦‚å¼•å¯¼é€»è¾‘ã€‚åŠ¨ä½œä¸æ˜¯æ´¾å‘åˆ°ä¸­å¿ƒæž¢çº½ä¸­ï¼Œè€Œæ˜¯ç›´æŽ¥æ´¾å‘åˆ° storeä¸­ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬è¯´çš„æ˜¯ storeï¼Œè€Œä¸æ˜¯ stores ï¼Œè¿™æ˜¯å› ä¸ºåœ¨ Redux ä¸­åªæœ‰ä¸€ä¸ª store ï¼Œè¿™æ˜¯ Redux ä¸Ž Flux çš„æœ€é‡è¦çš„åŒºåˆ«ä¹‹ä¸€ã€‚å†³å®šæ•°æ®å¦‚ä½•æ”¹å˜çš„é€»è¾‘ä»¥çº¯å‡½æ•° ( pure functions ) çš„å½¢å¼å­˜åœ¨ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º reducers ã€‚ä¸€æ—¦ storeæŽ¥æ”¶åˆ°åŠ¨ä½œï¼Œå®ƒä¼šå°†å½“å‰çŠ¶æ€å’Œç»™å®šåŠ¨ä½œå‘é€ç»™reducerå¹¶è¦æ±‚å…¶è¿”å›žä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚ç„¶åŽï¼Œåœ¨æ•°æ®ä¸å¯å˜çš„æ–¹å¼ä¸‹ï¼Œ reduceréœ€è¦è¿”å›žæ–°çš„çŠ¶æ€ã€‚å†ç„¶åŽï¼Œ storeæ›´æ–°è‡ªèº«çš„å†…éƒ¨çŠ¶æ€ã€‚æœ€åŽï¼Œä¸Ž storeè¿žæŽ¥çš„ Reactç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ã€‚ æ¦‚å¿µç›¸å½“æ¸…æ™°å¹¶å†æ¬¡éµå¾ªäº† å•å‘æ•°æ®æµ ã€‚æˆ‘ä»¬æ¥è®¨è®ºæ¯ä¸€ä¸ªéƒ¨åˆ†å¹¶å¼•å…¥ä¸€äº›æ”¯æŒ Redux æ¨¡å¼å·¥ä½œçš„æ–°æœ¯è¯­ã€‚ åŠ¨ä½œ ( Actions )Redux ä¸­çš„åŠ¨ä½œå’Œ Fluxä¸€æ ·ï¼Œä¹Ÿåªæ˜¯æœ‰ typeå±žæ€§çš„å¯¹è±¡è€Œå·²ã€‚è¯¥å¯¹è±¡ä¸­çš„å…¶ä»–æ‰€æœ‰å†…å®¹éƒ½è¢«è§†ä¸ºç‰¹å®šäºŽä¸Šä¸‹æ–‡çš„æ•°æ®ï¼Œå¹¶ä¸”ä¸Žæ¨¡å¼æ— å…³ï¼Œè€Œä¸Žåº”ç”¨çš„é€»è¾‘ç›¸å…³ã€‚ä¾‹å¦‚: 12345const CHANGE_VISIBILITY = 'CHANGE_VISIBILITY';const action = &#123; type: CHANGE_VISIBILITY, visible: false&#125; ä½¿ç”¨åƒ CHANGE_VISIBILITY è¿™æ ·çš„å¸¸é‡ä½œä¸ºåŠ¨ä½œçš„ç±»åž‹æ˜¯ä¸€ç§æœ€ä½³å®žè·µã€‚æœ‰å¾ˆå¤šæ”¯æŒ Reduxçš„å·¥å…·å’Œåº“ï¼Œå®ƒä»¬ç”¨æ¥è§£å†³ä¸ç”¨çš„é—®é¢˜ï¼Œå¹¶ä¸”éƒ½åªéœ€è¦åŠ¨ä½œçš„ç±»åž‹å³å¯ã€‚æ‰€ä»¥è¯´ï¼ŒåŠ¨ä½œåªæ˜¯ä¼ é€’ä¿¡æ¯çš„ä¸€ç§ä¾¿æ·æ–¹å¼ã€‚ visible å±žæ€§æ˜¯æˆ‘ä»¬æ‰€æåˆ°è¿‡çš„å…ƒæ•°æ®ã€‚å®ƒä¸Ž Reduxæœ¬èº«æ— å…³ï¼Œå®ƒè¡¨ç¤ºåº”ç”¨ä¸­æŸå¤„éœ€è¦ä½¿ç”¨çš„æ•°æ®ã€‚ æ¯æ¬¡æˆ‘ä»¬æƒ³è¦æ´¾å‘åŠ¨ä½œæ—¶éƒ½éœ€è¦ä½¿ç”¨è¿™æ ·çš„å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œä¸€éåˆä¸€éåœ°å†™ç¡®å®žæ˜¯è®©å¤ªäººçƒ¦èºäº†ã€‚è¿™ä¹Ÿæ­£æ˜¯æ¦‚å¿µ action creators è¯žç”Ÿçš„åŽŸå› ã€‚action creator æ˜¯è¿”å›žåŠ¨ä½œå¯¹è±¡çš„å‡½æ•°ï¼Œå®ƒå¯é€‰é¡¹æ€§åœ°æŽ¥æ”¶ä¸ŽåŠ¨ä½œç›¸å…³è”çš„å±žæ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœå°†ä¸Šé¢çš„ action å†™æˆ action creator ä¼šæ˜¯è¿™æ ·:1234567const changeVisibility = visible =&gt; (&#123; type: CHANGE_VISIBILITY, visible&#125;);changeVisibility(false);// &#123; type: CHANGE_VISIBILITY, visible: false &#125; æ³¨æ„ï¼Œå°† visible çš„å€¼ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿™æ ·æˆ‘ä»¬ä¸å¿…åŽ»è®°ä½ (æˆ–å¯¼å…¥) åŠ¨ä½œçš„ç¡®åˆ‡ç±»åž‹ã€‚ä½¿ç”¨è¿™ç§è¾…åŠ©å‡½æ•°å¯ä»¥è®©ä»£ç æ›´ç´§å‡‘ï¼Œæ›´æ˜“äºŽé˜…è¯»ã€‚ StoreRedux æä¾›è¾…åŠ©å‡½æ•° createStore æ¥åˆ›å»º store ã€‚å®ƒçš„å‡½æ•°ç­¾åå¦‚ä¸‹:123import &#123; createStore &#125; from 'redux';createStore([reducer], [initial state], [enhancer]); æ­£å¦‚ä¹‹å‰æ‰€æåˆ°çš„ï¼Œreducer æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæŽ¥æ”¶å½“å‰çŠ¶æ€å’ŒåŠ¨ä½œï¼Œç„¶åŽè¿”å›žä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ store çš„åˆå§‹çŠ¶æ€ã€‚è¿™æ˜¯ä¸€ç§ä¾¿æ·çš„æ‰‹æ®µï¼Œå¯ä»¥ç”¨å·²æœ‰çš„æ•°æ®æ¥åˆå§‹åŒ–æˆ‘ä»¬çš„åº”ç”¨ã€‚è¿™ä¸ªåŠŸèƒ½æ˜¯åƒæœåŠ¡å™¨ç«¯æ¸²æŸ“æˆ–æŒä¹…ä½“éªŒè¿™æ ·çš„è¿‡ç¨‹çš„æœ¬è´¨ã€‚ç¬¬ä¸‰ä¸ªå‚æ•°enhanceræä¾› API æ¥ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„ä¸­é—´ä»¶æ¥æ‰©å±•Reduxï¼ŒåŸºæœ¬ä¸Šæ˜¯æ’å…¥ä¸€äº›è‡ªèº«æ²¡æœ‰æä¾›çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å¤„ç†å¼‚æ­¥æµç¨‹çš„å·¥å…·ã€‚ åˆ›å»ºå¥½çš„store å…·æœ‰å››ä¸ªæ–¹æ³•:getStateã€dispatchã€subscribeå’Œ replaceReducer ã€‚å…¶ä¸­æœ€é‡è¦çš„æˆ–è®¸å°±æ˜¯dispatch:1store.dispatch(changeVisibility(false)); è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ action creatorã€‚æˆ‘ä»¬å°†å…¶ç»“æžœ (å³ action å¯¹è±¡) ä¼ ç»™ dispatchæ–¹æ³•ã€‚ç„¶åŽï¼Œå®ƒä¼šä¼ æ’­ç»™åº”ç”¨ä¸­çš„ reducersã€‚ åœ¨å…¸åž‹çš„Reactåº”ç”¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¸ä¼šç›´æŽ¥ä½¿ç”¨getState å’Œ subscribeï¼Œå› ä¸ºæœ‰è¾…åŠ©å‡½æ•° å¯ä»¥å°†ç»„ä»¶å’Œ storeè”ç³»èµ·æ¥å¹¶æœ‰æ•ˆåœ°è®¢é˜… store çš„å˜åŒ–ã€‚ä½œä¸ºè®¢é˜…çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬è‡ªç„¶å¯ä»¥æ”¶åˆ°å½“å‰çš„çŠ¶æ€ï¼Œæ‰€ä»¥ä¸å¿…è‡ªå·±åŽ»è°ƒç”¨getStateã€‚replaceReduceræ˜¯ä¸€ä¸ªé«˜çº§ API ï¼Œå®ƒç”¨æ¥äº¤äº’ storeæ‰€ä½¿ç”¨çš„å½“å‰ reducer ã€‚ Reducerreducerå‡½æ•°å¤§æ¦‚æ˜¯Reduxä¸­æœ€ç²¾åŽçš„éƒ¨åˆ†ã€‚reducerè¿˜æœ‰ä¸¤ä¸ªç‰¹ç‚¹éžå¸¸é‡è¦ï¼Œæ²¡æœ‰å®ƒä»¬çš„è¯åŸºæœ¬ä¸Šè¿™ç§æ¨¡å¼ä¹Ÿä¸å¤å­˜åœ¨ã€‚ (1) å®ƒå¿…é¡»æ˜¯çº¯å‡½æ•° - è¿™æ„å‘³ç€åœ¨è¾“å…¥ä¸å˜çš„æƒ…å†µä¸‹ï¼Œæ°¸è¿œåº”è¯¥è¿”å›žç›¸åŒçš„ç»“æžœã€‚ (2) å®ƒåº”è¯¥æ²¡æœ‰å‰¯ä½œç”¨ - åƒè®¿é—®å…¨å±€å˜é‡ã€å‘èµ·å¼‚æ­¥è¯·æ±‚æˆ–ç­‰å¾… promise è§£æžè¿™æ ·çš„æ“ä½œéƒ½ä¸åº”è¯¥ç”¨åœ¨æ­¤å¤„ã€‚ ä¸‹é¢æ˜¯ä¸ªå¾ˆç®€å•çš„è®¡æ•°å™¨ reducer : 12345678const counterReducer = function (state, action) &#123; if (action.type === ADD) &#123; return &#123; value: state.value + 1 &#125;; &#125; else if (action.type === SUBTRACT) &#123; return &#123; value: state.value - 1 &#125;; &#125; return &#123; value: 0 &#125;;&#125;; å®ƒæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ï¼Œæ¯æ¬¡éƒ½æ˜¯è¿”å›žä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡ã€‚æˆ‘ä»¬æ ¹æ®ä¹‹å‰çš„çŠ¶æ€å’Œä¼ å…¥çš„åŠ¨ä½œç±»åž‹æ¥ç´¯åŠ å‡ºæ–°çš„å€¼ã€‚ è¿žæŽ¥ React ç»„ä»¶å¦‚æžœæ˜¯åœ¨ Reactä¸Šä¸‹æ–‡ä¸­è®¨è®ºReduxçš„è¯ï¼Œé‚£åŸºæœ¬ç¦»ä¸å¼€ react-redux æ¨¡å—ã€‚å®ƒæä¾›ä¸¤æ ·ä¸œè¥¿æ¥è¿›è¡Œ Redux åˆ°ç»„ä»¶çš„è¿žæŽ¥ã€‚ (1) &lt;Provider&gt; ç»„ä»¶ - å®ƒæ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œå®ƒæŽ¥æ”¶ storeå¹¶ä½¿å¾—æ‰€æœ‰çš„å­ç»„ä»¶éƒ½å¯ä»¥é€šè¿‡ React çš„ context API æ¥è®¿é—® storeã€‚ ä¾‹å¦‚:123&lt;Provider store=&#123; myStore &#125;&gt; &lt;MyApp /&gt;&lt;/Provider&gt; é€šå¸¸ï¼Œæˆ‘ä»¬åªåœ¨åº”ç”¨ä¸­çš„å•ä¸ªåœ°æ–¹ä½¿ç”¨å®ƒã€‚ (2) connect å‡½æ•° - å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè´Ÿè´£è®¢é˜… storeçš„æ›´æ–°å’Œé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚å®ƒæ˜¯é€šè¿‡ é«˜é˜¶ç»„ä»¶ å®žçŽ°çš„ã€‚ è¿™æ˜¯å®ƒçš„å‡½æ•°ç­¾å:123456connect( [mapStateToProps], [mapDispatchToProps], [mergeProps], [options]) mapDispatchToPropsä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œåªæ˜¯å®ƒæŽ¥æ”¶çš„æ˜¯ dispatchå‡½æ•°ï¼Œè€Œä¸æ˜¯state ã€‚è¿™é‡Œæ˜¯æˆ‘ä»¬å°†æ´¾å‘åŠ¨ä½œå®šä¹‰æˆå±žæ€§çš„åœ°æ–¹ã€‚123const mapDispatchToProps = dispatch =&gt; (&#123; changeVisibility: value =&gt; dispatch(changeVisibility(value))&#125;); mergePropså°† mapStateToPropsã€ mapDispatchToPropså’Œå‘é€ç»™ç»„ä»¶çš„å±žæ€§è¿›è¡Œåˆå¹¶ï¼Œå®ƒèµ‹äºˆæˆ‘ä»¬æœºä¼šåŽ»ç´¯åŠ å‡ºæ›´é€‚åˆçš„å±žæ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæˆ‘ä»¬éœ€è¦è§¦å‘ä¸¤ä¸ªåŠ¨ä½œï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬ç»„åˆæˆä¸€ä¸ªå•ç‹¬çš„å±žæ€§å¹¶å°†å…¶å‘é€ç»™ React ã€‚options æŽ¥æ”¶ä¸€ç»„å¦‚ä½•æŽ§åˆ¶è¿žæŽ¥çš„è®¾ç½®ã€‚ ä½¿ç”¨ Redux çš„ç®€å•è®¡æ•°å™¨åº”ç”¨ä½¿ç”¨ä¸Šé¢æ‰€æœ‰çš„ API æ¥åˆ›å»ºä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨åº”ç”¨ã€‚ â€œAddâ€ å’Œ â€œSubtractâ€ æŒ‰é’®åªæ˜¯æ”¹å˜ store çš„å€¼ã€‚â€Visibleâ€ å’Œ â€œHiddenâ€ æŒ‰é’®ç”¨æ¥æŽ§åˆ¶è®¡æ•°å™¨æ˜¯å¦æ˜¾ç¤ºã€‚ åˆ›å»ºåŠ¨ä½œæ¯ä¸ª Redux çš„å¼€å§‹éƒ½æ˜¯å¯¹åŠ¨ä½œç±»åž‹å»ºæ¨¡åŠå®šä¹‰æˆ‘ä»¬æ‰€è¦ä¿å­˜çš„çŠ¶æ€ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä¼šæœ‰ä¸‰ä¸ªæ“ä½œ:å¢žåŠ ã€å‡å°‘å’Œç®¡ç†å¯è§æ€§ã€‚æ‰€æœ‰åŠ¨ä½œä»£ç å¦‚ä¸‹æ‰€ç¤º:12345678910const ADD = 'ADD';const SUBTRACT = 'SUBTRACT';const CHANGE_VISIBILITY = 'CHANGE_VISIBILITY';const add = () =&gt; (&#123; type: ADD &#125;);const subtract = () =&gt; (&#123; type: SUBTRACT &#125;);const changeVisibility = visible =&gt; (&#123; type: CHANGE_VISIBILITY, visible&#125;); Store åŠå…¶ reducersåœ¨è§£é‡Š store å’Œ reudcersæ—¶ï¼Œæœ‰äº›æŠ€æœ¯ç‚¹æ˜¯æ²¡æœ‰è®¨è®ºåˆ°çš„ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šæœ‰å¤šä¸ª reducer ï¼Œå› ä¸ºè¦ç®¡ç†å¤šç§çŠ¶æ€ã€‚store åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥ç†è®ºä¸Šåªæœ‰ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ã€‚ä½†æ˜¯å¤§å¤šæ•°ç”Ÿäº§çŽ¯å¢ƒçš„åº”ç”¨çš„çŠ¶æ€éƒ½æ˜¯çŠ¶æ€åˆ‡ç‰‡çš„ç»„åˆã€‚æ¯ä¸ªåˆ‡ç‰‡ä»£è¡¨åº”ç”¨çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ªå°ç¤ºä¾‹æ‹¥æœ‰è®¡æ•°å’Œå¯è§æ€§ä¸¤ä¸ªåˆ‡ç‰‡ã€‚æ‰€ä»¥åˆå§‹çŠ¶æ€åº”è¯¥æ˜¯è¿™æ ·çš„:123456const initialState = &#123; counter: &#123; value: 0 &#125;, visible: true&#125;; éœ€è¦ä¸ºè¿™ä¸¤éƒ¨åˆ†åˆ†åˆ«å®šä¹‰ reducerã€‚è¿™æ ·ä¼šå¸¦æ¥çµæ´»æ€§å¹¶æå‡ä»£ç çš„å¯è¯»æ€§ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æžœæˆ‘ä»¬æœ‰ä¸€ä¸ªæ‹¥æœ‰åä¸ªæˆ–æ›´å¤šçŠ¶æ€åˆ‡ç‰‡çš„å·¨åž‹åº”ç”¨ï¼Œå¹¶ä¸”æˆ‘ä»¬åªä½¿ç”¨å•ä¸ª reducer å‡½æ•°æ¥è¿›è¡Œç»´æŠ¤ï¼Œè¿™æ ·ç®¡ç†èµ·æ¥å°†ä¼šéžå¸¸å›°éš¾ã€‚ Reduxæä¾›è¾…åŠ©å‡½æ•°æ¥è®©æˆ‘ä»¬èƒ½å¤Ÿé”å®šstateçš„æŸä¸ªç‰¹å®šéƒ¨åˆ†å¹¶ä¸ºå…¶åˆ†é…ä¸€ä¸ª reducerã€‚å®ƒå°±æ˜¯ combineReducers :1234567import &#123; createStore, combineReducers &#125; from 'redux';const rootReducer = combineReducers(&#123; counter: function A() &#123; ... &#125;, visible: function B() &#123; ... &#125;&#125;);const store = createStore(rootReducer); å‡½æ•° A åªæŽ¥æ”¶ counter åˆ‡ç‰‡ä½œä¸ºçŠ¶æ€ï¼Œå¹¶ä¸”åªè¿”å›žåˆ‡ç‰‡è¿™éƒ¨åˆ†çš„çŠ¶æ€ã€‚å‡½æ•° B ä¹Ÿæ˜¯åŒæ ·çš„ï¼Œå®ƒæŽ¥æ”¶å¸ƒå°”å€¼ (visible çš„å€¼) å¹¶ä¸”å¿…é¡»è¿”å›žå¸ƒå°”å€¼ã€‚ counter åˆ‡ç‰‡çš„reducer åº”è¯¥è€ƒè™‘åˆ° ADD å’Œ SUBTRACT ä¸¤ä¸ªåŠ¨ä½œï¼Œå¹¶åŸºäºŽåŠ¨ä½œæ¥è®¡ç®—å‡ºæ–°çš„ counter çŠ¶æ€ã€‚12345678const counterReducer = function (state, action) &#123; if (action.type === ADD) &#123; return &#123; value: state.value + 1 &#125;; &#125; else if (action.type === SUBTRACT) &#123; return &#123; value: state.value - 1 &#125;; &#125; return state || &#123; value: 0 &#125;;&#125;; å½“ store åˆå§‹åŒ–æ—¶ï¼Œæ¯ä¸ª reducer è‡³å°‘è§¦å‘ä¸€æ¬¡ã€‚æœ€åˆè¿è¡Œçš„è¿™ä¸€æ¬¡ï¼Œstate ä¸º undefined ï¼Œaction ä¸º { type: &quot;@@redux/INIT&quot;} ã€‚åœ¨è¿™ä¸ªå®žä¾‹ä¸­ï¼Œreducer åº”è¯¥è¿”å›žæ•°æ®çš„åˆå§‹å€¼ { value: 0 } ã€‚ visible çš„ reducer ç›¸å½“ç®€å•ï¼Œå®ƒåªå¤„ç†åŠ¨ä½œ CHANGE_VISIBILITY :123456const visibilityReducer = function (state, action) &#123; if (action.type === CHANGE_VISIBILITY) &#123; return action.visible; &#125; return true;&#125;; æœ€åŽï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸¤ä¸ª reducers ä¼ ç»™ combineReducers æ¥åˆ›å»º rootReducer ã€‚ 1234const rootReducer = combineReducers(&#123; counter: counterReducer, visible: visibilityReducer&#125;); é€‰æ‹©å™¨ ( Selectors )æˆ‘ä»¬çŸ¥é“çŠ¶æ€é€šå¸¸éƒ½æ˜¯ç»†åŒ–æˆå¤šä¸ªçŠ¶æ€åˆ‡ç‰‡ã€‚æˆ‘ä»¬æœ‰ä¸“é—¨çš„ reduceræ¥è´Ÿè´£æ›´æ–°æ•°æ®ï¼Œä½†æ˜¯å½“æ¶‰åŠåˆ°èŽ·å–çŠ¶æ€æ•°æ®æ—¶ï¼Œæˆ‘ä»¬ä»ç„¶åªæ˜¯æœ‰ä¸€ä¸ªå¯¹è±¡ã€‚è¿™é‡Œå°±æ˜¯é€‰æ‹©å™¨ ( Selectors )æ´¾ä¸Šç”¨åœºçš„åœ°æ–¹ã€‚é€‰æ‹©å™¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæŽ¥æ”¶æ•´ä¸ªçŠ¶æ€å¯¹è±¡å¹¶æå–å‡ºæˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œåœ¨è¿™ä¸ªå°ç¤ºä¾‹åº”ç”¨ä¸­æˆ‘ä»¬éœ€è¦ä¸¤ä¸ªæ•°æ®:12const getCounterValue = state =&gt; state.counter.value;const getVisibility = state =&gt; state.visible; è¿™ä¸ªè®¡æ•°å™¨åº”ç”¨å®žåœ¨æ˜¯å¤ªå°äº†ï¼Œå®Œå…¨ä½“çŽ°ä¸å‡ºé€‰æ‹©å™¨çš„å¨åŠ›ã€‚ä½†æ˜¯ï¼Œåœ¨ä¸€ä¸ªå¤§é¡¹ç›®ä¸­ä¾¿æˆªç„¶ä¸åŒã€‚é€‰æ‹©å™¨çš„å­˜åœ¨å¹¶ä¸æ˜¯ä¸ºäº†å°‘äº›å‡ è¡Œä»£ç ï¼Œä¹Ÿä¸æ˜¯ä¸ºäº†å¯è¯»æ€§ã€‚é€‰æ‹©å™¨é™„å¸¦äº†è¿™äº›å†…å®¹ï¼Œä½†å®ƒä»¬ä¹Ÿæ˜¯ä¸Šä¸‹æ–‡ç›¸å…³çš„ï¼Œå¯èƒ½åŒ…å«é€»è¾‘ã€‚ç”±äºŽå®ƒä»¬å¯ä»¥è®¿é—®æ•´ä¸ªçŠ¶æ€ï¼Œæ‰€ä»¥å®ƒä»¬èƒ½å¤Ÿå›žç­”ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œâ€œåœ¨ Y é¡µé¢ç”¨æˆ·æ˜¯å¦æœ‰æƒé™å¯ä»¥åš X è¿™ä»¶äº‹â€ã€‚è¿™æ ·çš„äº‹é€šè¿‡ä¸€ä¸ªé€‰æ‹©å™¨å°±å¯ä»¥å®Œæˆã€‚ React ç»„ä»¶å…ˆæ¥å¤„ç†ç®¡ç†è®¡æ•°å™¨å¯è§æ€§çš„ UI éƒ¨åˆ†ã€‚12345678910111213141516171819function Visibility(&#123; changeVisibility &#125;) &#123; return ( &lt;div&gt; &lt;button onClick=&#123; () =&gt; changeVisibility(true) &#125;&gt; Visible &lt;/button&gt; &lt;button onClick=&#123; () =&gt; changeVisibility(false) &#125;&gt; Hidden &lt;/button&gt; &lt;/div&gt; );&#125;const VisibilityConnected = connect( null, dispatch =&gt; (&#123; changeVisibility: value =&gt; dispatch(changeVisibility(value)) &#125;))(Visibility); ç¬¬äºŒä¸ªç»„ä»¶ç•¥å¾®æœ‰äº›å¤æ‚ã€‚å°†å®ƒå‘½åä¸º Counter ï¼Œå®ƒæ¸²æŸ“ä¸¤ä¸ªæŒ‰é’®å’Œè®¡æ•°å€¼ã€‚ 12345678910111213141516171819function Counter(&#123; value, add, subtract &#125;) &#123; return ( &lt;div&gt; &lt;p&gt;Value: &#123; value &#125;&lt;/p&gt; &lt;button onClick=&#123; add &#125;&gt;Add&lt;/button&gt; &lt;button onClick=&#123; subtract &#125;&gt;Subtract&lt;/button&gt; &lt;/div&gt; );&#125;const CounterConnected = connect( state =&gt; (&#123; value: getCounterValue(state) &#125;), dispatch =&gt; (&#123; add: () =&gt; dispatch(add()), subtract: () =&gt; dispatch(subtract()) &#125;))(Counter); è¿™é‡Œ mapStateToProps å’Œ mapDispatchToProps éƒ½éœ€è¦ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³è¯»å– store ä¸­çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜è¦æ´¾å‘åŠ¨ä½œã€‚è¿™ä¸ªç»„ä»¶è¦æŽ¥æ”¶ä¸‰ä¸ªå±žæ€§: valueã€add å’Œ subtractã€‚ æœ€åŽè¦å®Œæˆçš„å°±æ˜¯ App ç»„ä»¶ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œè¿›è¡Œåº”ç”¨çš„ç»„è£…ã€‚ 12345678910111213function App(&#123; visible &#125;) &#123; return ( &lt;div&gt; &lt;VisibilityConnected /&gt; &#123; visible &amp;&amp; &lt;CounterConnected /&gt; &#125; &lt;/div&gt; );&#125;const AppConnected = connect( state =&gt; (&#123; visible: getVisibility(state) &#125;))(App); å†ä¸€æ¬¡éœ€è¦å¯¹ç»„ä»¶è¿›è¡Œ connect æ“ä½œï¼Œå› ä¸ºæˆ‘ä»¬æƒ³è¦æŽ§åˆ¶è®¡æ•°å™¨çš„æ˜¾ç¤ºã€‚getVisibility é€‰æ‹©å™¨è¿”å›žå¸ƒå°”å€¼ï¼Œå®ƒè¡¨ç¤ºæ˜¯å¦æ¸²æŸ“ CounterConnected ç»„ä»¶ã€‚ ç»“è¯­Redux æ˜¯ä¸€ç§å¾ˆæ£’çš„æ¨¡å¼ã€‚JavaScript ç¤¾åŒºå°†è¿™ç§ç†å¿µå‘æ‰¬ä¸‹åŽ»ï¼Œå¹¶ä½¿ç”¨ä¸€äº›æ–°æœ¯è¯­å¯¹å…¶è¿›è¡Œäº†å¢žå¼ºã€‚æˆ‘è®¤ä¸ºä¸€ä¸ªå…¸åž‹çš„ Redux åº”ç”¨åº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·çš„: é¡ºä¾¿ä¸€æï¼Œè¿˜æ²¡æœ‰ä»‹ç»è¿‡å‰¯ä½œç”¨ç®¡ç†ã€‚é‚£å°†æ˜¯å¦å¤–çš„æ–°ç¯‡ç« äº†ï¼Œå®ƒæœ‰è‡ªå·±çš„ç†å¿µå’Œè§£å†³æ–¹æ¡ˆã€‚ æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼ŒRedux æœ¬èº«æ˜¯ä¸€ç§éžå¸¸ç®€å•çš„æ¨¡å¼ã€‚å®ƒä¼ æŽˆäº†éžå¸¸æœ‰ç”¨çš„æŠ€æœ¯ï¼Œä½†ä¸å¹¸çš„æ˜¯å…‰é å®ƒè‡ªèº«å¾€å¾€æ˜¯ä¸å¤Ÿçš„ã€‚æˆ‘ä»¬è¿Ÿæ—©è¦å¼•å…¥æ›´å¤šçš„æ¦‚å¿µæˆ–æ¨¡å¼ã€‚å½“ç„¶è¿™æ²¡æœ‰é‚£ä¹ˆç³Ÿç³•ï¼Œæˆ‘ä»¬åªæ˜¯å…ˆæèµ·è®¡åˆ’ä¸€ä¸‹ã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ES6æ”»ç•¥(äº”)]]></title>
    <url>%2Fblog%2F2018%2F05%2F29%2FES6%E6%94%BB%E7%95%A5-%E4%BA%94%2F</url>
    <content type="text"><![CDATA[ES6çš„æ”¹ç‰ˆï¼Œä¸»è¦æ˜¯é€šè¿‡å¼•å…¥JAVAç­‰é™æ€è¯­è¨€çš„ä¼˜ç§€æ€æƒ³æ¥è§£å†³è€ç‰ˆæœ¬çš„ä¸€äº›ç—¼ç–¾ï¼Œå¦‚ä½œç”¨åŸŸï¼Œå›žè°ƒï¼Œç»§æ‰¿å’Œå°è£…ç­‰é—®é¢˜ã€‚è¿™äº›æ”¹é©æŽªæ–½æ˜¯éžå¸¸æˆåŠŸçš„ï¼ŒES6è®©JSçœŸæ­£å˜æˆäº†ä¸€ç§å¥½ç”¨çš„è¯­è¨€ã€‚è¿™é‡Œæ˜¯å…³äºŽä¸€äº›å¯¼å‡ºæ¨¡å—ã€‚ æ•°ç»„æ‰©å±•forEach()æ–¹æ³•è¿™ä¸ªæ–¹æ³•å…¶å®žæ˜¯es5çš„ï¼Œè¿˜æ˜¯å¾ˆå¥½ç”¨çš„ã€‚12345var arr = ['a', 'b', 'c', 'd'];//éåŽ†æ•°ç»„arr.forEach(function(val)&#123; console.log(val);&#125;); Array.from()æ–¹æ³•å®ƒæ˜¯å°†ä¸¤ç±»å¯¹è±¡è£…æ¢ä¸ºçœŸçš„æ•°ç»„ï¼šç±»æ•°ç»„å¯¹è±¡argumentsã€å¯éåŽ†å¯¹è±¡ï¼ˆå¯æ•°Objectã€Setã€Map). 123456789101112131415161718192021222324252627282930let myObj = &#123;length:2,'0':'hello','1':'world'&#125;;console.log(Array.from(myObj));//[ 'hello', 'world' ]&lt;!-- Set --&gt;let mySet = new Set([1,1,2,3]);mySet.add('hello');mySet.add('hello');mySet.add(NaN);mySet.add(NaN);mySet.add(undefined);mySet.add(undefined);console.log(Array.from(mySet));//[ 1, 2, 3, 'hello', NaN, undefined ]&lt;!-- Map --&gt;let myMap = new Map();myMap.set(0,'hello');myMap.set(true,'world');myMap.set(1,'haha');console.log(Array.from(myMap));//[ [ 0, 'hello' ], [ true, 'world' ], [ 1, 'haha' ] ]&lt;!-- arguments --&gt;function foo()&#123;console.log(Array.from(arguments));&#125;foo(1,3,5);//[ 1, 3, 5 ] find()å’Œfindindex()find()æŸ¥æ‰¾æ•°ç»„é‡Œç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªå€¼findindex()æ˜¯æŸ¥æ‰¾æ•°ç»„é‡Œç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€ä¸ªç´¢å¼•çš„ä¸‹æ ‡ 123456789101112&lt;!-- find() --&gt;console.log([-1, 4, -5, 10].find((n) =&gt; n &lt; 2));// -1&lt;!-- findindex() --&gt;console.log([1, 5, 10, 15].findIndex(function(value, index, arr) &#123; return value &gt; 4; //5è¿™ä¸ªå€¼çš„ç´¢å¼•ä¸‹æ ‡æ˜¯1&#125;));// 1 fill()å¡«å……æ–¹æ³•å°†ç©ºæ•°ç»„å¡«å……å›ºå®šçš„æŸä¸€ä¸ªå€¼ã€‚ 1234console.log(new Array(4));//[ , , , ]console.log(new Array(4).fill(2));//[2, 2, 2, 2] lterator éåŽ†å™¨ä½¿ç”¨æœ€å¤šçš„éåŽ†å™¨æ˜¯ï¼šfor...inå’Œforå‰è€…æ˜¯å¾ªçŽ¯éåŽ†Objectå¯¹è±¡ï¼ŒåŽè€…æ˜¯éåŽ†æ•°ç»„åœ¨ES6é‡Œåˆæ–°å¢žåŠ äº†2ç§æ•°æ®ç»“æž„ï¼šSetå’ŒMapã€‚è¿™é‡Œå°±ç”¨åˆ°äº†lteratorï¼Œä»–å…¶å®žå°±æ˜¯é“¾è¡¨ç»“æž„ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡è®°å½•å®ƒä¸‹ä¸ªå¯¹è±¡çš„ä½ç½®ï¼Œä¸€ä¸ªä¸€ä¸ªè¿žæˆä¸²ã€‚ä»–ä»¬äºŒè€…çš„åŽŸç†æ˜¯åˆ©ç”¨for....ofå¾ªçŽ¯ã€‚ 1234567891011121314151617181920212223242526272829let myMap = new Map();myMap.set(0,'hello');myMap.set(1,'world');myMap.set('hi','jack');for(let v of myMap)&#123; console.log(v); console.log(v[0]+'--'+v[1]);&#125;/* [0, "hello"] 0--hello [1, "world"] 1--world ["hi", "jack"] hi--jack*/let mySet = new Set([1,3,5]);for(let v of mySet)&#123; console.log(v);&#125;/* 1 3 5*/ ModuleModuleå®ƒå¯ä»¥è®©JSå˜æˆä¸€ä¸ªä¸ªå¯ä»¥æ‹†åˆ†çš„å…ˆæ–‡ä»¶ï¼Œç„¶åŽé€šè¿‡ç®€å•çš„æ–¹æ‹¼æŽ¥èµ·æ¥ï¼Œæžå¤§çš„å¢žå¤§äº†çµæ´»æ€§ã€‚å®ƒçš„ä¸€äº›å…³é”®å­—æ˜¯é»˜è®¤çš„ï¼Œå¯ä»¥å¿½ç•¥ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„ï¼šNodeçŽ¯å¢ƒä¸‹ä½¿ç”¨exportå’Œrequireå‰ç«¯JSçŽ¯å¢ƒä¸‹ä½¿ç”¨exportå’Œimport(éœ€è¦babelç­‰å·¥å…·æ¥è§£æž) 12345678910111213141516171819202122&lt;!-- foo.js --&gt;//å¯¼å‡ºæ–¹æ³•module.exports.sayHi = function()&#123; console.log('hello,world');&#125;;//å¯¼å‡ºå¯¹è±¡module.exports.obj = &#123;'a':1,'b':2&#125;;class Person &#123; constructor( name)&#123; this.name = name; &#125; eat() &#123; console.log(this.name+' eat'); &#125;&#125;//å¯¼å‡ºä¸€ä¸ªç±»module.exports.Person = Person; 12345678910&lt;!-- text.js --&gt;//å¼•å…¥æ¨¡å—var text = require('./foo.js');//ä½¿ç”¨æ¨¡å—text.sayHi();console.log(text.obj.a);var p = new text.Person('jack');p.eat(); åœ¨se6çš„è¯­æ³•ä¸‹ï¼Œéœ€è¦babel çš„æ”¯æŒã€‚1ã€å®‰è£… npm install babel-preset-es2015npminstall --global babel-cli 2ã€é…ç½®.babelrcæ–‡ä»¶ {&quot;presets&quot;:[&quot;es2015&quot;]} 3ã€æµ‹è¯•ä¸€ä¸‹ 12345&lt;!-- export.js --&gt;var yourname = 'Jack';var age = 18;export &#123;yourname, age&#125;; 123456&lt;!-- import.js --&gt;import &#123;yourname, age&#125; from './export.js';function say() &#123; console.log(yourname,age);&#125; 4ã€è¿è¡Œ babel export.js --out-file export_out.jsbabel import.js --out-file import_out.js è¿è¡Œç»“æŸä¹‹åŽï¼Œç›®å½•ä¸‹å¢žåŠ äº†2ä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œexport_out.jså’Œimport_out.js 123456789101112&lt;!-- export_out.js--&gt;'use strict';Object.defineProperty(exports, "__esModule", &#123;value: true&#125;);var yourname = 'Jack';var age = 18;exports.yourname = yourname;exports.age = age; 123456789&lt;!-- import_out.js --&gt;'use strict';var _export = require('./export.js');function say() &#123; console.log(_export.yourname, _export.age);&#125; å…¶å®žç¿»è¯‘è¿‡æ¥åŽï¼Œä»æ—§æ˜¯exportså’Œrequireï¼ 5ã€åœ¨å‰ç«¯æµ‹è¯•text.html 123456789101112131415&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head lang="en"&gt;&lt;meta charset="UTF-8"&gt;&lt;title&gt;æµ‹è¯•ä¸€ä¸‹&lt;/title&gt;&lt;script src="./import_out.js"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt;&lt;script&gt; say();&lt;/script&gt; è¿™æ ·æ˜¯è¿è¡Œä¸äº†çš„ï¼Œä»–ä»¬çŽ¯å¢ƒéƒ½ä¸ä¸€æ ·ï¼Œæ€Žä¹ˆå¯èƒ½è¿è¡Œã€‚babelåªæ˜¯ä¸€ä¸ªç¼–è¯‘å·¥å…·ï¼Œè¿™é‡Œåªæ˜¯æŠŠes6ç¼–è¯‘ä¸ºcommon.jsè§„èŒƒçš„è¯­æ³•ï¼Œrequireè¿™ä¸ªå…³é”®å­—å±žäºŽcommomJSèŒƒç•´ï¼Œå¹¶ä¸æ˜¯å‰ç«¯åŽŸç”Ÿçš„JS,ä¹Ÿå°±æ— æ³•è¯†åˆ«ã€‚ commonã€cmdã€amd:cmdæ˜¯seajséµå¾ªçš„è§„èŒƒamdæ˜¯requirejséµå¾ªçš„è§„èŒƒcommomJSæ˜¯nodeéµå¾ªçš„è§„èŒƒ å°±éœ€è¦åŠ å…¥webpack. webpack1ã€å®‰è£…npm install webpack -g (å…¨å±€å®‰è£…)npm install webpack (æœ¬åœ°å®‰è£…) 2ã€è¿è¡Œç¼–è¯‘webpack import_out.js bundle.js å› ä¸ºæˆ‘ä»¬å·²ç»å¯¹import_out.jsä½¿ç”¨babelç¼–è¯‘è¿‡äº†ï¼Œæ‰€ä»¥åªéœ€è¦ä½¿ç”¨WebpackæŠŠcommonJSè§„èŒƒè¿™ä¸ªæ–‡ä»¶ï¼Œç¼–è¯‘æˆæµè§ˆå™¨è¯†åˆ«çš„æ–‡ä»¶ã€‚ 3ã€ å†ä¸€æ¬¡æµ‹è¯•test.html ä¼šæœ‰é”™è¯¯æŠ›å‡ºï¼šsay is not defined è¿™ä¸ªå…¶å®žæ˜¯æ¨¡å—åŒ–çš„é—®é¢˜ï¼Œsay()æ–¹æ³•çš„å­˜æ´»ç©ºé—´åªå­˜åœ¨æ¨¡å—å†…ï¼Œä¹Ÿå°±æ˜¯Webpackè§£æžåŽçš„è‡ªæ‰§è¡Œå‡½æ•°é‡Œï¼Œè¿™æ ·çš„å¥½å¤„å°±æ˜¯é¿å…äº†å…¨å±€å˜é‡çš„æ±¡æŸ“ï¼Œåœ¨bundle.jsæ–‡ä»¶ä¸‹æœ‰(function(modules) { ....... })(); è¿™å°±æ˜¯ä¸€ä¸ªè‡ªæ‰§è¡Œçš„å°é—­ç©ºé—´ã€‚å¦‚æžœéœ€è¦åœ¨å¤–éƒ¨è°ƒç”¨say()è¿™ä¸ªæ–¹æ³•ï¼Œåªéœ€è¦æŠŠå®ƒæš´éœ²åœ¨å…¨å±€å°±å¥½äº†ã€‚webpackæœ‰ä¸ªexpose-loaderè¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥å°†jqueryçš„$æš´éœ²åˆ°å…¨å±€ï¼Œä»¥æ­¤ç±»æŽ¨ï¼ŒæŠŠsay()æ–¹æ³•æŒ‚åˆ°windowä¸‹é¢å°±okäº†ã€‚æˆ‘ä»¬ç›´æŽ¥ä¿®æ”¹babelç¿»è¯‘è¿‡çš„æ–‡ä»¶import_out.js:123456789'use strict';var _export = require('./export.js');function say() &#123;console.log(_export.yourname, _export.age);&#125;&lt;!-- æŠŠsay()æ–¹æ³•æŒ‚åˆ°windowä¸‹é¢ --&gt;window.say = say; ç„¶åŽå†è¿è¡Œä¸€ä¸‹webpackå‘½ä»¤ï¼šwebpack import_out.js bundle.jså¥½å•¦ï¼Œä½ å†è¿è¡Œä¸‹test.htmlï¼Œå‘çŽ°ç»ˆäºŽæˆåŠŸå•¦ï¼ æ€»ç»“å…¶å®žwebpacké›†æˆäº†babelç¿»è¯‘çš„ç›¸å…³å·¥ä½œï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦è¿™ä¹ˆéº»çƒ¦æ‹†åˆ†å‡ºæ¥ã€‚ä¸è¿‡ä¸ºäº†æžæ¸…æ¥šä»–ä»¬å„è‡ªçš„å·¥ä½œåŽŸç†ï¼Œè¿˜æ˜¯éœ€è¦è¿™æ ·çš„æ‹†åˆ†ã€‚ å‚è€ƒåŽŸæ–‡ï¼šES6æ”»ç•¥]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ES6æ”»ç•¥(å››)]]></title>
    <url>%2Fblog%2F2018%2F05%2F29%2FES6%E6%94%BB%E7%95%A5-%E5%9B%9B%2F</url>
    <content type="text"><![CDATA[ES6çš„æ”¹ç‰ˆï¼Œä¸»è¦æ˜¯é€šè¿‡å¼•å…¥JAVAç­‰é™æ€è¯­è¨€çš„ä¼˜ç§€æ€æƒ³æ¥è§£å†³è€ç‰ˆæœ¬çš„ä¸€äº›ç—¼ç–¾ï¼Œå¦‚ä½œç”¨åŸŸï¼Œå›žè°ƒï¼Œç»§æ‰¿å’Œå°è£…ç­‰é—®é¢˜ã€‚è¿™äº›æ”¹é©æŽªæ–½æ˜¯éžå¸¸æˆåŠŸçš„ï¼ŒES6è®©JSçœŸæ­£å˜æˆäº†ä¸€ç§å¥½ç”¨çš„è¯­è¨€ã€‚è¿™é‡Œæ˜¯å…³äºŽReflectå’ŒProxyã€‚ Setä¹‹å‰çš„JSåªæä¾›äº†ä¸¤ç§å®¹å™¨ï¼šæ•°ç»„å’Œå¯¹è±¡ã€‚es6åˆæ·»åŠ äº†å¦ä¸€ç§éžå¸¸æœ‰ç”¨çš„æ•°æ®ç»“æž„ï¼šSetã€‚ä»–å°±æ˜¯é›†åˆçš„æ„æ€ï¼Œæœ¬èº«ä¹Ÿæ˜¯ä¸€ç§å®¹å™¨ã€‚æ—¢ç„¶æ˜¯å®¹å™¨ï¼Œè‚¯å®šæœ‰å¯¹åº”çš„å¢žæŸ¥æ”¹åˆ çš„æ“ä½œäº†ã€‚å¢žæŸ¥æ”¹åˆ æ˜¯å®¹å™¨å¿…å¤‡çš„èŒèƒ½ã€‚é‚£ä¹ˆè¿™ç§æ–°å¼å®¹å™¨ï¼Œåˆ°åº•æœ‰ä»€ä¹ˆç‰¹ç‚¹å‘¢ï¼Ÿæ‹¿ä»–è·Ÿæ•°ç»„æ¯”è¾ƒçš„è¯ï¼ŒSetçš„æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯æ¯ä¸ªå€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¸èƒ½æœ‰é‡å¤å€¼ã€‚ç»å¸¸ä¼šé‡åˆ°æ•°ç»„åŽ»é‡çš„é—®é¢˜å§ï¼Ÿè‡ªä»Žæœ‰äº†Setï¼Œå°±å¼€å§‹å˜å¾—ç¾Žå¥½äº†ã€‚ 12345678let container = new Set([1, 2, 2, 3, 4, 4]);//å¯ä»¥ç›´æŽ¥ä¼ å…¥æ•°ç»„è¿›è¡Œåˆå§‹åŒ–container.add(5);//æ·»åŠ å…ƒç´ container.delete(5);//åˆ é™¤å…ƒç´ console.log(container.has(5));//falseï¼Œ5è¿™ä¸ªå…ƒç´ è¢«åˆ é™¤äº†console.log(container);//Set &#123; 1, 2, 3, 4 &#125;console.log(container.size);//é•¿åº¦4let unique_arr = [...container];//çœç•¥å·è¯­æ³•console.log(unique_arr);//å”¯ä¸€å€¼æ•°ç»„ï¼š[ 1, 2, 3, 4 ] Setçš„æž„é€ æ–¹æ³•å¯ä»¥ç›´æŽ¥ä¼ æ•°ç»„è¿›è¡Œåˆå§‹åŒ–ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è¿™æ ·å£°æ˜Žï¼šlet mySet = new Set(); Setè·Ÿæ•°ç»„æžä¸ºç±»ä¼¼ï¼ŒäºŒè€…å¯ä»¥äº’ç›¸è½¬æ¢ç€ç”¨ã€‚æœ‰äº†å®ƒï¼Œå°±å¯ä»¥è½»æ¾çš„è§£å†³æ•°ç»„åŽ»é‡é—®é¢˜äº†ã€‚ 123//ç®€å•åŽ»é‡æ–¹æ¡ˆvar arr = [1,1,2,3,3,3];console.log([...new Set(arr)]);//ä¸€å¥è¯æžå®š è¿™å¹¶ä¸é€‚ç”¨äºŽå«æœ‰é‡å¤å¯¹è±¡çš„æ•°ç»„ï¼Œå› ä¸ºå¯¹è±¡æ˜¯æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€ã€‚123console.log(&#123;&#125;==&#123;&#125;);//false,å†…å­˜åœ°å€ä¸åŒlet arr = [&#123;&#125;,&#123;&#125;,&#123;&#125;];console.log([...new Set(arr)]);//å¯¹è±¡æ˜¯æ— æ³•åŽ»é‡çš„ å¯¹è±¡æ•°ç»„åˆ°åº•å¦‚ä½•åŽ»é‡å‘¢ï¼Ÿä¸€ç§åŠžæ³•æ˜¯ä½ éœ€è¦é€’å½’æ¯”è¾ƒï¼Œä¸¤ä¸ªå¯¹è±¡çš„æ¯ä¸€ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç­‰çš„æ”¾å…¥ä¸€ä¸ªæ–°æ•°ç»„ä¸­ï¼Œç›¸ç­‰çš„è·³è¿‡ã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ³•å¾ˆæ™®é€šï¼Œå¯ä»¥åˆ©ç”¨Setçš„ä¸é‡å¤ç‰¹æ€§ï¼ŒæŠŠå¯¹è±¡å…ˆè½¬æˆå­—ç¬¦ä¸²å­˜å…¥Setï¼ŒåŽ»æŽ‰é‡å¤å€¼åŽï¼Œå†è½¬å›žæ¥å°±å¥½ã€‚ 12345678910111213function unique(arr)&#123; var container = new Set();//éåŽ† arr.forEach(function(val)&#123;//å°†å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²,å­˜å…¥setå®¹å™¨ä¸­ï¼Œç¡®ä¿å”¯ä¸€æ€§ã€‚ container.add(JSON.stringify(val)); &#125;); var newarr = [...container].map(function(item)&#123; return JSON.parse(item);//è½¬æ¢å›žåŽ» &#125;); return newarr;&#125; æ–°æ•°æ®ç»“æž„ï¼šMapè¿™ä¸ªæ˜¯Mapå®¹å™¨ï¼Œè€Œä¸æ˜¯å‰é¢çš„map()æ–¹æ³•ï¼Œåƒä¸‡åˆ«å¼„æ··äº†ï¼ˆæ³¨æ„å¤§å°å†™ï¼‰ï¼Mapå°±æ˜¯é”®å€¼å¯¹å®¹å™¨ï¼Œè·ŸObjectéžå¸¸ç±»ä¼¼ã€‚å®ƒæœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„å‘¢ï¼Ÿå…¶å®žObjectæœ‰ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼šå°±æ˜¯é”®åªèƒ½ç”¨å­—ç¬¦ä¸²ï¼Œè€Œä¸èƒ½ä½¿ç”¨å…¶ä»–æ•°æ®ç±»åž‹ã€‚å¦‚æžœè®©é”®ä¸é™äºŽå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯å„ç§æ•°æ®ç±»åž‹å‘¢ï¼Ÿæ¯”å¦‚numï¼Ÿ 12345678910111213141516171819202122232425262728&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head lang="en"&gt;&lt;meta charset="UTF-8"&gt;&lt;title&gt;map&lt;/title&gt;&lt;/head&gt; &lt;body&gt; &lt;div&gt; &lt;button id="btn1"&gt;æäº¤&lt;/button&gt; &lt;button id="btn2"&gt;å…³é—­&lt;/button&gt; &lt;/div&gt; &lt;/body&gt;&lt;/html&gt;&lt;script&gt; var dom1 = document.getElementById('btn1'); var dom2 = document.getElementById('btn2'); var callback1 = function()&#123; alert('æäº¤'); &#125;; var callback2 = function()&#123; alert('å…³é—­'); &#125;; const m = new Map(); m.set(dom1,callback1); //é”®æ˜¯dom m.set(dom2,callback2); console.log(m);&lt;/script&gt; ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹è±¡çš„é”®åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚Objectçš„é”®å› ä¸ºæ˜¯å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æ²¡å•¥é—®é¢˜ï¼Œä½†Mapæ—¢ç„¶æ”¾å¼€äº†ç±»åž‹é™åˆ¶ï¼Œè¿™å°±å¾—æ³¨æ„äº† 1234const map = new Map();map.set(['a'], 555);map.get(['a']) // undefined å› ä¸ºå¯¹è±¡æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€ï¼Œæ‰€ä»¥[&#39;a&#39;]ä½œä¸ºæ–°å¼€è¾Ÿçš„ç©ºé—´ï¼Œæ— æ³•åœ¨Mapå®¹å™¨ä¸­æ‰¾åˆ°ã€‚ å†æ¥çœ‹ä¸€ä¸‹Mapçš„å¢žæŸ¥æ”¹åˆ ï¼Œéžå¸¸ç®€å•ã€‚ 12345678910111213//åˆ©ç”¨äºŒç»´æ•°ç»„ï¼Œå¯ä»¥æž„å»ºMapconst myMap = new Map([ ['name', 'å¼ ä¸‰'], ['content', 'hello,world']]);console.log(myMap);//Map &#123; 'name' =&gt; 'å¼ ä¸‰', 'content' =&gt; 'hello,world' &#125;console.log(myMap.size); // é•¿åº¦myMap.set('age',18);//å¢žåŠ å±žæ€§console.log(myMap.get('name')); //èŽ·å–å±žæ€§myMap.delete('content');//åˆ é™¤å±žæ€§console.log(myMap.has('content')); // åˆ¤æ–­æ˜¯å¦æœ‰è¿™ä¸ªå±žæ€§console.log(myMap.keys());//èŽ·å–æ‰€æœ‰çš„é”® MapIterator &#123; 'name', 'age' &#125;console.log(myMap.values());//èŽ·å–æ‰€æœ‰çš„å€¼ MapIterator &#123; 'å¼ ä¸‰', 18 &#125; èŽ·å–çš„keysé›†åˆæ˜¯MapIteratorç±»åž‹çš„ï¼Œè¿™å«éåŽ†å™¨ã€‚é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸“ä¾›éåŽ†ç”¨çš„ä¸€ç§æ•°æ®ç»“æž„ Reflectæ˜¯é¢é•œå­Reflectå°±æ˜¯åå°„çš„æ„æ€ï¼Œé‚£ç©¶ç«Ÿåå°„å•¥å‘¢ï¼Ÿå¤§å®¶çŸ¥é“é•œå­å¯ä»¥åå°„å§ï¼ŸReflectå°±æ˜¯ä¸€é¢é•œå­ã€‚é‚£æ˜¯è°ç…§é•œå­å‘¢ï¼Ÿå°±æ˜¯Objectã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒObjectæŠŠè‡ªå·±çš„å±žäºŽè¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚Object.definePropertyï¼‰ç…§åˆ°äº†Reflectä¸Šã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head lang="en"&gt;&lt;meta charset="UTF-8"&gt;&lt;title&gt;åˆ©ç”¨åå°„å®žçŽ°æ•°æ®å’Œè§†å›¾è”åŠ¨&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;&lt;div&gt;æµ‹è¯•Objectï¼š&lt;input type="text" id='userName'/&gt;&lt;/div&gt;&lt;div&gt;æµ‹è¯•Reflectï¼š&lt;input type="text" id='age'/&gt;&lt;/div&gt;&lt;div id="showName"&gt;&lt;/div&gt;&lt;div id="showAge"&gt;&lt;/div&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt;&lt;script&gt;var userInfo = &#123;&#125;;//Objectçš„æ–¹å¼Object.defineProperty(userInfo, "userName", &#123;get: function()&#123;return document.getElementById('showName').innerHTML;&#125;,set: function(name)&#123;document.getElementById('showName').innerHTML = name;&#125;&#125;);//Reflectæ˜¯ä¸€é¢å¤§é•œå­ï¼ŒObjectä½ æœ‰çš„æˆ‘å°±æœ‰ï¼Reflect.defineProperty(userInfo, "age", &#123;get: function()&#123;return document.getElementById('showAge').innerHTML;&#125;,set: function(name)&#123;document.getElementById('showAge').innerHTML = name;&#125;&#125;);document.getElementById('userName').onkeyup = function(e)&#123;userInfo.userName = this.value;&#125;;document.getElementById('age').onkeyup = function(e)&#123;userInfo.age = this.value;&#125;;&lt;/script&gt; Reflectä¸€å…±æ˜¯13ä¸ªé™æ€æ–¹æ³•ï¼Œå°±æ˜¯13ç§æ­¦å™¨å“ˆï¼š1234567891011121314Reflect.apply(target,thisArg,args)Reflect.construct(target,args)Reflect.get(target,name,receiver)Reflect.set(target,name,value,receiver)Reflect.defineProperty(target,name,desc)Reflect.deleteProperty(target,name)Reflect.has(target,name)Reflect.ownKeys(target)Reflect.isExtensible(target)Reflect.preventExtensions(target)Reflect.getOwnPropertyDescriptor(target, name)Reflect.getPrototypeOf(target)Reflect.setPrototypeOf(target, prototype) çœ‹ä¸‹å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•ã€‚ 12345678910111213141516171819202122232425262728let obj = &#123;name:'jack',age:18&#125;;//ç®€å•setæ–¹æ³•Reflect.set(obj,'name','tom');console.log(obj.name);//tom//ç®€å•getæ–¹æ³•let age = Reflect.get(obj,'age');console.log(age);//18//å¸¦æœ‰æŽ¥æ”¶è€…å¯¹è±¡çš„setæ–¹æ³•let receiver = &#123;name:'lily'&#125;;//æ„æ€å°±æ˜¯ï¼šå‘èµ·è€…æ˜¯objï¼ŒæŠŠnameå±žæ€§æ”¹ä¸ºbillï¼Œä½†è¿™ä¸ªåŠ¨ä½œçš„æŽ¥æ”¶è€…æ˜¯receiverã€‚//æ‰€ä»¥ï¼Œobjçš„nameå±žæ€§è¿˜æ˜¯tomï¼Œä½†æŽ¥æ”¶è€…receiverçš„nameè¢«æ”¹å˜äº†ã€‚//è¿™ç§æœºåˆ¶çš„ä½œç”¨æ˜¯ï¼Œå¯ä»¥åœ¨å¯¹è±¡Aä¸­æ“ä½œå¯¹è±¡Bã€‚Reflect.set(obj,'name','bill',receiver);console.log(obj.name);//tomconsole.log(receiver.name);//bill//åˆ¤æ–­objæ˜¯å¦æœ‰nameå±žæ€§ï¼Ÿ//æ—§å†™æ³•--inconsole.log('name' in obj);//true//æ–°å†™æ³•--hasconsole.log(Reflect.has(obj,'name'));//true ä»–ä¸ŽProxyç»“åˆä½¿ç”¨æ›´åˆç†ã€‚ ProxyProxyå°±æ˜¯æ‹¦æˆªå™¨ï¼Œä¹Ÿå¯ä»¥è¯‘ä¸ºä»£ç†å™¨ï¼Œè·Ÿè®¾è®¡æ¨¡å¼çš„ä»£ç†æ¨¡å¼å·®ä¸å¤šã€‚ä»–è·ŸReflectæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚åªè¦Proxyå¯¹è±¡æœ‰çš„æ–¹æ³•ï¼ŒReflectå¯¹è±¡ä¸Šéƒ½æœ‰ã€‚å½“ç„¶å’¯ï¼ŒProxyæ²¡æœ‰çš„ï¼ŒReflectä¹Ÿæœ‰ã€‚ æ‹¦æˆªå™¨æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä»–çš„ä¸»è¦ä½œç”¨åœ¨äºŽæ‹¦æˆªã€‚çœ‹ä¸€ä¸‹è¯­æ³•å®šä¹‰ï¼švar proxy = new Proxy(target, handler); 1.targetå°±æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œæˆ‘ä»¬è¦ç»™å“ªä¸ªå¯¹è±¡åŠ æ‹¦æˆªï¼Ÿ2.handlerå°±æ˜¯å¤„ç†å¯¹è±¡ï¼Œä»–æ˜¯ä¸€ç³»åˆ—æ‹¦æˆªæ“ä½œçš„é›†åˆã€‚è¿™äº›æ‹¦æˆªæ“ä½œï¼Œå°±æ˜¯å¯¹åº”çš„Reflectå…·æœ‰çš„åä¸‰ç§é™æ€æ–¹æ³•ï¼ˆæ‰€è°“çš„ä¸€ä¸€å¯¹åº”å…¶å®žå°±æ˜¯è¯´çš„è¿™ä¸ªï¼‰ã€‚æ³¨æ„ï¼Œåªæœ‰è¿™åä¸‰ç§æ­¦å™¨ï¼Œä¸æ”¯æŒå…¶ä»–çš„ã€‚ æ‹¿æœ€ç®€å•çš„setæ–¹æ³•ä¸ºä¾‹: 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152//å½¢å‚è¯´æ˜Žï¼š// target:å¾…æµ‹è¯•çš„Personå®žä¾‹// validator:éªŒè¯è§„åˆ™personValidatorsfunction createValidator(target, validator) &#123;//æ‹¦æˆªå™¨ï¼Œæ‹¦æˆªèµ‹å€¼æ“ä½œï¼Œè§¦å‘setå‡½æ•°return new Proxy(target, &#123; set(target, key, value) &#123;//å¦‚æžœå¾…æµ‹è¯•çš„Personå¯¹è±¡ä¸­å«æœ‰è¿™ä¸ªå±žæ€§ï¼Œå°±å¯ç”¨éªŒè¯è§„åˆ™ï¼Œ// éªŒè¯è§„åˆ™çš„æ–¹æ³•ï¼šname(val)å’Œage(val)ï¼Œåç§°éœ€è¦è·Ÿä¼ å…¥çš„å±žæ€§keyä¸€è‡´ã€‚ if (target.hasOwnProperty(key)) &#123; let rules = validator[key];//rulesæ‹¿åˆ°çš„æ˜¯nameæ–¹æ³•çš„å¼•ç”¨//ç›¸å½“äºŽè°ƒç”¨æ–¹æ³•name('hello') if (rules(value)) &#123;//å¦‚æžœéªŒè¯æ— è¯¯ï¼Œtargetçš„nameå±žæ€§å¯ä»¥ä¿®æ”¹æˆåŠŸ return Reflect.set(target, key, value); &#125; else &#123;//å¦åˆ™å¤±è´¥ return 'error'; &#125; &#125; else &#123; return 'error'; &#125; &#125;&#125;);&#125;//éªŒè¯è§„åˆ™const personRules = &#123; name(val) &#123; return typeof val === 'string'; &#125;, age(val) &#123; return typeof val === 'number' &amp;&amp; val &gt; 18; &#125;&#125;;//æµ‹è¯•ç±»class Person &#123; constructor(name, age) &#123; this.name = name; this.age = age;//å¼€å¯éªŒè¯ï¼Œä¼ å…¥è¿™ä¸ªç±»çš„å®žä¾‹å’ŒéªŒè¯è§„åˆ™personRules return createValidator(this, personRules); &#125;&#125;const bill = new Person('Bill', 25);bill.name = 'jack';//èµ‹å€¼æˆåŠŸbill.age = 10;//èµ‹å€¼å¤±è´¥console.log(bill.name);//jackconsole.log(bill.age);//25 createValidatorè¿™ä¸ªå‡½æ•°ï¼Œè¿”å›žçš„æ˜¯Proxyæ‹¦æˆªå™¨å¯¹è±¡ã€‚è¿™ä¸ªæ‹¦æˆªå™¨å¯¹è±¡ï¼Œå¯¹åŽŸPersonç±»çš„setæ“ä½œåšäº†ä¿®æ”¹ï¼ŒåŠ å…¥äº†ä¸€äº›éªŒè¯æ–¹æ¡ˆï¼Œå…¶å®žå°±æ˜¯èµ·åˆ°äº†åŒ…è£…å¢žå¼ºçš„ä½œç”¨ï¼Œè®©Personå…·æœ‰äº†å¯éªŒè¯å­—æ®µç±»åž‹çš„åŠŸèƒ½ã€‚ å†æ¥çœ‹ä¸‹Reflect.applyçš„ç”¨æ³•ã€‚è¿™ä¸ªæ–¹æ³•çš„ä½¿ç”¨é¢‘çŽ‡è¿˜æ˜¯è›®é«˜çš„ 1234567891011121314//å‡å¦‚è¿™ä¸ªfooå‡½æ•°æ˜¯åŒäº‹å¼ ä¸‰å†™çš„var obj = &#123;&#125;;function foo()&#123;console.log(this);&#125;//æŽå››å¼•å…¥å¹¶ä½¿ç”¨äº†è¿™ä¸ªå‡½æ•°foo.apply(obj);//è¿™æ—¶ï¼Œå¦‚æžœå¼ ä¸‰æŠŠå‡½æ•°åæ”¹æˆäº†bar,å¦‚æžœæ²¡åŠæ—¶é€šçŸ¥åˆ°æŽå››ï¼Œé‚£ä¹ˆæŽå››çš„è°ƒç”¨å°±ä¼šæŠ¥é”™äº†ã€‚//å¯ä»¥åœ¨ä¸ä¾èµ–å‡½æ•°åçš„æƒ…å†µä¸‹æ”¹å˜å‡½æ•°çš„ä½œç”¨åŸŸä¹ˆï¼ŸFunction.prototype.apply.call(foo,obj);//è¿™ç§å†™æ³•å¤ªé•¿äº†ï¼Œå¯ä»¥ä½¿ç”¨åå°„Reflectç»™æˆ‘ä»¬æä¾›çš„ç®€å•æ–¹æ³•ã€‚Reflect.apply(foo,obj,[]);//è¦æ³¨æ„ï¼Œapplyæœ€åŽä¸€ä¸ªå‚æ•°è¦è·Ÿæ•°ç»„ï¼Œè¿™ä¸ªæ²¡æœ‰çš„è¯ä¹Ÿå¾—ä¼ []ï¼Œå¦åˆ™æŠ¥é”™ ç»“è¯­Proxyæ˜¯ç”¨äºŽä¿®æ”¹è¯­è¨€å†…éƒ¨è¡Œä¸ºçš„æœºåˆ¶ï¼Œå› ä¸ºObjectå¯¹è±¡å†…éƒ¨çš„æ–¹æ³•å¤§å¤šå±žäºŽè¿™ç§æƒ…å†µï¼Œæ‰€ä»¥handlerçš„é…ç½®ï¼Œåˆè·ŸReflectç´§å¯†è”ç³»åœ¨ä¸€èµ·ï¼ˆå› ä¸ºReflectæ˜¯Objectçš„é•œå­å˜›ï¼‰ã€‚åº”è¯¥è¯´ï¼ŒReflectå’ŒProxyä¹‹é—´çš„å…³ç³»è¿˜æ˜¯ä¸å¤ªå®¹æ˜“ç†é¡ºçš„ã€‚]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ES6æ”»ç•¥(ä¸‰)]]></title>
    <url>%2Fblog%2F2018%2F05%2F28%2FES6%E6%94%BB%E7%95%A5-%E4%B8%89%2F</url>
    <content type="text"><![CDATA[ES6çš„æ”¹ç‰ˆï¼Œä¸»è¦æ˜¯é€šè¿‡å¼•å…¥JAVAç­‰é™æ€è¯­è¨€çš„ä¼˜ç§€æ€æƒ³æ¥è§£å†³è€ç‰ˆæœ¬çš„ä¸€äº›ç—¼ç–¾ï¼Œå¦‚ä½œç”¨åŸŸï¼Œå›žè°ƒï¼Œç»§æ‰¿å’Œå°è£…ç­‰é—®é¢˜ã€‚è¿™äº›æ”¹é©æŽªæ–½æ˜¯éžå¸¸æˆåŠŸçš„ï¼ŒES6è®©JSçœŸæ­£å˜æˆäº†ä¸€ç§å¥½ç”¨çš„è¯­è¨€ã€‚è¿™é‡Œæ˜¯å…³äºŽes7çš„async/awaitã€‚ ES6es6çš„promiseå†™æ³•è¿˜æ˜¯ä¸å¤Ÿä¼˜é›…ï¼Œå› ä¸ºåŽé¢ä¼šè·Ÿå¾ˆå¤šthen()ã€‚åº”è¯¥è¯´ï¼Œasync/awaitæ˜¯ç›®å‰è§£å†³å›žè°ƒé—®é¢˜æœ€å¥½çš„æ–¹æ¡ˆäº†ã€‚ a:asyncå‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿb:ä¸€å¥è¯ï¼Œå®ƒå°±æ˜¯ Generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚a:è€ŒGeneratoråˆæ˜¯ç¥žé©¬ï¼Ÿb:æ˜¯es6çš„ä¸€ä¸ªè¯­æ³•ã€‚a:è¿™ä¸ªè¯­æ³•å¹²å˜›çš„ï¼Ÿb:ä¸ç”¨ç®¡å®ƒï¼Œåªéœ€è¦æŠŠasyncæžæ˜Žç™½ã€‚ è¦åœ¨node7ä¸‹é¢æ‰èƒ½çŽ©es7ï¼Œä½Žç‰ˆæœ¬æ˜¯çŽ©ä¸äº†çš„å“ˆã€‚ç›®å‰å®˜ç½‘æœ€æ–°æµ‹è¯•ç‰ˆæœ¬æ˜¯10.*ï¼Œç¨³å®šç‰ˆå‡ºåˆ°8.*ï¼Œæ‰€ä»¥å®‰è£…å¥½å°±å¯ä»¥ä½¿ç”¨äº†ã€‚ ä½¿ç”¨async/awaitçš„ç›®çš„å°±æ˜¯åŽ»é™¤æŽ‰PromiseåŽé¢çš„then(),åœ¨å¹¶è¡Œä¸‹ä¹Ÿæ²¡æœ‰then()çš„ï¼Œä¸»è¦æ˜¯ä¸²è¡Œï¼Œå°±æ˜¯äº’ç›¸ä¾é çš„è¯·æ±‚æ–¹å¼ã€‚ å‡è®¾æœ‰ä¸‰ä¸ªè¯·æ±‚ï¼šè¯·æ±‚1ï¼šæ‹¿åˆ°useridï¼Œä¼ é€’ç»™è¯·æ±‚2ã€‚è¯·æ±‚2ï¼šæ ¹æ®useridï¼ŒæŸ¥è¯¢ssoidï¼Œä¼ é€’ç»™è¯·æ±‚3ã€‚è¯·æ±‚3ï¼šæ ¹æ®ssoidï¼ŒæŸ¥åˆ°æœ€ç»ˆç»“æžœã€‚ é‚£ä¹ˆï¼Œå¦‚æžœå¯ä»¥è¿™ä¹ˆå†™å°±å¥½äº†ï¼š 12345var userid = getRequest1();var ssoid = getRequest2(userid);var res = getRequest3(userid,ssoid);//æ‰“å°æœ€ç»ˆç»“æžœres.then(function(data)&#123;console.log(data);&#125;); æŠŠä¹‹å‰es6çš„å†™æ³•æ”¹ä¸€ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445var request = require('request');var urls = ['http://localhost:3000/hello1','http://localhost:3000/hello2','http://localhost:3000/hello3'];//åˆ›å»ºä»»åŠ¡å‡½æ•°ä¸å˜function createPromise(url)&#123;//å›žè°ƒå‡½æ•° var callback = function(resolve, reject)&#123; request(url , function(err , response , body)&#123; if(err)&#123; reject(err);//é”™è¯¯è¿”å›ž &#125;else&#123; resolve(body);//æˆåŠŸè¿”å›ž &#125; &#125;);&#125;;//å¸ƒç½®ä»»åŠ¡var promise = new Promise(callback);//è¿”å›žpromiseæ‰¿è¯º return promise;&#125;//å£°æ˜Žasyncå‡½æ•°ï¼Œè¿”å›žçš„ä¸€å®šæ˜¯promiseå¯¹è±¡async function doIt()&#123; var data_userid = await createPromise(urls[0]);//ç¬¬ä¸€ä¸ªè¯·æ±‚ä»»åŠ¡ data_userid = JSON.parse(data_userid);//è§£æžæˆå¯¹è±¡ var userid = data_userid.userid;//èŽ·å–userid var data_ssoid = await createPromise(urls[1]+"?userid="+userid);//ç¬¬äºŒä¸ªè¯·æ±‚ä»»åŠ¡ data_ssoid = JSON.parse(data_ssoid);//è§£æžæˆå¯¹è±¡ var ssoid = data_ssoid.ssoid;//èŽ·å–ssoid var result = await createPromise(urls[2]+'?userid='+userid+'&amp;ssoid='+ssoid);//ç¬¬ä¸‰ä¸ªè¯·æ±‚ä»»åŠ¡ return result;//è¿”å›žpromiseå¯¹è±¡&#125;//æœ€ç»ˆæ‰§è¡ŒdoIt().then(function(data)&#123;//æ‰“å°æœ€ç»ˆç»“æžœconsole.log(data);&#125;).catch(function(err)&#123;//æ•èŽ·å¼‚å¸¸console.log(err);&#125;); æ³¨æ„ï¼š1234561.asyncéœ€è¦æ”¾åœ¨å‡½æ•°å£°æ˜Žå‰ï¼Œè¡¨ç¤ºè¿™ä¸ªå‡½æ•°è¿”å›žçš„ä¸€å®šæ˜¯promiseå¯¹è±¡ã€‚2.awaitåŽé¢ä¹Ÿå¿…é¡»æ˜¯promiseå¯¹è±¡ï¼Œè¡¨ç¤ºè¿™ä¸ªä»»åŠ¡æ˜¯éœ€è¦ç­‰å¾…çš„ã€‚3.æœ€åŽç”¨then()èŽ·å–æ‰€æœ‰æŽ¥å£çš„ä¿¡æ¯ï¼Œcatch()æ•èŽ·æ‰€æœ‰å¼‚å¸¸ã€‚4.è¿™ç§å†™æ³•è™½ç„¶ç±»ä¼¼åŒæ­¥ï¼Œä½†å®žé™…æ˜¯promiseçš„ç®€åŒ–å†™æ³•ï¼Œä¸å¯æ··ä¸ºä¸€è°ˆï¼è¿™æ ·ï¼Œç®€å•æ•´æ´ï¼Œåªç•™ä¸€ä¸ªthenå’Œcatchã€‚]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ES6æ”»ç•¥(äºŒ)]]></title>
    <url>%2Fblog%2F2018%2F05%2F28%2FES6%E6%94%BB%E7%95%A5-%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[ES6çš„æ”¹ç‰ˆï¼Œä¸»è¦æ˜¯é€šè¿‡å¼•å…¥JAVAç­‰é™æ€è¯­è¨€çš„ä¼˜ç§€æ€æƒ³æ¥è§£å†³è€ç‰ˆæœ¬çš„ä¸€äº›ç—¼ç–¾ï¼Œå¦‚ä½œç”¨åŸŸï¼Œå›žè°ƒï¼Œç»§æ‰¿å’Œå°è£…ç­‰é—®é¢˜ã€‚è¿™äº›æ”¹é©æŽªæ–½æ˜¯éžå¸¸æˆåŠŸçš„ï¼ŒES6è®©JSçœŸæ­£å˜æˆäº†ä¸€ç§å¥½ç”¨çš„è¯­è¨€ã€‚è¿™é‡Œæ˜¯å…³äºŽpromiseå¯¹è±¡ã€‚ ES6å›žè°ƒä½¿æˆ‘ä»¬æ—¶å¸¸éœ€è¦é¢å¯¹çš„é—®é¢˜ï¼ŒçŽ°åœ¨nodeå·²ç»å¾ˆå…¨é¢çš„æ”¯æŒäº†es6å’Œes7,åœ¨NodeçŽ¯å¢ƒä¸‹å°±å¯ä»¥ç›´æŽ¥è¿è¡Œè°ƒè¯•ï¼Œä¸å†ä¾èµ–äºŽbabelåŽ»ç¼–è¯‘ã€‚ å…³äºŽes6çš„pormiseä»–å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œçœ‹ä¸‹é¢ï¼š 123456789101112131415161718192021&lt;!-- å¯¹æ¯”ä¸€ä¸‹ä»–ä»¬çš„å·®å¼‚ --&gt;//å¸ƒç½®ä¸€é¡¹ä»»åŠ¡var promise = new Promise(function(resolve, reject) &#123;// ... some code//resolveå’Œrejectæ˜¯å¯¹è±¡æä¾›çš„ä¸¤ä¸ªå›žè°ƒå‡½æ•° if(/* å¼‚æ­¥æ“ä½œæˆåŠŸ */)&#123; resolve(value); &#125; else&#123; reject(error); &#125;&#125;);//æ‰§è¡Œä»»åŠ¡promise.then(function(data) &#123;// success console.log(data);&#125;).catch(function(err)&#123; console.log(err);&#125;); ä»Žä¸­å¯ä»¥çœ‹å‡ºï¼Œä»–å’ŒQæ¨¡å—æœ‰ç‚¹ç±»ä¼¼ï¼Œæ¯”å¦‚ï¼švar deferred = Q.defer() 12345678910111213141516171819202122var request = require('request');//å›žè°ƒå‡½æ•°var callback = function(resolve, reject)&#123; var url = 'http://localhost:3000/hello1'; request(url , function(err , response , body)&#123; if(err)&#123; reject(err);//é”™è¯¯è¿”å›ž &#125;else&#123; resolve(body);//æˆåŠŸè¿”å›ž &#125; &#125;);&#125;;//å¸ƒç½®ä¸€é¡¹ä»»åŠ¡var promise = new Promise(callback);//æ‰§è¡Œä»»åŠ¡promise.then(function(data)&#123;//æ­£ç¡®å“åº” console.log(data);&#125;).catch(function(err)&#123;//æ•èŽ·é”™è¯¯ä¿¡æ¯ console.log('error info:',err);&#125;); å°†urlåœ°å€http://localhost:3000/hello1,æ•…æ„æ”¹é”™æˆï¼šhttp//localhost:3000/hello1ï¼Œç„¶åŽå†æµ‹è¯•ä¸€ä¸‹ï¼š å†ä¸€æ¬¡ä¿®æ”¹ä¸€ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657var request = require('request');var urls = ['http://localhost:3000/hello1','http://localhost:3000/hello2','http://localhost:3000/hello3'];//è¿™é‡Œéœ€è¦æ”¹å†™ä¸€ä¸‹~~function createPromise(url)&#123;//å›žè°ƒå‡½æ•° var callback = function(resolve, reject)&#123; request(url , function(err , response , body)&#123; if(err)&#123; reject(err);//é”™è¯¯è¿”å›ž &#125;else&#123; resolve(body);//æˆåŠŸè¿”å›ž &#125; &#125;); &#125;;//å¸ƒç½®ä»»åŠ¡ var promise = new Promise(callback);//è¿”å›žpromiseæ‰¿è¯º return promise;&#125;//ç¬¬ä¸€ä¸ªè¯·æ±‚çš„å›žè°ƒvar callback_Request1 = function(data)&#123;data = JSON.parse(data);console.log(data);var userid = data.userid;var url = urls[1]+'?userid='+userid;return createPromise(url);&#125;;//ç¬¬äºŒä¸ªè¯·æ±‚çš„å›žè°ƒvar callback_Request2 = function(data)&#123;data = JSON.parse(data);console.log(data);var userid = data.userid;var ssoid = data.ssoid;var url = urls[2]+'?userid='+userid+'&amp;ssoid='+ssoid;return createPromise(url);&#125;;//ä¸šåŠ¡é€»è¾‘è¢«å‰¥ç¦»å‡ºåŽ»å’¯~~createPromise(urls[0]).then(function(data)&#123;console.log('ç¬¬ä¸€æ¬¡è¯·æ±‚');return callback_Request1(data);&#125;).then(function(data)&#123;console.log('ç¬¬äºŒæ¬¡è¯·æ±‚');return callback_Request2(data);&#125;).then(function(data)&#123;//æ‰“å°æœ€ç»ˆç»“æžœconsole.log('ç¬¬ä¸‰æ¬¡è¯·æ±‚');console.log(data);&#125;);]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ES6æ”»ç•¥(ä¸€)]]></title>
    <url>%2Fblog%2F2018%2F05%2F27%2FES6%E6%94%BB%E7%95%A5-%E4%B8%80%2F</url>
    <content type="text"><![CDATA[ES6çš„æ”¹ç‰ˆï¼Œä¸»è¦æ˜¯é€šè¿‡å¼•å…¥JAVAç­‰é™æ€è¯­è¨€çš„ä¼˜ç§€æ€æƒ³æ¥è§£å†³è€ç‰ˆæœ¬çš„ä¸€äº›ç—¼ç–¾ï¼Œå¦‚ä½œç”¨åŸŸï¼Œå›žè°ƒï¼Œç»§æ‰¿å’Œå°è£…ç­‰é—®é¢˜ã€‚è¿™äº›æ”¹é©æŽªæ–½æ˜¯éžå¸¸æˆåŠŸçš„ï¼ŒES6è®©JSçœŸæ­£å˜æˆäº†ä¸€ç§å¥½ç”¨çš„è¯­è¨€ã€‚è¿™é‡Œæ˜¯es6çš„Qæ¨¡å—ã€‚ ES6ä¸¤ä¸ªå¾ˆæœ‰ç”¨çš„åŽŸç”ŸJSå‡½æ•°ï¼šmapå’Œreduceã€‚ 1ã€map() æ–¹æ³•ï¼š å®ƒè¿”å›žä¸€ä¸ªç”±åŽŸæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨ä¸€ä¸ªæŒ‡å®šæ–¹æ³•ä¹‹åŽçš„è¿”å›žå€¼ç»„æˆæ–°çš„æ•°ç»„ã€‚ 123456789var data = [1,2,3];var callback = function(a)&#123; // è¿™é‡Œçš„aå°±æ˜¯æ•°ç»„æ¯ä¸€é¡¹çš„å€¼ return a+1;&#125;var demo = data.map(callback);consloe.log(demo)//[2,3,4] åœ¨è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯mapé‡Œé¢çš„å›žè°ƒå‡½æ•°ï¼Œå‚æ•°åªæœ‰ä¸€ä¸ª 2ã€reduce()æ–¹æ³• è¿™ä¸ªæ–¹æ³•å…ˆä»Žä»£ç ä¾‹å­å¼€å§‹1234567891011var data = [1,2,3];var callback = function(a,b)&#123; console.log('åˆå§‹å€¼=',a); return a+b;&#125;;var demo = data.reduce(callback,100);console.log(demo);//åˆå§‹å€¼=100//åˆå§‹å€¼=101//åˆå§‹å€¼=103//106 reduceå®ƒæœ‰2ä¸ªå‚æ•°ï¼š ç¬¬ä¸€ä¸ªæ˜¯callbackå›žè°ƒå‡½æ•°ï¼Œä¸»è¦æ˜¯é’ˆå¯¹æ•°ç»„çš„æ“ä½œï¼› ç¬¬äºŒä¸ªæ˜¯ä¼ å…¥çš„åˆå§‹å€¼ å·¥ä½œåŽŸç†ï¼š 1ã€ä¼ å…¥ä¸€ä¸ªåˆå§‹å€¼ï¼› 2ã€ç¬¬ä¸€æ¬¡ä¼ å…¥çš„ç»“æžœï¼ˆåˆå§‹å€¼ï¼‰ä½œä¸ºå›žè°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ•°ç»„çš„ç¬¬ä¸€ä¸ªå€¼åˆ™ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ï¼Œæ‰§è¡Œå®Œå›žè°ƒå‡½æ•°ä¹‹åŽï¼Œè¿”å›žä¸€ä¸ªç»“æžœï¼› 3ã€å†æŠŠç¬¬äºŒæ­¥çš„ç»“æžœä½œä¸ºè¿™ä¸€æ¬¡ç¬¬ä¸€ä¸ªå‚æ•°çš„å…¥å‚ï¼Œæ•°ç»„çš„ç¬¬äºŒä¸ªæ•°å€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ï¼Œæ‰§è¡Œå›žè°ƒå‡½æ•°ï¼Œè¿”å›žä¸€ä¸ªç»“æžœï¼› â€¦.. ä¾æ¬¡ç±»æŽ¨ï¼ŒéåŽ†å®Œæ•°ç»„åˆ™åœæ­¢ï¼Œä¹Ÿå°±æ˜¯ä¸€å±‚ä¸€å±‚çš„å›žè°ƒï¼Œæœ€ç»ˆå¾—åˆ°ç»“æžœã€‚è¿™å’Œajaxçš„ä¸²è¡Œè¯·æ±‚å¾ˆç±»ä¼¼ï¼Œå°±æ˜¯è¯·æ±‚1ï¼Œè¯·æ±‚2ï¼Œè¯·æ±‚3ç­‰ï¼Œæ˜¯æŒ‰ç…§é¡ºåºæŽ’é˜Ÿæ‰§è¡Œï¼Œä»–ä»¬å½¼æ­¤æœ‰æ‰€ä¾èµ–ï¼›åŒæ—¶è¿˜æœ‰ä¸€ä¸ªå¹¶è¡Œï¼Œå°±æ˜¯è¯·æ±‚1ï¼Œè¯·æ±‚2ï¼Œè¯·æ±‚3ç­‰åŒæ—¶æ‰§è¡Œè¯·æ±‚ï¼Œä»–ä»¬å½¼æ­¤äº’ä¸å½±å“ã€‚å¹¶è¡Œè¯·æ±‚æ—¶é—´å–æœ€å¤§è€…Qæ¨¡å—æ˜¯ç”¨æ¥è§£å†³å›žè°ƒé—®é¢˜ï¼Œä¸Žä¹‹ç±»ä¼¼çš„æœ‰jQueryçš„å»¶è¿Ÿå¯¹è±¡ï¼ŒES6çš„promiseå¯¹è±¡ï¼ŒES7çš„asyncå’Œawait.å¯ä»¥æŠŠQç†è§£ä¸ºnodeç‰ˆæœ¬çš„å»¶è¿Ÿå¯¹è±¡ï¼Œé‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹è¦åœ¨Nodeä¸‹å‘é€è¯·æ±‚ï¼Œå…¶å®žçˆ¬è™«ç¨‹åºå°±æ˜¯è¿™æ ·çš„é€»è¾‘ã€‚ çˆ¬è™«çš„å·¥ä½œåŽŸç†ï¼š å…ˆè¯·æ±‚é¦–é¡µçš„è¿žæŽ¥ï¼Œç„¶åŽåœ¨é¦–é¡µçš„åŸºç¡€ä¸‹å¯¹å„ä¸ªè¶…é“¾æŽ¥ä¸æ–­çš„çˆ¬å–ï¼Œç›´åˆ°éåŽ†å®Œæ‰€æœ‰çš„é¡µé¢ã€‚ å…ˆå®‰è£…ä¸€ä¸ªå‘é€è¯·æ±‚æ¨¡å—requestå’ŒQæ¨¡å—ï¼š npm install request --devnpm install q --dev ç„¶åŽå¼€å§‹å†™ä¸ªè„šæœ¬ï¼Œå…ˆç”¨expressæ­å»ºä¸€ä¸ªæœåŠ¡ï¼š12345678910111213141516171819202122232425262728var express = require('express')var router = express.Router();// GET home pagerouter.get('./',function(req,res,next)&#123;res.render('index',&#123;title:'Express'&#125;);&#125;)// è¯·æ±‚1router.get('/list1',function(req,res,next)&#123; setTimeout(() =&gt; &#123; res.send('è¯·æ±‚1å®Œæˆäº†ï¼') &#125;, 1000);&#125;)// è¯·æ±‚2router.get('/list2',function(req,res,next)&#123; setTimeout(() =&gt; &#123; res.send('è¯·æ±‚2å®Œæˆäº†ï¼') &#125;, 2000);&#125;)// è¯·æ±‚3router.get('/list3',function(req,res,next)&#123; setTimeout(() =&gt; &#123; res.send('è¯·æ±‚3å®Œæˆäº†ï¼') &#125;, 3000);&#125;)module.exports = router; ä»¥ä¸Šä¸ºæ•°æ®æŽ¥å£ã€‚ 12345678910111213141516171819202122var Q = require('q');var request = require('request');function createPromise(url)&#123; var deferred = Q.defer(); // åˆ›å»ºä»»åŠ¡ request(url, function(err,response,body)&#123; console.log('requested',url); if (err) &#123; deferred.reject(err); // é”™è¯¯è¿”å›ž &#125;else&#123; deferred.resolve(body) // æˆåŠŸè¿”å›ž &#125; &#125;) return deferred.promise; // è¿”å›žä¸€ä¸ªæ‰¿è¯º&#125;createPromise('http://localhost:3000/list1').then(function(data)&#123; console.log(data);&#125;,function(err)&#123; console.error(err);&#125;) resolveå°±æ˜¯ç»§ç»­æ‰§è¡Œï¼Œrejectå°±æ˜¯æ‹’ç»ï¼Œdeferå°±æ˜¯å¸ƒç½®ä»»åŠ¡ã€‚QæŠŠæ¯ä¸€ä¸ªè¯·æ±‚éƒ½ä¼šå¸ƒç½®æˆä¸€ä¸ªä»»åŠ¡ï¼Œç„¶åŽè¿”å›žä¸€ä¸ªpromiseå¯¹è±¡ï¼Œpromiseå°±æ˜¯ç»§æ‰¿çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªä»»åŠ¡å°±æ˜¯ä¸€ä¸ªæ‰¿è¯ºï¼Œæ‰¿è¯ºä»»åŠ¡æˆåŠŸä¹‹åŽè¿”å›žæˆåŠŸçš„ç»“æžœï¼Œè€Œå¤±è´¥å°±è¿”å›žä¸€ä¸ªå¤±è´¥çš„ç»“æžœï¼Œç„¶åŽå°±å¯ä»¥ä»Žthen()æ–¹æ³•é‡Œé¢æ‹¿åˆ°éœ€è¦çš„æ•°æ®ã€‚ å¹¶è¡Œè¯·æ±‚ï¼š1234567891011121314151617181920212223242526272829303132333435363738var Q = require('q');var request = require('request');var urls = [ 'http://localhost:3000/hello1', 'http://localhost:3000/hello2', 'http://localhost:3000/hello3', 'http//localhost:3000/hello_110' //è¿™æ˜¯ä¸ªé”™è¯¯çš„åœ°å€];function createPromise(url) &#123; var deferred = Q.defer(); //åˆ›å»ºä»»åŠ¡ request(url, function (err, response, body) &#123; console.log("requested " + url); if (err) &#123; deferred.reject(err); //é”™è¯¯è¿”å›ž &#125; else &#123; deferred.resolve(body); //æˆåŠŸè¿”å›ž &#125; &#125;); return deferred.promise; //è¿”å›žä¸€ä¸ªæ‰¿è¯º&#125;var promises = urls.map(function (url) &#123; return createPromise(url);&#125;);Q.allSettled(promises).then(function (results) &#123; console.log(results); results.forEach(function (result) &#123; if (result.state === "fulfilled") &#123; console.log(result.value); &#125; else &#123; console.error(result.reason); &#125; &#125;);&#125;); ç”¨map()æ–¹æ³•ï¼Œåœ¨å›žè°ƒå‡½æ•°ä¸­æ‰¹é‡åˆ›å»ºä»»åŠ¡ï¼Œç„¶åŽç­‰å¾…ç»“æžœéƒ½æ‰§è¡Œå®Œï¼Œä¸€æ¬¡æ€§çš„æ‹¿åˆ°æ‰€æœ‰ç»“æžœæ•°æ®ï¼ˆä»¥æ•°ç»„çš„å½¢å¼è¿”å›žï¼‰ ä¸²è¡Œè¯·æ±‚ã€‚å…ˆæ¥ä¸ªä¼ ç»Ÿå†™æ³•:1234567891011121314var Q = require('q');var request = require('request');request('http://localhost:3000/hello1' , function(err1 , response1 , body1)&#123; console.log(body1); request('http://localhost:3000/hello2',function(err2 , response2 , body2)&#123; console.log(body2); request('http://localhost:3000/hello3',function(err3 , response3 , body3)&#123; console.log(body3); &#125;); &#125;);&#125;); è¿™ç§å†™æ³•ä¹Ÿå«å›žè°ƒåœ°ç‹±ï¼Œå®žåœ¨å¤ªéš¾ç»´æŠ¤äº†ï¼Œä»£ç ä¸€å±‚æ‘žä¸€å±‚ï¼Œå¦‚æžœè¦æ”¹ä¸ªä¸œè¥¿é‚£ç®€ç›´æ˜¯è¦äº†å‘½äº†ï¼Œæ‰€ä»¥åœ°ç‹±äºŒå­—ç”¨çš„ç°å¸¸è´´åˆ‡ã€‚Qæ˜¯å¦‚ä½•è§£å†³å›žè°ƒåœ°ç‹±é—®é¢˜çš„å‘¢ï¼Ÿå…¶å®žä¹Ÿç®€å•ï¼Œå°±æ˜¯æŠŠå‘è¯·æ±‚éƒ¨åˆ†å•ç‹¬æ‹†å‡ºåŽ»ï¼Œåšæˆå­ä»»åŠ¡å³å¯ã€‚å‰é¢çš„reduceå°±æ˜¯è¿™æ ·ï¼Œåœ¨æœ‰ä¸€äº›åœºæ™¯ä¸‹ï¼ˆæ¯”å¦‚å¾®ä¿¡apiï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆè¿™ä¸ªå‡½æ•°å†™å‡ºæ¼‚äº®çš„ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435var Q = require('q');var request = require('request');var urls = [ 'http://localhost:3000/hello1', 'http://localhost:3000/hello2', 'http://localhost:3000/hello3', 'http//localhost:3000/hello_110' //çžªå¤§çœ¼ç›çž…å¥½å’¯ï¼Œè¿™æ˜¯ä¸ªé”™è¯¯çš„åœ°å€];function createPromise(url) &#123; var deferred = Q.defer(); request(url, function (err, response, body) &#123; if (err) deferred.reject(err); else deferred.resolve(body); &#125;); return deferred.promise;&#125;//è¿™é‡Œæ˜¯äº®ç‚¹~~urls.reduce(function (promiseObj, url) &#123; //promiseObjç¬¬ä¸€æ¬¡æ˜¯Q(null)ï¼Œä¹Ÿå°±æ˜¯ç©ºçš„ä»»åŠ¡ return promiseObj.then(function (data) &#123; if (data) &#123; console.log(data); &#125; //è¿”å›žpromiseï¼Œå±‚çº§ä¼ é€’ï¼Œç›´åˆ°æœ€åŽä¸€ä¸ªæ‹¿åˆ°ç»“æžœ return createPromise(url); &#125;, function (err) &#123; console.error(err); return createPromise(url); &#125;)&#125;, Q(null)); æ¯”è¾ƒéš¾ç†è§£çš„è¿˜æ˜¯reduceã€‚æˆ‘ä»¬è¿™é‡Œå†æ¥åˆ†æžä¸€éä»–ï¼šç¬¬1æ­¥ï¼šç»™å®šä¸€ä¸ªåˆå§‹å€¼Q(null)ã€‚ç¬¬2æ­¥ï¼šæŠŠä¸Šæ¬¡çš„ç»“æžœQ(null)ä½œä¸ºå›žè°ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ•°ç»„çš„ç¬¬1ä¸ªurlä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œæ‰§è¡Œå›žè°ƒå‡½æ•°ï¼Œæ‹¿åˆ°ä¸Šæ¬¡çš„ç»“æžœï¼Œç„¶åŽè¿”å›žä¸€ä¸ªpromiseå¯¹è±¡ï¼ˆå› ä¸ºæˆ‘ä»¬è¿™é‡Œæ‹¿åˆ°çš„æ˜¯nullï¼Œæ‰€ä»¥åœ¨ifæ¡ä»¶åˆ¤æ–­æ—¶æ²¡æœ‰æ‰“å°å‡ºæ¥ï¼‰ã€‚ç¬¬3æ­¥ï¼šæŠŠç¬¬2æ­¥çš„ç»“æžœQ(&#39;http://localhost:3000/hello1&#39;)ä½œä¸ºå›žè°ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ•°ç»„çš„ç¬¬2ä¸ªurlä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œæ‰§è¡Œå›žè°ƒå‡½æ•°ï¼Œè¿™æ—¶æ‰“å°çš„dataå°±æ˜¯hello1çš„ç»“æžœï¼Œç„¶åŽå†æ¬¡è¿”å›žä¸€ä¸ªpromiseå¯¹è±¡ã€‚ä»¥æ­¤ç±»æŽ¨ï¼Œæœ€ç»ˆèµ°åˆ°æœ€åŽä¸€ä¸ªurlï¼Œæ‹¿å®Œæ‰€æœ‰çš„æ•°æ®ã€‚ çŽ°å®žä¸­æˆ‘ä»¬éœ€æ±‚ä¸€èˆ¬æ˜¯è¿™æ ·çš„ï¼š è¯·æ±‚1ï¼šæ‹¿åˆ°useridï¼Œä¼ é€’ç»™è¯·æ±‚2ã€‚è¯·æ±‚2ï¼šæ ¹æ®useridï¼ŒæŸ¥è¯¢ssoidï¼Œä¼ é€’ç»™è¯·æ±‚3ã€‚è¯·æ±‚3ï¼šæ ¹æ®ssoidï¼ŒæŸ¥åˆ°æœ€ç»ˆç»“æžœã€‚æˆ‘ä»¬æ ¹æ®è¿™ç§æƒ…å†µï¼Œå†æ¥ä¸€æ¬¡ï¼šæ”¹é€ ä¸‹æŽ¥å£ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445var express = require('express');var router = express.Router();/* GET home page. */router.get('/', function (req, res, next) &#123; res.render('index', &#123; title: 'Express' &#125;);&#125;);//è¯·æ±‚1router.get('/hello1', function (req, res, next) &#123; setTimeout(function () &#123; res.json(&#123; code: 200, userid: 123 &#125;); &#125;, 1000);&#125;);//è¯·æ±‚2router.get('/hello2', function (req, res, next) &#123; var param = req.query || req.params; var userid = param.userid; setTimeout(function () &#123; res.json(&#123; code: 200, userid: userid, ssoid: 456 &#125;); &#125;, 2000);&#125;);//è¯·æ±‚3router.get('/hello3', function (req, res, next) &#123; var param = req.query || req.params; var userid = param.userid; var ssoid = param.ssoid; setTimeout(function () &#123; res.json(&#123; code: 200, userid: userid, ssoid: ssoid, msg: 'å®Œæˆå•¦ï¼' &#125;); &#125;, 3000);&#125;);module.exports = router; å…¶æ¬¡ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748var Q = require('q');var request = require('request');var urls = [ 'http://localhost:3000/hello1', 'http://localhost:3000/hello2', 'http://localhost:3000/hello3'];function createPromise(url) &#123; var deferred = Q.defer(); request(url, function (err, response, body) &#123; if (err) deferred.reject(err); else deferred.resolve(body); &#125;); return deferred.promise;&#125;//ç¬¬ä¸€ä¸ªè¯·æ±‚çš„å›žè°ƒvar callback_Request1 = function (data) &#123; data = JSON.parse(data); console.log(data); var userid = data.userid; var url = urls[1] + '?userid=' + userid; return createPromise(url);&#125;;//ç¬¬äºŒä¸ªè¯·æ±‚çš„å›žè°ƒvar callback_Request2 = function (data) &#123; data = JSON.parse(data); console.log(data); var userid = data.userid; var ssoid = data.ssoid; var url = urls[2] + '?userid=' + userid + '&amp;ssoid=' + ssoid; return createPromise(url);&#125;;//ä¸šåŠ¡é€»è¾‘è¢«å‰¥ç¦»å‡ºåŽ»å’¯~~createPromise(urls[0]).then(function (data) &#123; console.log('ç¬¬ä¸€æ¬¡è¯·æ±‚'); return callback_Request1(data);&#125;).then(function (data) &#123; console.log('ç¬¬äºŒæ¬¡è¯·æ±‚'); return callback_Request2(data);&#125;).then(function (data) &#123; //æ‰“å°æœ€ç»ˆç»“æžœ console.log('ç¬¬ä¸‰æ¬¡è¯·æ±‚'); console.log(data);&#125;); å°±å¯ä»¥æŠŠå†æ€Žä¹ˆå¤æ‚çš„é€»è¾‘éƒ½å¯ä»¥å•ç‹¬å°è£…åˆ°ä¸€ä¸ªå›žè°ƒå‡½æ•°é‡Œé¢ï¼Œæ•´ä½“ä»£ç å¹²å¹²å‡€å‡€ã€‚]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ES6æ”»ç•¥]]></title>
    <url>%2Fblog%2F2018%2F05%2F25%2FES6%E6%94%BB%E7%95%A5%2F</url>
    <content type="text"><![CDATA[ES6çš„æ”¹ç‰ˆï¼Œä¸»è¦æ˜¯é€šè¿‡å¼•å…¥JAVAç­‰é™æ€è¯­è¨€çš„ä¼˜ç§€æ€æƒ³æ¥è§£å†³è€ç‰ˆæœ¬çš„ä¸€äº›ç—¼ç–¾ï¼Œå¦‚ä½œç”¨åŸŸï¼Œå›žè°ƒï¼Œç»§æ‰¿å’Œå°è£…ç­‰é—®é¢˜ã€‚è¿™äº›æ”¹é©æŽªæ–½æ˜¯éžå¸¸æˆåŠŸçš„ï¼ŒES6è®©JSçœŸæ­£å˜æˆäº†ä¸€ç§å¥½ç”¨çš„è¯­è¨€ã€‚ æžå®šå˜é‡ä½œç”¨åŸŸé—®é¢˜ï¼šletES5æ—¶ä»£çš„å›§å¢ƒå°±æ˜¯æŠŠæŸä¸ªå˜é‡æžæˆäº†å…¨å±€å˜é‡ï¼ŒåŠ ä¸Šæ–‡ä»¶ä¹‹é—´çš„ç›¸äº’è°ƒç”¨ï¼Œæˆ‘ä»¬ä¸å®¹æ˜“è¿½è¸ªåˆ°å®ƒåˆ°åº•æ˜¯åœ¨å“ªé‡Œè¢«ä¿®æ”¹æŽ‰çš„ã€‚es6å¼•å…¥äº†letè¿™ä¸ªå…³é”®å­—ï¼Œé—®é¢˜å¾—åˆ°äº†è§£å†³ï¼š123456789101112131415161718let i=100;//å¾ªçŽ¯è¯­å¥1for(let i=0;i&lt;10;i++)&#123;&#125;console.log(i);//100//å¾ªçŽ¯è¯­å¥2while(true)&#123; let i=11; break;&#125;console.log(i);//100//åˆ†æ”¯è¯­å¥if(true)&#123; let i=111;&#125;else&#123; let i=0;&#125;console.log(i);//100 letå…³é”®å­—è®©å˜é‡ä½œç”¨åŸŸå˜å¾—æ¸…æ™°å¯æŽ§ åˆ©ç”¨constï¼Œä¿è¯å…¨å±€å˜é‡ä¸è¢«æ›´æ”¹æœ‰æ—¶ï¼Œæˆ‘ä»¬åœ¨æŸä¸ªå…¨å±€æ–‡ä»¶ä¸‹å£°æ˜Žäº†æŸä¸ªå˜é‡ï¼Œè€Œåœ¨åˆ«äººå¼•å…¥è¿™ä¸ªæ–‡ä»¶æ—¶ï¼Œæœ‰æ—¶ä¹Ÿä¼šç”¨åŒæ ·çš„åå­—ã€‚ä¸ºäº†ä¿è¯è¿™ä¸ªå˜é‡ä¸ä¼šè¢«ä¿®æ”¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨å¸¸é‡æ¥çº¦æŸä¸€ä¸‹ã€‚123456const username = "jack";//é‡æ–°å£°æ˜Žvar username = 'hello';//ç›´æŽ¥ä¿®æ”¹username = 123;console.log(username); ç±»çš„å£°æ˜Žä¸Žç»§æ‰¿æŒ‰ç…§é™æ€è¯­æœ‰çš„é¢å‘å¯¹è±¡æ€æƒ³ï¼Œæˆ‘ä»¬ä¼šæŠŠæŸä¸ªåŠŸèƒ½å°è£…åˆ°ä¸€ä¸ªç±»é‡Œé¢ï¼Œç„¶åŽæš´éœ²å‡ºä¸€äº›å¤–éƒ¨è®¿é—®çš„æŽ¥å£ï¼Œä»¥è¾¾åˆ°é«˜å†…èšä½Žè€¦åˆçš„è®¾è®¡ç›®çš„ã€‚å…¶å®žæˆ‘ä»¬åœ¨es5æ—¶ä»£éƒ½æ˜¯æ²¡æœ‰ç±»çš„æ¦‚å¿µçš„ã€‚ç±»å¯ä»¥å£°æ˜Žä¸ºä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸ªå­—é¢é‡ï¼ˆå­—é¢é‡å°±æ˜¯å®žä¾‹åŒ–çš„ç±»ï¼‰ï¼Œè¿™å¾ˆå®¹æ˜“æŠŠäººå¼„è¿·ç³Šã€‚è€Œes6å¼•å…¥äº†é™æ€è¯­è¨€çš„classä¹‹åŽï¼Œè®©ç±»å’Œå‡½æ•°åˆ’æ¸…äº†ç•Œé™ï¼Œä»£ç æ•´æ´åº¦å’Œé˜…è¯»èˆ’é€‚åº¦éƒ½æœ‰äº†æ˜¾è‘—æå‡ã€‚1234567891011121314151617181920212223class Animal &#123;//æž„é€ å‡½æ•°ï¼Œæ³¨æ„å‡½æ•°ä¹‹é—´ä¸ç”¨åŠ ; constructor()&#123; this.type = 'animal'; &#125; says(say)&#123; console.log(this.type + ' says ' + say); &#125;&#125;let animal = new Animal();animal.says('hello'); //animal says helloclass Cat extends Animal &#123; constructor()&#123; super();//ç»§æ‰¿äº†çˆ¶ç±»çš„å±žæ€§å’Œæ–¹æ³• this.type = 'cat'; &#125;&#125;let cat = new Cat();cat.says('hello'); //cat says hello ç®­å¤´å‡½æ•°ï¼Œè§£å†³thisæŒ‡å‘é—®é¢˜JSçš„å¯¹è±¡é—´çš„äº’ç›¸è°ƒç”¨æ˜¯éžå¸¸ç¹æ‚çš„ï¼Œä¸€ä¸å°å¿ƒå°±ä¼šé‡åˆ°thisè¢«ç¯¡æ”¹çš„é—®é¢˜ï¼Œå¯¼è‡´åŽé¢çš„ä»£ç å‡ºé”™ã€‚æ¯”å¦‚è¿™æ ·çš„æƒ…å†µï¼š1234567891011121314class Animal &#123; constructor()&#123; this.type = 'animal'; &#125; says(say)&#123; setTimeout(function()&#123; console.log(this.type + ' says ' + say); &#125;, 1000); &#125;&#125;var animal = new Animal();animal.says('hi'); //undefined says hi è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒç»å…¸çš„thisè¢«ç¯¡æ”¹çš„é—®é¢˜ï¼Œå› ä¸ºè¿™ä¸ªè¯¥æ­»çš„setTimeoutå‡½æ•°ï¼Œä»–çš„thisæŒ‡å‘çš„æ˜¯windowå¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸€ä¸ªå˜é‡ä¿å­˜ä½è¿™ä¸ªthisæŒ‡é’ˆï¼Œä¹Ÿæˆ–è€…ä½¿ç”¨bind(this)æ–¹æ³•ï¼Œä½†æœ‰äº†ç®­å¤´å‡½æ•°ï¼Œç­‰äºŽå‡½æ•°æœ¬èº«é›†æˆäº†ä¿å­˜thisæŒ‡é’ˆçš„åŠŸèƒ½ã€‚è¿™ç»™æˆ‘ä»¬æä¾›äº†æžå¤§çš„ä¾¿åˆ©ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç²¾åŠ›æ”¾åœ¨ä¸šåŠ¡é€»è¾‘çš„å®žçŽ°ä¸Šï¼Œè€Œä¸æ˜¯å¤„å¤„æé˜²thisçš„é™·é˜±ã€‚123456789101112class Animal &#123; constructor()&#123; this.type = 'animal'; &#125; says(say)&#123; setTimeout( () =&gt; &#123; console.log(this.type + ' says ' + say); &#125;, 1000); &#125;&#125;var animal = new Animal();animal.says('hi'); //animal says hi æ’å…¥å¤§æ®µhtmlæ–‡æœ¬è¿™ç§ä½¿ç”¨åœºæ™¯éžå¸¸é«˜ã€‚æ¯”å¦‚æˆ‘ä»¬ä»ŽæœåŠ¡å™¨è¯·æ±‚ä¸€ä¸ªæ•°æ®è¿‡æ¥ï¼Œç„¶åŽè·Ÿhtmlæ‹¼æŽ¥å¥½ï¼Œæœ€åŽè¿½åŠ åˆ°æŸä¸ªdivä¸‹ã€‚æ‹¼æŽ¥å­—ç¬¦ä¸²æ— ç–‘ä¼šæ‰“ä¹±htmlèŠ‚ç‚¹æœ¬æ¥çš„ç»“æž„ï¼Œå„ç§åŒå¼•å·å•å¼•å·æ»¡å¤©é£žï¼Œä¸€ä¸ç•™ç¥žå°±ä¼šå¼„é”™ï¼Œé˜…è¯»å’Œç»´æŠ¤ä¹Ÿå¾ˆéº»çƒ¦ã€‚å¦‚æžœèƒ½ä¸æ”¹å˜htmlçš„ç»“æž„å°±å¥½äº†ï¼äºŽæ˜¯es6å¼•å…¥äº†æ¨¡æ¿å­—ä¸²çš„æ¦‚å¿µã€‚123456789101112131415161718192021&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head lang="en"&gt;&lt;meta charset="UTF-8"&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div id="container"&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;&lt;script&gt;var cont = document.getElementById('container');//ä¸€äº›å˜é‡var name = 'jack';var age = 18;cont.innerHTML = `&lt;div style="color:red;"&gt; &lt;span class="name"&gt;$&#123;name&#125;&lt;/span&gt; &lt;b class="age"&gt;$&#123;age&#125;&lt;/b&gt; &lt;/div&gt;`; åœ¨åå¼•å·ä¸­éšæ„ä½¿ç”¨å„ç§å¼•å·ï¼Œå…¶ä¸­çš„å˜é‡éƒ½ç”¨${}æ¥è¡¨ç¤ºã€‚è¿™æ ·ä»£ç å°±å˜å¾—ä¼˜é›…äº†ã€‚ é»˜è®¤å€¼defaultæœ‰æ—¶æˆ‘ä»¬å£°æ˜Žäº†ä¸€ä¸ªå‡½æ•°ï¼Œå¯èƒ½é‡Œé¢çš„é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦ä¿è¯è°ƒç”¨æ—¶ä¸€å®šä¼ å…¥å½¢å‚å€¼ï¼Œå¦åˆ™åŽé¢çš„ä»£ç å°±ä¼šæŠ¥é”™ã€‚é‚£å¦‚ä½•é˜²æ­¢å…¶ä»–å¼€å‘äººå‘˜å°±æ˜¯ä¼ ç©ºå‘¢ï¼Ÿæˆ‘ä»¬è¦ç»™å½¢å‚ä¸€ä¸ªé»˜è®¤å€¼ã€‚123456function hello(name)&#123; name = name || 'jack'; console.log(name+' say hello!');&#125;hello(); ä½†è¿™æ ·å†™ä¸å¤Ÿç›´è§‚ï¼Œes6æä¾›äº†é»˜è®¤å€¼çš„å†™æ³•ã€‚1234function hello(name ='jack')&#123; console.log(name + ' say hello!');&#125;hello(); çœç•¥å·è¯­æ³•çœç•¥å·æ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œåœ¨å¤„ç†å‡½æ•°ä¸å®šå‚æ—¶ååˆ†æœ‰ç”¨ã€‚åƒä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œæ— è®ºä¼ å…¥å‡ ä¸ªå‚æ•°ï¼Œå®ƒéƒ½ä¼šå°†å‰©ä½™çš„å‚æ•°æ‰“æˆæ•°ç»„ã€‚1234function hello(a,b,...others)&#123;console.log(others);//[ 'amily', 'mike', 'sam' ]&#125;hello('jack','tom','amily','mike','sam'); Objectå‡ ä¸ªå¥½ç”¨çš„æ‰©å±• Objectæ˜¯JSæœ€æ ¹ä¸Šçš„ç±»ã€‚åœ¨JSä¸­é€ çš„ä»»ä½•ä¸œè¥¿éƒ½è„±èƒŽäºŽä»–ã€‚ä»–ç›¸å½“äºŽä¸‡ç‰©ä¹‹æœ¬ï¼Œæ˜¯ä¸Šå¸ã€‚è¿™ä¸ªä¸Šå¸ç±»ï¼Œåœ¨es6ä¹Ÿå¾—åˆ°äº†åŠŸèƒ½æ‰©å……ã€‚ 1.assign()æ–¹æ³•ï¼šç”¨äºŽå¯¹è±¡çš„åˆå¹¶æˆ–æ‹·è´ã€‚12345//å¯¹è±¡åˆå¹¶var target = &#123;a:1&#125;;var source = &#123;b:2&#125;;Object.assign(target,source);console.log(target);//&#123;a: 1, b: 2&#125; æ³¨æ„ï¼Œæ‹·è´æ˜¯æµ…æ‹·è´ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´ã€‚ 1234567//å¯¹è±¡æ‹·è´ï¼Œæ˜¯æµ…æ‹·è´ã€‚let target = &#123; a: &#123; b: 'hello'&#125; &#125;;let source = &#123; c: &#123; d: 'world' &#125; &#125;;Object.assign(target, source);console.log(target);//&#123; a: &#123; b: 'hello' &#125;, c: &#123; d: 'world' &#125; &#125;target.c.d = 'haha';console.log(source);//&#123; c: &#123; d: 'haha' &#125; &#125; å¦‚æžœæ˜¯æ·±æ‹·è´ï¼Œtargetæ”¹å˜äº†ï¼Œsourceä¸åº”è·Ÿç€æ”¹å˜ï¼›æµ…æ‹·è´ç›¸åã€‚ç©¶ç«Ÿæ˜¯ç”¨å“ªç§æ‹·è´ï¼Œå¾—çœ‹å®žé™…åº”ç”¨åœºæ™¯ã€‚ 2.defineProperty()æ–¹æ³•ï¼šåŒå‘ç»‘å®šçš„ç§˜å¯†ï¼ åœ¨angularæˆ–vueç­‰æ¡†æž¶é‡Œï¼Œå¯¹åŒå‘ç»‘å®šå¹¶ä¸é™Œç”Ÿã€‚æ•°æ®å’Œè§†å›¾çš„è”åŠ¨çœŸçš„å¾ˆé…·ï¼Œèƒ½è§£å†³å¾ˆå¤šçŽ°å®žé—®é¢˜ï¼Œä½†è¿™ä¸ªç©¶ç«Ÿå¦‚ä½•å®žçŽ°çš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªes6æ–°æä¾›çš„æ–¹æ³•è½»æ¾æžå®šå®ƒã€‚å…ˆæ¥çœ‹ä¸€ä¸‹ç”¨æ³•ï¼š1234567891011121314151617181920Object.defineProperty(obj, prop, descriptor) objï¼šå¾…ä¿®æ”¹çš„å¯¹è±¡ã€‚propï¼šå¾…ä¿®æ”¹çš„å±žæ€§åç§°ã€‚descriptorï¼šå¾…ä¿®æ”¹å±žæ€§çš„ç›¸å…³æè¿°ï¼Œè¦æ±‚ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ã€‚&#123; configurable: false, enumerable: false, writable: false, value: '', set: function()&#123;&#125;, get: function()&#123;&#125;&#125;- configurableï¼šå±žæ€§æ˜¯å¦å¯é…ç½®ã€‚å¯é…ç½®çš„å«ä¹‰åŒ…æ‹¬ï¼šæ˜¯å¦å¯ä»¥åˆ é™¤å±žæ€§ï¼ˆ delete ï¼‰ï¼Œæ˜¯å¦å¯ä»¥ä¿®æ”¹å±žæ€§çš„ writable ã€ enumerable å±žæ€§ã€‚- enumerableï¼šå±žæ€§æ˜¯å¦å¯éåŽ†å‡ºæ¥ï¼ˆå¯é€šè¿‡ for...in éåŽ†åˆ°ï¼‰ã€‚- writableï¼šå±žæ€§æ˜¯å¦å¯é‡å†™ï¼ˆæ˜¯å¦å¯ä»¥å¯¹å±žæ€§è¿›è¡Œé‡æ–°èµ‹å€¼ï¼Ÿï¼‰- valueï¼šå±žæ€§çš„é»˜è®¤å€¼ã€‚- setï¼šå±žæ€§çš„é‡å†™æ–¹æ³•ã€‚ä¸€æ—¦å±žæ€§è¢«é‡æ–°èµ‹å€¼ï¼Œæ­¤æ–¹æ³•è¢«è‡ªåŠ¨è°ƒç”¨ã€‚- get ï¼šå±žæ€§çš„è¯»å–æ–¹æ³•ã€‚ä¸€æ—¦å±žæ€§è¢«è®¿é—®è¯»å–ï¼Œæ­¤æ–¹æ³•è¢«è‡ªåŠ¨è°ƒç”¨ã€‚ çœ‹ä¸ªä¾‹å­ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243var obj = &#123;&#125;;//ç»™objå¯¹è±¡èµ‹äºˆäº†ä¸€ä¸ªå±žæ€§nameï¼Œå€¼ä¸ºjackObject.defineProperty(obj, 'name', &#123; value: 'jack'&#125;);//ç»™objå¯¹è±¡èµ‹äºˆäº†ä¸€ä¸ªå±žæ€§ageï¼Œå€¼ä¸º100Object.defineProperty(obj, 'age', &#123; value: 100, configurable: true,//å¯é…ç½® enumerable: true,//å¯éåŽ†å‡ºæ¥ writable: true//å¯å†™&#125;);console.log(obj.age); // 100obj.age = 18;//é‡å†™console.log(obj.age); // 18. å› ä¸ºageå±žæ€§æ˜¯å¯é‡å†™çš„//éåŽ†objfor(let key in obj)&#123; console.log(key+":"+obj[key]);//age:18ï¼Œé»˜è®¤æ˜¯ä¸å¯é…ç½®çš„ï¼Œæ‰€ä»¥nameè¯»ä¸åˆ°&#125;//ç»™objå¯¹è±¡èµ‹äºˆäº†ä¸€ä¸ªå±žæ€§sexï¼Œå€¼ä¸ºmaleObject.defineProperty(obj, 'sex', &#123; value: 'male', writable: false&#125;);obj.sex = 'female'; // ä¸å¯é‡å†™console.log(obj.sex); // 'male'delete obj.sex; // å±žæ€§åˆ é™¤æ— æ•ˆï¼Œé»˜è®¤æ˜¯ä¸å¯é…ç½®çš„console.log(obj.sex);// 'male'ï¼Œä¾ç„¶å¯ä»¥è¯»å‡ºObject.defineProperty(obj, 'weight', &#123;//value: '75kg',//å¦‚æžœæ‰“å¼€è¿™ä¸ªvalueå°±ä¼šæŠ¥é”™ set: function(str) &#123;console.log('set weight',str);&#125;, get:function()&#123;console.log('get weight');&#125;&#125;); éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œsetå’Œgetæ–¹æ³•è·Ÿvalueå±žæ€§æ˜¯äº’æ–¥çš„ï¼ŒåŒæ—¶å‡ºçŽ°ä¼šæŠ¥é”™ã€‚ä¸‹é¢å°±æ¥çœ‹ä¸€ä¸‹å¦‚ä½•å®žçŽ°ä¸€ä¸ªæ•°æ®å’Œè§†å›¾åŒå‘ç»‘å®šæ•ˆæžœã€‚123456789101112131415161718192021222324252627282930&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head lang="en"&gt;&lt;meta charset="UTF-8"&gt;&lt;title&gt;æ•°æ®å’Œè§†å›¾è”åŠ¨&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;div&gt;&lt;div&gt;æµ‹è¯•ç”¨æˆ·åï¼š&lt;input type="text" id='userName'/&gt;&lt;/div&gt;&lt;div id="show"&gt;&lt;/div&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt;&lt;script&gt;var userInfo = &#123;&#125;;Object.defineProperty(userInfo, "userName", &#123; get: function()&#123; return document.getElementById('show').innerHTML; &#125;, set: function(name)&#123; document.getElementById('show').innerHTML = name; &#125;&#125;);document.getElementById('userName').onkeyup = function(e)&#123;//æ”¹å˜æ•°æ®ï¼Œè§¦å‘setæ–¹æ³•ï¼Œä»Žè€Œæ”¹å˜äº†è§†å›¾ã€‚ userInfo.userName = this.value;&#125;;&lt;/script&gt; è¿è¡Œæ•ˆæžœï¼š 3.å¯¹è±¡ç®€å†™es6æä¾›äº†å¯¹è±¡çš„ç®€æ´å†™æ³•ã€‚è™½ç„¶å±žæ€§å’Œæ–¹æ³•éƒ½å¯ä»¥ç®€å†™ï¼Œä½†æˆ‘è§‰å¾—å±žæ€§è¿˜æ˜¯è§„è§„çŸ©çŸ©å†™é”®å€¼å¯¹å°±å¥½ï¼Œä¸è¿‡æ–¹æ³•çš„ç®€å†™å€’æ˜¯çœäº‹ä¸å°‘ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹å¦‚ä½•ä¹¦å†™ï¼š12345678var obj = &#123; name:'jack', age:18, method() &#123; return this.name+'--'+this.age; &#125;&#125;;console.log(obj.method());]]></content>
      <categories>
        <category>ES6</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>ES6</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‰ç«¯é¢è¯•é›†é”¦]]></title>
    <url>%2Fblog%2F2018%2F05%2F24%2F%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%9B%86%E9%94%A6%2F</url>
    <content type="text"><![CDATA[è¿™æ˜¯ä¸€ä»½å…³äºŽé¢è¯•çš„é›†é”¦ï¼Œä¼šæ”¶é›†å¹¿æ³›çš„é¢è¯•ç‚¹æˆ–è€…çƒ­ç‚¹èµ„è®¯ï¼ŒåŠæ—¶æŽŒæ¡å‰ç«¯çš„åŠ¨æ€å’Œå‚¨å¤‡è‡ªå·±çš„é¢è¯•åº“ï¼Œæ‰å¯ä»¥åœ¨é¢è¯•è¿‡ç¨‹é‡Œæ¸¸åˆƒæœ‰ä½™ï¼ŒæŒç»­ç§¯ç´¯ã€‚ å‰è¨€ ä¸€äº›æ›´æ–°ä»Žæœ€æ–°çš„å¼€å§‹ RactReactç”Ÿå‘½å‘¨æœŸ?React ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ç§çŠ¶æ€ 1. åˆå§‹åŒ– 2.æ›´æ–° 3.é”€æ¯ åˆå§‹åŒ– 1ã€getDefaultProps() è®¾ç½®é»˜è®¤çš„propsï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨dufaultPropsè®¾ç½®ç»„ä»¶çš„é»˜è®¤å±žæ€§2ã€getInitialState()åœ¨es6çš„classè¯­æ³•é‡Œæ˜¯æ²¡æœ‰è¿™ä¸ªå‡½æ•°çš„ï¼Œå¯ç›´æŽ¥åœ¨constructioné‡ŒåŽ»å®šä¹‰this.stateä¹Ÿå°±å¯ä»¥è®¿é—®åˆ°this.props3ã€compontentWillMount()æ•´ä¸ªç”Ÿå‘½å‘¨æœŸåªè°ƒç”¨ä¸€æ¬¡ï¼Œåœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶è°ƒç”¨ï¼Œä¹‹åŽå°±ä¸ä¼šå†è°ƒç”¨ï¼Œæ­¤æ—¶å¯ä»¥ä¿®æ”¹stateå€¼4ã€render è¿™ä¸ªæ—¶æœŸæ˜¯æœ€é‡è¦çš„æ­¥éª¤ï¼Œåˆ›å»ºè™šæ‹ŸDOMï¼Œè¿›è¡Œdiffç®—æ³•ï¼Œæ›´æ–°DOMæ ‘ï¼Œæ­¤æ—¶ä¸å¯ä»¥ä¿®æ”¹stateäº†5ã€compontentDidMount() ç»„ä»¶æ¸²æŸ“å®Œæˆä¹‹åŽè°ƒç”¨ï¼Œä¸”åªè°ƒç”¨ä¸€æ¬¡ æ›´æ–° 6ã€componentWillReceiverProps(nextProps) åœ¨ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™ä¸ä¼šè§¦å‘ï¼Œç»„ä»¶æŽ¥æ”¶åˆ°æ–°çš„propsæ—¶è§¦å‘7ã€shouldCompontUpdate(nextProps, nextState) è¿™é‡Œæ˜¯Reactæ€§èƒ½ä¼˜åŒ–éžå¸¸é‡è¦çš„ç”Ÿå‘½å‘¨æœŸã€‚åœ¨ç»„ä»¶æŽ¥æ”¶åˆ°æ–°çš„propsæˆ–è€…stateæ—¶å¯ä»¥è§¦å‘è¿™ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå¯ä»¥å¯¹æ¯”å‰åŽpropså’Œstateæ˜¯å¦ä¸€æ ·ï¼Œå¦‚æžœç›¸åŒä¸€æ ·åˆ™è¿”å›žfalseåŽ»é˜»æ­¢ç»„ä»¶æ›´æ–°ï¼Œè¿™æ ·å°±é¿å…äº†é‡æ–°ç”Ÿæˆç›¸åŒDOMæ ‘çš„è¿‡ç¨‹ï¼Œä¹Ÿå°±ä¸éœ€è¦åˆ›å»ºæ–°çš„DOMæ ‘å’Œæ—§çš„DOMæ ‘è¿›è¡Œdiffç®—æ³•å¯¹æ¯”ï¼Œæžå¤§åœ°èŠ‚çœæ€§èƒ½ã€‚8ã€componentWillUpdate(nextProps, nextState) åœ¨ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™ä¸è°ƒç”¨ï¼Œåœ¨ç»„ä»¶å°†è¦æ›´æ–°çš„æ—¶å€™æ‰ä¼šè°ƒç”¨ï¼Œæ­¤æ—¶å¯ä»¥åŽ»ä¿®æ”¹state9ã€render() æ¸²æŸ“ç»„ä»¶10ã€ componentDidUpdate() åœ¨ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™ä¸è°ƒç”¨ï¼Œåœ¨ç»„ä»¶æ›´æ–°å®Œä¹‹åŽè°ƒç”¨ï¼Œè¿™é‡Œå¯ä»¥åŽ»èŽ·å–domèŠ‚ç‚¹ å¸è½½ 11ã€componentWillUnmount() åœ¨ç»„ä»¶å°†è¦å¸è½½çš„æ—¶å€™è°ƒç”¨ï¼Œè¿™é‡Œå¯ä»¥åŽ»æ¸…ç†ä¸€äº›é¡µé¢çš„å®šæ—¶å™¨ä»»åŠ¡å’Œäº‹ä»¶ç›‘å¬ç­‰ React é¢è¯•é¢˜ &amp; å›žç­” åŽŸæ–‡README.md ç›®å½• åºå·. é—®é¢˜ Core React 1 ä»€ä¹ˆæ˜¯ React? 2 React çš„ä¸»è¦ç‰¹ç‚¹æ˜¯ä»€ä¹ˆ? 3 ä»€ä¹ˆæ˜¯ JSX? 4 å…ƒç´ å’Œç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«? 5 å¦‚ä½•åœ¨ React ä¸­åˆ›å»ºç»„ä»¶? 6 ä½•æ—¶ä½¿ç”¨ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶? 7 ä»€ä¹ˆæ˜¯ Pure Components? 8 React çš„çŠ¶æ€æ˜¯ä»€ä¹ˆ? 9 React ä¸­çš„ props æ˜¯ä»€ä¹ˆ? 10 çŠ¶æ€å’Œå±žæ€§æœ‰ä»€ä¹ˆåŒºåˆ«? 11 æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸èƒ½ç›´æŽ¥æ›´æ–°çŠ¶æ€? 12 å›žè°ƒå‡½æ•°ä½œä¸º setState() å‚æ•°çš„ç›®çš„æ˜¯ä»€ä¹ˆ? 13 HTML å’Œ React äº‹ä»¶å¤„ç†æœ‰ä»€ä¹ˆåŒºåˆ«? 14 å¦‚ä½•åœ¨ JSX å›žè°ƒä¸­ç»‘å®šæ–¹æ³•æˆ–äº‹ä»¶å¤„ç†ç¨‹åº? 15 å¦‚ä½•å°†å‚æ•°ä¼ é€’ç»™äº‹ä»¶å¤„ç†ç¨‹åºæˆ–å›žè°ƒå‡½æ•°? 16 React ä¸­çš„åˆæˆäº‹ä»¶æ˜¯ä»€ä¹ˆ? 17 ä»€ä¹ˆæ˜¯å†…è”æ¡ä»¶è¡¨è¾¾å¼? 18 ä»€ä¹ˆæ˜¯ â€œkeyâ€ å±žæ€§ï¼Œåœ¨å…ƒç´ æ•°ç»„ä¸­ä½¿ç”¨å®ƒä»¬æœ‰ä»€ä¹ˆå¥½å¤„? 19 refs æœ‰ä»€ä¹ˆç”¨? 20 å¦‚ä½•åˆ›å»º refs? 21 ä»€ä¹ˆæ˜¯ forward refs? 22 callback refs å’Œ findDOMNode() å“ªä¸€ä¸ªæ˜¯é¦–é€‰é€‰é¡¹? 23 ä¸ºä»€ä¹ˆ String Refs è¢«å¼ƒç”¨? 24 ä»€ä¹ˆæ˜¯ Virtual DOM? 25 Virtual DOM å¦‚ä½•å·¥ä½œ? 26 Shadow DOM å’Œ Virtual DOM ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«? 27 ä»€ä¹ˆæ˜¯ React Fiber? 28 React Fiber çš„ä¸»è¦ç›®æ ‡æ˜¯ä»€ä¹ˆ? 29 ä»€ä¹ˆæ˜¯å—æŽ§ç»„ä»¶? 30 ä»€ä¹ˆæ˜¯éžå—æŽ§ç»„ä»¶? 31 createElement å’Œ cloneElement æœ‰ä»€ä¹ˆåŒºåˆ«? 32 åœ¨ React ä¸­çš„æå‡çŠ¶æ€æ˜¯ä»€ä¹ˆ? 33 ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µæ˜¯ä»€ä¹ˆ? 34 React ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰å“ªäº›? 35 ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰? 36 å¦‚ä½•ä¸ºé«˜é˜¶ç»„ä»¶åˆ›å»ºå±žæ€§ä»£ç†? 37 ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰? 38 children å±žæ€§æ˜¯ä»€ä¹ˆ? 39 æ€Žæ ·åœ¨ React ä¸­å†™æ³¨é‡Š? 40 æž„é€ å‡½æ•°ä½¿ç”¨å¸¦ props å‚æ•°çš„ç›®çš„æ˜¯ä»€ä¹ˆ? 41 ä»€ä¹ˆæ˜¯è°ƒè§£? 42 å¦‚ä½•ä½¿ç”¨åŠ¨æ€å±žæ€§åè®¾ç½® state ? 43 æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶è°ƒç”¨å‡½æ•°çš„å¸¸è§é”™è¯¯æ˜¯ä»€ä¹ˆ? 44 ä¸ºä»€ä¹ˆæœ‰ç»„ä»¶åç§°è¦é¦–å­—æ¯å¤§å†™? 45 ä¸ºä»€ä¹ˆ React ä½¿ç”¨ className è€Œä¸æ˜¯ class å±žæ€§? 46 ä»€ä¹ˆæ˜¯ Fragments ? 47 ä¸ºä»€ä¹ˆä½¿ç”¨ Fragments æ¯”ä½¿ç”¨å®¹å™¨ div æ›´å¥½? 48 åœ¨ React ä¸­ä»€ä¹ˆæ˜¯ Portal ? 49 ä»€ä¹ˆæ˜¯æ— çŠ¶æ€ç»„ä»¶? 50 ä»€ä¹ˆæ˜¯æœ‰çŠ¶æ€ç»„ä»¶? 51 åœ¨ React ä¸­å¦‚ä½•æ ¡éªŒ props å±žæ€§? 52 React çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆ? 53 React çš„å±€é™æ€§æ˜¯ä»€ä¹ˆ? 54 åœ¨ React v16 ä¸­çš„é”™è¯¯è¾¹ç•Œæ˜¯ä»€ä¹ˆ? 55 åœ¨ React v15 ä¸­å¦‚ä½•å¤„ç†é”™è¯¯è¾¹ç•Œ? 56 é™æ€ç±»åž‹æ£€æŸ¥æŽ¨èçš„æ–¹æ³•æ˜¯ä»€ä¹ˆ? 57 react-dom åŒ…çš„ç”¨é€”æ˜¯ä»€ä¹ˆ? 58 react-dom ä¸­ render æ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆ? 59 ReactDOMServer æ˜¯ä»€ä¹ˆ? 60 åœ¨ React ä¸­å¦‚ä½•ä½¿ç”¨ innerHTML? 61 å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨æ ·å¼? 62 åœ¨ React ä¸­äº‹ä»¶æœ‰ä½•ä¸åŒ? 63 å¦‚æžœåœ¨æž„é€ å‡½æ•°ä¸­ä½¿ç”¨ setState() ä¼šå‘ç”Ÿä»€ä¹ˆ? 64 ç´¢å¼•ä½œä¸ºé”®çš„å½±å“æ˜¯ä»€ä¹ˆ? 65 åœ¨ componentWillMount() æ–¹æ³•ä¸­ä½¿ç”¨ setState() å¥½å—? 66 å¦‚æžœåœ¨åˆå§‹çŠ¶æ€ä¸­ä½¿ç”¨ props å±žæ€§ä¼šå‘ç”Ÿä»€ä¹ˆ? 67 å¦‚ä½•æœ‰æ¡ä»¶åœ°æ¸²æŸ“ç»„ä»¶? 68 ä¸ºä»€ä¹ˆåœ¨ DOM å…ƒç´ ä¸Šå±•å¼€ props éœ€è¦å°å¿ƒ? 69 åœ¨ React ä¸­å¦‚ä½•ä½¿ç”¨è£…é¥°å™¨? 70 å¦‚ä½• memoizeï¼ˆè®°å¿†ï¼‰ç»„ä»¶? 71 å¦‚ä½•å®žçŽ° Server Side Rendering æˆ– SSR? 72 å¦‚ä½•åœ¨ React ä¸­å¯ç”¨ç”Ÿäº§æ¨¡å¼? 73 ä»€ä¹ˆæ˜¯ CRA åŠå…¶å¥½å¤„? 74 åœ¨ mounting é˜¶æ®µç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆ? 75 åœ¨ React v16 ä¸­ï¼Œå“ªäº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å°†è¢«å¼ƒç”¨? 76 ç”Ÿå‘½å‘¨æœŸæ–¹æ³• getDerivedStateFromProps() çš„ç›®çš„æ˜¯ä»€ä¹ˆ? 77 ç”Ÿå‘½å‘¨æœŸæ–¹æ³• getSnapshotBeforeUpdate() çš„ç›®çš„æ˜¯ä»€ä¹ˆ? 78 createElement() å’Œ cloneElement() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«? 79 æŽ¨èçš„ç»„ä»¶å‘½åæ–¹æ³•æ˜¯ä»€ä¹ˆ? 80 åœ¨ç»„ä»¶ç±»ä¸­æ–¹æ³•çš„æŽ¨èé¡ºåºæ˜¯ä»€ä¹ˆ? 81 ä»€ä¹ˆæ˜¯ switching ç»„ä»¶? 82 ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å°†å‡½æ•°ä¼ é€’ç»™ setState() æ–¹æ³•? 83 åœ¨ React ä¸­ä»€ä¹ˆæ˜¯ä¸¥æ ¼æ¨¡å¼? 84 React Mixins æ˜¯ä»€ä¹ˆ? 85 ä¸ºä»€ä¹ˆ isMounted() æ˜¯ä¸€ä¸ªåæ¨¡å¼ï¼Œè€Œæ­£ç¡®çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆ? 86 React ä¸­æ”¯æŒå“ªäº›æŒ‡é’ˆäº‹ä»¶? 87 ä¸ºä»€ä¹ˆç»„ä»¶åç§°åº”è¯¥ä»¥å¤§å†™å­—æ¯å¼€å¤´? 88 åœ¨ React v16 ä¸­æ˜¯å¦æ”¯æŒè‡ªå®šä¹‰ DOM å±žæ€§? 89 constructor å’Œ getInitialState æœ‰ä»€ä¹ˆåŒºåˆ«? 90 æ˜¯å¦å¯ä»¥åœ¨ä¸è°ƒç”¨ setState æ–¹æ³•çš„æƒ…å†µä¸‹ï¼Œå¼ºåˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“? 91 åœ¨ä½¿ç”¨ ES6 ç±»çš„ React ä¸­ super() å’Œ super(props) æœ‰ä»€ä¹ˆåŒºåˆ«? 92 åœ¨ JSX ä¸­å¦‚ä½•è¿›è¡Œå¾ªçŽ¯? 93 å¦‚ä½•åœ¨ attribute å¼•å·ä¸­è®¿é—® props å±žæ€§? 94 ä»€ä¹ˆæ˜¯ React proptype æ•°ç»„? 95 å¦‚ä½•æœ‰æ¡ä»¶åœ°åº”ç”¨æ ·å¼ç±»? 96 React å’Œ ReactDOM ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«? 97 ä¸ºä»€ä¹ˆ ReactDOM ä»Ž React åˆ†ç¦»å‡ºæ¥? 98 å¦‚ä½•ä½¿ç”¨ React label å…ƒç´ ? 99 å¦‚ä½•åˆå¹¶å¤šä¸ªå†…è”çš„æ ·å¼å¯¹è±¡? 100 å¦‚ä½•åœ¨è°ƒæ•´æµè§ˆå™¨å¤§å°æ—¶é‡æ–°æ¸²æŸ“è§†å›¾? 101 setState() å’Œ replaceState() æ–¹æ³•ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«? 102 å¦‚ä½•ç›‘å¬çŠ¶æ€å˜åŒ–? 103 åœ¨ React çŠ¶æ€ä¸­åˆ é™¤æ•°ç»„å…ƒç´ çš„æŽ¨èæ–¹æ³•æ˜¯ä»€ä¹ˆ? 104 åœ¨ React ä¸­æ˜¯å¦å¯ä»¥ä¸åœ¨é¡µé¢ä¸Šæ¸²æŸ“ HTML å†…å®¹? 105 å¦‚ä½•ç”¨ React æ¼‚äº®åœ°æ˜¾ç¤º JSON? 106 ä¸ºä»€ä¹ˆä½ ä¸èƒ½æ›´æ–° React ä¸­çš„ props? 107 å¦‚ä½•åœ¨é¡µé¢åŠ è½½æ—¶èšç„¦ä¸€ä¸ªè¾“å…¥å…ƒç´ ? 108 æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡æœ‰å“ªäº›å¯èƒ½çš„æ–¹æ³•? 109 ä¸ºä»€ä¹ˆå‡½æ•°æ¯”å¯¹è±¡æ›´é€‚åˆäºŽ setState()? 110 æˆ‘ä»¬å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­æ‰¾åˆ°å½“å‰æ­£åœ¨è¿è¡Œçš„ React ç‰ˆæœ¬? 111 åœ¨ create-react-app é¡¹ç›®ä¸­å¯¼å…¥ polyfills çš„æ–¹æ³•æœ‰å“ªäº›? 112 å¦‚ä½•åœ¨ create-react-app ä¸­ä½¿ç”¨ https è€Œä¸æ˜¯ http? 113 å¦‚ä½•é¿å…åœ¨ create-react-app ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥? 114 å¦‚ä½•ä¸º React Router æ·»åŠ  Google Analytics? 115 å¦‚ä½•æ¯ç§’æ›´æ–°ä¸€ä¸ªç»„ä»¶? 116 å¦‚ä½•å°† vendor prefixes åº”ç”¨äºŽ React ä¸­çš„å†…è”æ ·å¼? 117 å¦‚ä½•ä½¿ç”¨ React å’Œ ES6 å¯¼å…¥å’Œå¯¼å‡ºç»„ä»¶? 118 ä¸ºä»€ä¹ˆ React ç»„ä»¶åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´? 119 ä¸ºä»€ä¹ˆç»„ä»¶çš„æž„é€ å‡½æ•°åªè¢«è°ƒç”¨ä¸€æ¬¡? 120 åœ¨ React ä¸­å¦‚ä½•å®šä¹‰å¸¸é‡? 121 åœ¨ React ä¸­å¦‚ä½•ä»¥ç¼–ç¨‹æ–¹å¼è§¦å‘ç‚¹å‡»äº‹ä»¶? 122 åœ¨ React ä¸­æ˜¯å¦å¯ä»¥ä½¿ç”¨ async/await? 123 React é¡¹ç›®å¸¸è§çš„æ–‡ä»¶ç»“æž„æ˜¯ä»€ä¹ˆ? 124 æœ€æµè¡Œçš„åŠ¨ç”»è½¯ä»¶åŒ…æ˜¯ä»€ä¹ˆ? 125 æ¨¡å—åŒ–æ ·å¼æ–‡ä»¶æœ‰ä»€ä¹ˆå¥½å¤„? 126 ä»€ä¹ˆæ˜¯ React æµè¡Œçš„ç‰¹å®š linters? 127 å¦‚ä½•å‘èµ· AJAX è°ƒç”¨ä»¥åŠåº”è¯¥åœ¨å“ªäº›ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è¿›è¡Œ AJAX è°ƒç”¨? 128 ä»€ä¹ˆæ˜¯æ¸²æŸ“å±žæ€§? React Router 129 ä»€ä¹ˆæ˜¯ React Router? 130 React Router ä¸Ž history åº“çš„åŒºåˆ«? 131 åœ¨ React Router v4 ä¸­çš„&lt;Router&gt;ç»„ä»¶æ˜¯ä»€ä¹ˆ? 132 history ä¸­çš„ push() å’Œ replace() æ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆ? 133 å¦‚ä½•ä½¿ç”¨åœ¨ React Router v4 ä¸­ä»¥ç¼–ç¨‹çš„æ–¹å¼è¿›è¡Œå¯¼èˆª? 134 å¦‚ä½•åœ¨ React Router v4 ä¸­èŽ·å–æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°? 135 ä¸ºä»€ä¹ˆä½ ä¼šå¾—åˆ° â€œRouter may have only one child elementâ€ è­¦å‘Š? 136 å¦‚ä½•åœ¨ React Router v4 ä¸­å°† params ä¼ é€’ç»™ history.push æ–¹æ³•? 137 å¦‚ä½•å®žçŽ°é»˜è®¤é¡µé¢æˆ– 404 é¡µé¢? 138 å¦‚ä½•åœ¨ React Router v4 ä¸ŠèŽ·å–åŽ†å²å¯¹è±¡? 139 ç™»å½•åŽå¦‚ä½•æ‰§è¡Œè‡ªåŠ¨é‡å®šå‘? React Internationalization 140 ä»€ä¹ˆæ˜¯ React Intl? 141 React Intl çš„ä¸»è¦ç‰¹æ€§æ˜¯ä»€ä¹ˆ? 142 åœ¨ React Intl ä¸­æœ‰å“ªä¸¤ç§æ ¼å¼åŒ–æ–¹å¼? 143 åœ¨ React Intl ä¸­å¦‚ä½•ä½¿ç”¨&lt;FormattedMessage&gt;ä½œä¸ºå ä½ç¬¦ä½¿ç”¨? 144 å¦‚ä½•ä½¿ç”¨ React Intl è®¿é—®å½“å‰è¯­è¨€çŽ¯å¢ƒ? 145 å¦‚ä½•ä½¿ç”¨ React Intl æ ¼å¼åŒ–æ—¥æœŸ? React Testing 146 åœ¨ React æµ‹è¯•ä¸­ä»€ä¹ˆæ˜¯æµ…å±‚æ¸²æŸ“ï¼ˆShallow Rendererï¼‰? 147 åœ¨ React ä¸­ TestRenderer åŒ…æ˜¯ä»€ä¹ˆ? 148 ReactTestUtils åŒ…çš„ç›®çš„æ˜¯ä»€ä¹ˆ? 149 ä»€ä¹ˆæ˜¯ Jest? 150 Jest å¯¹æ¯” Jasmine æœ‰ä»€ä¹ˆä¼˜åŠ¿? 151 ä¸¾ä¸€ä¸ªç®€å•çš„ Jest æµ‹è¯•ç”¨ä¾‹ React Redux 152 ä»€ä¹ˆæ˜¯ Flux? 153 ä»€ä¹ˆæ˜¯ Redux? 154 Redux çš„æ ¸å¿ƒåŽŸåˆ™æ˜¯ä»€ä¹ˆï¼Ÿ? 155 ä¸Ž Flux ç›¸æ¯”ï¼ŒRedux çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆ? 156 mapStateToProps() å’Œ mapDispatchToProps() ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«? 157 æˆ‘å¯ä»¥åœ¨ reducer ä¸­è§¦å‘ä¸€ä¸ª Action å—? 158 å¦‚ä½•åœ¨ç»„ä»¶å¤–éƒ¨è®¿é—® Redux å­˜å‚¨çš„å¯¹è±¡? 159 MVW æ¨¡å¼çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆ? 160 Redux å’Œ RxJS ä¹‹é—´æ˜¯å¦æœ‰ä»»ä½•ç›¸ä¼¼ä¹‹å¤„? 161 å¦‚ä½•åœ¨åŠ è½½æ—¶è§¦å‘ Action? 162 åœ¨ React ä¸­å¦‚ä½•ä½¿ç”¨ Redux çš„ connect() ? 163 å¦‚ä½•åœ¨ Redux ä¸­é‡ç½®çŠ¶æ€? 164 Redux ä¸­è¿žæŽ¥è£…é¥°å™¨çš„ at ç¬¦å·çš„ç›®çš„æ˜¯ä»€ä¹ˆ? 165 React ä¸Šä¸‹æ–‡å’Œ React Redux ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«? 166 ä¸ºä»€ä¹ˆ Redux çŠ¶æ€å‡½æ•°ç§°ä¸º reducers ? 167 å¦‚ä½•åœ¨ Redux ä¸­å‘èµ· AJAX è¯·æ±‚? 168 æˆ‘åº”è¯¥åœ¨ Redux Store ä¸­ä¿ç•™æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€å—? 169 è®¿é—® Redux Store çš„æ­£ç¡®æ–¹æ³•æ˜¯ä»€ä¹ˆ? 170 React Redux ä¸­å±•ç¤ºç»„ä»¶å’Œå®¹å™¨ç»„ä»¶ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ? 171 Redux ä¸­å¸¸é‡çš„ç”¨é€”æ˜¯ä»€ä¹ˆ? 172 ç¼–å†™ mapDispatchToProps() æœ‰å“ªäº›ä¸åŒçš„æ–¹æ³•? 173 åœ¨ mapStateToProps() å’Œ mapDispatchToProps() ä¸­ä½¿ç”¨ ownProps å‚æ•°æœ‰ä»€ä¹ˆç”¨? 174 å¦‚ä½•æž„å»º Redux é¡¹ç›®ç›®å½•? 175 ä»€ä¹ˆæ˜¯ redux-saga? 176 redux-saga çš„æ¨¡åž‹æ¦‚å¿µæ˜¯ä»€ä¹ˆ? 177 åœ¨ redux-saga ä¸­ call() å’Œ put() ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«? 178 ä»€ä¹ˆæ˜¯ Redux Thunk? 179 redux-saga å’Œ redux-thunk ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«? 180 ä»€ä¹ˆæ˜¯ Redux DevTools? 181 Redux DevTools çš„åŠŸèƒ½æœ‰å“ªäº›? 182 ä»€ä¹ˆæ˜¯ Redux é€‰æ‹©å™¨ä»¥åŠä½¿ç”¨å®ƒä»¬çš„åŽŸå› ? 183 ä»€ä¹ˆæ˜¯ Redux Form? 184 Redux Form çš„ä¸»è¦åŠŸèƒ½æœ‰å“ªäº›? 185 å¦‚ä½•å‘ Redux æ·»åŠ å¤šä¸ªä¸­é—´ä»¶? 186 å¦‚ä½•åœ¨ Redux ä¸­è®¾ç½®åˆå§‹çŠ¶æ€? 187 Relay ä¸Ž Redux æœ‰ä½•ä¸åŒ? React Native 188 React Native å’Œ React æœ‰ä»€ä¹ˆåŒºåˆ«? 189 å¦‚ä½•æµ‹è¯• React Native åº”ç”¨ç¨‹åº? 190 å¦‚ä½•åœ¨ React Native æŸ¥çœ‹æ—¥å¿—? 191 æ€Žä¹ˆè°ƒè¯• React Native åº”ç”¨? React supported libraries &amp; Integration 192 ä»€ä¹ˆæ˜¯ Reselect ä»¥åŠå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„? 193 ä»€ä¹ˆæ˜¯ Flow? 194 Flow å’Œ PropTypes æœ‰ä»€ä¹ˆåŒºåˆ«? 195 åœ¨ React ä¸­å¦‚ä½•ä½¿ç”¨ Font Awesome å›¾æ ‡? 196 ä»€ä¹ˆ æ˜¯ React å¼€å‘è€…å·¥å…·? 197 åœ¨ Chrome ä¸­ä¸ºä»€ä¹ˆ DevTools æ²¡æœ‰åŠ è½½æœ¬åœ°æ–‡ä»¶? 198 å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ Polymer? 199 ä¸Ž Vue.js ç›¸æ¯”ï¼ŒReact æœ‰å“ªäº›ä¼˜åŠ¿? 200 React å’Œ Angular æœ‰ä»€ä¹ˆåŒºåˆ«? 201 ä¸ºä»€ä¹ˆ React é€‰é¡¹å¡ä¸ä¼šæ˜¾ç¤ºåœ¨ DevTools ä¸­? 202 ä»€ä¹ˆæ˜¯ Styled Components? 203 ä¸¾ä¸€ä¸ª Styled Components çš„ä¾‹å­? 204 ä»€ä¹ˆæ˜¯ Relay? 205 å¦‚ä½•åœ¨ create-react-app ä¸­ä½¿ç”¨ TypeScript? Miscellaneous 206 Reselect åº“çš„ä¸»è¦åŠŸèƒ½æœ‰å“ªäº›? 207 ä¸¾ä¸€ä¸ª Reselect ç”¨æ³•çš„ä¾‹å­? 208 Redux ä¸­çš„ Action æ˜¯ä»€ä¹ˆ? 209 åœ¨ React ä¸­ statics å¯¹è±¡æ˜¯å¦èƒ½ä¸Ž ES6 ç±»ä¸€èµ·ä½¿ç”¨? 210 Redux åªèƒ½ä¸Ž React ä¸€èµ·ä½¿ç”¨ä¹ˆ? 211 æ‚¨æ˜¯å¦éœ€è¦ä½¿ç”¨ç‰¹å®šçš„æž„å»ºå·¥å…·æ¥ä½¿ç”¨ Redux ? 212 Redux Form çš„ initialValues å¦‚ä½•ä»ŽçŠ¶æ€æ›´æ–°? 213 React æ˜¯å¦‚ä½•ä¸ºä¸€ä¸ªå±žæ€§å£°æ˜Žä¸åŒçš„ç±»åž‹? 214 æˆ‘å¯ä»¥å¯¼å…¥ä¸€ä¸ª SVG æ–‡ä»¶ä½œä¸º React ç»„ä»¶ä¹ˆ? 215 ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨å†…è”å¼•ç”¨å›žè°ƒæˆ–å‡½æ•°? 216 åœ¨ React ä¸­ä»€ä¹ˆæ˜¯æ¸²æŸ“åŠ«æŒ? 217 ä»€ä¹ˆæ˜¯ HOC å·¥åŽ‚å®žçŽ°? 218 å¦‚ä½•ä¼ é€’æ•°å­—ç»™ React ç»„ä»¶? 219 æˆ‘éœ€è¦å°†æ‰€æœ‰çŠ¶æ€ä¿å­˜åˆ° Redux ä¸­å—ï¼Ÿæˆ‘åº”è¯¥ä½¿ç”¨ react çš„å†…éƒ¨çŠ¶æ€å—? 220 åœ¨ React ä¸­ registerServiceWorker çš„ç”¨é€”æ˜¯ä»€ä¹ˆ? 221 React memo å‡½æ•°æ˜¯ä»€ä¹ˆ? 222 React lazy å‡½æ•°æ˜¯ä»€ä¹ˆ? 223 å¦‚ä½•ä½¿ç”¨ setState é˜²æ­¢ä¸å¿…è¦çš„æ›´æ–°? 224 å¦‚ä½•åœ¨ React 16 ç‰ˆæœ¬ä¸­æ¸²æŸ“æ•°ç»„ã€å­—ç¬¦ä¸²å’Œæ•°å€¼? 225 å¦‚ä½•åœ¨ React ç±»ä¸­ä½¿ç”¨ç±»å­—æ®µå£°æ˜Žè¯­æ³•? 226 ä»€ä¹ˆæ˜¯ hooks? 227 Hooks éœ€è¦éµå¾ªä»€ä¹ˆè§„åˆ™? 228 å¦‚ä½•ç¡®ä¿é’©å­éµå¾ªæ­£ç¡®çš„ä½¿ç”¨è§„åˆ™? 229 Flux å’Œ Redux ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«? 230 React Router V4 æœ‰ä»€ä¹ˆå¥½å¤„? 231 æ‚¨èƒ½æè¿°ä¸€ä¸‹ componentDidCatch ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ç­¾åå—? 232 åœ¨å“ªäº›æƒ…å†µä¸‹ï¼Œé”™è¯¯è¾¹ç•Œä¸ä¼šæ•èŽ·é”™è¯¯? 233 ä¸ºä»€ä¹ˆäº‹ä»¶å¤„ç†å™¨ä¸éœ€è¦é”™è¯¯è¾¹ç•Œ? 234 try catch ä¸Žé”™è¯¯è¾¹ç•Œæœ‰ä»€ä¹ˆåŒºåˆ«? 235 React 16 ä¸­æœªæ•èŽ·çš„é”™è¯¯çš„è¡Œä¸ºæ˜¯ä»€ä¹ˆ? 236 æ”¾ç½®é”™è¯¯è¾¹ç•Œçš„æ­£ç¡®ä½ç½®æ˜¯ä»€ä¹ˆ? 237 ä»Žé”™è¯¯è¾¹ç•Œè·Ÿè¸ªç»„ä»¶å †æ ˆæœ‰ä»€ä¹ˆå¥½å¤„? 238 åœ¨å®šä¹‰ç±»ç»„ä»¶æ—¶ï¼Œä»€ä¹ˆæ˜¯å¿…é¡»çš„æ–¹æ³•? 239 render æ–¹æ³•å¯èƒ½è¿”å›žçš„ç±»åž‹æ˜¯ä»€ä¹ˆ? 240 æž„é€ å‡½æ•°çš„ä¸»è¦ç›®çš„æ˜¯ä»€ä¹ˆ? 241 æ˜¯å¦å¿…é¡»ä¸º React ç»„ä»¶å®šä¹‰æž„é€ å‡½æ•°? 242 ä»€ä¹ˆæ˜¯é»˜è®¤å±žæ€§? 243 ä¸ºä»€ä¹ˆä¸èƒ½åœ¨ componentWillUnmount ä¸­è°ƒç”¨ setState() æ–¹æ³•? 244 getDerivedStateFromError çš„ç›®çš„æ˜¯ä»€ä¹ˆ? 245 å½“ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶é¡ºåºæ‰§è¡Œçš„æ–¹æ³•æœ‰å“ªäº›? 246 é”™è¯¯å¤„ç†æœŸé—´è°ƒç”¨å“ªäº›æ–¹æ³•? 247 displayName ç±»å±žæ€§çš„ç”¨é€”æ˜¯ä»€ä¹ˆ? 248 æ”¯æŒ React åº”ç”¨ç¨‹åºçš„æµè§ˆå™¨æœ‰å“ªä¸€äº›? 249 unmountComponentAtNode æ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆ? 250 ä»€ä¹ˆæ˜¯ä»£ç æ‹†åˆ†? 251 ä¸¥æ ¼æ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„? 252 ä»€ä¹ˆæ˜¯ Keyed Fragments ? 253 React æ”¯æŒæ‰€æœ‰çš„ HTML å±žæ€§ä¹ˆ? 254 HOC æœ‰å“ªäº›é™åˆ¶? 255 å¦‚ä½•åœ¨ DevTools ä¸­è°ƒè¯• forwardRefs? 256 ä»€ä¹ˆæ—¶å€™ç»„ä»¶çš„ props å±žæ€§é»˜è®¤ä¸º true? 257 ä»€ä¹ˆæ˜¯ NextJS åŠå…¶ä¸»è¦ç‰¹å¾? 258 å¦‚ä½•å°†äº‹ä»¶å¤„ç†ç¨‹åºä¼ é€’ç»™ç»„ä»¶? 259 åœ¨æ¸²æŸ“æ–¹æ³•ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°å¥½ä¹ˆ? 260 å¦‚ä½•é˜²æ­¢å‡½æ•°è¢«å¤šæ¬¡è°ƒç”¨? 261 JSX å¦‚ä½•é˜²æ­¢æ³¨å…¥æ”»å‡»? 262 å¦‚ä½•æ›´æ–°å·²æ¸²æŸ“çš„å…ƒç´ ? 263 ä½ æ€Žä¹ˆè¯´ props æ˜¯åªè¯»çš„? 264 ä½ è®¤ä¸ºçŠ¶æ€æ›´æ–°æ˜¯å¦‚ä½•åˆå¹¶çš„? 265 å¦‚ä½•å°†å‚æ•°ä¼ é€’ç»™äº‹ä»¶å¤„ç†ç¨‹åº? 266 å¦‚ä½•é˜²æ­¢ç»„ä»¶æ¸²æŸ“? 267 å®‰å…¨åœ°ä½¿ç”¨ç´¢å¼•ä½œä¸ºé”®çš„æ¡ä»¶æ˜¯ä»€ä¹ˆ? 268 keys æ˜¯å¦éœ€è¦å…¨å±€å”¯ä¸€? 269 ç”¨äºŽè¡¨å•å¤„ç†çš„æµè¡Œé€‰æ‹©æ˜¯ä»€ä¹ˆ? 270 formik ç›¸å¯¹äºŽå…¶ä»– redux è¡¨å•åº“æœ‰ä»€ä¹ˆä¼˜åŠ¿? 271 ä¸ºä»€ä¹ˆä¸éœ€è¦ä½¿ç”¨ç»§æ‰¿? 272 æˆ‘å¯ä»¥åœ¨ React åº”ç”¨ç¨‹åºä¸­å¯ä»¥ä½¿ç”¨ web components ä¹ˆ? 273 ä»€ä¹ˆæ˜¯åŠ¨æ€å¯¼å…¥? 274 ä»€ä¹ˆæ˜¯ loadable ç»„ä»¶? 275 ä»€ä¹ˆæ˜¯ suspense ç»„ä»¶? 276 ä»€ä¹ˆæ˜¯åŸºäºŽè·¯ç”±çš„ä»£ç æ‹†åˆ†? 277 ä¸¾ä¾‹è¯´æ˜Žå¦‚ä½•ä½¿ç”¨ context? 278 åœ¨ context ä¸­é»˜è®¤å€¼çš„ç›®çš„æ˜¯ä»€ä¹ˆ? 279 ä½ æ˜¯æ€Žä¹ˆä½¿ç”¨ contextType? 280 ä»€ä¹ˆæ˜¯ consumer? 281 åœ¨ä½¿ç”¨ context æ—¶ï¼Œå¦‚ä½•è§£å†³æ€§èƒ½æ–¹é¢çš„é—®é¢˜? 282 åœ¨ HOCs ä¸­ forward ref çš„ç›®çš„æ˜¯ä»€ä¹ˆ? 283 ref å‚æ•°å¯¹äºŽæ‰€æœ‰å‡½æ•°æˆ–ç±»ç»„ä»¶æ˜¯å¦å¯ç”¨? 284 åœ¨ç»„ä»¶åº“ä¸­å½“ä½¿ç”¨ forward refs æ—¶ï¼Œä½ éœ€è¦é¢å¤–çš„æ³¨æ„? 285 å¦‚ä½•åœ¨æ²¡æœ‰ ES6 çš„æƒ…å†µä¸‹åˆ›å»º React ç±»ç»„ä»¶ 286 æ˜¯å¦å¯ä»¥åœ¨æ²¡æœ‰ JSX çš„æƒ…å†µä¸‹ä½¿ç”¨ React? 287 ä»€ä¹ˆæ˜¯å·®å¼‚ç®—æ³•? 288 å·®å¼‚ç®—æ³•æ¶µç›–äº†å“ªäº›è§„åˆ™? 289 ä½ ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨ refs? 290 å¯¹äºŽæ¸²æŸ“å±žæ€§æ¥è¯´æ˜¯å¦å¿…é¡»å°† prop å±žæ€§å‘½åä¸º render? 291 åœ¨ Pure Component ä¸­ä½¿ç”¨æ¸²æŸ“å±žæ€§ä¼šæœ‰ä»€ä¹ˆé—®é¢˜? 292 å¦‚ä½•ä½¿ç”¨æ¸²æŸ“å±žæ€§åˆ›å»º HOC? 293 ä»€ä¹ˆæ˜¯ windowing æŠ€æœ¯? 294 ä½ å¦‚ä½•åœ¨ JSX ä¸­æ‰“å° falsy å€¼? 295 portals çš„å…¸åž‹ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ? 296 å¦‚ä½•è®¾ç½®éžå—æŽ§ç»„ä»¶çš„é»˜è®¤å€¼? 297 ä½ æœ€å–œæ¬¢çš„ React æŠ€æœ¯æ ˆæ˜¯ä»€ä¹ˆ? 298 Real DOM å’Œ Virtual DOM æœ‰ä»€ä¹ˆåŒºåˆ«? 299 å¦‚ä½•ä¸º React åº”ç”¨ç¨‹åºæ·»åŠ  bootstrap? 300 ä½ èƒ½å¦åˆ—å‡ºä½¿ç”¨ React ä½œä¸ºå‰ç«¯æ¡†æž¶çš„é¡¶çº§ç½‘ç«™æˆ–åº”ç”¨ç¨‹åº? 301 æ˜¯å¦å»ºè®®åœ¨ React ä¸­ä½¿ç”¨ CSS In JS æŠ€æœ¯? Core React ä»€ä¹ˆæ˜¯ React? React æ˜¯ä¸€ä¸ªå¼€æºå‰ç«¯ JavaScript åº“ï¼Œç”¨äºŽæž„å»ºç”¨æˆ·ç•Œé¢ï¼Œå°¤å…¶æ˜¯å•é¡µåº”ç”¨ç¨‹åºã€‚å®ƒç”¨äºŽå¤„ç†ç½‘é¡µå’Œç§»åŠ¨åº”ç”¨ç¨‹åºçš„è§†å›¾å±‚ã€‚React æ˜¯ç”± Facebook çš„è½¯ä»¶å·¥ç¨‹å¸ˆ Jordan Walke åˆ›å»ºçš„ã€‚åœ¨ 2011 å¹´ React åº”ç”¨é¦–æ¬¡è¢«éƒ¨ç½²åˆ° Facebook çš„ä¿¡æ¯æµä¸­ï¼Œä¹‹åŽäºŽ 2012 å¹´è¢«åº”ç”¨åˆ° Instagram ä¸Šã€‚ é˜…è¯»èµ„æºï¼š React ä¸­æ–‡æ–‡æ¡£ æŽ˜é‡‘ - å›¾è§£ React æŽ˜é‡‘ - 200è¡Œä»£ç å®žçŽ°ç®€ç‰ˆreact *â¬† è¿”å›žç›®å½• React çš„ä¸»è¦ç‰¹ç‚¹æ˜¯ä»€ä¹ˆ? React çš„ä¸»è¦ç‰¹æ€§æœ‰ï¼š è€ƒè™‘åˆ°çœŸå®žçš„ DOM æ“ä½œæˆæœ¬å¾ˆé«˜ï¼Œå®ƒä½¿ç”¨ VirtualDOM è€Œä¸æ˜¯çœŸå®žçš„ DOMã€‚ æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ã€‚ éµå¾ªå•å‘æ•°æ®æµæˆ–æ•°æ®ç»‘å®šã€‚ ä½¿ç”¨å¯å¤ç”¨/å¯ç»„åˆçš„ UI ç»„ä»¶å¼€å‘è§†å›¾ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ JSX? JSX æ˜¯ ECMAScript ä¸€ä¸ªç±»ä¼¼ XML çš„è¯­æ³•æ‰©å±•ã€‚åŸºæœ¬ä¸Šï¼Œå®ƒåªæ˜¯ä¸º React.createElement() å‡½æ•°æä¾›è¯­æ³•ç³–ï¼Œä»Žè€Œè®©åœ¨æˆ‘ä»¬åœ¨ JavaScript ä¸­ï¼Œä½¿ç”¨ç±» HTML æ¨¡æ¿çš„è¯­æ³•ï¼Œè¿›è¡Œé¡µé¢æè¿°ã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œ&lt;h1&gt; å†…çš„æ–‡æœ¬æ ‡ç­¾ä¼šä½œä¸º JavaScript å‡½æ•°è¿”å›žç»™æ¸²æŸ“å‡½æ•°ã€‚ 123456789class App extends React.Component &#123; render() &#123; return( &lt;div&gt; &lt;h1&gt;&#123;'Welcome to React world!'&#125;&lt;/h1&gt; &lt;/div&gt; ) &#125;&#125; ä»¥ä¸Šç¤ºä¾‹ render æ–¹æ³•ä¸­çš„ JSX å°†ä¼šè¢«è½¬æ¢ä¸ºä»¥ä¸‹å†…å®¹ï¼š 12React.createElement("div", null, React.createElement( "h1", null, 'Welcome to React world!')); è¿™é‡Œä½ å¯ä»¥è®¿é—® Babeljs åœ¨çº¿ä½“éªŒä¸€ä¸‹ã€‚ é˜…è¯»èµ„æºï¼š ä»Žé›¶å¼€å§‹å®žçŽ°ä¸€ä¸ªReactï¼ˆä¸€ï¼‰ï¼šJSXå’Œè™šæ‹ŸDOM â¬† è¿”å›žé¡¶éƒ¨ å…ƒç´ å’Œç»„ä»¶æœ‰ä»€ä¹ˆåŒºåˆ«? ä¸€ä¸ª Element æ˜¯ä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œå®ƒæè¿°äº†ä½ å¸Œæœ›åœ¨å±å¹•ä¸Šä»¥ DOM èŠ‚ç‚¹æˆ–å…¶ä»–ç»„ä»¶çš„å½¢å¼å‘ˆçŽ°çš„å†…å®¹ã€‚Elements åœ¨å®ƒä»¬çš„å±žæ€§ä¸­å¯ä»¥åŒ…å«å…¶ä»– Elementsã€‚åˆ›å»ºä¸€ä¸ª React å…ƒç´ æ˜¯å¾ˆè½»é‡çš„ã€‚ä¸€æ—¦å…ƒç´ è¢«åˆ›å»ºåŽï¼Œå®ƒå°†ä¸ä¼šè¢«ä¿®æ”¹ã€‚ React Element çš„å¯¹è±¡è¡¨ç¤ºå¦‚ä¸‹ï¼š 12345const element = React.createElement( 'div', &#123;id: 'login-btn'&#125;, 'Login') ä¸Šé¢çš„ React.createElement() å‡½æ•°ä¼šè¿”å›žä¸€ä¸ªå¯¹è±¡ã€‚ 1234567&#123; type: &apos;div&apos;, props: &#123; children: &apos;Login&apos;, id: &apos;login-btn&apos; &#125;&#125; æœ€åŽä½¿ç”¨ ReactDOM.render() æ–¹æ³•æ¸²æŸ“åˆ° DOMï¼š 1&lt;div id='login-btn'&gt;Login&lt;/div&gt; è€Œä¸€ä¸ªç»„ä»¶å¯ä»¥ç”¨å¤šç§ä¸åŒæ–¹å¼å£°æ˜Žã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå«æœ‰ render() æ–¹æ³•çš„ç±»ã€‚æˆ–è€…ï¼Œåœ¨ç®€å•çš„æƒ…å†µä¸­ï¼Œå®ƒå¯ä»¥å®šä¹‰ä¸ºå‡½æ•°ã€‚æ— è®ºå“ªç§æƒ…å†µï¼Œå®ƒéƒ½å°† props ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›žä¸€ä¸ª JSX æ ‘ä½œä¸ºè¾“å‡ºï¼š 12const Button = (&#123; onLogin &#125;) =&gt; &lt;div id=&#123;'login-btn'&#125; onClick=&#123;onLogin&#125; /&gt; ç„¶åŽ JSX è¢«è½¬æ¢æˆ React.createElement() å‡½æ•°ï¼š 12345const Button = (&#123; onLogin &#125;) =&gt; React.createElement( 'div', &#123; id: 'login-btn', onClick: onLogin &#125;, 'Login') â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ React ä¸­åˆ›å»ºç»„ä»¶? æœ‰ä¸¤ç§å¯è¡Œçš„æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼š Function Components: è¿™æ˜¯åˆ›å»ºç»„ä»¶æœ€ç®€å•çš„æ–¹å¼ã€‚è¿™äº›æ˜¯çº¯ JavaScript å‡½æ•°ï¼ŒæŽ¥å— props å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°å¹¶è¿”å›ž React å…ƒç´ ï¼š 123function Greeting(&#123; message &#125;) &#123; return &lt;h1&gt;&#123;`Hello, $&#123;message&#125;`&#125;&lt;/h1&gt;&#125; Class Components: ä½ è¿˜å¯ä»¥ä½¿ç”¨ ES6 ç±»æ¥å®šä¹‰ç»„ä»¶ã€‚ä¸Šé¢çš„å‡½æ•°ç»„ä»¶è‹¥ä½¿ç”¨ ES6 çš„ç±»å¯æ”¹å†™ä¸ºï¼š 12345class Greeting extends React.Component &#123; render() &#123; return &lt;h1&gt;&#123;`Hello, $&#123;this.props.message&#125;`&#125;&lt;/h1&gt; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ ä½•æ—¶ä½¿ç”¨ç±»ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶? å¦‚æžœç»„ä»¶éœ€è¦ä½¿ç”¨çŠ¶æ€æˆ–ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œé‚£ä¹ˆä½¿ç”¨ç±»ç»„ä»¶ï¼Œå¦åˆ™ä½¿ç”¨å‡½æ•°ç»„ä»¶ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Pure Components? React.PureComponent ä¸Ž React.Component å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å®ƒä¸ºä½ å¤„ç†äº† shouldComponentUpdate() æ–¹æ³•ã€‚å½“å±žæ€§æˆ–çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒPureComponent å°†å¯¹å±žæ€§å’ŒçŠ¶æ€è¿›è¡Œæµ…æ¯”è¾ƒã€‚å¦ä¸€æ–¹é¢ï¼Œä¸€èˆ¬çš„ç»„ä»¶ä¸ä¼šå°†å½“å‰çš„å±žæ€§å’ŒçŠ¶æ€ä¸Žæ–°çš„å±žæ€§å’ŒçŠ¶æ€è¿›è¡Œæ¯”è¾ƒã€‚å› æ­¤ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯å½“è°ƒç”¨ shouldComponentUpdate æ—¶ï¼Œé»˜è®¤è¿”å›ž trueï¼Œæ‰€ä»¥ç»„ä»¶éƒ½å°†é‡æ–°æ¸²æŸ“ã€‚ â¬† è¿”å›žé¡¶éƒ¨ React çš„çŠ¶æ€æ˜¯ä»€ä¹ˆ? ç»„ä»¶çš„çŠ¶æ€æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒåŒ…å«æŸäº›ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯èƒ½åœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­å‘ç”Ÿæ›´æ”¹ã€‚æˆ‘ä»¬åº”è¯¥å°½é‡ä½¿çŠ¶æ€å°½å¯èƒ½ç®€å•ï¼Œå¹¶å°½é‡å‡å°‘æœ‰çŠ¶æ€ç»„ä»¶çš„æ•°é‡ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªåŒ…å«æ¶ˆæ¯çŠ¶æ€çš„ User ç»„ä»¶ï¼š 1234567891011121314151617class User extends React.Component &#123; constructor(props) &#123; super(props) this.state = &#123; message: 'Welcome to React world' &#125; &#125; render() &#123; return ( &lt;div&gt; &lt;h1&gt;&#123;this.state.message&#125;&lt;/h1&gt; &lt;/div&gt; ) &#125;&#125; çŠ¶æ€ï¼ˆStateï¼‰ä¸Žå±žæ€§ï¼ˆPropsï¼‰ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯ç§æœ‰çš„ï¼Œå®Œå…¨ç”±ç»„ä»¶æŽ§åˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé™¤äº†å®ƒæ‰€å±žçš„ç»„ä»¶å¤–ï¼Œä»»ä½•ç»„ä»¶éƒ½æ— æ³•è®¿é—®å®ƒã€‚ â¬† è¿”å›žé¡¶éƒ¨ React ä¸­çš„ props æ˜¯ä»€ä¹ˆ? Props æ˜¯ç»„ä»¶çš„è¾“å…¥ã€‚å®ƒä»¬æ˜¯å•ä¸ªå€¼æˆ–åŒ…å«ä¸€ç»„å€¼çš„å¯¹è±¡ï¼Œè¿™äº›å€¼åœ¨åˆ›å»ºæ—¶ä½¿ç”¨ç±»ä¼¼äºŽ HTML æ ‡è®°å±žæ€§çš„å‘½åçº¦å®šä¼ é€’ç»™ç»„ä»¶ã€‚å®ƒä»¬æ˜¯ä»Žçˆ¶ç»„ä»¶ä¼ é€’åˆ°å­ç»„ä»¶çš„æ•°æ®ã€‚ Props çš„ä¸»è¦ç›®çš„æ˜¯æä¾›ä»¥ä¸‹ç»„ä»¶åŠŸèƒ½ï¼š å°†è‡ªå®šä¹‰æ•°æ®ä¼ é€’åˆ°ç»„ä»¶ã€‚ è§¦å‘çŠ¶æ€æ›´æ”¹ã€‚ åœ¨ç»„ä»¶çš„ render() æ–¹æ³•ä¸­é€šè¿‡ this.props.reactProp ä½¿ç”¨ã€‚ ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ reactProp å±žæ€§åˆ›å»ºä¸€ä¸ªå…ƒç´ ï¼š 1&lt;Element reactProp=&#123;'1'&#125; /&gt; ç„¶åŽï¼ŒreactProp å°†æˆä¸ºé™„åŠ åˆ° React props å¯¹è±¡çš„å±žæ€§ï¼Œè¯¥å¯¹è±¡æœ€åˆå·²å­˜åœ¨äºŽä½¿ç”¨ React åº“åˆ›å»ºçš„æ‰€æœ‰ç»„ä»¶ä¸Šã€‚ 1props.reactProp â¬† è¿”å›žé¡¶éƒ¨ çŠ¶æ€å’Œå±žæ€§æœ‰ä»€ä¹ˆåŒºåˆ«?state å’Œ props éƒ½æ˜¯æ™®é€šçš„ JavaScript å¯¹è±¡ã€‚è™½ç„¶å®ƒä»¬éƒ½ä¿å­˜ç€å½±å“æ¸²æŸ“è¾“å‡ºçš„ä¿¡æ¯ï¼Œä½†å®ƒä»¬åœ¨ç»„ä»¶æ–¹é¢çš„åŠŸèƒ½ä¸åŒã€‚Props ä»¥ç±»ä¼¼äºŽå‡½æ•°å‚æ•°çš„æ–¹å¼ä¼ é€’ç»™ç»„ä»¶ï¼Œè€ŒçŠ¶æ€åˆ™ç±»ä¼¼äºŽåœ¨å‡½æ•°å†…å£°æ˜Žå˜é‡å¹¶å¯¹å®ƒè¿›è¡Œç®¡ç†ã€‚ States vs Props | Conditions | States | Props || â€”â€”â€”â€”â€”â€”â€“ | â€”â€” | â€”â€“ || å¯ä»Žçˆ¶ç»„ä»¶æŽ¥æ”¶åˆå§‹å€¼ | æ˜¯ | æ˜¯ || å¯åœ¨çˆ¶ç»„ä»¶ä¸­æ”¹å˜å…¶å€¼ | å¦ | æ˜¯ || åœ¨ç»„ä»¶å†…è®¾ç½®é»˜è®¤å€¼ | æ˜¯ | æ˜¯ || åœ¨ç»„ä»¶å†…å¯æ”¹å˜ | æ˜¯ | å¦ || å¯ä½œä¸ºå­ç»„ä»¶çš„åˆå§‹å€¼ | æ˜¯ | æ˜¯ | â¬† è¿”å›žé¡¶éƒ¨ æˆ‘ä»¬ä¸ºä»€ä¹ˆä¸èƒ½ç›´æŽ¥æ›´æ–°çŠ¶æ€?å¦‚æžœä½ å°è¯•ç›´æŽ¥æ”¹å˜çŠ¶æ€ï¼Œé‚£ä¹ˆç»„ä»¶å°†ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚ 12//Wrongthis.state.message = 'Hello world' æ­£ç¡®æ–¹æ³•åº”è¯¥æ˜¯ä½¿ç”¨ setState() æ–¹æ³•ã€‚å®ƒè°ƒåº¦ç»„ä»¶çŠ¶æ€å¯¹è±¡çš„æ›´æ–°ã€‚å½“çŠ¶æ€æ›´æ”¹æ—¶ï¼Œç»„ä»¶é€šå°†ä¼šé‡æ–°æ¸²æŸ“ã€‚ 12//Correctthis.setState(&#123; message: 'Hello World' &#125;) æ³¨æ„ï¼š ä½ å¯ä»¥åœ¨ constructor ä¸­æˆ–ä½¿ç”¨æœ€æ–°çš„ JavaScript ç±»å±žæ€§å£°æ˜Žè¯­æ³•ç›´æŽ¥è®¾ç½®çŠ¶æ€å¯¹è±¡ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å›žè°ƒå‡½æ•°ä½œä¸º setState() å‚æ•°çš„ç›®çš„æ˜¯ä»€ä¹ˆ?å½“ setState å®Œæˆå’Œç»„ä»¶æ¸²æŸ“åŽï¼Œå›žè°ƒå‡½æ•°å°†ä¼šè¢«è°ƒç”¨ã€‚ç”±äºŽ setState() æ˜¯å¼‚æ­¥çš„ï¼Œå›žè°ƒå‡½æ•°ç”¨äºŽä»»ä½•åŽç»­çš„æ“ä½œã€‚ æ³¨æ„ï¼š å»ºè®®ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è€Œä¸æ˜¯æ­¤å›žè°ƒå‡½æ•°ã€‚ 1setState(&#123; name: 'John' &#125;, () =&gt; console.log('The name has updated and component re-rendered')) é˜…è¯»èµ„æºï¼š æŽ˜é‡‘ - æ­å¯†React setState â¬† è¿”å›žé¡¶éƒ¨ HTML å’Œ React äº‹ä»¶å¤„ç†æœ‰ä»€ä¹ˆåŒºåˆ«? åœ¨ HTML ä¸­äº‹ä»¶åå¿…é¡»å°å†™: 1&lt;button onclick='activateLasers()'&gt; è€Œåœ¨ React ä¸­å®ƒéµå¾ª camelCase (é©¼å³°) æƒ¯ä¾‹ï¼š 1&lt;button onClick=&#123;activateLasers&#125;&gt; åœ¨ HTML ä¸­ä½ å¯ä»¥è¿”å›ž false ä»¥é˜»æ­¢é»˜è®¤çš„è¡Œä¸ºï¼š 1&lt;a href='#' onclick='console.log("The link was clicked."); return false;' /&gt; è€Œåœ¨ React ä¸­ä½ å¿…é¡»åœ°æ˜Žç¡®åœ°è°ƒç”¨ preventDefault() ï¼š 1234function handleClick(event) &#123; event.preventDefault() console.log('The link was clicked.')&#125; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ JSX å›žè°ƒä¸­ç»‘å®šæ–¹æ³•æˆ–äº‹ä»¶å¤„ç†ç¨‹åº?å®žçŽ°è¿™ä¸€ç‚¹æœ‰ä¸‰ç§å¯èƒ½çš„æ–¹æ³•ï¼š Binding in Constructor: åœ¨ JavaScript ç±»ä¸­ï¼Œæ–¹æ³•é»˜è®¤ä¸è¢«ç»‘å®šã€‚è¿™ä¹Ÿé€‚ç”¨äºŽå®šä¹‰ä¸ºç±»æ–¹æ³•çš„ React äº‹ä»¶å¤„ç†ç¨‹åºã€‚é€šå¸¸æˆ‘ä»¬åœ¨æž„é€ å‡½æ•°ä¸­ç»‘å®šå®ƒä»¬ã€‚ 12345678910class Component extends React.Componenet &#123; constructor(props) &#123; super(props) this.handleClick = this.handleClick.bind(this) &#125; handleClick() &#123; // ... &#125;&#125; Public class fields syntax: å¦‚æžœä½ ä¸å–œæ¬¢ bind æ–¹æ¡ˆï¼Œåˆ™å¯ä»¥ä½¿ç”¨ public class fields syntax æ­£ç¡®ç»‘å®šå›žè°ƒã€‚ 123handleClick = () =&gt; &#123; console.log('this is:', this)&#125; 123&lt;button onClick=&#123;this.handleClick&#125;&gt; &#123;'Click me'&#125;&lt;/button&gt; Arrow functions in callbacks: ä½ å¯ä»¥åœ¨å›žè°ƒå‡½æ•°ä¸­ç›´æŽ¥ä½¿ç”¨ arrow functionsã€‚ 123&lt;button onClick=&#123;(event) =&gt; this.handleClick(event)&#125;&gt; &#123;'Click me'&#125;&lt;/button&gt; æ³¨æ„ï¼š å¦‚æžœå›žè°ƒå‡½æ•°ä½œä¸ºå±žæ€§ä¼ ç»™å­ç»„ä»¶ï¼Œé‚£ä¹ˆè¿™äº›ç»„ä»¶å¯èƒ½è§¦å‘ä¸€ä¸ªé¢å¤–çš„é‡æ–°æ¸²æŸ“ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œè€ƒè™‘åˆ°æ€§èƒ½ï¼Œæœ€å¥½ä½¿ç”¨ .bind() æˆ– public class fields syntax æ–¹æ¡ˆã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•å°†å‚æ•°ä¼ é€’ç»™äº‹ä»¶å¤„ç†ç¨‹åºæˆ–å›žè°ƒå‡½æ•°?ä½ å¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥åŒ…è£…äº‹ä»¶å¤„ç†å™¨å¹¶ä¼ é€’å‚æ•°ï¼š 1&lt;button onClick=&#123;() =&gt; this.handleClick(id)&#125; /&gt; è¿™ç›¸å½“äºŽè°ƒç”¨ .bind: 1&lt;button onClick=&#123;this.handleClick.bind(this, id)&#125; /&gt; â¬† è¿”å›žé¡¶éƒ¨ React ä¸­çš„åˆæˆäº‹ä»¶æ˜¯ä»€ä¹ˆ?SyntheticEvent æ˜¯å¯¹æµè§ˆå™¨åŽŸç”Ÿäº‹ä»¶çš„è·¨æµè§ˆå™¨åŒ…è£…ã€‚å®ƒçš„ API ä¸Žæµè§ˆå™¨çš„åŽŸç”Ÿäº‹ä»¶ç›¸åŒï¼ŒåŒ…æ‹¬ stopPropagation() å’Œ preventDefault()ï¼Œé™¤äº†äº‹ä»¶åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­çš„å·¥ä½œæ–¹å¼ç›¸åŒã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯å†…è”æ¡ä»¶è¡¨è¾¾å¼?åœ¨ JS ä¸­ä½ å¯ä»¥ä½¿ç”¨ if è¯­å¥æˆ–ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œæ¥å®žçŽ°æ¡ä»¶åˆ¤æ–­ã€‚é™¤äº†è¿™äº›æ–¹æ³•ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥åœ¨ JSX ä¸­åµŒå…¥ä»»ä½•è¡¨è¾¾å¼ï¼Œæ–¹æ³•æ˜¯å°†å®ƒä»¬ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ï¼Œç„¶åŽå†åŠ ä¸Š JS é€»è¾‘è¿ç®—ç¬¦ &amp;&amp;ã€‚ 1234567891011&lt;h1&gt;Hello!&lt;/h1&gt;&#123; messages.length &gt; 0 &amp;&amp; !isLogin ? &lt;h2&gt; You have &#123;messages.length&#125; unread messages. &lt;/h2&gt; : &lt;h2&gt; You don't have unread messages. &lt;/h2&gt;&#125; å½“ç„¶å¦‚æžœåªæ˜¯æƒ³åˆ¤æ–­ ifï¼Œå¯ä»¥å¦‚ä¸‹ç›´æŽ¥åˆ¤æ–­ï¼š 123&#123; isLogin &amp;&amp; &lt;span&gt;Your have been login!&lt;/span&gt;&#125; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä¸éœ€è¦ä½¿ç”¨`isLogin ? &lt;span&gt;Your have been login!&lt;/span&gt; : null`è¿™æ ·çš„å½¢å¼ã€‚ **[â¬† è¿”å›žé¡¶éƒ¨](#ç›®å½•)** ä»€ä¹ˆæ˜¯ â€œkeyâ€ å±žæ€§ï¼Œåœ¨å…ƒç´ æ•°ç»„ä¸­ä½¿ç”¨å®ƒä»¬æœ‰ä»€ä¹ˆå¥½å¤„?key æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ä¸²å±žæ€§ï¼Œä½ åœ¨åˆ›å»ºå…ƒç´ æ•°ç»„æ—¶éœ€è¦åŒ…å«å®ƒã€‚Keys å¸®åŠ© React è¯†åˆ«å“ªäº›é¡¹å·²æ›´æ”¹ã€æ·»åŠ æˆ–åˆ é™¤ã€‚ æˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ•°æ®ä¸­çš„ IDs ä½œä¸º keys: 12345const todoItems = todos.map((todo) =&gt; &lt;li key=&#123;todo.id&#125;&gt; &#123;todo.text&#125; &lt;/li&gt;) åœ¨æ¸²æŸ“åˆ—è¡¨é¡¹æ—¶ï¼Œå¦‚æžœä½ æ²¡æœ‰ç¨³å®šçš„ IDsï¼Œä½ å¯èƒ½ä¼šä½¿ç”¨ index ä½œä¸º keyï¼š 12345const todoItems = todos.map((todo, index) =&gt; &lt;li key=&#123;index&#125;&gt; &#123;todo.text&#125; &lt;/li&gt;) æ³¨æ„ï¼š ç”±äºŽåˆ—è¡¨é¡¹çš„é¡ºåºå¯èƒ½å‘ç”Ÿæ”¹å˜ï¼Œå› æ­¤å¹¶ä¸æŽ¨èä½¿ç”¨ indexes ä½œä¸º keysã€‚è¿™å¯èƒ½ä¼šå¯¹æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ï¼Œå¹¶å¯èƒ½å¯¼è‡´ç»„ä»¶çŠ¶æ€å‡ºçŽ°é—®é¢˜ã€‚ å¦‚æžœå°†åˆ—è¡¨é¡¹æå–ä¸ºå•ç‹¬çš„ç»„ä»¶ï¼Œåˆ™åœ¨åˆ—è¡¨ç»„ä»¶ä¸Šåº”ç”¨ keys è€Œä¸æ˜¯ li æ ‡ç­¾ã€‚ å¦‚æžœåœ¨åˆ—è¡¨é¡¹ä¸­æ²¡æœ‰è®¾ç½® key å±žæ€§ï¼Œåœ¨æŽ§åˆ¶å°ä¼šæ˜¾ç¤ºè­¦å‘Šæ¶ˆæ¯ã€‚ â¬† è¿”å›žé¡¶éƒ¨ refs æœ‰ä»€ä¹ˆç”¨?ref ç”¨äºŽè¿”å›žå¯¹å…ƒç´ çš„å¼•ç”¨ã€‚ä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”è¯¥é¿å…ä½¿ç”¨å®ƒä»¬ã€‚å½“ä½ éœ€è¦ç›´æŽ¥è®¿é—® DOM å…ƒç´ æˆ–ç»„ä»¶çš„å®žä¾‹æ—¶ï¼Œå®ƒä»¬å¯èƒ½éžå¸¸æœ‰ç”¨ã€‚ å¦‚ä½•åˆ›å»º refs?è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ¡ˆ è¿™æ˜¯æœ€è¿‘å¢žåŠ çš„ä¸€ç§æ–¹æ¡ˆã€‚Refs æ˜¯ä½¿ç”¨ React.createRef() æ–¹æ³•åˆ›å»ºçš„ï¼Œå¹¶é€šè¿‡ ref å±žæ€§æ·»åŠ åˆ° React å…ƒç´ ä¸Šã€‚ä¸ºäº†åœ¨æ•´ä¸ªç»„ä»¶ä¸­ä½¿ç”¨refsï¼Œåªéœ€å°† ref åˆ†é…ç»™æž„é€ å‡½æ•°ä¸­çš„å®žä¾‹å±žæ€§ã€‚ 123456789class MyComponent extends React.Component &#123; constructor(props) &#123; super(props) this.myRef = React.createRef() &#125; render() &#123; return &lt;div ref=&#123;this.myRef&#125; /&gt; &#125;&#125; ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ ref å›žè°ƒå‡½æ•°çš„æ–¹æ¡ˆï¼Œè€Œä¸ç”¨è€ƒè™‘ React ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼Œè®¿é—®æœç´¢æ ç»„ä»¶ä¸­çš„ input å…ƒç´ å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223class SearchBar extends Component &#123; constructor(props) &#123; super(props); this.txtSearch = null; this.state = &#123; term: '' &#125;; this.setInputSearchRef = e =&gt; &#123; this.txtSearch = e; &#125; &#125; onInputChange(event) &#123; this.setState(&#123; term: this.txtSearch.value &#125;); &#125; render() &#123; return ( &lt;input value=&#123;this.state.term&#125; onChange=&#123;this.onInputChange.bind(this)&#125; ref=&#123;this.setInputSearchRef&#125; /&gt; ); &#125;&#125; ä½ ä¹Ÿå¯ä»¥åœ¨ä½¿ç”¨ closures çš„å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ refsã€‚ æ³¨æ„ï¼š ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å†…è”å¼•ç”¨å›žè°ƒï¼Œå°½ç®¡è¿™ä¸æ˜¯æŽ¨èçš„æ–¹æ³•ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ forward refs?Ref forwarding æ˜¯ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒå…è®¸ä¸€äº›ç»„ä»¶èŽ·å–æŽ¥æ”¶åˆ° ref å¯¹è±¡å¹¶å°†å®ƒè¿›ä¸€æ­¥ä¼ é€’ç»™å­ç»„ä»¶ã€‚ 123456789const ButtonElement = React.forwardRef((props, ref) =&gt; ( &lt;button ref=&#123;ref&#125; className="CustomButton"&gt; &#123;props.children&#125; &lt;/button&gt;));// Create ref to the DOM button:const ref = React.createRef();&lt;ButtonElement ref=&#123;ref&#125;&gt;&#123;'Forward Ref'&#125;&lt;/ButtonElement&gt; â¬† è¿”å›žé¡¶éƒ¨ callback refs å’Œ findDOMNode() å“ªä¸€ä¸ªæ˜¯é¦–é€‰é€‰é¡¹?æœ€å¥½æ˜¯ä½¿ç”¨ callback refs è€Œä¸æ˜¯ findDOMNode() APIã€‚å› ä¸º findDOMNode() é˜»ç¢äº†å°†æ¥å¯¹ React çš„æŸäº›æ”¹è¿›ã€‚ ä½¿ç”¨ findDOMNode å·²å¼ƒç”¨çš„æ–¹æ¡ˆï¼š 123456789class MyComponent extends Component &#123; componentDidMount() &#123; findDOMNode(this).scrollIntoView() &#125; render() &#123; return &lt;div /&gt; &#125;&#125; æŽ¨èçš„æ–¹æ¡ˆæ˜¯ï¼š 123456789class MyComponent extends Component &#123; componentDidMount() &#123; this.node.scrollIntoView() &#125; render() &#123; return &lt;div ref=&#123;node =&gt; this.node = node&#125; /&gt; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆ String Refs è¢«å¼ƒç”¨?å¦‚æžœä½ ä»¥å‰ä½¿ç”¨è¿‡ Reactï¼Œä½ å¯èƒ½ä¼šç†Ÿæ‚‰æ—§çš„ APIï¼Œå…¶ä¸­çš„ ref å±žæ€§æ˜¯å­—ç¬¦ä¸²ï¼Œå¦‚ ref={&#39;textInput&#39;}ï¼Œå¹¶ä¸” DOM èŠ‚ç‚¹çš„è®¿é—®æ–¹å¼ä¸ºthis.refs.textInputã€‚æˆ‘ä»¬å»ºè®®ä¸è¦è¿™æ ·åšï¼Œå› ä¸ºå­—ç¬¦ä¸²å¼•ç”¨æœ‰ä»¥ä¸‹é—®é¢˜ï¼Œå¹¶ä¸”è¢«è®¤ä¸ºæ˜¯é—ç•™é—®é¢˜ã€‚å­—ç¬¦ä¸² refs åœ¨ React v16 ç‰ˆæœ¬ä¸­è¢«ç§»é™¤ã€‚ å®ƒä»¬å¼ºåˆ¶ React è·Ÿè¸ªå½“å‰æ‰§è¡Œçš„ç»„ä»¶ã€‚è¿™æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºå®ƒä½¿ React æ¨¡å—æœ‰çŠ¶æ€ï¼Œè¿™ä¼šå¯¼è‡´åœ¨ bundle ä¸­å¤åˆ¶ React æ¨¡å—æ—¶ä¼šå¯¼è‡´å¥‡æ€ªçš„é”™è¯¯ã€‚ å®ƒä»¬æ˜¯ä¸å¯ç»„åˆçš„ - å¦‚æžœä¸€ä¸ªåº“æŠŠä¸€ä¸ª ref ä¼ ç»™å­å…ƒç´ ï¼Œåˆ™ç”¨æˆ·æ— æ³•å¯¹å…¶è®¾ç½®å¦ä¸€ä¸ªå¼•ç”¨ã€‚ å®ƒä»¬ä¸èƒ½ä¸Žé™æ€åˆ†æžå·¥å…·ä¸€èµ·ä½¿ç”¨ï¼Œå¦‚ Flowã€‚Flow æ— æ³•çŒœæµ‹å‡º this.refs ä¸Šçš„å­—ç¬¦ä¸²å¼•ç”¨çš„ä½œç”¨åŠå…¶ç±»åž‹ã€‚Callback refs å¯¹é™æ€åˆ†æžæ›´å‹å¥½ã€‚ ä½¿ç”¨ â€œrender callbackâ€ æ¨¡å¼ï¼ˆæ¯”å¦‚ï¼š ï¼‰ï¼Œå®ƒæ— æ³•åƒå¤§å¤šæ•°äººé¢„æœŸçš„é‚£æ ·å·¥ä½œã€‚ 12345678910111213class MyComponent extends Component &#123; renderRow = (index) =&gt; &#123; // This won't work. Ref will get attached to DataTable rather than MyComponent: return &lt;input ref=&#123;'input-' + index&#125; /&gt;; // This would work though! Callback refs are awesome. return &lt;input ref=&#123;input =&gt; this['input-' + index] = input&#125; /&gt;; &#125; render() &#123; return &lt;DataTable data=&#123;this.props.data&#125; renderRow=&#123;this.renderRow&#125; /&gt; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Virtual DOM?Virtual DOM (VDOM) æ˜¯ Real DOM çš„å†…å­˜è¡¨ç¤ºå½¢å¼ã€‚UI çš„å±•ç¤ºå½¢å¼è¢«ä¿å­˜åœ¨å†…å­˜ä¸­å¹¶ä¸ŽçœŸå®žçš„ DOM åŒæ­¥ã€‚è¿™æ˜¯åœ¨è°ƒç”¨çš„æ¸²æŸ“å‡½æ•°å’Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºå…ƒç´ ä¹‹é—´å‘ç”Ÿçš„ä¸€ä¸ªæ­¥éª¤ã€‚æ•´ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º reconciliationã€‚ Real DOM vs Virtual DOM | Real DOM | Virtual DOM || :â€”â€”â€”â€”â€”â€”â€”â€”â€“: | :â€”â€”â€”â€”â€”â€”â€”-: || æ›´æ–°è¾ƒæ…¢ | æ›´æ–°è¾ƒå¿« || å¯ä»¥ç›´æŽ¥æ›´æ–° HTML | æ— æ³•ç›´æŽ¥æ›´æ–° HTML || å¦‚æžœå…ƒç´ æ›´æ–°ï¼Œåˆ™åˆ›å»ºæ–°çš„ DOM | å¦‚æžœå…ƒç´ æ›´æ–°ï¼Œåˆ™æ›´æ–° JSX || DOM æ“ä½œéžå¸¸æ˜‚è´µ | DOM æ“ä½œéžå¸¸ç®€å• || è¾ƒå¤šçš„å†…å­˜æµªè´¹ | æ²¡æœ‰å†…å­˜æµªè´¹ | é˜…è¯»èµ„æºï¼š çŸ¥ä¹Ž - å¦‚ä½•ç†è§£è™šæ‹ŸDOM? edureka - react-interview-questions â¬† è¿”å›žé¡¶éƒ¨ Virtual DOM å¦‚ä½•å·¥ä½œ?Virtual DOM åˆ†ä¸ºä¸‰ä¸ªç®€å•çš„æ­¥éª¤ã€‚ æ¯å½“ä»»ä½•åº•å±‚æ•°æ®å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œæ•´ä¸ª UI éƒ½å°†ä»¥ Virtual DOM çš„å½¢å¼é‡æ–°æ¸²æŸ“ã€‚ ç„¶åŽè®¡ç®—å…ˆå‰ Virtual DOM å¯¹è±¡å’Œæ–°çš„ Virtual DOM å¯¹è±¡ä¹‹é—´çš„å·®å¼‚ã€‚ ä¸€æ—¦è®¡ç®—å®Œæˆï¼ŒçœŸå®žçš„ DOM å°†åªæ›´æ–°å®žé™…æ›´æ”¹çš„å†…å®¹ã€‚ â¬† è¿”å›žé¡¶éƒ¨ Shadow DOM å’Œ Virtual DOM ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«?Shadow DOM æ˜¯ä¸€ç§æµè§ˆå™¨æŠ€æœ¯ï¼Œå®ƒè§£å†³äº†æž„å»ºç½‘ç»œåº”ç”¨çš„è„†å¼±æ€§é—®é¢˜ã€‚Shadow DOM ä¿®å¤äº† CSS å’Œ DOMã€‚å®ƒåœ¨ç½‘ç»œå¹³å°ä¸­å¼•å…¥ä½œç”¨åŸŸæ ·å¼ã€‚ æ— éœ€å·¥å…·æˆ–å‘½åçº¦å®šï¼Œä½ å³å¯ä½¿ç”¨åŽŸç”Ÿ JavaScript æ†ç»‘ CSS å’Œæ ‡è®°ã€éšè—å®žçŽ°è¯¦æƒ…ä»¥åŠç¼–å†™ç‹¬ç«‹çš„ç»„ä»¶ã€‚Virtual DOM æ˜¯ä¸€ä¸ªç”± JavaScript åº“åœ¨æµè§ˆå™¨ API ä¹‹ä¸Šå®žçŽ°çš„æ¦‚å¿µã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ React Fiber?Fiber æ˜¯ React v16 ä¸­æ–°çš„ reconciliation å¼•æ“Žï¼Œæˆ–æ ¸å¿ƒç®—æ³•çš„é‡æ–°å®žçŽ°ã€‚React Fiber çš„ç›®æ ‡æ˜¯æé«˜å¯¹åŠ¨ç”»ï¼Œå¸ƒå±€ï¼Œæ‰‹åŠ¿ï¼Œæš‚åœï¼Œä¸­æ­¢æˆ–è€…é‡ç”¨ä»»åŠ¡çš„èƒ½åŠ›åŠä¸ºä¸åŒç±»åž‹çš„æ›´æ–°åˆ†é…ä¼˜å…ˆçº§ï¼ŒåŠæ–°çš„å¹¶å‘åŽŸè¯­ç­‰é¢†åŸŸçš„é€‚ç”¨æ€§ã€‚ â¬† è¿”å›žé¡¶éƒ¨ React Fiber çš„ä¸»è¦ç›®æ ‡æ˜¯ä»€ä¹ˆ?React Fiber çš„ç›®æ ‡æ˜¯æé«˜å…¶åœ¨åŠ¨ç”»ã€å¸ƒå±€å’Œæ‰‹åŠ¿ç­‰é¢†åŸŸçš„é€‚ç”¨æ€§ã€‚å®ƒçš„ä¸»è¦ç‰¹æ€§æ˜¯ incremental rendering: å°†æ¸²æŸ“ä»»åŠ¡æ‹†åˆ†ä¸ºå°çš„ä»»åŠ¡å—å¹¶å°†ä»»åŠ¡åˆ†é…åˆ°å¤šä¸ªå¸§ä¸Šçš„èƒ½åŠ›ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯å—æŽ§ç»„ä»¶?åœ¨éšåŽçš„ç”¨æˆ·è¾“å…¥ä¸­ï¼Œèƒ½å¤ŸæŽ§åˆ¶è¡¨å•ä¸­è¾“å…¥å…ƒç´ çš„ç»„ä»¶è¢«ç§°ä¸ºå—æŽ§ç»„ä»¶ï¼Œå³æ¯ä¸ªçŠ¶æ€æ›´æ”¹éƒ½æœ‰ä¸€ä¸ªç›¸å…³è”çš„å¤„ç†ç¨‹åºã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„ handleChange å‡½æ•°å°†è¾“å…¥æ¡†çš„å€¼è½¬æ¢æˆå¤§å†™ï¼š 123handleChange(event) &#123; this.setState(&#123;value: event.target.value.toUpperCase()&#125;)&#125; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯éžå—æŽ§ç»„ä»¶?éžå—æŽ§ç»„ä»¶æ˜¯åœ¨å†…éƒ¨å­˜å‚¨å…¶è‡ªèº«çŠ¶æ€çš„ç»„ä»¶ï¼Œå½“éœ€è¦æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ ref æŸ¥è¯¢ DOM å¹¶æŸ¥æ‰¾å…¶å½“å‰å€¼ã€‚è¿™æœ‰ç‚¹åƒä¼ ç»Ÿçš„ HTMLã€‚ åœ¨ä¸‹é¢çš„ UserProfile ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ ref å¼•ç”¨ name è¾“å…¥æ¡†ï¼š 123456789101112131415161718192021222324class UserProfile extends React.Component &#123; constructor(props) &#123; super(props) this.handleSubmit = this.handleSubmit.bind(this) this.input = React.createRef() &#125; handleSubmit(event) &#123; alert('A name was submitted: ' + this.input.current.value) event.preventDefault() &#125; render() &#123; return ( &lt;form onSubmit=&#123;this.handleSubmit&#125;&gt; &lt;label&gt; &#123;'Name:'&#125; &lt;input type="text" ref=&#123;this.input&#125; /&gt; &lt;/label&gt; &lt;input type="submit" value="Submit" /&gt; &lt;/form&gt; ); &#125;&#125; åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå»ºè®®ä½¿ç”¨å—æŽ§ç»„ä»¶æ¥å®žçŽ°è¡¨å•ã€‚ â¬† è¿”å›žé¡¶éƒ¨ createElement å’Œ cloneElement æœ‰ä»€ä¹ˆåŒºåˆ«?JSX å…ƒç´ å°†è¢«è½¬æ¢ä¸º React.createElement() å‡½æ•°æ¥åˆ›å»º React å…ƒç´ ï¼Œè¿™äº›å¯¹è±¡å°†ç”¨äºŽè¡¨ç¤º UI å¯¹è±¡ã€‚è€Œ cloneElement ç”¨äºŽå…‹éš†å…ƒç´ å¹¶ä¼ é€’æ–°çš„å±žæ€§ã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­çš„æå‡çŠ¶æ€æ˜¯ä»€ä¹ˆ?å½“å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«ç›¸åŒçš„æ›´æ”¹æ•°æ®æ—¶ï¼Œå»ºè®®å°†å…±äº«çŠ¶æ€æå‡åˆ°æœ€æŽ¥è¿‘çš„å…±åŒç¥–å…ˆã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æžœä¸¤ä¸ªå­ç»„ä»¶å…±äº«æ¥è‡ªå…¶çˆ¶ç»„ä»¶çš„ç›¸åŒæ•°æ®ï¼Œåˆ™å°†çŠ¶æ€ç§»åŠ¨åˆ°çˆ¶ç»„ä»¶ï¼Œè€Œä¸æ˜¯åœ¨ä¸¤ä¸ªå­ç»„ä»¶ä¸­ç»´æŠ¤å±€éƒ¨çŠ¶æ€ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µæ˜¯ä»€ä¹ˆ?ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæœ‰ä¸‰ä¸ªä¸åŒçš„ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼š Mounting: ç»„ä»¶å·²å‡†å¤‡å¥½æŒ‚è½½åˆ°æµè§ˆå™¨çš„ DOM ä¸­. æ­¤é˜¶æ®µåŒ…å«æ¥è‡ª constructor(), getDerivedStateFromProps(), render(), å’Œ componentDidMount() ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­çš„åˆå§‹åŒ–è¿‡ç¨‹ã€‚ Updating: åœ¨æ­¤é˜¶æ®µï¼Œç»„ä»¶ä»¥ä¸¤ç§æ–¹å¼æ›´æ–°ï¼Œå‘é€æ–°çš„å±žæ€§å¹¶ä½¿ç”¨ setState() æˆ– forceUpdate() æ–¹æ³•æ›´æ–°çŠ¶æ€. æ­¤é˜¶æ®µåŒ…å« getDerivedStateFromProps(), shouldComponentUpdate(), render(), getSnapshotBeforeUpdate() å’Œ componentDidUpdate() ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ Unmounting: åœ¨è¿™ä¸ªæœ€åŽé˜¶æ®µï¼Œä¸éœ€è¦ç»„ä»¶ï¼Œå®ƒå°†ä»Žæµè§ˆå™¨ DOM ä¸­å¸è½½ã€‚è¿™ä¸ªé˜¶æ®µåŒ…å« componentWillUnmount() ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨å°†æ›´æ”¹åº”ç”¨åˆ° DOM æ—¶ï¼ŒReact å†…éƒ¨ä¹Ÿæœ‰é˜¶æ®µæ¦‚å¿µã€‚å®ƒä»¬æŒ‰å¦‚ä¸‹æ–¹å¼åˆ†éš”å¼€ï¼š Render ç»„ä»¶å°†ä¼šè¿›è¡Œæ— å‰¯ä½œç”¨æ¸²æŸ“ã€‚è¿™é€‚ç”¨äºŽçº¯ç»„ä»¶ï¼ˆPure Componentï¼‰ï¼Œåœ¨æ­¤é˜¶æ®µï¼ŒReact å¯ä»¥æš‚åœï¼Œä¸­æ­¢æˆ–é‡æ–°æ¸²æŸ“ã€‚ Pre-commit åœ¨ç»„ä»¶å®žé™…å°†æ›´æ”¹åº”ç”¨äºŽ DOM ä¹‹å‰ï¼Œæœ‰ä¸€ä¸ªæ—¶åˆ»å…è®¸ React é€šè¿‡getSnapshotBeforeUpdate()æ•èŽ·ä¸€äº› DOM ä¿¡æ¯ï¼ˆä¾‹å¦‚æ»šåŠ¨ä½ç½®ï¼‰ã€‚ Commit React æ“ä½œ DOM å¹¶åˆ†åˆ«æ‰§è¡Œæœ€åŽçš„ç”Ÿå‘½å‘¨æœŸï¼š componentDidMount() åœ¨ DOM æ¸²æŸ“å®ŒæˆåŽè°ƒç”¨, componentDidUpdate() åœ¨ç»„ä»¶æ›´æ–°æ—¶è°ƒç”¨, componentWillUnmount() åœ¨ç»„ä»¶å¸è½½æ—¶è°ƒç”¨ã€‚React 16.3+ é˜¶æ®µ (ä¹Ÿå¯ä»¥çœ‹äº¤äº’å¼ç‰ˆæœ¬) React 16.3 ä¹‹å‰ â¬† è¿”å›žé¡¶éƒ¨ React ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æœ‰å“ªäº›?React 16.3+ getDerivedStateFromProps: åœ¨è°ƒç”¨render()ä¹‹å‰è°ƒç”¨ï¼Œå¹¶åœ¨ æ¯æ¬¡ æ¸²æŸ“æ—¶è°ƒç”¨ã€‚ éœ€è¦ä½¿ç”¨æ´¾ç”ŸçŠ¶æ€çš„æƒ…å†µæ˜¯å¾ˆç½•è§å¾—ã€‚å€¼å¾—é˜…è¯» å¦‚æžœä½ éœ€è¦æ´¾ç”ŸçŠ¶æ€. componentDidMount: é¦–æ¬¡æ¸²æŸ“åŽè°ƒç”¨ï¼Œæ‰€æœ‰å¾— Ajax è¯·æ±‚ã€DOM æˆ–çŠ¶æ€æ›´æ–°ã€è®¾ç½®äº‹ä»¶ç›‘å¬å™¨éƒ½åº”è¯¥åœ¨æ­¤å¤„å‘ç”Ÿã€‚ shouldComponentUpdate: ç¡®å®šç»„ä»¶æ˜¯å¦åº”è¯¥æ›´æ–°ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒè¿”å›žtrueã€‚ å¦‚æžœä½ ç¡®å®šåœ¨æ›´æ–°çŠ¶æ€æˆ–å±žæ€§åŽä¸éœ€è¦æ¸²æŸ“ç»„ä»¶ï¼Œåˆ™å¯ä»¥è¿”å›žfalseå€¼ã€‚ å®ƒæ˜¯ä¸€ä¸ªæé«˜æ€§èƒ½çš„å¥½åœ°æ–¹ï¼Œå› ä¸ºå®ƒå…è®¸ä½ åœ¨ç»„ä»¶æŽ¥æ”¶æ–°å±žæ€§æ—¶é˜»æ­¢é‡æ–°æ¸²æŸ“ã€‚ getSnapshotBeforeUpdate: åœ¨æœ€æ–°çš„æ¸²æŸ“è¾“å‡ºæäº¤ç»™ DOM å‰å°†ä¼šç«‹å³è°ƒç”¨ï¼Œè¿™å¯¹äºŽä»Ž DOM æ•èŽ·ä¿¡æ¯ï¼ˆæ¯”å¦‚ï¼šæ»šåŠ¨ä½ç½®ï¼‰å¾ˆæœ‰ç”¨ã€‚ componentDidUpdate: å®ƒä¸»è¦ç”¨äºŽæ›´æ–° DOM ä»¥å“åº” prop æˆ– state æ›´æ”¹ã€‚ å¦‚æžœshouldComponentUpdate()è¿”å›žfalseï¼Œåˆ™ä¸ä¼šè§¦å‘ã€‚ componentWillUnmount å½“ä¸€ä¸ªç»„ä»¶è¢«ä»Ž DOM ä¸­ç§»é™¤æ—¶ï¼Œè¯¥æ–¹æ³•è¢«è°ƒç”¨ï¼Œå–æ¶ˆç½‘ç»œè¯·æ±‚æˆ–è€…ç§»é™¤ä¸Žè¯¥ç»„ä»¶ç›¸å…³çš„äº‹ä»¶ç›‘å¬ç¨‹åºç­‰åº”è¯¥åœ¨è¿™é‡Œè¿›è¡Œã€‚ Before 16.3 componentWillMount: åœ¨ç»„ä»¶render()å‰æ‰§è¡Œï¼Œç”¨äºŽæ ¹ç»„ä»¶ä¸­çš„åº”ç”¨ç¨‹åºçº§åˆ«é…ç½®ã€‚åº”è¯¥é¿å…åœ¨è¯¥æ–¹æ³•ä¸­å¼•å…¥ä»»ä½•çš„å‰¯ä½œç”¨æˆ–è®¢é˜…ã€‚ componentDidMount: é¦–æ¬¡æ¸²æŸ“åŽè°ƒç”¨ï¼Œæ‰€æœ‰å¾— Ajax è¯·æ±‚ã€DOM æˆ–çŠ¶æ€æ›´æ–°ã€è®¾ç½®äº‹ä»¶ç›‘å¬å™¨éƒ½åº”è¯¥åœ¨æ­¤å¤„å‘ç”Ÿã€‚ componentWillReceiveProps: åœ¨ç»„ä»¶æŽ¥æ”¶åˆ°æ–°å±žæ€§å‰è°ƒç”¨ï¼Œè‹¥ä½ éœ€è¦æ›´æ–°çŠ¶æ€å“åº”å±žæ€§æ”¹å˜ï¼ˆä¾‹å¦‚ï¼Œé‡ç½®å®ƒï¼‰ï¼Œä½ å¯èƒ½éœ€å¯¹æ¯”this.propså’ŒnextPropså¹¶åœ¨è¯¥æ–¹æ³•ä¸­ä½¿ç”¨this.setState()å¤„ç†çŠ¶æ€æ”¹å˜ã€‚ shouldComponentUpdate: ç¡®å®šç»„ä»¶æ˜¯å¦åº”è¯¥æ›´æ–°ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒè¿”å›žtrueã€‚ å¦‚æžœä½ ç¡®å®šåœ¨æ›´æ–°çŠ¶æ€æˆ–å±žæ€§åŽä¸éœ€è¦æ¸²æŸ“ç»„ä»¶ï¼Œåˆ™å¯ä»¥è¿”å›žfalseå€¼ã€‚ å®ƒæ˜¯ä¸€ä¸ªæé«˜æ€§èƒ½çš„å¥½åœ°æ–¹ï¼Œå› ä¸ºå®ƒå…è®¸ä½ åœ¨ç»„ä»¶æŽ¥æ”¶æ–°å±žæ€§æ—¶é˜»æ­¢é‡æ–°æ¸²æŸ“ã€‚ componentWillUpdate: å½“shouldComponentUpdateè¿”å›žtrueåŽé‡æ–°æ¸²æŸ“ç»„ä»¶ä¹‹å‰æ‰§è¡Œï¼Œæ³¨æ„ä½ ä¸èƒ½åœ¨è¿™è°ƒç”¨this.setState() componentDidUpdate: å®ƒä¸»è¦ç”¨äºŽæ›´æ–° DOM ä»¥å“åº” prop æˆ– state æ›´æ”¹ã€‚ å¦‚æžœshouldComponentUpdate()è¿”å›žfalseï¼Œåˆ™ä¸ä¼šè§¦å‘ã€‚ componentWillUnmount: å½“ä¸€ä¸ªç»„ä»¶è¢«ä»Ž DOM ä¸­ç§»é™¤æ—¶ï¼Œè¯¥æ–¹æ³•è¢«è°ƒç”¨ï¼Œå–æ¶ˆç½‘ç»œè¯·æ±‚æˆ–è€…ç§»é™¤ä¸Žè¯¥ç»„ä»¶ç›¸å…³çš„äº‹ä»¶ç›‘å¬ç¨‹åºç­‰åº”è¯¥åœ¨è¿™é‡Œè¿›è¡Œã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰?é«˜é˜¶ç»„ä»¶(HOC) å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸”è¯¥å‡½æ•°æŽ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œå®ƒåªæ˜¯ä¸€ç§æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼æ˜¯ç”±reactè‡ªèº«çš„ç»„åˆæ€§è´¨å¿…ç„¶äº§ç”Ÿçš„ã€‚ æˆ‘ä»¬å°†å®ƒä»¬ç§°ä¸ºçº¯ç»„ä»¶ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥æŽ¥å—ä»»ä½•åŠ¨æ€æä¾›çš„å­ç»„ä»¶ï¼Œä½†å®ƒä»¬ä¸ä¼šä¿®æ”¹æˆ–å¤åˆ¶å…¶è¾“å…¥ç»„ä»¶ä¸­çš„ä»»ä½•è¡Œä¸ºã€‚ 1const EnhancedComponent = higherOrderComponent(WrappedComponent) HOC æœ‰å¾ˆå¤šç”¨ä¾‹ï¼š ä»£ç å¤ç”¨ï¼Œé€»è¾‘æŠ½è±¡åŒ– æ¸²æŸ“åŠ«æŒ æŠ½è±¡åŒ–å’Œæ“ä½œçŠ¶æ€ï¼ˆstateï¼‰ æ“ä½œå±žæ€§ï¼ˆpropsï¼‰ è¯‘æ³¨ï¼šæ›´è¯¦ç»†ç”¨æ³•è¯·å‚è€ƒé«˜é˜¶ç»„ä»¶çš„ä½¿ç”¨ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ä¸ºé«˜é˜¶ç»„ä»¶åˆ›å»ºå±žæ€§ä»£ç†?ä½ å¯ä»¥ä½¿ç”¨å±žæ€§ä»£ç†æ¨¡å¼å‘è¾“å…¥ç»„ä»¶å¢žåŠ æˆ–ç¼–è¾‘å±žæ€§ï¼ˆpropsï¼‰ï¼š 1234567891011121314function HOC(WrappedComponent) &#123; return class Test extends Component &#123; render() &#123; const newProps = &#123; title: 'New Header', footer: false, showFeatureX: false, showFeatureY: true &#125;; return &lt;WrappedComponent &#123;...this.props&#125; &#123;...newProps&#125; /&gt; &#125; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰?Context é€šè¿‡ç»„ä»¶æ ‘æä¾›äº†ä¸€ä¸ªä¼ é€’æ•°æ®çš„æ–¹æ³•ï¼Œä»Žè€Œé¿å…äº†åœ¨æ¯ä¸€ä¸ªå±‚çº§æ‰‹åŠ¨çš„ä¼ é€’propsã€‚æ¯”å¦‚ï¼Œéœ€è¦åœ¨åº”ç”¨ä¸­è®¸å¤šç»„ä»¶éœ€è¦è®¿é—®ç™»å½•ç”¨æˆ·ä¿¡æ¯ã€åœ°åŒºåå¥½ã€UIä¸»é¢˜ç­‰ã€‚ 123456789101112131415161718192021222324252627282930// åˆ›å»ºä¸€ä¸ª theme Context, é»˜è®¤ theme çš„å€¼ä¸º lightconst ThemeContext = React.createContext('light');function ThemedButton(props) &#123; // ThemedButton ç»„ä»¶ä»Ž context æŽ¥æ”¶ theme return ( &lt;ThemeContext.Consumer&gt; &#123;theme =&gt; &lt;Button &#123;...props&#125; theme=&#123;theme&#125; /&gt;&#125; &lt;/ThemeContext.Consumer&gt; );&#125;// ä¸­é—´ç»„ä»¶function Toolbar(props) &#123; return ( &lt;div&gt; &lt;ThemedButton /&gt; &lt;/div&gt; );&#125;class App extends React.Component &#123; render() &#123; return ( &lt;ThemeContext.Provider value="dark"&gt; &lt;Toolbar /&gt; &lt;/ThemeContext.Provider&gt; ); &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ children å±žæ€§æ˜¯ä»€ä¹ˆ?Children æ˜¯ä¸€ä¸ªå±žæ€§ï¼ˆthis.props.chldrenï¼‰ï¼Œå®ƒå…è®¸ä½ å°†ç»„ä»¶ä½œä¸ºæ•°æ®ä¼ é€’ç»™å…¶ä»–ç»„ä»¶ï¼Œå°±åƒä½ ä½¿ç”¨çš„ä»»ä½•å…¶ä»–ç»„ä»¶ä¸€æ ·ã€‚åœ¨ç»„ä»¶çš„å¼€å§‹å’Œç»“æŸæ ‡è®°ä¹‹é—´æ”¾ç½®çš„ç»„ä»¶æ ‘å°†ä½œä¸ºchildrenå±žæ€§ä¼ é€’ç»™è¯¥ç»„ä»¶ã€‚ React API ä¸­æœ‰è®¸å¤šæ–¹æ³•ä¸­æä¾›äº†è¿™ä¸ªä¸é€æ˜Žæ•°æ®ç»“æž„çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼šReact.Children.mapã€React.Children.forEachã€React.Children.countã€React.Children.onlyã€React.Children.toArrayã€‚ 12345678910111213const MyDiv = React.createClass(&#123; render: function() &#123; return &lt;div&gt;&#123;this.props.children&#125;&lt;/div&gt; &#125;&#125;)ReactDOM.render( &lt;MyDiv&gt; &lt;span&gt;&#123;'Hello'&#125;&lt;/span&gt; &lt;span&gt;&#123;'World'&#125;&lt;/span&gt; &lt;/MyDiv&gt;, node) â¬† è¿”å›žé¡¶éƒ¨ æ€Žæ ·åœ¨ React ä¸­å†™æ³¨é‡Š?React/JSX ä¸­çš„æ³¨é‡Šç±»ä¼¼äºŽ JavaScript çš„å¤šè¡Œæ³¨é‡Šï¼Œä½†æ˜¯æ˜¯ç”¨å¤§æ‹¬å·æ‹¬èµ·æ¥ã€‚ å•è¡Œæ³¨é‡Šï¼š 1234&lt;div&gt; &#123;/* å•è¡Œæ³¨é‡Šï¼ˆåœ¨åŽŸç”Ÿ JavaScript ä¸­ï¼Œå•è¡Œæ³¨é‡Šç”¨åŒæ–œæ ï¼ˆ//ï¼‰è¡¨ç¤ºï¼‰ */&#125; &#123;`Welcome $&#123;user&#125;, let's play React`&#125;&lt;/div&gt; å¤šè¡Œæ³¨é‡Šï¼š 12345&lt;div&gt; &#123;/* å¤šè¡Œæ³¨é‡Šè¶…è¿‡ ä¸€è¡Œ */&#125; &#123;`Welcome $&#123;user&#125;, let's play React`&#125;&lt;/div&gt; â¬† è¿”å›žé¡¶éƒ¨ æž„é€ å‡½æ•°ä½¿ç”¨å¸¦ props å‚æ•°çš„ç›®çš„æ˜¯ä»€ä¹ˆ?åœ¨è°ƒç”¨super()æ–¹æ³•ä¹‹å‰ï¼Œå­ç±»æž„é€ å‡½æ•°ä¸èƒ½ä½¿ç”¨thiså¼•ç”¨ã€‚è¿™åŒæ ·é€‚ç”¨äºŽES6å­ç±»ã€‚å°†propså‚æ•°ä¼ é€’ç»™super()çš„ä¸»è¦åŽŸå› æ˜¯ä¸ºäº†åœ¨å­æž„é€ å‡½æ•°ä¸­è®¿é—®this.propsã€‚ å¸¦ props å‚æ•°: 1234567class MyComponent extends React.Component &#123; constructor(props) &#123; super(props) console.log(this.props) // prints &#123; name: 'John', age: 42 &#125; &#125;&#125; ä¸å¸¦ props å‚æ•°: 123456789101112131415class MyComponent extends React.Component &#123; constructor(props) &#123; super() console.log(this.props) // prints undefined // but props parameter is still available console.log(props) // prints &#123; name: 'John', age: 42 &#125; &#125; render() &#123; // no difference outside constructor console.log(this.props) // prints &#123; name: 'John', age: 42 &#125; &#125;&#125; ä¸Šé¢çš„ä»£ç ç‰‡æ®µæ˜¾ç¤ºthis.propsä»…åœ¨æž„é€ å‡½æ•°ä¸­æœ‰æ‰€ä¸åŒã€‚ å®ƒåœ¨æž„é€ å‡½æ•°ä¹‹å¤–æ˜¯ç›¸åŒçš„ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯è°ƒè§£?å½“ç»„ä»¶çš„propsæˆ–stateå‘ç”Ÿæ›´æ”¹æ—¶ï¼ŒReact é€šè¿‡å°†æ–°è¿”å›žçš„å…ƒç´ ä¸Žå…ˆå‰å‘ˆçŽ°çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒæ¥ç¡®å®šæ˜¯å¦éœ€è¦å®žé™…çš„ DOM æ›´æ–°ã€‚å½“å®ƒä»¬ä¸ç›¸ç­‰æ—¶ï¼ŒReact å°†æ›´æ–° DOM ã€‚æ­¤è¿‡ç¨‹ç§°ä¸ºreconciliationã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ä½¿ç”¨åŠ¨æ€å±žæ€§åè®¾ç½® state ?å¦‚æžœä½ ä½¿ç”¨ ES6 æˆ– Babel è½¬æ¢å™¨æ¥è½¬æ¢ä½ çš„ JSX ä»£ç ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨è®¡ç®—å±žæ€§åç§°æ¥å®Œæˆæ­¤æ“ä½œã€‚ 123handleInputChange(event) &#123; this.setState(&#123; [event.target.id]: event.target.value &#125;)&#125; â¬† è¿”å›žé¡¶éƒ¨ æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶è°ƒç”¨å‡½æ•°çš„å¸¸è§é”™è¯¯æ˜¯ä»€ä¹ˆ?ä½ éœ€è¦ç¡®ä¿åœ¨å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’æ—¶æœªè°ƒç”¨è¯¥å‡½æ•°ã€‚ 1234render() &#123; // Wrong: handleClick is called instead of passed as a reference! return &lt;button onClick=&#123;this.handleClick()&#125;&gt;&#123;'Click Me'&#125;&lt;/button&gt;&#125; ç›¸ååœ°ï¼Œä¼ é€’å‡½æ•°æœ¬èº«åº”è¯¥æ²¡æœ‰æ‹¬å·ï¼š 1234render() &#123; // Correct: handleClick is passed as a reference! return &lt;button onClick=&#123;this.handleClick&#125;&gt;&#123;'Click Me'&#125;&lt;/button&gt;&#125; â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆæœ‰ç»„ä»¶åç§°è¦é¦–å­—æ¯å¤§å†™?è¿™æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºç»„ä»¶ä¸æ˜¯ DOM å…ƒç´ ï¼Œå®ƒä»¬æ˜¯æž„é€ å‡½æ•°ã€‚ æ­¤å¤–ï¼Œåœ¨ JSX ä¸­ï¼Œå°å†™æ ‡è®°åç§°æ˜¯æŒ‡ HTML å…ƒç´ ï¼Œè€Œä¸æ˜¯ç»„ä»¶ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆ React ä½¿ç”¨ className è€Œä¸æ˜¯ class å±žæ€§?class æ˜¯ JavaScript ä¸­çš„å…³é”®å­—ï¼Œè€Œ JSX æ˜¯ JavaScript çš„æ‰©å±•ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ React ä½¿ç”¨ className è€Œä¸æ˜¯ class çš„ä¸»è¦åŽŸå› ã€‚ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸º className å±žæ€§ã€‚ 123render() &#123; return &lt;span className=&#123;'menu navigation-menu'&#125;&gt;&#123;'Menu'&#125;&lt;/span&gt;&#125; åœ¨å®žé™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨classnamesæ¥æ–¹ä¾¿æˆ‘ä»¬æ“ä½œclassNameã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Fragments ?å®ƒæ˜¯ React ä¸­çš„å¸¸è§æ¨¡å¼ï¼Œç”¨äºŽç»„ä»¶è¿”å›žå¤šä¸ªå…ƒç´ ã€‚Fragments å¯ä»¥è®©ä½ èšåˆä¸€ä¸ªå­å…ƒç´ åˆ—è¡¨ï¼Œè€Œæ— éœ€å‘ DOM æ·»åŠ é¢å¤–èŠ‚ç‚¹ã€‚ 123456789render() &#123; return ( &lt;React.Fragment&gt; &lt;ChildA /&gt; &lt;ChildB /&gt; &lt;ChildC /&gt; &lt;/React.Fragment&gt; )&#125; ä»¥ä¸‹æ˜¯ç®€æ´è¯­æ³•ï¼Œä½†æ˜¯åœ¨ä¸€äº›å·¥å…·ä¸­è¿˜ä¸æ”¯æŒï¼š 123456789render() &#123; return ( &lt;&gt; &lt;ChildA /&gt; &lt;ChildB /&gt; &lt;ChildC /&gt; &lt;/&gt; )&#125; è¯‘æ³¨ï¼šReact 16 ä»¥å‰ï¼Œrender å‡½æ•°çš„è¿”å›žå¿…é¡»æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå¦åˆ™æŠ¥é”™ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆä½¿ç”¨ Fragments æ¯”ä½¿ç”¨å®¹å™¨ div æ›´å¥½? é€šè¿‡ä¸åˆ›å»ºé¢å¤–çš„ DOM èŠ‚ç‚¹ï¼ŒFragments æ›´å¿«å¹¶ä¸”ä½¿ç”¨æ›´å°‘çš„å†…å­˜ã€‚è¿™åœ¨éžå¸¸å¤§è€Œæ·±çš„èŠ‚ç‚¹æ ‘æ—¶å¾ˆæœ‰å¥½å¤„ã€‚ ä¸€äº› CSS æœºåˆ¶å¦‚Flexboxå’ŒCSS Gridå…·æœ‰ç‰¹æ®Šçš„çˆ¶å­å…³ç³»ï¼Œå¦‚æžœåœ¨ä¸­é—´æ·»åŠ  div å°†ä½¿å¾—å¾ˆéš¾ä¿æŒæ‰€éœ€çš„ç»“æž„ã€‚ åœ¨ DOM å®¡æŸ¥å™¨ä¸­ä¸ä¼šé‚£ä¹ˆçš„æ‚ä¹±ã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­ä»€ä¹ˆæ˜¯ Portal ?Portal æä¾›äº†ä¸€ç§å¾ˆå¥½çš„å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°çˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹çš„æ–¹å¼ã€‚ 1ReactDOM.createPortal(child, container) ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä»»ä½•å¯æ¸²æŸ“çš„ React å­èŠ‚ç‚¹ï¼Œä¾‹å¦‚å…ƒç´ ï¼Œå­—ç¬¦ä¸²æˆ–ç‰‡æ®µã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ DOM å…ƒç´ ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯æ— çŠ¶æ€ç»„ä»¶?å¦‚æžœè¡Œä¸ºç‹¬ç«‹äºŽå…¶çŠ¶æ€ï¼Œåˆ™å®ƒå¯ä»¥æ˜¯æ— çŠ¶æ€ç»„ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨å‡½æ•°æˆ–ç±»æ¥åˆ›å»ºæ— çŠ¶æ€ç»„ä»¶ã€‚ä½†é™¤éžä½ éœ€è¦åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå¦åˆ™ä½ åº”è¯¥é€‰æ‹©å‡½æ•°ç»„ä»¶ã€‚æ— çŠ¶æ€ç»„ä»¶æœ‰å¾ˆå¤šå¥½å¤„ï¼š å®ƒä»¬æ˜“äºŽç¼–å†™ï¼Œç†è§£å’Œæµ‹è¯•ï¼Œé€Ÿåº¦æ›´å¿«ï¼Œè€Œä¸”ä½ å¯ä»¥å®Œå…¨é¿å…ä½¿ç”¨thiså…³é”®å­—ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯æœ‰çŠ¶æ€ç»„ä»¶?å¦‚æžœç»„ä»¶çš„è¡Œä¸ºä¾èµ–äºŽç»„ä»¶çš„stateï¼Œé‚£ä¹ˆå®ƒå¯ä»¥è¢«ç§°ä¸ºæœ‰çŠ¶æ€ç»„ä»¶ã€‚è¿™äº›æœ‰çŠ¶æ€ç»„ä»¶æ€»æ˜¯ç±»ç»„ä»¶ï¼Œå¹¶ä¸”å…·æœ‰åœ¨constructorä¸­åˆå§‹åŒ–çš„çŠ¶æ€ã€‚ 12345678910class App extends Component &#123; constructor(props) &#123; super(props) this.state = &#123; count: 0 &#125; &#125; render() &#123; // ... &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­å¦‚ä½•æ ¡éªŒ props å±žæ€§?å½“åº”ç”¨ç¨‹åºä»¥å¼€å‘æ¨¡å¼è¿è¡Œçš„æ—¶ï¼ŒReact å°†ä¼šè‡ªåŠ¨æ£€æŸ¥æˆ‘ä»¬åœ¨ç»„ä»¶ä¸Šè®¾ç½®çš„æ‰€æœ‰å±žæ€§ï¼Œä»¥ç¡®ä¿å®ƒä»¬å…·æœ‰æ­£ç¡®çš„ç±»åž‹ã€‚å¦‚æžœç±»åž‹ä¸æ­£ç¡®ï¼ŒReact å°†åœ¨æŽ§åˆ¶å°ä¸­ç”Ÿæˆè­¦å‘Šä¿¡æ¯ã€‚ç”±äºŽæ€§èƒ½å½±å“ï¼Œå®ƒåœ¨ç”Ÿäº§æ¨¡å¼ä¸‹è¢«ç¦ç”¨ã€‚ä½¿ç”¨ isRequired å®šä¹‰å¿…å¡«å±žæ€§ã€‚ é¢„å®šä¹‰çš„ prop ç±»åž‹ï¼š PropTypes.number PropTypes.string PropTypes.array PropTypes.object PropTypes.func PropTypes.node PropTypes.element PropTypes.bool PropTypes.symbol PropTypes.any æˆ‘ä»¬å¯ä»¥ä¸º User ç»„ä»¶å®šä¹‰ propTypesï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112131415161718import React from 'react'import PropTypes from 'prop-types'class User extends React.Component &#123; static propTypes = &#123; name: PropTypes.string.isRequired, age: PropTypes.number.isRequired &#125; render() &#123; return ( &lt;&gt; &lt;h1&gt;&#123;`Welcome, $&#123;this.props.name&#125;`&#125;&lt;/h1&gt; &lt;h2&gt;&#123;`Age, $&#123;this.props.age&#125;`&#125;&lt;/h2&gt; &lt;/&gt; ) &#125;&#125; æ³¨æ„: åœ¨ React v15.5 ä¸­ï¼ŒPropTypes ä»Ž React.PropTypes è¢«ç§»åŠ¨åˆ° prop-types åº“ä¸­ã€‚ â¬† è¿”å›žé¡¶éƒ¨ React çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆ? ä½¿ç”¨ Virtual DOM æé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚ JSX ä½¿ä»£ç æ˜“äºŽè¯»å†™ã€‚ å®ƒæ”¯æŒåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ¸²æŸ“ã€‚ æ˜“äºŽä¸Žæ¡†æž¶ï¼ˆAngularï¼ŒBackboneï¼‰é›†æˆï¼Œå› ä¸ºå®ƒåªæ˜¯ä¸€ä¸ªè§†å›¾åº“ã€‚ ä½¿ç”¨ Jest ç­‰å·¥å…·è½»æ¾ç¼–å†™å•å…ƒä¸Žé›†æˆæµ‹è¯•ã€‚ â¬† è¿”å›žé¡¶éƒ¨ React çš„å±€é™æ€§æ˜¯ä»€ä¹ˆ? React åªæ˜¯ä¸€ä¸ªè§†å›¾åº“ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ¡†æž¶ã€‚ å¯¹äºŽ Web å¼€å‘åˆå­¦è€…æ¥è¯´ï¼Œæœ‰ä¸€ä¸ªå­¦ä¹ æ›²çº¿ã€‚ å°† React é›†æˆåˆ°ä¼ ç»Ÿçš„ MVC æ¡†æž¶ä¸­éœ€è¦ä¸€äº›é¢å¤–çš„é…ç½®ã€‚ ä»£ç å¤æ‚æ€§éšç€å†…è”æ¨¡æ¿å’Œ JSX çš„å¢žåŠ è€Œå¢žåŠ ã€‚ å¤ªå¤šè¾ƒå°çš„ç»„ä»¶å¯¼è‡´è¿‡åº¦å·¥ç¨‹åŒ–æˆ–æ ·æ¿æ–‡ä»¶ã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React v16 ä¸­çš„é”™è¯¯è¾¹ç•Œæ˜¯ä»€ä¹ˆ?é”™è¯¯è¾¹ç•Œæ˜¯åœ¨å…¶å­ç»„ä»¶æ ‘ä¸­çš„ä»»ä½•ä½ç½®æ•èŽ· JavaScript é”™è¯¯ã€è®°å½•è¿™äº›é”™è¯¯å¹¶æ˜¾ç¤ºå›žé€€ UI è€Œä¸æ˜¯å´©æºƒçš„ç»„ä»¶æ ‘çš„ç»„ä»¶ã€‚ å¦‚æžœä¸€ä¸ªç±»ç»„ä»¶å®šä¹‰äº†ä¸€ä¸ªåä¸º componentDidCatch(error, info) æˆ– static getDerivedStateFromError() æ–°çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œåˆ™è¯¥ç±»ç»„ä»¶å°†æˆä¸ºé”™è¯¯è¾¹ç•Œï¼š 123456789101112131415161718192021222324class ErrorBoundary extends React.Component &#123; constructor(props) &#123; super(props) this.state = &#123; hasError: false &#125; &#125; componentDidCatch(error, info) &#123; // You can also log the error to an error reporting service logErrorToMyService(error, info) &#125; static getDerivedStateFromError(error) &#123; // Update state so the next render will show the fallback UI. return &#123; hasError: true &#125;; &#125; render() &#123; if (this.state.hasError) &#123; // You can render any custom fallback UI return &lt;h1&gt;&#123;'Something went wrong.'&#125;&lt;/h1&gt; &#125; return this.props.children &#125;&#125; ä¹‹åŽï¼Œå°†å…¶ä½œä¸ºå¸¸è§„ç»„ä»¶ä½¿ç”¨ï¼š 123&lt;ErrorBoundary&gt; &lt;MyWidget /&gt;&lt;/ErrorBoundary&gt; â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React v15 ä¸­å¦‚ä½•å¤„ç†é”™è¯¯è¾¹ç•Œ?React v15 ä½¿ç”¨ unstable_handleError æ–¹æ³•ä¸ºé”™è¯¯è¾¹ç•Œæä¾›äº†éžå¸¸åŸºç¡€çš„æ”¯æŒã€‚å·²åœ¨ React v16 ä¸­ï¼Œå°†å…¶é‡å‘½åä¸ºcomponentDidCatchã€‚ â¬† è¿”å›žé¡¶éƒ¨ é™æ€ç±»åž‹æ£€æŸ¥æŽ¨èçš„æ–¹æ³•æ˜¯ä»€ä¹ˆ?é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨ PropTypes åº“ï¼ˆåœ¨ React v15.5 ä¹‹åŽ React.PropTypes è¢«ç§»åŠ¨åˆ°äº† prop-types åŒ…ä¸­ï¼‰ï¼Œåœ¨ React åº”ç”¨ç¨‹åºä¸­æ‰§è¡Œç±»åž‹æ£€æŸ¥ã€‚å¯¹äºŽå¤§åž‹é¡¹ç›®ï¼Œå»ºè®®ä½¿ç”¨é™æ€ç±»åž‹æ£€æŸ¥å™¨ï¼Œæ¯”å¦‚ Flow æˆ– TypeScriptï¼Œå®ƒä»¬åœ¨ç¼–è¯‘æ—¶æ‰§è¡Œç±»åž‹æ£€æŸ¥å¹¶æä¾› auto-completion åŠŸèƒ½ã€‚ â¬† è¿”å›žé¡¶éƒ¨ react-dom åŒ…çš„ç”¨é€”æ˜¯ä»€ä¹ˆ?react-dom åŒ…æä¾›äº†ç‰¹å®šçš„ DOM æ–¹æ³•ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºçš„é¡¶å±‚ä½¿ç”¨ã€‚å¤§å¤šæ•°çš„ç»„ä»¶ä¸éœ€è¦ä½¿ç”¨æ­¤æ¨¡å—ã€‚è¯¥æ¨¡å—ä¸­æä¾›çš„ä¸€äº›æ–¹æ³•å¦‚ä¸‹ï¼š render() hydrate() unmountComponentAtNode() findDOMNode() createPortal() â¬† è¿”å›žé¡¶éƒ¨ react-dom ä¸­ render æ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆ?æ­¤æ–¹æ³•ç”¨äºŽå°† React å…ƒç´ æ¸²æŸ“åˆ°æ‰€æä¾›å®¹å™¨ä¸­çš„ DOM ç»“æž„ä¸­ï¼Œå¹¶è¿”å›žå¯¹ç»„ä»¶çš„å¼•ç”¨ã€‚å¦‚æžœ React å…ƒç´ ä¹‹å‰å·²è¢«æ¸²æŸ“åˆ°å®¹å™¨ä¸­ï¼Œå®ƒå°†å¯¹å…¶æ‰§è¡Œæ›´æ–°ï¼Œå¹¶ä¸”åªåœ¨éœ€è¦æ—¶æ”¹å˜ DOM ä»¥åæ˜ æœ€æ–°çš„æ›´æ”¹ã€‚ 1ReactDOM.render(element, container[, callback]) å¦‚æžœæä¾›äº†å¯é€‰çš„å›žè°ƒå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†åœ¨ç»„ä»¶è¢«æ¸²æŸ“æˆ–æ›´æ–°åŽæ‰§è¡Œã€‚ â¬† è¿”å›žé¡¶éƒ¨ ReactDOMServer æ˜¯ä»€ä¹ˆ?ReactDOMServer å¯¹è±¡ä½¿ä½ èƒ½å¤Ÿå°†ç»„ä»¶æ¸²æŸ“ä¸ºé™æ€æ ‡è®°ï¼ˆé€šå¸¸ç”¨äºŽ Node æœåŠ¡å™¨ä¸­ï¼‰ï¼Œæ­¤å¯¹è±¡ä¸»è¦ç”¨äºŽæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ã€‚ä»¥ä¸‹æ–¹æ³•å¯ç”¨äºŽæœåŠ¡å™¨å’Œæµè§ˆå™¨çŽ¯å¢ƒï¼š renderToString() renderToStaticMarkup() ä¾‹å¦‚ï¼Œä½ é€šå¸¸è¿è¡ŒåŸºäºŽ Node çš„ Web æœåŠ¡å™¨ï¼Œå¦‚ Expressï¼ŒHapi æˆ– Koaï¼Œç„¶åŽä½ è°ƒç”¨ renderToString å°†æ ¹ç»„ä»¶æ¸²æŸ“ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åŽä½œä¸ºå“åº”è¿›è¡Œå‘é€ã€‚ 1234567891011// using Expressimport &#123; renderToString &#125; from 'react-dom/server'import MyPage from './MyPage'app.get('/', (req, res) =&gt; &#123; res.write('&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;My Page&lt;/title&gt;&lt;/head&gt;&lt;body&gt;') res.write('&lt;div id="content"&gt;') res.write(renderToString(&lt;MyPage/&gt;)) res.write('&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;') res.end()&#125;) â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­å¦‚ä½•ä½¿ç”¨ innerHTML?dangerouslySetInnerHTML å±žæ€§æ˜¯ React ç”¨æ¥æ›¿ä»£åœ¨æµè§ˆå™¨ DOM ä¸­ä½¿ç”¨ innerHTMLã€‚ä¸Ž innerHTML ä¸€æ ·ï¼Œè€ƒè™‘åˆ°è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ï¼Œä½¿ç”¨æ­¤å±žæ€§ä¹Ÿæ˜¯æœ‰é£Žé™©çš„ã€‚ä½¿ç”¨æ—¶ï¼Œä½ åªéœ€ä¼ é€’ä»¥ __html ä½œä¸ºé”®ï¼Œè€Œ HTML æ–‡æœ¬ä½œä¸ºå¯¹åº”å€¼çš„å¯¹è±¡ã€‚ åœ¨æœ¬ç¤ºä¾‹ä¸­ MyComponent ç»„ä»¶ä½¿ç”¨ dangerouslySetInnerHTML å±žæ€§æ¥è®¾ç½® HTML æ ‡è®°ï¼š 1234567function createMarkup() &#123; return &#123; __html: 'First &amp;middot; Second' &#125;&#125;function MyComponent() &#123; return &lt;div dangerouslySetInnerHTML=&#123;createMarkup()&#125; /&gt;&#125; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨æ ·å¼?style å±žæ€§æŽ¥å—å«æœ‰ camelCasedï¼ˆé©¼å³°ï¼‰å±žæ€§çš„ JavaScript å¯¹è±¡ï¼Œè€Œä¸æ˜¯ CSS å­—ç¬¦ä¸²ã€‚è¿™ä¸Ž DOM æ ·å¼ä¸­çš„ JavaScript å±žæ€§ä¸€è‡´ï¼Œæ•ˆçŽ‡æ›´é«˜ï¼Œå¹¶ä¸”å¯ä»¥é˜²æ­¢ XSS å®‰å…¨æ¼æ´žã€‚ 12345678const divStyle = &#123; color: 'blue', backgroundImage: 'url(' + imgUrl + ')'&#125;;function HelloWorldComponent() &#123; return &lt;div style=&#123;divStyle&#125;&gt;Hello World!&lt;/div&gt;&#125; ä¸ºäº†ä¸Žåœ¨ JavaScript ä¸­è®¿é—® DOM èŠ‚ç‚¹ä¸Šçš„å±žæ€§ä¿æŒä¸€è‡´ï¼Œæ ·å¼é”®é‡‡ç”¨äº† camelcasedï¼ˆä¾‹å¦‚node.style.backgroundImageï¼‰ã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­äº‹ä»¶æœ‰ä½•ä¸åŒ?å¤„ç† React å…ƒç´ ä¸­çš„äº‹ä»¶æœ‰ä¸€äº›è¯­æ³•å·®å¼‚ï¼š React äº‹ä»¶å¤„ç†ç¨‹åºæ˜¯é‡‡ç”¨é©¼å³°è€Œä¸æ˜¯å°å†™æ¥å‘½åçš„ã€‚ ä½¿ç”¨ JSXï¼Œä½ å°†ä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸æ˜¯å­—ç¬¦ä¸²ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚æžœåœ¨æž„é€ å‡½æ•°ä¸­ä½¿ç”¨ setState() ä¼šå‘ç”Ÿä»€ä¹ˆ?å½“ä½ ä½¿ç”¨ setState() æ—¶ï¼Œé™¤äº†è®¾ç½®çŠ¶æ€å¯¹è±¡ä¹‹å¤–ï¼ŒReact è¿˜ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶åŠå…¶æ‰€æœ‰çš„å­ç»„ä»¶ã€‚ä½ ä¼šå¾—åˆ°è¿™æ ·çš„é”™è¯¯ï¼šCan only update a mounted or mounting component.ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦åœ¨æž„é€ å‡½æ•°ä¸­ä½¿ç”¨ this.state åˆå§‹åŒ–çŠ¶æ€ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ç´¢å¼•ä½œä¸ºé”®çš„å½±å“æ˜¯ä»€ä¹ˆ?Keys åº”è¯¥æ˜¯ç¨³å®šçš„ï¼Œå¯é¢„æµ‹çš„å’Œå”¯ä¸€çš„ï¼Œè¿™æ · React å°±èƒ½å¤Ÿè·Ÿè¸ªå…ƒç´ ã€‚ åœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæ¯ä¸ªå…ƒç´ çš„é”®å°†åŸºäºŽåˆ—è¡¨é¡¹çš„é¡ºåºï¼Œè€Œä¸æ˜¯ç»‘å®šåˆ°å³å°†å±•ç¤ºçš„æ•°æ®ä¸Šã€‚è¿™å°†é™åˆ¶ React èƒ½å¤Ÿå®žçŽ°çš„ä¼˜åŒ–ã€‚ 123456&#123;todos.map((todo, index) =&gt; &lt;Todo &#123;...todo&#125; key=&#123;index&#125; /&gt;)&#125; å‡è®¾ todo.id å¯¹æ­¤åˆ—è¡¨æ˜¯å”¯ä¸€ä¸”ç¨³å®šçš„ï¼Œå¦‚æžœå°†æ­¤æ•°æ®ä½œä¸ºå”¯ä¸€é”®ï¼Œé‚£ä¹ˆ React å°†èƒ½å¤Ÿå¯¹å…ƒç´ è¿›è¡Œé‡æ–°æŽ’åºï¼Œè€Œæ— éœ€é‡æ–°åˆ›å»ºå®ƒä»¬ã€‚ 1234&#123;todos.map((todo) =&gt; &lt;Todo &#123;...todo&#125; key=&#123;todo.id&#125; /&gt;)&#125; â¬† è¿”å›žé¡¶éƒ¨ åœ¨ componentWillMount() æ–¹æ³•ä¸­ä½¿ç”¨ setState() å¥½å—?å»ºè®®é¿å…åœ¨ componentWillMount() ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­æ‰§è¡Œå¼‚æ­¥åˆå§‹åŒ–ã€‚åœ¨ mounting å‘ç”Ÿä¹‹å‰ä¼šç«‹å³è°ƒç”¨ componentWillMount()ï¼Œä¸”å®ƒåœ¨ render() ä¹‹å‰è¢«è°ƒç”¨ï¼Œå› æ­¤åœ¨æ­¤æ–¹æ³•ä¸­æ›´æ–°çŠ¶æ€å°†ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚åº”é¿å…åœ¨æ­¤æ–¹æ³•ä¸­å¼•å…¥ä»»ä½•å‰¯ä½œç”¨æˆ–è®¢é˜…æ“ä½œã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿å¯¹ç»„ä»¶åˆå§‹åŒ–çš„å¼‚æ­¥è°ƒç”¨å‘ç”Ÿåœ¨ componentDidMount() ä¸­ï¼Œè€Œä¸æ˜¯åœ¨ componentWillMount() ä¸­ã€‚ 12345678componentDidMount() &#123; axios.get(`api/todos`) .then((result) =&gt; &#123; this.setState(&#123; messages: [...result.data] &#125;) &#125;)&#125; **[â¬† è¿”å›žé¡¶éƒ¨](#ç›®å½•)** å¦‚æžœåœ¨åˆå§‹çŠ¶æ€ä¸­ä½¿ç”¨ props å±žæ€§ä¼šå‘ç”Ÿä»€ä¹ˆ?å¦‚æžœåœ¨ä¸åˆ·æ–°ç»„ä»¶çš„æƒ…å†µä¸‹æ›´æ”¹ç»„ä»¶ä¸Šçš„å±žæ€§ï¼Œåˆ™ä¸ä¼šæ˜¾ç¤ºæ–°çš„å±žæ€§å€¼ï¼Œå› ä¸ºæž„é€ å‡½æ•°å‡½æ•°æ°¸è¿œä¸ä¼šæ›´æ–°ç»„ä»¶çš„å½“å‰çŠ¶æ€ã€‚åªæœ‰åœ¨é¦–æ¬¡åˆ›å»ºç»„ä»¶æ—¶æ‰ä¼šç”¨ props å±žæ€§åˆå§‹åŒ–çŠ¶æ€ã€‚ ä»¥ä¸‹ç»„ä»¶å°†ä¸æ˜¾ç¤ºæ›´æ–°çš„è¾“å…¥å€¼ï¼š 1234567891011121314class MyComponent extends React.Component &#123; constructor(props) &#123; super(props) this.state = &#123; records: [], inputValue: this.props.inputValue &#125;; &#125; render() &#123; return &lt;div&gt;&#123;this.state.inputValue&#125;&lt;/div&gt; &#125;&#125; åœ¨ render æ–¹æ³•ä½¿ç”¨ä½¿ç”¨ props å°†ä¼šæ˜¾ç¤ºæ›´æ–°çš„å€¼ï¼š 12345678910111213class MyComponent extends React.Component &#123; constructor(props) &#123; super(props) this.state = &#123; record: [] &#125; &#125; render() &#123; return &lt;div&gt;&#123;this.props.inputValue&#125;&lt;/div&gt; &#125;&#125; **[â¬† è¿”å›žé¡¶éƒ¨](#ç›®å½•)** å¦‚ä½•æœ‰æ¡ä»¶åœ°æ¸²æŸ“ç»„ä»¶?åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¸Œæœ›æ ¹æ®æŸäº›çŠ¶æ€æ¸²æŸ“ä¸åŒçš„ç»„ä»¶ã€‚ JSX ä¸ä¼šæ¸²æŸ“ false æˆ– undefinedï¼Œå› æ­¤ä½ å¯ä»¥ä½¿ç”¨ &amp;&amp; è¿ç®—ç¬¦ï¼Œåœ¨æŸä¸ªæ¡ä»¶ä¸º true æ—¶ï¼Œæ¸²æŸ“ç»„ä»¶ä¸­æŒ‡å®šçš„å†…å®¹ã€‚ 12345678const MyComponent = (&#123; name, address &#125;) =&gt; ( &lt;div&gt; &lt;h2&gt;&#123;name&#125;&lt;/h2&gt; &#123;address &amp;&amp; &lt;p&gt;&#123;address&#125;&lt;/p&gt; &#125; &lt;/div&gt;) å¦‚æžœä½ éœ€è¦ä¸€ä¸ª if-else æ¡ä»¶ï¼Œé‚£ä¹ˆä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦ï¼š 123456789const MyComponent = (&#123; name, address &#125;) =&gt; ( &lt;div&gt; &lt;h2&gt;&#123;name&#125;&lt;/h2&gt; &#123;address ? &lt;p&gt;&#123;address&#125;&lt;/p&gt; : &lt;p&gt;&#123;'Address is not available'&#125;&lt;/p&gt; &#125; &lt;/div&gt;) é˜…è¯»èµ„æºï¼š æŽ˜é‡‘ - ç²¾è¯»ã€ŠReact å…«ç§æ¡ä»¶æ¸²æŸ“ã€‹ â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆåœ¨ DOM å…ƒç´ ä¸Šå±•å¼€ props éœ€è¦å°å¿ƒ?å½“æˆ‘ä»¬å±•å¼€å±žæ€§æ—¶ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°æ·»åŠ æœªçŸ¥ HTML å±žæ€§çš„é£Žé™©ï¼Œè¿™æ˜¯ä¸€ç§ä¸å¥½çš„åšæ³•ã€‚ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å±žæ€§è§£æž„å’Œ...rest è¿ç®—ç¬¦ï¼Œå› æ­¤å®ƒåªæ·»åŠ æ‰€éœ€çš„ props å±žæ€§ã€‚ä¾‹å¦‚ï¼Œ 12345const ComponentA = () =&gt; &lt;ComponentB isDisplay=&#123;true&#125; className=&#123;'componentStyle'&#125; /&gt;const ComponentB = (&#123; isDisplay, ...domProps &#125;) =&gt; &lt;div &#123;...domProps&#125;&gt;&#123;'ComponentB'&#125;&lt;/div&gt; â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­å¦‚ä½•ä½¿ç”¨è£…é¥°å™¨?ä½ å¯ä»¥è£…é¥°ä½ çš„ç±»ç»„ä»¶ï¼Œè¿™ä¸Žå°†ç»„ä»¶ä¼ é€’åˆ°å‡½æ•°ä¸­æ˜¯ä¸€æ ·çš„ã€‚ è£…é¥°å™¨æ˜¯ä¿®æ”¹ç»„ä»¶åŠŸèƒ½çµæ´»ä¸”æ˜“è¯»çš„æ–¹å¼ã€‚ 123456789101112131415161718192021@setTitle('Profile')class Profile extends React.Component &#123; //....&#125;/* title is a string that will be set as a document title WrappedComponent is what our decorator will receive when put directly above a component class as seen in the example above*/const setTitle = (title) =&gt; (WrappedComponent) =&gt; &#123; return class extends React.Component &#123; componentDidMount() &#123; document.title = title &#125; render() &#123; return &lt;WrappedComponent &#123;...this.props&#125; /&gt; &#125; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½• memoizeï¼ˆè®°å¿†ï¼‰ç»„ä»¶?æœ‰å¯ç”¨äºŽå‡½æ•°ç»„ä»¶çš„ memoize åº“ã€‚ä¾‹å¦‚ moize åº“å¯ä»¥å°†ç»„ä»¶å­˜å‚¨åœ¨å¦ä¸€ä¸ªç»„ä»¶ä¸­ã€‚ 1234567891011import moize from 'moize'import Component from './components/Component' // this module exports a non-memoized componentconst MemoizedFoo = moize.react(Component)const Consumer = () =&gt; &#123; &lt;div&gt; &#123;'I will memoize the following entry:'&#125; &lt;MemoizedFoo/&gt; &lt;/div&gt;&#125; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•å®žçŽ° Server Side Rendering æˆ– SSR?React å·²ç»é…å¤‡äº†ç”¨äºŽå¤„ç† Node æœåŠ¡å™¨ä¸Šé¡µé¢æ¸²æŸ“çš„åŠŸèƒ½ã€‚ä½ å¯ä»¥ä½¿ç”¨ç‰¹æ®Šç‰ˆæœ¬çš„ DOM æ¸²æŸ“å™¨ï¼Œå®ƒéµå¾ªä¸Žå®¢æˆ·ç«¯ç›¸åŒçš„æ¨¡å¼ã€‚ 1234import ReactDOMServer from 'react-dom/server'import App from './App'ReactDOMServer.renderToString(&lt;App /&gt;) æ­¤æ–¹æ³•å°†ä»¥å­—ç¬¦ä¸²å½¢å¼è¾“å‡ºå¸¸è§„ HTMLï¼Œç„¶åŽå°†å…¶ä½œä¸ºæœåŠ¡å™¨å“åº”çš„ä¸€éƒ¨åˆ†æ”¾åœ¨é¡µé¢æ­£æ–‡ä¸­ã€‚åœ¨å®¢æˆ·ç«¯ï¼ŒReact æ£€æµ‹é¢„æ¸²æŸ“çš„å†…å®¹å¹¶æ— ç¼åœ°è¡”æŽ¥ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ React ä¸­å¯ç”¨ç”Ÿäº§æ¨¡å¼?ä½ åº”è¯¥ä½¿ç”¨ Webpack çš„ DefinePlugin æ–¹æ³•å°† NODE_ENV è®¾ç½®ä¸º productionï¼Œé€šè¿‡å®ƒä½ å¯ä»¥åŽ»é™¤ propType éªŒè¯å’Œé¢å¤–è­¦å‘Šç­‰å†…å®¹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æžœä½ åŽ‹ç¼©ä»£ç ï¼Œå¦‚ä½¿ç”¨ Uglify çš„æ­»ä»£ç æ¶ˆé™¤ï¼Œä»¥åŽ»æŽ‰ç”¨äºŽå¼€å‘çš„ä»£ç å’Œæ³¨é‡Šï¼Œå®ƒå°†å¤§å¤§å‡å°‘åŒ…çš„å¤§å°ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ CRA åŠå…¶å¥½å¤„?create-react-app CLI å·¥å…·å…è®¸ä½ æ— éœ€é…ç½®æ­¥éª¤ï¼Œå¿«é€Ÿåˆ›å»ºå’Œè¿è¡Œ React åº”ç”¨ã€‚ è®©æˆ‘ä»¬ä½¿ç”¨ CRA æ¥åˆ›å»º Todo åº”ç”¨ï¼š 1234567891011# Installation$ npm install -g create-react-app# Create new project$ create-react-app todo-app$ cd todo-app# Build, test and run$ npm run build$ npm run test$ npm start å®ƒåŒ…å«äº†æž„å»º React åº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€åˆ‡ï¼š React, JSX, ES6, å’Œ Flow è¯­æ³•æ”¯æŒã€‚ ES6 ä¹‹å¤–çš„è¯­è¨€é™„åŠ åŠŸèƒ½ï¼Œæ¯”å¦‚å¯¹è±¡æ‰©å±•è¿ç®—ç¬¦ã€‚ Autoprefixed CSSï¼Œå› æ­¤ä½ ä¸åœ¨éœ€è¦ -webkit- æˆ–å…¶ä»–å‰ç¼€ã€‚ ä¸€ä¸ªå¿«é€Ÿçš„äº¤äº’å¼å•å…ƒæµ‹è¯•è¿è¡Œç¨‹åºï¼Œå†…ç½®äº†å¯¹è¦†ç›–çŽ‡æŠ¥å‘Šçš„æ”¯æŒã€‚ ä¸€ä¸ªå®žæ—¶å¼€å‘æœåŠ¡å™¨ï¼Œç”¨äºŽè­¦å‘Šå¸¸è§é”™è¯¯ã€‚ ä¸€ä¸ªæž„å»ºè„šæœ¬ï¼Œç”¨äºŽæ‰“åŒ…ç”¨äºŽç”Ÿäº§ä¸­åŒ…å« hashes å’Œ sourcemaps çš„ JSã€CSS å’Œ Images æ–‡ä»¶ã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ mounting é˜¶æ®µç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆ?åœ¨åˆ›å»ºç»„ä»¶çš„å®žä¾‹å¹¶å°†å…¶æ’å…¥åˆ° DOM ä¸­æ—¶ï¼Œå°†æŒ‰ä»¥ä¸‹é¡ºåºè°ƒç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ constructor() static getDerivedStateFromProps() render() componentDidMount() â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React v16 ä¸­ï¼Œå“ªäº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å°†è¢«å¼ƒç”¨?ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å°†æˆä¸ºä¸å®‰å…¨çš„ç¼–ç å®žè·µï¼Œå¹¶ä¸”åœ¨å¼‚æ­¥æ¸²æŸ“æ–¹é¢ä¼šæ›´æœ‰é—®é¢˜ã€‚ componentWillMount() componentWillReceiveProps() componentWillUpdate() ä»Ž React v16.3 å¼€å§‹ï¼Œè¿™äº›æ–¹æ³•ä½¿ç”¨ UNSAFE_ å‰ç¼€ä½œä¸ºåˆ«åï¼ŒæœªåŠ å‰ç¼€çš„ç‰ˆæœ¬å°†åœ¨ React v17 ä¸­è¢«ç§»é™¤ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ç”Ÿå‘½å‘¨æœŸæ–¹æ³• getDerivedStateFromProps() çš„ç›®çš„æ˜¯ä»€ä¹ˆ?æ–°çš„é™æ€ getDerivedStateFromProps() ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åœ¨å®žä¾‹åŒ–ç»„ä»¶ä¹‹åŽä»¥åŠé‡æ–°æ¸²æŸ“ç»„ä»¶ä¹‹å‰è°ƒç”¨ã€‚å®ƒå¯ä»¥è¿”å›žä¸€ä¸ªå¯¹è±¡ç”¨äºŽæ›´æ–°çŠ¶æ€ï¼Œæˆ–è€…è¿”å›ž null æŒ‡ç¤ºæ–°çš„å±žæ€§ä¸éœ€è¦ä»»ä½•çŠ¶æ€æ›´æ–°ã€‚ 12345class MyComponent extends React.Component &#123; static getDerivedStateFromProps(props, state) &#123; // ... &#125;&#125; æ­¤ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸Ž componentDidUpdate() ä¸€èµ·æ¶µç›–äº† componentWillReceiveProps() çš„æ‰€æœ‰ç”¨ä¾‹ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ç”Ÿå‘½å‘¨æœŸæ–¹æ³• getSnapshotBeforeUpdate() çš„ç›®çš„æ˜¯ä»€ä¹ˆ?æ–°çš„ getSnapshotBeforeUpdate() ç”Ÿå‘½å‘¨æœŸæ–¹æ³•åœ¨ DOM æ›´æ–°ä¹‹å‰è¢«è°ƒç”¨ã€‚æ­¤æ–¹æ³•çš„è¿”å›žå€¼å°†ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ é€’ç»™componentDidUpdate()ã€‚ 12345class MyComponent extends React.Component &#123; getSnapshotBeforeUpdate(prevProps, prevState) &#123; // ... &#125;&#125; æ­¤ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸Ž componentDidUpdate() ä¸€èµ·æ¶µç›–äº† componentWillUpdate() çš„æ‰€æœ‰ç”¨ä¾‹ã€‚ â¬† è¿”å›žé¡¶éƒ¨ createElement() å’Œ cloneElement() æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«?JSX å…ƒç´ å°†è¢«è½¬æ¢ä¸º React.createElement() å‡½æ•°æ¥åˆ›å»º React å…ƒç´ ï¼Œè¿™äº›å¯¹è±¡å°†ç”¨äºŽè¡¨ç¤º UI å¯¹è±¡ã€‚è€Œ cloneElement ç”¨äºŽå…‹éš†å…ƒç´ å¹¶ä¼ é€’æ–°çš„å±žæ€§ã€‚ â¬† è¿”å›žé¡¶éƒ¨ æŽ¨èçš„ç»„ä»¶å‘½åæ–¹æ³•æ˜¯ä»€ä¹ˆ?å»ºè®®é€šè¿‡å¼•ç”¨å‘½åç»„ä»¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ displayNameã€‚ ä½¿ç”¨ displayName å‘½åç»„ä»¶: 1234export default React.createClass(&#123; displayName: 'TodoApp', // ...&#125;) æŽ¨èçš„æ–¹å¼ï¼š 123export default class TodoApp extends React.Component &#123; // ...&#125; â¬† è¿”å›žé¡¶éƒ¨ åœ¨ç»„ä»¶ç±»ä¸­æ–¹æ³•çš„æŽ¨èé¡ºåºæ˜¯ä»€ä¹ˆ?ä»Ž mounting åˆ° render stage é˜¶æ®µæŽ¨èçš„æ–¹æ³•é¡ºåºï¼š static æ–¹æ³• constructor() getChildContext() componentWillMount() componentDidMount() componentWillReceiveProps() shouldComponentUpdate() componentWillUpdate() componentDidUpdate() componentWillUnmount() ç‚¹å‡»å¤„ç†ç¨‹åºæˆ–äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¦‚ onClickSubmit() æˆ– onChangeDescription() ç”¨äºŽæ¸²æŸ“çš„getteræ–¹æ³•ï¼Œå¦‚ getSelectReason() æˆ– getFooterContent() å¯é€‰çš„æ¸²æŸ“æ–¹æ³•ï¼Œå¦‚ renderNavigation() æˆ– renderProfilePicture() render() â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ switching ç»„ä»¶?switching ç»„ä»¶æ˜¯æ¸²æŸ“å¤šä¸ªç»„ä»¶ä¹‹ä¸€çš„ç»„ä»¶ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨å¯¹è±¡å°† prop æ˜ å°„åˆ°ç»„ä»¶ä¸­ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹çš„ switching ç»„ä»¶å°†åŸºäºŽ page å±žæ€§æ˜¾ç¤ºä¸åŒçš„é¡µé¢ï¼š 12345678910111213141516171819202122import HomePage from './HomePage'import AboutPage from './AboutPage'import ServicesPage from './ServicesPage'import ContactPage from './ContactPage'const PAGES = &#123; home: HomePage, about: AboutPage, services: ServicesPage, contact: ContactPage&#125;const Page = (props) =&gt; &#123; const Handler = PAGES[props.page] || ContactPage return &lt;Handler &#123;...props&#125; /&gt;&#125;// The keys of the PAGES object can be used in the prop types to catch dev-time errors.Page.propTypes = &#123; page: PropTypes.oneOf(Object.keys(PAGES)).isRequired&#125; â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦å°†å‡½æ•°ä¼ é€’ç»™ setState() æ–¹æ³•?è¿™èƒŒåŽçš„åŽŸå› æ˜¯ setState() æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œã€‚å‡ºäºŽæ€§èƒ½åŽŸå› ï¼ŒReact ä¼šå¯¹çŠ¶æ€æ›´æ”¹è¿›è¡Œæ‰¹å¤„ç†ï¼Œå› æ­¤åœ¨è°ƒç”¨ setState() æ–¹æ³•ä¹‹åŽï¼ŒçŠ¶æ€å¯èƒ½ä¸ä¼šç«‹å³æ›´æ”¹ã€‚è¿™æ„å‘³ç€å½“ä½ è°ƒç”¨ setState() æ–¹æ³•æ—¶ï¼Œä½ ä¸åº”è¯¥ä¾èµ–å½“å‰çŠ¶æ€ï¼Œå› ä¸ºä½ ä¸èƒ½ç¡®å®šå½“å‰çŠ¶æ€åº”è¯¥æ˜¯ä»€ä¹ˆã€‚è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†ä¸€ä¸ªå‡½æ•°ä¼ é€’ç»™ setState()ï¼Œè¯¥å‡½æ•°ä¼šä»¥ä¸Šä¸€ä¸ªçŠ¶æ€ä½œä¸ºå‚æ•°ã€‚é€šè¿‡è¿™æ ·åšï¼Œä½ å¯ä»¥é¿å…ç”±äºŽ setState() çš„å¼‚æ­¥æ€§è´¨è€Œå¯¼è‡´ç”¨æˆ·åœ¨è®¿é—®æ—¶èŽ·å–æ—§çŠ¶æ€å€¼çš„é—®é¢˜ã€‚ å‡è®¾åˆå§‹è®¡æ•°å€¼ä¸ºé›¶ã€‚åœ¨è¿žç»­ä¸‰æ¬¡å¢žåŠ æ“ä½œä¹‹åŽï¼Œè¯¥å€¼å°†åªå¢žåŠ ä¸€ä¸ªã€‚ 12345// assuming this.state.count === 0this.setState(&#123; count: this.state.count + 1 &#125;)this.setState(&#123; count: this.state.count + 1 &#125;)this.setState(&#123; count: this.state.count + 1 &#125;)// this.state.count === 1, not 3 å¦‚æžœå°†å‡½æ•°ä¼ é€’ç»™ setState()ï¼Œåˆ™ count å°†æ­£ç¡®é€’å¢žã€‚ 1234this.setState((prevState, props) =&gt; (&#123; count: prevState.count + props.increment&#125;))// this.state.count === 3 as expected â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­ä»€ä¹ˆæ˜¯ä¸¥æ ¼æ¨¡å¼?React.StrictMode æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„ç»„ä»¶ï¼Œç”¨äºŽçªå‡ºæ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­çš„æ½œåœ¨é—®é¢˜ã€‚å°±åƒ &lt;Fragment&gt;ï¼Œ&lt;StrictMode&gt; ä¸€æ ·ï¼Œå®ƒä»¬ä¸ä¼šæ¸²æŸ“ä»»ä½•é¢å¤–çš„ DOM å…ƒç´ ã€‚å®ƒä¸ºå…¶åŽä»£æ¿€æ´»é¢å¤–çš„æ£€æŸ¥å’Œè­¦å‘Šã€‚è¿™äº›æ£€æŸ¥ä»…é€‚ç”¨äºŽå¼€å‘æ¨¡å¼ã€‚ 12345678910111213141516import React from 'react'function ExampleApplication() &#123; return ( &lt;div&gt; &lt;Header /&gt; &lt;React.StrictMode&gt; &lt;div&gt; &lt;ComponentOne /&gt; &lt;ComponentTwo /&gt; &lt;/div&gt; &lt;/React.StrictMode&gt; &lt;Footer /&gt; &lt;/div&gt; )&#125; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œstrict mode æ£€æŸ¥ä»…åº”ç”¨äºŽ &lt;ComponentOne&gt; å’Œ &lt;ComponentTwo&gt; ç»„ä»¶ã€‚ â¬† è¿”å›žé¡¶éƒ¨ React Mixins æ˜¯ä»€ä¹ˆ?Mixins æ˜¯ä¸€ç§å®Œå…¨åˆ†ç¦»ç»„ä»¶é€šç”¨åŠŸèƒ½çš„æ–¹æ³•ã€‚ Mixins ä¸åº”è¯¥è¢«ç»§ç»­ä½¿ç”¨ï¼Œå¯ä»¥ç”¨é«˜é˜¶ç»„ä»¶æˆ–è£…é¥°å™¨æ¥æ›¿æ¢ã€‚ æœ€å¸¸ç”¨çš„ mixins æ˜¯ PureRenderMixinã€‚å½“ props å’ŒçŠ¶æ€ä¸Žä¹‹å‰çš„ props å’ŒçŠ¶æ€ç›¸ç­‰æ—¶ï¼Œä½ å¯èƒ½åœ¨æŸäº›ç»„ä»¶ä¸­ä½¿ç”¨å®ƒæ¥é˜²æ­¢ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ï¼š 1234567const PureRenderMixin = require('react-addons-pure-render-mixin')const Button = React.createClass(&#123; mixins: [PureRenderMixin], // ...&#125;)` â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆ isMounted() æ˜¯ä¸€ä¸ªåæ¨¡å¼ï¼Œè€Œæ­£ç¡®çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆ?isMounted() çš„ä¸»è¦åœºæ™¯æ˜¯é¿å…åœ¨ç»„ä»¶å¸è½½åŽè°ƒç”¨ setState()ï¼Œå› ä¸ºå®ƒä¼šå‘å‡ºè­¦å‘Šã€‚ 123if (this.isMounted()) &#123; this.setState(&#123;...&#125;)&#125; åœ¨è°ƒç”¨ setState() ä¹‹å‰æ£€æŸ¥ isMounted() ä¼šæ¶ˆé™¤è­¦å‘Šï¼Œä½†ä¹Ÿä¼šç ´åè­¦å‘Šçš„ç›®çš„ã€‚ä½¿ç”¨ isMounted() æœ‰ä¸€ç§ä»£ç å‘³é“ï¼Œå› ä¸ºä½ è¦æ£€æŸ¥çš„å”¯ä¸€åŽŸå› æ˜¯ä½ è®¤ä¸ºåœ¨å¸è½½ç»„ä»¶åŽå¯èƒ½æŒæœ‰å¼•ç”¨ã€‚ æœ€ä½³è§£å†³æ–¹æ¡ˆæ˜¯æ‰¾åˆ°åœ¨ç»„ä»¶å¸è½½åŽè°ƒç”¨ setState() çš„ä½ç½®ï¼Œå¹¶ä¿®å¤å®ƒä»¬ã€‚è¿™ç§æƒ…å†µæœ€å¸¸å‘ç”Ÿåœ¨å›žè°ƒä¸­ï¼Œå³ç»„ä»¶æ­£åœ¨ç­‰å¾…æŸäº›æ•°æ®å¹¶åœ¨æ•°æ®åˆ°è¾¾ä¹‹å‰å¸è½½ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œåœ¨å¸è½½ä¹‹å‰ï¼Œåº”åœ¨ componentWillUnmount() ä¸­å–æ¶ˆä»»ä½•å›žè°ƒã€‚ â¬† è¿”å›žé¡¶éƒ¨ React ä¸­æ”¯æŒå“ªäº›æŒ‡é’ˆäº‹ä»¶?Pointer Events æä¾›äº†å¤„ç†æ‰€æœ‰è¾“å…¥äº‹ä»¶çš„ç»Ÿä¸€æ–¹æ³•ã€‚åœ¨è¿‡åŽ»ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªé¼ æ ‡å’Œç›¸åº”çš„äº‹ä»¶ç›‘å¬å™¨æ¥å¤„ç†å®ƒä»¬ï¼Œä½†çŽ°åœ¨æˆ‘ä»¬æœ‰è®¸å¤šä¸Žé¼ æ ‡æ— å…³çš„è®¾å¤‡ï¼Œæ¯”å¦‚å¸¦è§¦æ‘¸å±çš„æ‰‹æœºæˆ–ç¬”ã€‚æˆ‘ä»¬éœ€è¦è®°ä½ï¼Œè¿™äº›äº‹ä»¶åªèƒ½åœ¨æ”¯æŒ Pointer Events è§„èŒƒçš„æµè§ˆå™¨ä¸­å·¥ä½œã€‚ ç›®å‰ä»¥ä¸‹äº‹ä»¶ç±»åž‹åœ¨ React DOM ä¸­æ˜¯å¯ç”¨çš„ï¼š onPointerDown onPointerMove onPointerUp onPointerCancel onGotPointerCapture onLostPointerCaptur onPointerEnter onPointerLeave onPointerOver onPointerOut â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆç»„ä»¶åç§°åº”è¯¥ä»¥å¤§å†™å­—æ¯å¼€å¤´?å¦‚æžœä½¿ç”¨ JSX æ¸²æŸ“ç»„ä»¶ï¼Œåˆ™è¯¥ç»„ä»¶çš„åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œå¦åˆ™ React å°†ä¼šæŠ›å‡ºæ— æ³•è¯†åˆ«æ ‡ç­¾çš„é”™è¯¯ã€‚è¿™ç§çº¦å®šæ˜¯å› ä¸ºåªæœ‰ HTML å…ƒç´ å’Œ SVG æ ‡ç­¾å¯ä»¥ä»¥å°å†™å­—æ¯å¼€å¤´ã€‚ å®šä¹‰ç»„ä»¶ç±»çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä»¥å°å†™å­—æ¯å¼€å¤´ï¼Œä½†åœ¨å¯¼å…¥æ—¶åº”è¯¥ä½¿ç”¨å¤§å†™å­—æ¯ã€‚ 1234567class myComponent extends Component &#123; render() &#123; return &lt;div /&gt; &#125;&#125;export default myComponent å½“åœ¨å¦ä¸€ä¸ªæ–‡ä»¶å¯¼å…¥æ—¶ï¼Œåº”è¯¥ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼š 1import MyComponent from './MyComponent' â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React v16 ä¸­æ˜¯å¦æ”¯æŒè‡ªå®šä¹‰ DOM å±žæ€§?æ˜¯çš„ï¼Œåœ¨è¿‡åŽ» React ä¼šå¿½ç•¥æœªçŸ¥çš„ DOM å±žæ€§ã€‚å¦‚æžœä½ ç¼–å†™çš„ JSX å±žæ€§ React æ— æ³•è¯†åˆ«ï¼Œé‚£ä¹ˆ React å°†è·³è¿‡å®ƒã€‚ä¾‹å¦‚ï¼š 1&lt;div mycustomattribute=&#123;'something'&#125; /&gt; åœ¨ React 15 ä¸­å°†åœ¨ DOM ä¸­æ¸²æŸ“ä¸€ä¸ªç©ºçš„ divï¼š 1&lt;div /&gt; åœ¨ React 16 ä¸­ï¼Œä»»ä½•æœªçŸ¥çš„å±žæ€§éƒ½å°†ä¼šåœ¨ DOM æ˜¾ç¤ºï¼š 1&lt;div mycustomattribute='something' /&gt; è¿™å¯¹äºŽåº”ç”¨ç‰¹å®šäºŽæµè§ˆå™¨çš„éžæ ‡å‡†å±žæ€§ï¼Œå°è¯•æ–°çš„ DOM APIs ä¸Žé›†æˆç¬¬ä¸‰æ–¹åº“æ¥è¯´éžå¸¸æœ‰ç”¨ã€‚ â¬† è¿”å›žé¡¶éƒ¨ constructor å’Œ getInitialState æœ‰ä»€ä¹ˆåŒºåˆ«?å½“ä½¿ç”¨ ES6 ç±»æ—¶ï¼Œä½ åº”è¯¥åœ¨æž„é€ å‡½æ•°ä¸­åˆå§‹åŒ–çŠ¶æ€ï¼Œè€Œå½“ä½ ä½¿ç”¨ React.createClass() æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨ getInitialState() æ–¹æ³•ã€‚ ä½¿ç”¨ ES6 ç±»: 123456class MyComponent extends React.Component &#123; constructor(props) &#123; super(props) this.state = &#123; /* initial state */ &#125; &#125;&#125; ä½¿ç”¨ React.createClass(): 12345const MyComponent = React.createClass(&#123; getInitialState() &#123; return &#123; /* initial state */ &#125; &#125;&#125;) æ³¨æ„ï¼š åœ¨ React v16 ä¸­ React.createClass() å·²è¢«å¼ƒç”¨å’Œåˆ é™¤ï¼Œè¯·æ”¹ç”¨æ™®é€šçš„ JavaScript ç±»ã€‚ â¬† è¿”å›žé¡¶éƒ¨ æ˜¯å¦å¯ä»¥åœ¨ä¸è°ƒç”¨ setState æ–¹æ³•çš„æƒ…å†µä¸‹ï¼Œå¼ºåˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“?é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ç»„ä»¶çš„çŠ¶æ€æˆ–å±žæ€§æ”¹å˜æ—¶ï¼Œç»„ä»¶å°†é‡æ–°æ¸²æŸ“ã€‚å¦‚æžœä½ çš„ render() æ–¹æ³•ä¾èµ–äºŽå…¶ä»–æ•°æ®ï¼Œä½ å¯ä»¥é€šè¿‡è°ƒç”¨ forceUpdate() æ¥å‘Šè¯‰ Reactï¼Œå½“å‰ç»„ä»¶éœ€è¦é‡æ–°æ¸²æŸ“ã€‚ 1component.forceUpdate(callback) å»ºè®®é¿å…ä½¿ç”¨ forceUpdate()ï¼Œå¹¶ä¸”åªåœ¨ render() æ–¹æ³•ä¸­è¯»å– this.props å’Œ this.stateã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ä½¿ç”¨ ES6 ç±»çš„ React ä¸­ super() å’Œ super(props) æœ‰ä»€ä¹ˆåŒºåˆ«?å½“ä½ æƒ³è¦åœ¨ constructor() å‡½æ•°ä¸­è®¿é—® this.propsï¼Œä½ éœ€è¦å°† props ä¼ é€’ç»™ super() æ–¹æ³•ã€‚ ä½¿ç”¨ super(props): 123456class MyComponent extends React.Component &#123; constructor(props) &#123; super(props) console.log(this.props) // &#123; name: 'John', ... &#125; &#125;&#125; ä½¿ç”¨ super(): 123456class MyComponent extends React.Component &#123; constructor(props) &#123; super() console.log(this.props) // undefined &#125;&#125; åœ¨ constructor() å‡½æ•°ä¹‹å¤–ï¼Œè®¿é—® this.props å±žæ€§ä¼šæ˜¾ç¤ºç›¸åŒçš„å€¼ã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ JSX ä¸­å¦‚ä½•è¿›è¡Œå¾ªçŽ¯?ä½ åªéœ€ä½¿ç”¨å¸¦æœ‰ ES6 ç®­å¤´å‡½æ•°è¯­æ³•çš„ Array.prototype.map å³å¯ã€‚ä¾‹å¦‚ï¼Œitems å¯¹è±¡æ•°ç»„å°†ä¼šè¢«æ˜ å°„æˆä¸€ä¸ªç»„ä»¶æ•°ç»„ï¼š 123&lt;tbody&gt; &#123;items.map(item =&gt; &lt;SomeComponent key=&#123;item.id&#125; name=&#123;item.name&#125; /&gt;)&#125;&lt;/tbody&gt; ä½ ä¸èƒ½ä½¿ç”¨ for å¾ªçŽ¯è¿›è¡Œè¿­ä»£ï¼š 12345&lt;tbody&gt; for (let i = 0; i &lt; items.length; i++) &#123; &lt;SomeComponent key=&#123;items[i].id&#125; name=&#123;items[i].name&#125; /&gt; &#125;&lt;/tbody&gt; è¿™æ˜¯å› ä¸º JSX æ ‡ç­¾ä¼šè¢«è½¬æ¢æˆå‡½æ•°è°ƒç”¨ï¼Œå¹¶ä¸”ä½ ä¸èƒ½åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨è¯­å¥ã€‚ä½†è¿™å¯èƒ½ä¼šç”±äºŽ do è¡¨è¾¾å¼è€Œæ”¹å˜ï¼Œå®ƒä»¬æ˜¯ç¬¬ä¸€é˜¶æ®µææ¡ˆã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ attribute å¼•å·ä¸­è®¿é—® props å±žæ€§?React (æˆ– JSX) ä¸æ”¯æŒå±žæ€§å€¼å†…çš„å˜é‡æ’å€¼ã€‚ä¸‹é¢çš„å½¢å¼å°†ä¸èµ·ä½œç”¨ï¼š 1&lt;img className='image' src='images/&#123;this.props.image&#125;' /&gt; ä½†ä½ å¯ä»¥å°† JS è¡¨è¾¾å¼ä½œä¸ºå±žæ€§å€¼æ”¾åœ¨å¤§æ‹¬å·å†…ã€‚æ‰€ä»¥ä¸‹é¢çš„è¡¨è¾¾å¼æ˜¯æœ‰æ•ˆçš„ï¼š 1&lt;img className='image' src=&#123;'images/' + this.props.image&#125; /&gt; ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š 1&lt;img className='image' src=&#123;`images/$&#123;this.props.image&#125;`&#125; /&gt; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ React proptype æ•°ç»„?å¦‚æžœä½ è¦è§„èŒƒå…·æœ‰ç‰¹å®šå¯¹è±¡æ ¼å¼çš„æ•°ç»„çš„å±žæ€§ï¼Œè¯·ä½¿ç”¨ React.PropTypes.shape() ä½œä¸º React.PropTypes.arrayOf() çš„å‚æ•°ã€‚ 123456ReactComponent.propTypes = &#123; arrayWithShape: React.PropTypes.arrayOf(React.PropTypes.shape(&#123; color: React.PropTypes.string.isRequired, fontSize: React.PropTypes.number.isRequired &#125;)).isRequired&#125; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•æœ‰æ¡ä»¶åœ°åº”ç”¨æ ·å¼ç±»?ä½ ä¸åº”è¯¥åœ¨å¼•å·å†…ä½¿ç”¨å¤§æ‹¬å·ï¼Œå› ä¸ºå®ƒå°†è¢«è®¡ç®—ä¸ºå­—ç¬¦ä¸²ã€‚ 1&lt;div className="btn-panel &#123;this.props.visible ? 'show' : 'hidden'&#125;"&gt; ç›¸åï¼Œä½ éœ€è¦å°†å¤§æ‹¬å·ç§»åˆ°å¤–éƒ¨ï¼ˆä¸è¦å¿˜è®°åœ¨ç±»åä¹‹é—´æ·»åŠ ç©ºæ ¼ï¼‰ï¼š 1&lt;div className=&#123;'btn-panel ' + (this.props.visible ? 'show' : 'hidden')&#125;&gt; æ¨¡æ¿å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥å·¥ä½œï¼š 1&lt;div className=&#123;`btn-panel $&#123;this.props.visible ? 'show' : 'hidden'&#125;`&#125;&gt; â¬† è¿”å›žé¡¶éƒ¨ React å’Œ ReactDOM ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«?react åŒ…ä¸­åŒ…å« React.createElement(), React.Component, React.Childrenï¼Œä»¥åŠä¸Žå…ƒç´ å’Œç»„ä»¶ç±»ç›¸å…³çš„å…¶ä»–å¸®åŠ©ç¨‹åºã€‚ä½ å¯ä»¥å°†è¿™äº›è§†ä¸ºæž„å»ºç»„ä»¶æ‰€éœ€çš„åŒæž„æˆ–é€šç”¨å¸®åŠ©ç¨‹åºã€‚react-dom åŒ…ä¸­åŒ…å«äº† ReactDOM.render()ï¼Œåœ¨ react-dom/server åŒ…ä¸­æœ‰æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“çš„ ReactDOMServer.renderToString() å’Œ ReactDOMServer.renderToStaticMarkup() æ–¹æ³•ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆ ReactDOM ä»Ž React åˆ†ç¦»å‡ºæ¥?React å›¢é˜Ÿè‡´åŠ›äºŽå°†æ‰€æœ‰çš„ä¸Ž DOM ç›¸å…³çš„ç‰¹æ€§æŠ½å–åˆ°ä¸€ä¸ªåä¸º ReactDOM çš„ç‹¬ç«‹åº“ä¸­ã€‚React v0.14 æ˜¯ç¬¬ä¸€ä¸ªæ‹†åˆ†åŽçš„ç‰ˆæœ¬ã€‚é€šè¿‡æŸ¥çœ‹ä¸€äº›è½¯ä»¶åŒ…ï¼Œreact-nativeï¼Œreact-artï¼Œreact-canvasï¼Œå’Œ react-threeï¼Œå¾ˆæ˜Žæ˜¾ï¼ŒReact çš„ä¼˜é›…å’Œæœ¬è´¨ä¸Žæµè§ˆå™¨æˆ– DOM æ— å…³ã€‚ä¸ºäº†æž„å»ºæ›´å¤š React èƒ½åº”ç”¨çš„çŽ¯å¢ƒï¼ŒReact å›¢é˜Ÿè®¡åˆ’å°†ä¸»è¦çš„ React åŒ…æ‹†åˆ†æˆä¸¤ä¸ªï¼šreact å’Œ react-domã€‚è¿™ä¸ºç¼–å†™å¯ä»¥åœ¨ React å’Œ React Native çš„ Web ç‰ˆæœ¬ä¹‹é—´å…±äº«çš„ç»„ä»¶é“ºå¹³äº†é“è·¯ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ä½¿ç”¨ React label å…ƒç´ ?å¦‚æžœä½ å°è¯•ä½¿ç”¨æ ‡å‡†çš„ for å±žæ€§å°† &lt;label&gt; å…ƒç´ ç»‘å®šåˆ°æ–‡æœ¬è¾“å…¥æ¡†ï¼Œé‚£ä¹ˆåœ¨æŽ§åˆ¶å°å°†ä¼šæ‰“å°ç¼ºå°‘ HTML å±žæ€§çš„è­¦å‘Šæ¶ˆæ¯ã€‚ 12&lt;label for=&#123;'user'&#125;&gt;&#123;'User'&#125;&lt;/label&gt;&lt;input type=&#123;'text'&#125; id=&#123;'user'&#125; /&gt; å› ä¸º for æ˜¯ JavaScript çš„ä¿ç•™å­—ï¼Œè¯·ä½¿ç”¨ htmlFor æ¥æ›¿ä»£ã€‚ 12&lt;label htmlFor=&#123;'user'&#125;&gt;&#123;'User'&#125;&lt;/label&gt;&lt;input type=&#123;'text'&#125; id=&#123;'user'&#125; /&gt; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åˆå¹¶å¤šä¸ªå†…è”çš„æ ·å¼å¯¹è±¡?åœ¨ React ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦: 1&lt;button style=&#123;&#123;...styles.panel.button, ...styles.panel.submitButton&#125;&#125;&gt;&#123;'Submit'&#125;&lt;/button&gt; å¦‚æžœä½ ä½¿ç”¨çš„æ˜¯ React Nativeï¼Œåˆ™å¯ä»¥ä½¿ç”¨æ•°ç»„è¡¨ç¤ºæ³•ï¼š 1&lt;button style=&#123;[styles.panel.button, styles.panel.submitButton]&#125;&gt;&#123;'Submit'&#125;&lt;/button&gt; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨è°ƒæ•´æµè§ˆå™¨å¤§å°æ—¶é‡æ–°æ¸²æŸ“è§†å›¾?ä½ å¯ä»¥åœ¨ componentDidMount() ä¸­ç›‘å¬ resize äº‹ä»¶ï¼Œç„¶åŽæ›´æ–°å°ºå¯¸ï¼ˆwidth å’Œ heightï¼‰ã€‚ä½ åº”è¯¥åœ¨ componentWillUnmount() æ–¹æ³•ä¸­ç§»é™¤ç›‘å¬ã€‚ 123456789101112131415161718192021class WindowDimensions extends React.Component &#123; componentWillMount() &#123; this.updateDimensions() &#125; componentDidMount() &#123; window.addEventListener('resize', this.updateDimensions) &#125; componentWillUnmount() &#123; window.removeEventListener('resize', this.updateDimensions) &#125; updateDimensions() &#123; this.setState(&#123;width: $(window).width(), height: $(window).height()&#125;) &#125; render() &#123; return &lt;span&gt;&#123;this.state.width&#125; x &#123;this.state.height&#125;&lt;/span&gt; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ setState() å’Œ replaceState() æ–¹æ³•ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«?å½“ä½ ä½¿ç”¨ setState() æ—¶ï¼Œå½“å‰å’Œå…ˆå‰çš„çŠ¶æ€å°†è¢«åˆå¹¶ã€‚replaceState() ä¼šæŠ›å‡ºå½“å‰çŠ¶æ€ï¼Œå¹¶ä»…ç”¨ä½ æä¾›çš„å†…å®¹æ›¿æ¢å®ƒã€‚é€šå¸¸ä½¿ç”¨ setState()ï¼Œé™¤éžä½ å‡ºäºŽæŸç§åŽŸå› ç¡®å®žéœ€è¦åˆ é™¤æ‰€æœ‰ä»¥å‰çš„é”®ã€‚ä½ è¿˜å¯ä»¥åœ¨ setState() ä¸­å°†çŠ¶æ€è®¾ç½®ä¸º false/nullï¼Œè€Œä¸æ˜¯ä½¿ç”¨ replaceState()ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ç›‘å¬çŠ¶æ€å˜åŒ–?å½“çŠ¶æ€æ›´æ”¹æ—¶å°†è°ƒç”¨ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ä½ å¯ä»¥å°†æä¾›çš„çŠ¶æ€å’Œå±žæ€§å€¼ä¸Žå½“å‰çŠ¶æ€å’Œå±žæ€§å€¼è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ç¡®å®šæ˜¯å¦å‘ç”Ÿäº†æœ‰æ„ä¹‰çš„æ”¹å˜ã€‚ 12componentWillUpdate(object nextProps, object nextState)componentDidUpdate(object prevProps, object prevState) â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React çŠ¶æ€ä¸­åˆ é™¤æ•°ç»„å…ƒç´ çš„æŽ¨èæ–¹æ³•æ˜¯ä»€ä¹ˆ?æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨ Array.prototype.filter() æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬åˆ›å»ºç”¨äºŽæ›´æ–°çŠ¶æ€çš„ removeItem() æ–¹æ³•ã€‚ 12345removeItem(index) &#123; this.setState(&#123; data: this.state.data.filter((item, i) =&gt; i !== index) &#125;)&#125; â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­æ˜¯å¦å¯ä»¥ä¸åœ¨é¡µé¢ä¸Šæ¸²æŸ“ HTML å†…å®¹?å¯ä»¥ä½¿ç”¨æœ€æ–°çš„ç‰ˆæœ¬ (&gt;=16.2)ï¼Œä»¥ä¸‹æ˜¯å¯èƒ½çš„é€‰é¡¹ï¼š 123render() &#123; return false&#125; 123render() &#123; return null&#125; 123render() &#123; return []&#125; 123render() &#123; return &lt;React.Fragment&gt;&lt;/React.Fragment&gt;&#125; 123render() &#123; return &lt;&gt;&lt;/&gt;&#125; è¿”å›ž undefined æ˜¯æ— æ•ˆçš„ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ç”¨ React æ¼‚äº®åœ°æ˜¾ç¤º JSON?æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;pre&gt; æ ‡ç­¾ï¼Œä»¥ä¾¿ä¿ç•™ JSON.stringify() çš„æ ¼å¼ï¼š 12345678910111213const data = &#123; name: 'John', age: 42 &#125; class User extends React.Component &#123; render() &#123; return ( &lt;pre&gt; &#123;JSON.stringify(data, null, 2)&#125; &lt;/pre&gt; ) &#125;&#125; React.render(&lt;User /&gt;, document.getElementById('container')) **[â¬† è¿”å›žé¡¶éƒ¨](#ç›®å½•)** ä¸ºä»€ä¹ˆä½ ä¸èƒ½æ›´æ–° React ä¸­çš„ props?React çš„å“²å­¦æ˜¯ props åº”è¯¥æ˜¯ immutable å’Œ top-downã€‚è¿™æ„å‘³ç€çˆ¶çº§å¯ä»¥å‘å­çº§å‘é€ä»»ä½•å±žæ€§å€¼ï¼Œä½†å­çº§ä¸èƒ½ä¿®æ”¹æŽ¥æ”¶åˆ°çš„å±žæ€§ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨é¡µé¢åŠ è½½æ—¶èšç„¦ä¸€ä¸ªè¾“å…¥å…ƒç´ ?ä½ å¯ä»¥ä¸º input å…ƒç´ åˆ›å»ºä¸€ä¸ª refï¼Œç„¶åŽåœ¨ componentDidMount() æ–¹æ³•ä¸­ä½¿ç”¨å®ƒï¼š 123456789101112131415161718192021class App extends React.Component&#123; componentDidMount() &#123; this.nameInput.focus() &#125; render() &#123; return ( &lt;div&gt; &lt;input defaultValue=&#123;'Won\'t focus'&#125; /&gt; &lt;input ref=&#123;(input) =&gt; this.nameInput = input&#125; defaultValue=&#123;'Will focus'&#125; /&gt; &lt;/div&gt; ) &#125;&#125;ReactDOM.render(&lt;App /&gt;, document.getElementById('app')) â¬† è¿”å›žé¡¶éƒ¨ æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡æœ‰å“ªäº›å¯èƒ½çš„æ–¹æ³•? ç”¨ä¸€ä¸ªå¯¹è±¡è°ƒç”¨ setState() æ¥ä¸ŽçŠ¶æ€åˆå¹¶ï¼š ä½¿ç”¨ Object.assign() åˆ›å»ºå¯¹è±¡çš„å‰¯æœ¬ï¼š 12const user = Object.assign(&#123;&#125;, this.state.user, &#123; age: 42 &#125;)this.setState(&#123; user &#125;) ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼š 12const user = &#123; ...this.state.user, age: 42 &#125;this.setState(&#123; user &#125;) ä½¿ç”¨ä¸€ä¸ªå‡½æ•°è°ƒç”¨ setState()ï¼š 123456this.setState(prevState =&gt; (&#123; user: &#123; ...prevState.user, age: 42 &#125;&#125;)) â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆå‡½æ•°æ¯”å¯¹è±¡æ›´é€‚åˆäºŽ setState()?å‡ºäºŽæ€§èƒ½è€ƒè™‘ï¼ŒReact å¯èƒ½å°†å¤šä¸ª setState() è°ƒç”¨åˆå¹¶æˆå•ä¸ªæ›´æ–°ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¯ä»¥å¼‚æ­¥æ›´æ–° this.props å’Œ this.stateï¼Œæ‰€ä»¥ä¸åº”è¯¥ä¾èµ–å®ƒä»¬çš„å€¼æ¥è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ ä»¥ä¸‹çš„ counter ç¤ºä¾‹å°†æ— æ³•æŒ‰é¢„æœŸæ›´æ–°ï¼š 1234// Wrongthis.setState(&#123; counter: this.state.counter + this.props.increment,&#125;) é¦–é€‰æ–¹æ³•æ˜¯ä½¿ç”¨å‡½æ•°è€Œä¸æ˜¯å¯¹è±¡è°ƒç”¨ setState()ã€‚è¯¥å‡½æ•°å°†å‰ä¸€ä¸ªçŠ¶æ€ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå½“å‰æ—¶åˆ»çš„ props ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚ 1234// Correctthis.setState((prevState, props) =&gt; (&#123; counter: prevState.counter + props.increment&#125;)) â¬† è¿”å›žé¡¶éƒ¨ æˆ‘ä»¬å¦‚ä½•åœ¨æµè§ˆå™¨ä¸­æ‰¾åˆ°å½“å‰æ­£åœ¨è¿è¡Œçš„ React ç‰ˆæœ¬?ä½ å¯ä»¥ä½¿ç”¨ React.version æ¥èŽ·å–ç‰ˆæœ¬ï¼š 123456const REACT_VERSION = React.versionReactDOM.render( &lt;div&gt;&#123;`React version: $&#123;REACT_VERSION&#125;`&#125;&lt;/div&gt;, document.getElementById('app')) â¬† è¿”å›žé¡¶éƒ¨ åœ¨ create-react-app é¡¹ç›®ä¸­å¯¼å…¥ polyfills çš„æ–¹æ³•æœ‰å“ªäº›? ä»Ž core-js ä¸­æ‰‹åŠ¨å¯¼å…¥: åˆ›å»ºä¸€ä¸ªåä¸º polyfills.js æ–‡ä»¶ï¼Œå¹¶åœ¨æ ¹ç›®å½•ä¸‹çš„ index.js æ–‡ä»¶ä¸­å¯¼å…¥å®ƒã€‚è¿è¡Œ npm install core-js æˆ– yarn add core-js å¹¶å¯¼å…¥ä½ æ‰€éœ€çš„åŠŸèƒ½ç‰¹æ€§ï¼š 123import 'core-js/fn/array/find'import 'core-js/fn/array/includes'import 'core-js/fn/number/is-nan' ä½¿ç”¨ Polyfill æœåŠ¡: é€šè¿‡å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° index.html ä¸­æ¥èŽ·å–è‡ªå®šä¹‰çš„ç‰¹å®šäºŽæµè§ˆå™¨çš„ polyfillï¼š 1&lt;script src='https://cdn.polyfill.io/v2/polyfill.min.js?features=default,Array.prototype.includes'&gt;&lt;/script&gt; åœ¨ä¸Šé¢çš„è„šæœ¬ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»æ˜¾å¼åœ°è¯·æ±‚ Array.prototype.includes ç‰¹æ€§ï¼Œå› ä¸ºå®ƒæ²¡æœ‰è¢«åŒ…å«åœ¨é»˜è®¤çš„ç‰¹æ€§é›†ä¸­ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ create-react-app ä¸­ä½¿ç”¨ https è€Œä¸æ˜¯ http?ä½ åªéœ€è¦ä½¿ç”¨ HTTPS=true é…ç½®ã€‚ä½ å¯ä»¥ç¼–è¾‘ package.json ä¸­çš„ scripts éƒ¨åˆ†ï¼š 123"scripts": &#123; "start": "set HTTPS=true &amp;&amp; react-scripts start"&#125; æˆ–ç›´æŽ¥è¿è¡Œ set HTTPS=true &amp;&amp; npm start â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•é¿å…åœ¨ create-react-app ä¸­ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯¼å…¥?åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º .env çš„æ–‡ä»¶ï¼Œå¹¶å†™å…¥å¯¼å…¥è·¯å¾„ï¼š 1NODE_PATH=src/app ç„¶åŽé‡æ–°å¯åŠ¨å¼€å‘æœåŠ¡å™¨ã€‚çŽ°åœ¨ï¼Œä½ åº”è¯¥èƒ½å¤Ÿåœ¨æ²¡æœ‰ç›¸å¯¹è·¯å¾„çš„æƒ…å†µä¸‹å¯¼å…¥ src/app å†…çš„ä»»ä½•å†…å®¹ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ä¸º React Router æ·»åŠ  Google Analytics?åœ¨ history å¯¹è±¡ä¸Šæ·»åŠ ä¸€ä¸ªç›‘å¬å™¨ä»¥è®°å½•æ¯ä¸ªé¡µé¢çš„è®¿é—®ï¼š 1234history.listen(function (location) &#123; window.ga('set', 'page', location.pathname + location.search) window.ga('send', 'pageview', location.pathname + location.search)&#125;) â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•æ¯ç§’æ›´æ–°ä¸€ä¸ªç»„ä»¶?ä½ éœ€è¦ä½¿ç”¨ setInterval() æ¥è§¦å‘æ›´æ”¹ï¼Œä½†ä¹Ÿéœ€è¦åœ¨ç»„ä»¶å¸è½½æ—¶æ¸…é™¤è®¡æ—¶å™¨ï¼Œä»¥é˜²æ­¢é”™è¯¯å’Œå†…å­˜æ³„æ¼ã€‚ 1234567componentDidMount() &#123; this.interval = setInterval(() =&gt; this.setState(&#123; time: Date.now() &#125;), 1000)&#125;componentWillUnmount() &#123; clearInterval(this.interval)&#125; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•å°† vendor prefixes åº”ç”¨äºŽ React ä¸­çš„å†…è”æ ·å¼?Reactä¸ä¼šè‡ªåŠ¨åº”ç”¨ vendor prefixesï¼Œä½ éœ€è¦æ‰‹åŠ¨æ·»åŠ  vendor prefixesã€‚ 12345&lt;div style=&#123;&#123; transform: 'rotate(90deg)', WebkitTransform: 'rotate(90deg)', // note the capital 'W' here msTransform: 'rotate(90deg)' // 'ms' is the only lowercase vendor prefix&#125;&#125; /&gt; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ä½¿ç”¨ React å’Œ ES6 å¯¼å…¥å’Œå¯¼å‡ºç»„ä»¶?å¯¼å‡ºç»„ä»¶æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨é»˜è®¤å¯¼å‡ºï¼š 123456789101112import React from 'react'import User from 'user'export default class MyProfile extends React.Component &#123; render()&#123; return ( &lt;User type="customer"&gt; //... &lt;/User&gt; ) &#125;&#125; ä½¿ç”¨ export è¯´æ˜Žç¬¦ï¼ŒMyProfile å°†æˆä¸ºæˆå‘˜å¹¶å¯¼å‡ºåˆ°æ­¤æ¨¡å—ï¼Œæ­¤å¤–åœ¨å…¶ä»–ç»„ä»¶ä¸­ä½ æ— éœ€æŒ‡å®šåç§°å°±å¯ä»¥å¯¼å…¥ç›¸åŒçš„å†…å®¹ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆ React ç»„ä»¶åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´?åœ¨ JSX ä¸­ï¼Œå°å†™æ ‡ç­¾è¢«è®¤ä¸ºæ˜¯ HTML æ ‡ç­¾ã€‚ä½†æ˜¯ï¼Œå«æœ‰ . çš„å¤§å†™å’Œå°å†™æ ‡ç­¾åå´ä¸æ˜¯ã€‚ &lt;component /&gt; å°†è¢«è½¬æ¢ä¸º React.createElement(&#39;component&#39;) (i.e, HTML æ ‡ç­¾) &lt;obj.component /&gt; å°†è¢«è½¬æ¢ä¸º React.createElement(obj.component) &lt;Component /&gt; å°†è¢«è½¬æ¢ä¸º React.createElement(Component) â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆç»„ä»¶çš„æž„é€ å‡½æ•°åªè¢«è°ƒç”¨ä¸€æ¬¡?React åè°ƒç®—æ³•å‡è®¾å¦‚æžœè‡ªå®šä¹‰ç»„ä»¶å‡ºçŽ°åœ¨åŽç»­æ¸²æŸ“çš„ç›¸åŒä½ç½®ï¼Œåˆ™å®ƒä¸Žä¹‹å‰çš„ç»„ä»¶ç›¸åŒï¼Œå› æ­¤é‡ç”¨å‰ä¸€ä¸ªå®žä¾‹è€Œä¸æ˜¯åˆ›å»ºæ–°å®žä¾‹ã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­å¦‚ä½•å®šä¹‰å¸¸é‡?ä½ å¯ä»¥ä½¿ç”¨ ES7 çš„ static æ¥å®šä¹‰å¸¸é‡ã€‚ 123class MyComponent extends React.Component &#123; static DEFAULT_PAGINATION = 10&#125; â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­å¦‚ä½•ä»¥ç¼–ç¨‹æ–¹å¼è§¦å‘ç‚¹å‡»äº‹ä»¶?ä½ å¯ä»¥ä½¿ç”¨ ref å±žæ€§é€šè¿‡å›žè°ƒå‡½æ•°èŽ·å–å¯¹åº•å±‚çš„ HTMLinputeElement å¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶å°†è¯¥å¼•ç”¨å­˜å‚¨ä¸ºç±»å±žæ€§ï¼Œä¹‹åŽä½ å°±å¯ä»¥åˆ©ç”¨è¯¥å¼•ç”¨åœ¨äº‹ä»¶å›žè°ƒå‡½æ•°ä¸­ï¼Œ ä½¿ç”¨ HTMLElement.click æ–¹æ³•è§¦å‘ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ã€‚è¿™å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š åœ¨ render æ–¹æ³•åˆ›å»ºä¸€ä¸ª refï¼š 1&lt;input ref=&#123;input =&gt; this.inputElement = input&#125; /&gt; åœ¨äº‹ä»¶å¤„ç†å™¨ä¸­è§¦å‘ç‚¹å‡»äº‹ä»¶ 1this.inputElement.click() â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­æ˜¯å¦å¯ä»¥ä½¿ç”¨ async/await?å¦‚æžœè¦åœ¨ React ä¸­ä½¿ç”¨ async/awaitï¼Œåˆ™éœ€è¦ Babel å’Œ transform-async-to-generator æ’ä»¶ã€‚ â¬† è¿”å›žé¡¶éƒ¨ React é¡¹ç›®å¸¸è§çš„æ–‡ä»¶ç»“æž„æ˜¯ä»€ä¹ˆ?React é¡¹ç›®æ–‡ä»¶ç»“æž„æœ‰ä¸¤ç§å¸¸è§çš„å®žè·µã€‚ æŒ‰åŠŸèƒ½æˆ–è·¯ç”±åˆ†ç»„: æž„å»ºé¡¹ç›®çš„ä¸€ç§å¸¸è§æ–¹æ³•æ˜¯å°† CSSï¼ŒJS å’Œæµ‹è¯•ç”¨ä¾‹æ”¾åœ¨ä¸€èµ·ï¼ŒæŒ‰åŠŸèƒ½æˆ–è·¯ç”±åˆ†ç»„ã€‚ 123456789101112131415161718common/â”œâ”€ Avatar.jsâ”œâ”€ Avatar.cssâ”œâ”€ APIUtils.jsâ””â”€ APIUtils.test.jsfeed/â”œâ”€ index.jsâ”œâ”€ Feed.jsâ”œâ”€ Feed.cssâ”œâ”€ FeedStory.jsâ”œâ”€ FeedStory.test.jsâ””â”€ FeedAPI.jsprofile/â”œâ”€ index.jsâ”œâ”€ Profile.jsâ”œâ”€ ProfileHeader.jsâ”œâ”€ ProfileHeader.cssâ””â”€ ProfileAPI.js æŒ‰æ–‡ä»¶ç±»åž‹åˆ†ç»„: å¦ä¸€ç§æµè¡Œçš„é¡¹ç›®ç»“æž„ç»„ç»‡æ–¹æ³•æ˜¯å°†ç±»ä¼¼çš„æ–‡ä»¶ç»„åˆåœ¨ä¸€èµ·ã€‚ 123456789101112131415api/â”œâ”€ APIUtils.jsâ”œâ”€ APIUtils.test.jsâ”œâ”€ ProfileAPI.jsâ””â”€ UserAPI.jscomponents/â”œâ”€ Avatar.jsâ”œâ”€ Avatar.cssâ”œâ”€ Feed.jsâ”œâ”€ Feed.cssâ”œâ”€ FeedStory.jsâ”œâ”€ FeedStory.test.jsâ”œâ”€ Profile.jsâ”œâ”€ ProfileHeader.jsâ””â”€ ProfileHeader.css â¬† è¿”å›žé¡¶éƒ¨ æœ€æµè¡Œçš„åŠ¨ç”»è½¯ä»¶åŒ…æ˜¯ä»€ä¹ˆ?React Transition Group å’Œ React Motion æ˜¯Reactç”Ÿæ€ç³»ç»Ÿä¸­æµè¡Œçš„åŠ¨ç”»åŒ…ã€‚ â¬† è¿”å›žé¡¶éƒ¨ æ¨¡å—åŒ–æ ·å¼æ–‡ä»¶æœ‰ä»€ä¹ˆå¥½å¤„?å»ºè®®é¿å…åœ¨ç»„ä»¶ä¸­å¯¹æ ·å¼å€¼è¿›è¡Œç¡¬ç¼–ç ã€‚ä»»ä½•å¯èƒ½åœ¨ä¸åŒçš„ UI ç»„ä»¶ä¹‹é—´ä½¿ç”¨çš„å€¼éƒ½åº”è¯¥æå–åˆ°å®ƒä»¬è‡ªå·±çš„æ¨¡å—ä¸­ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥å°†è¿™äº›æ ·å¼æå–åˆ°å•ç‹¬çš„ç»„ä»¶ä¸­ï¼š 12345678910111213export const colors = &#123; white, black, blue&#125;export const space = [ 0, 8, 16, 32, 64] ç„¶åŽåœ¨å…¶ä»–ç»„ä»¶ä¸­å•ç‹¬å¯¼å…¥ï¼š 1import &#123; space, colors &#125; from './styles' â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ React æµè¡Œçš„ç‰¹å®š linters?ESLint æ˜¯ä¸€ä¸ªæµè¡Œçš„ JavaScript linterã€‚æœ‰ä¸€äº›æ’ä»¶å¯ä»¥åˆ†æžç‰¹å®šçš„ä»£ç æ ·å¼ã€‚åœ¨ React ä¸­æœ€å¸¸è§çš„ä¸€ä¸ªæ˜¯åä¸º eslint-plugin-react npm åŒ…ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒå°†ä½¿ç”¨è§„åˆ™æ£€æŸ¥è®¸å¤šæœ€ä½³å®žè·µï¼Œæ£€æŸ¥å†…å®¹ä»Žè¿­ä»£å™¨ä¸­çš„é”®åˆ°ä¸€ç»„å®Œæ•´çš„ prop ç±»åž‹ã€‚å¦ä¸€ä¸ªæµè¡Œçš„æ’ä»¶æ˜¯ eslint-plugin-jsx-a11yï¼Œå®ƒå°†å¸®åŠ©ä¿®å¤å¯è®¿é—®æ€§çš„å¸¸è§é—®é¢˜ã€‚ç”±äºŽ JSX æä¾›çš„è¯­æ³•ä¸Žå¸¸è§„ HTML ç•¥æœ‰ä¸åŒï¼Œå› æ­¤å¸¸è§„æ’ä»¶æ— æ³•èŽ·å– alt æ–‡æœ¬å’Œ tabindex çš„é—®é¢˜ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•å‘èµ· AJAX è°ƒç”¨ä»¥åŠåº”è¯¥åœ¨å“ªäº›ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è¿›è¡Œ AJAX è°ƒç”¨?ä½ å¯ä»¥ä½¿ç”¨ AJAX åº“ï¼Œå¦‚ Axiosï¼ŒjQuery AJAX å’Œæµè§ˆå™¨å†…ç½®çš„ fetch APIã€‚ä½ åº”è¯¥åœ¨ componentDidMount() ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­èŽ·å–æ•°æ®ã€‚è¿™æ ·å½“èŽ·å–åˆ°æ•°æ®çš„æ—¶å€™ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ setState() æ–¹æ³•æ¥æ›´æ–°ä½ çš„ç»„ä»¶ã€‚ ä¾‹å¦‚ï¼Œä»Ž API ä¸­èŽ·å–å‘˜å·¥åˆ—è¡¨å¹¶è®¾ç½®æœ¬åœ°çŠ¶æ€ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041class MyComponent extends React.Component &#123; constructor(props) &#123; super(props) this.state = &#123; employees: [], error: null &#125; &#125; componentDidMount() &#123; fetch('https://api.example.com/items') .then(res =&gt; res.json()) .then( (result) =&gt; &#123; this.setState(&#123; employees: result.employees &#125;) &#125;, (error) =&gt; &#123; this.setState(&#123; error &#125;) &#125; ) &#125; render() &#123; const &#123; error, employees &#125; = this.state if (error) &#123; return &lt;div&gt;Error: &#123;error.message&#125;&lt;/div&gt;; &#125; else &#123; return ( &lt;ul&gt; &#123;employees.map(item =&gt; ( &lt;li key=&#123;employee.name&#125;&gt; &#123;employee.name&#125;-&#123;employees.experience&#125; &lt;/li&gt; ))&#125; &lt;/ul&gt; ) &#125; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯æ¸²æŸ“å±žæ€§?Render Props æ˜¯ä¸€ç§ç®€å•çš„æŠ€æœ¯ï¼Œç”¨äºŽä½¿ç”¨å€¼ä¸ºå‡½æ•°çš„ prop å±žæ€§åœ¨ç»„ä»¶ä¹‹é—´å…±äº«ä»£ç ã€‚ä¸‹é¢çš„ç»„ä»¶ä½¿ç”¨è¿”å›ž React å…ƒç´ çš„ render å±žæ€§ï¼š 123&lt;DataProvider render=&#123;data =&gt; ( &lt;h1&gt;&#123;`Hello $&#123;data.target&#125;`&#125;&lt;/h1&gt;)&#125;/&gt; åƒ React Router å’Œ DownShift è¿™æ ·çš„åº“ä½¿ç”¨äº†è¿™ç§æ¨¡å¼ã€‚ â¬† è¿”å›žé¡¶éƒ¨ React Router ä»€ä¹ˆæ˜¯ React Router?React Router æ˜¯ä¸€ä¸ªåŸºäºŽ React ä¹‹ä¸Šçš„å¼ºå¤§è·¯ç”±åº“ï¼Œå¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿåœ°å‘åº”ç”¨æ·»åŠ è§†å›¾å’Œæ•°æ®æµï¼ŒåŒæ—¶ä¿æŒ UI ä¸Ž URL åŒæ­¥ã€‚ â¬† è¿”å›žé¡¶éƒ¨ React Router ä¸Ž history åº“çš„åŒºåˆ«?React Router æ˜¯historyåº“çš„åŒ…è£…å™¨ï¼Œå®ƒå¤„ç†æµè§ˆå™¨çš„window.historyä¸Žæµè§ˆå™¨å’Œå“ˆå¸ŒåŽ†å²çš„äº¤äº’ã€‚å®ƒè¿˜æä¾›äº†å†…å­˜åŽ†å²è®°å½•ï¼Œè¿™å¯¹äºŽæ²¡æœ‰å…¨å±€åŽ†å²è®°å½•çš„çŽ¯å¢ƒéžå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚ç§»åŠ¨åº”ç”¨ç¨‹åºå¼€å‘ï¼ˆReact Nativeï¼‰å’Œä½¿ç”¨ Node è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React Router v4 ä¸­çš„&lt;Router&gt;ç»„ä»¶æ˜¯ä»€ä¹ˆ?React Router v4 æä¾›äº†ä»¥ä¸‹ä¸‰ç§ç±»åž‹çš„ &lt;Router&gt; ç»„ä»¶: &lt;BrowserRouter&gt; &lt;HashRouter&gt; &lt;MemoryRouter&gt; ä»¥ä¸Šç»„ä»¶å°†åˆ›å»ºbrowserï¼Œhashå’Œmemoryçš„ history å®žä¾‹ã€‚React Router v4 é€šè¿‡routerå¯¹è±¡ä¸­çš„ä¸Šä¸‹æ–‡ä½¿ä¸Žæ‚¨çš„è·¯ç”±å™¨å…³è”çš„historyå®žä¾‹çš„å±žæ€§å’Œæ–¹æ³•å¯ç”¨ã€‚ â¬† è¿”å›žé¡¶éƒ¨ history ä¸­çš„ push() å’Œ replace() æ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆ?ä¸€ä¸ª history å®žä¾‹æœ‰ä¸¤ç§å¯¼èˆªæ–¹æ³•ï¼š push() replace() å¦‚æžœæ‚¨å°† history è§†ä¸ºä¸€ä¸ªè®¿é—®ä½ç½®çš„æ•°ç»„ï¼Œåˆ™push()å°†å‘æ•°ç»„æ·»åŠ ä¸€ä¸ªæ–°ä½ç½®ï¼Œreplace()å°†ç”¨æ–°çš„ä½ç½®æ›¿æ¢æ•°ç»„ä¸­çš„å½“å‰ä½ç½®ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ä½¿ç”¨åœ¨ React Router v4 ä¸­ä»¥ç¼–ç¨‹çš„æ–¹å¼è¿›è¡Œå¯¼èˆª?åœ¨ç»„ä»¶ä¸­å®žçŽ°æ“ä½œè·¯ç”±/å¯¼èˆªæœ‰ä¸‰ç§ä¸åŒçš„æ–¹æ³•ã€‚ ä½¿ç”¨withRouter()é«˜é˜¶å‡½æ•°ï¼š withRouter()é«˜é˜¶å‡½æ•°å°†æ³¨å…¥ history å¯¹è±¡ä½œä¸ºç»„ä»¶çš„ propã€‚è¯¥å¯¹è±¡æä¾›äº†push()å’Œreplace()æ–¹æ³•ï¼Œä»¥é¿å…ä½¿ç”¨ä¸Šä¸‹æ–‡ã€‚ 12345678910import &#123; withRouter &#125; from 'react-router-dom' // this also works with 'react-router-native'const Button = withRouter((&#123; history &#125;) =&gt; ( &lt;button type='button' onClick=&#123;() =&gt; &#123; history.push('/new-location') &#125;&#125; &gt; &#123;'Click Me!'&#125; &lt;/button&gt;)) ä½¿ç”¨&lt;Route&gt;ç»„ä»¶å’Œæ¸²æŸ“å±žæ€§æ¨¡å¼ï¼š &lt;Route&gt;ç»„ä»¶ä¼ é€’ä¸ŽwithRouter()ç›¸åŒçš„å±žæ€§ï¼Œå› æ­¤æ‚¨å°†èƒ½å¤Ÿé€šè¿‡ history å±žæ€§è®¿é—®åˆ°æ“ä½œåŽ†å²è®°å½•çš„æ–¹æ³•ã€‚ 123456789101112import &#123; Route &#125; from 'react-router-dom'const Button = () =&gt; ( &lt;Route render=&#123;(&#123; history &#125;) =&gt; ( &lt;button type='button' onClick=&#123;() =&gt; &#123; history.push('/new-location') &#125;&#125; &gt; &#123;'Click Me!'&#125; &lt;/button&gt; )&#125; /&gt;) ä½¿ç”¨ä¸Šä¸‹æ–‡: å»ºè®®ä¸è¦ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œå¹¶å°†å…¶è§†ä¸ºä¸ç¨³å®šçš„APIã€‚ 12345678910111213141516const Button = (props, context) =&gt; ( &lt;button type='button' onClick=&#123;() =&gt; &#123; context.history.push('/new-location') &#125;&#125; &gt; &#123;'Click Me!'&#125; &lt;/button&gt;)Button.contextTypes = &#123; history: React.PropTypes.shape(&#123; push: React.PropTypes.func.isRequired &#125;)&#125; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ React Router v4 ä¸­èŽ·å–æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°?åœ¨ React Router v4 ä¸­å¹¶æ²¡æœ‰å†…ç½®è§£æžæŸ¥è¯¢å­—ç¬¦ä¸²çš„èƒ½åŠ›ï¼Œå› ä¸ºå¤šå¹´æ¥ä¸€ç›´æœ‰ç”¨æˆ·å¸Œæœ›æ”¯æŒä¸åŒçš„å®žçŽ°ã€‚å› æ­¤ï¼Œä½¿ç”¨è€…å¯ä»¥é€‰æ‹©ä»–ä»¬å–œæ¬¢çš„å®žçŽ°æ–¹å¼ã€‚å»ºè®®çš„æ–¹æ³•æ˜¯ä½¿ç”¨ query-string åº“ã€‚ 12const queryString = require('query-string');const parsed = queryString.parse(props.location.search); å¦‚æžœä½ æƒ³è¦ä½¿ç”¨åŽŸç”Ÿ API çš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ URLSearchParams ï¼š 12const params = new URLSearchParams(props.location.search)const foo = params.get('name') å¦‚æžœä½¿ç”¨ URLSearchParams çš„è¯æ‚¨åº”è¯¥ä¸º IE11 ä½¿ç”¨polyfillã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆä½ ä¼šå¾—åˆ° â€œRouter may have only one child elementâ€ è­¦å‘Š?æ­¤è­¦å‘Šçš„æ„æ€æ˜¯Routerç»„ä»¶ä¸‹ä»…èƒ½åŒ…å«ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ ä½ å¿…é¡»å°†ä½ çš„ Route åŒ…è£…åœ¨&lt;Switch&gt;å—ä¸­ï¼Œå› ä¸º&lt;Switch&gt;æ˜¯å”¯ä¸€çš„ï¼Œå®ƒåªæä¾›ä¸€ä¸ªè·¯ç”±ã€‚ é¦–å…ˆï¼Œæ‚¨éœ€è¦åœ¨å¯¼å…¥ä¸­æ·»åŠ Switchï¼š 1import &#123; Switch, Router, Route &#125; from 'react-router' ç„¶åŽåœ¨&lt;Switch&gt;å—ä¸­å®šä¹‰è·¯ç”±ï¼š 123456&lt;Router&gt; &lt;Switch&gt; &lt;Route &#123;/* ... */&#125; /&gt; &lt;Route &#123;/* ... */&#125; /&gt; &lt;/Switch&gt;&lt;/Router&gt; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ React Router v4 ä¸­å°† params ä¼ é€’ç»™ history.push æ–¹æ³•?åœ¨å¯¼èˆªæ—¶ï¼Œæ‚¨å¯ä»¥å°† props ä¼ é€’ç»™historyå¯¹è±¡ï¼š 12345this.props.history.push(&#123; pathname: '/template', search: '?name=sudheer', state: &#123; detail: response.data &#125;&#125;) searchå±žæ€§ç”¨äºŽåœ¨push()æ–¹æ³•ä¸­ä¼ é€’æŸ¥è¯¢å‚æ•°ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•å®žçŽ°é»˜è®¤é¡µé¢æˆ– 404 é¡µé¢?&lt;Switch&gt;å‘ˆçŽ°åŒ¹é…çš„ç¬¬ä¸€ä¸ªå­©å­&lt;Route&gt;ã€‚ æ²¡æœ‰è·¯å¾„çš„&lt;Route&gt;æ€»æ˜¯åŒ¹é…ã€‚æ‰€ä»¥ä½ åªéœ€è¦ç®€å•åœ°åˆ é™¤ path å±žæ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345&lt;Switch&gt; &lt;Route exact path="/" component=&#123;Home&#125;/&gt; &lt;Route path="/user" component=&#123;User&#125;/&gt; &lt;Route component=&#123;NotFound&#125; /&gt;&lt;/Switch&gt; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ React Router v4 ä¸ŠèŽ·å–åŽ†å²å¯¹è±¡? åˆ›å»ºä¸€ä¸ªå¯¼å‡ºhistoryå¯¹è±¡çš„æ¨¡å—ï¼Œå¹¶åœ¨æ•´ä¸ªé¡¹ç›®ä¸­å¯¼å…¥è¯¥æ¨¡å—ã€‚ ä¾‹å¦‚ï¼Œ åˆ›å»ºhistory.jsæ–‡ä»¶: 12345import &#123; createBrowserHistory &#125; from 'history'export default createBrowserHistory(&#123; /* pass a configuration object here if needed */&#125;) æ‚¨åº”è¯¥ä½¿ç”¨&lt;Router&gt;ç»„ä»¶è€Œä¸æ˜¯å†…ç½®è·¯ç”±å™¨ã€‚åœ¨index.jsæ–‡ä»¶ä¸­å¯¼å…¥ä¸Šé¢çš„history.jsï¼š 123456789import &#123; Router &#125; from 'react-router-dom'import history from './history'import App from './App'ReactDOM.render(( &lt;Router history=&#123;history&#125;&gt; &lt;App /&gt; &lt;/Router&gt;), holder) æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ç±»ä¼¼äºŽå†…ç½®åŽ†å²å¯¹è±¡çš„historyå¯¹è±¡çš„pushæ–¹æ³•ï¼š 1234// some-other-file.jsimport history from './history'history.push('/go-here') â¬† è¿”å›žé¡¶éƒ¨ ç™»å½•åŽå¦‚ä½•æ‰§è¡Œè‡ªåŠ¨é‡å®šå‘?react-routeråŒ…åœ¨ React Router ä¸­æä¾›äº†&lt;Redirect&gt;ç»„ä»¶ã€‚æ¸²æŸ“&lt;Redirect&gt;å°†å¯¼èˆªåˆ°æ–°ä½ç½®ã€‚ä¸ŽæœåŠ¡å™¨ç«¯é‡å®šå‘ä¸€æ ·ï¼Œæ–°ä½ç½®å°†è¦†ç›–åŽ†å²å †æ ˆä¸­çš„å½“å‰ä½ç½®ã€‚ 123456789101112import React, &#123; Component &#125; from 'react'import &#123; Redirect &#125; from 'react-router'export default class LoginComponent extends Component &#123; render() &#123; if (this.state.isLoggedIn === true) &#123; return &lt;Redirect to="/your/redirect/page" /&gt; &#125; else &#123; return &lt;div&gt;&#123;'Login Please'&#125;&lt;/div&gt; &#125; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ React Internationalization ä»€ä¹ˆæ˜¯ React Intl?React Intlåº“ä½¿ React ä¸­çš„å†…éƒ¨åŒ–å˜å¾—ç®€å•ï¼Œä½¿ç”¨çŽ°æˆçš„ç»„ä»¶å’Œ API ï¼Œå¯ä»¥å¤„ç†ä»Žæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œæ—¥æœŸå’Œæ•°å­—åˆ°å¤æ•°çš„æ‰€æœ‰åŠŸèƒ½ã€‚React Intl æ˜¯FormatJSçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒé€šè¿‡å…¶ç»„ä»¶å’Œ API æä¾›ä¸Ž React çš„ç»‘å®šã€‚ â¬† è¿”å›žé¡¶éƒ¨ React Intl çš„ä¸»è¦ç‰¹æ€§æ˜¯ä»€ä¹ˆ? ç”¨åˆ†éš”ç¬¦æ˜¾ç¤ºæ•°å­— æ­£ç¡®æ˜¾ç¤ºæ—¥æœŸå’Œæ—¶é—´ æ˜¾ç¤ºç›¸å¯¹äºŽâ€œçŽ°åœ¨â€çš„æ—¥æœŸ å°†æ ‡ç­¾è½¬æ¢ä¸ºå­—ç¬¦ä¸² æ”¯æŒ 150 å¤šç§è¯­è¨€ æ”¯æŒåœ¨æµè§ˆå™¨å’Œ Node ä¸­è¿è¡Œ å»ºç«‹åœ¨æ ‡å‡†ä¹‹ä¸Š â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React Intl ä¸­æœ‰å“ªä¸¤ç§æ ¼å¼åŒ–æ–¹å¼?è¯¥åº“æä¾›äº†ä¸¤ç§æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œæ•°å­—å’Œæ—¥æœŸçš„æ–¹æ³•ï¼šReact ç»„ä»¶æˆ– APIã€‚ 1234&lt;FormattedMessage id=&#123;'account'&#125; defaultMessage=&#123;'The amount is less than minimum balance.'&#125;/&gt; 12345678const messages = defineMessages(&#123; accountMessage: &#123; id: 'account', defaultMessage: 'The amount is less than minimum balance.', &#125;&#125;)formatMessage(messages.accountMessage) â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React Intl ä¸­å¦‚ä½•ä½¿ç”¨&lt;FormattedMessage&gt;ä½œä¸ºå ä½ç¬¦ä½¿ç”¨?react-intlçš„&lt;Formatted ... /&gt;ç»„ä»¶è¿”å›žå…ƒç´ ï¼Œè€Œä¸æ˜¯çº¯æ–‡æœ¬ï¼Œå› æ­¤å®ƒä»¬ä¸èƒ½ç”¨äºŽå ä½ç¬¦ï¼Œæ›¿ä»£æ–‡æœ¬ç­‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨åº”è¯¥ä½¿ç”¨è¾ƒä½Žçº§åˆ«çš„ API formatMessage()ã€‚æ‚¨å¯ä»¥ä½¿ç”¨injectIntl()é«˜é˜¶å‡½æ•°å°†intlå¯¹è±¡æ³¨å…¥åˆ°ç»„ä»¶ä¸­ï¼Œç„¶åŽä½¿ç”¨è¯¥å¯¹è±¡ä¸Šä½¿ç”¨formatMessage()æ ¼å¼åŒ–æ¶ˆæ¯ã€‚ 12345678910111213import React from 'react'import &#123; injectIntl, intlShape &#125; from 'react-intl'const MyComponent = (&#123; intl &#125;) =&gt; &#123; const placeholder = intl.formatMessage(&#123;id: 'messageId'&#125;) return &lt;input placeholder=&#123;placeholder&#125; /&gt;&#125;MyComponent.propTypes = &#123; intl: intlShape.isRequired&#125;export default injectIntl(MyComponent) â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ä½¿ç”¨ React Intl è®¿é—®å½“å‰è¯­è¨€çŽ¯å¢ƒ?æ‚¨å¯ä»¥åœ¨åº”ç”¨çš„ä»»ä½•ç»„ä»¶ä¸­ä½¿ç”¨injectIntl()èŽ·å–çš„å½“å‰è¯­è¨€çŽ¯å¢ƒï¼š 1234567891011import &#123; injectIntl, intlShape &#125; from 'react-intl'const MyComponent = (&#123; intl &#125;) =&gt; ( &lt;div&gt;&#123;`The current locale is $&#123;intl.locale&#125;`&#125;&lt;/div&gt;)MyComponent.propTypes = &#123; intl: intlShape.isRequired&#125;export default injectIntl(MyComponent) â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ä½¿ç”¨ React Intl æ ¼å¼åŒ–æ—¥æœŸ?injectIntl()é«˜é˜¶ç»„ä»¶å°†å…è®¸æ‚¨é€šè¿‡ç»„ä»¶ä¸­çš„ props è®¿é—®formatDate()æ–¹æ³•ã€‚ è¯¥æ–¹æ³•ç”±FormattedDateå®žä¾‹åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œå®ƒè¿”å›žæ ¼å¼åŒ–æ—¥æœŸçš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ 1234567891011121314151617import &#123; injectIntl, intlShape &#125; from 'react-intl'const stringDate = this.props.intl.formatDate(date, &#123; year: 'numeric', month: 'numeric', day: 'numeric'&#125;)const MyComponent = (&#123;intl&#125;) =&gt; ( &lt;div&gt;&#123;`The formatted date is $&#123;stringDate&#125;`&#125;&lt;/div&gt;)MyComponent.propTypes = &#123; intl: intlShape.isRequired&#125;export default injectIntl(MyComponent) â¬† è¿”å›žé¡¶éƒ¨ React Testing åœ¨ React æµ‹è¯•ä¸­ä»€ä¹ˆæ˜¯æµ…å±‚æ¸²æŸ“ï¼ˆShallow Rendererï¼‰?æµ…å±‚æ¸²æŸ“å¯¹äºŽåœ¨ React ä¸­ç¼–å†™å•å…ƒæµ‹è¯•ç”¨ä¾‹å¾ˆæœ‰ç”¨ã€‚å®ƒå…è®¸æ‚¨æ¸²æŸ“ä¸€ä¸ªä¸€çº§æ·±çš„ç»„ä»¶å¹¶æ–­è¨€å…¶æ¸²æŸ“æ–¹æ³•è¿”å›žçš„å†…å®¹ï¼Œè€Œä¸å¿…æ‹…å¿ƒå­ç»„ä»¶æœªå®žä¾‹åŒ–æˆ–æ¸²æŸ“ã€‚ ä¾‹å¦‚ï¼Œå¦‚æžœæ‚¨æœ‰ä»¥ä¸‹ç»„ä»¶ï¼š 12345678function MyComponent() &#123; return ( &lt;div&gt; &lt;span className=&#123;'heading'&#125;&gt;&#123;'Title'&#125;&lt;/span&gt; &lt;span className=&#123;'description'&#125;&gt;&#123;'Description'&#125;&lt;/span&gt; &lt;/div&gt; )&#125; ç„¶åŽä½ å¯ä»¥å¦‚ä¸‹æ–­è¨€ï¼š 12345678910111213import ShallowRenderer from 'react-test-renderer/shallow'// in your testconst renderer = new ShallowRenderer()renderer.render(&lt;MyComponent /&gt;)const result = renderer.getRenderOutput()expect(result.type).toBe('div')expect(result.props.children).toEqual([ &lt;span className=&#123;'heading'&#125;&gt;&#123;'Title'&#125;&lt;/span&gt;, &lt;span className=&#123;'description'&#125;&gt;&#123;'Description'&#125;&lt;/span&gt;]) â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­ TestRenderer åŒ…æ˜¯ä»€ä¹ˆ?æ­¤åŒ…æä¾›äº†ä¸€ä¸ªæ¸²æŸ“å™¨ï¼Œå¯ç”¨äºŽå°†ç»„ä»¶æ¸²æŸ“ä¸ºçº¯ JavaScript å¯¹è±¡ï¼Œè€Œä¸ä¾èµ–äºŽ DOM æˆ–åŽŸç”Ÿç§»åŠ¨çŽ¯å¢ƒã€‚è¯¥åŒ…å¯ä»¥è½»æ¾èŽ·å–ç”± ReactDOM æˆ– React Native å¹³å°æ‰€æ¸²æŸ“çš„è§†å›¾å±‚æ¬¡ç»“æž„ï¼ˆç±»ä¼¼äºŽDOMæ ‘ï¼‰çš„å¿«ç…§ï¼Œè€Œæ— éœ€ä½¿ç”¨æµè§ˆå™¨æˆ–jsdomã€‚ 1234567891011121314import TestRenderer from 'react-test-renderer'const Link = (&#123;page, children&#125;) =&gt; &lt;a href=&#123;page&#125;&gt;&#123;children&#125;&lt;/a&gt;const testRenderer = TestRenderer.create( &lt;Link page=&#123;'https://www.facebook.com/'&#125;&gt;&#123;'Facebook'&#125;&lt;/Link&gt;)console.log(testRenderer.toJSON())// &#123;// type: 'a',// props: &#123; href: 'https://www.facebook.com/' &#125;,// children: [ 'Facebook' ]// &#125; â¬† è¿”å›žé¡¶éƒ¨ ReactTestUtils åŒ…çš„ç›®çš„æ˜¯ä»€ä¹ˆ?ReactTestUtilsç”±with-addonsåŒ…æä¾›ï¼Œå…è®¸æ‚¨å¯¹æ¨¡æ‹Ÿ DOM æ‰§è¡Œæ“ä½œä»¥è¿›è¡Œå•å…ƒæµ‹è¯•ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Jest?Jestæ˜¯ä¸€ä¸ªç”± Facebook åŸºäºŽ Jasmine åˆ›å»ºçš„ JavaScript å•å…ƒæµ‹è¯•æ¡†æž¶ï¼Œæä¾›è‡ªåŠ¨æ¨¡æ‹Ÿåˆ›å»ºå’ŒjsdomçŽ¯å¢ƒã€‚å®ƒé€šå¸¸ç”¨äºŽæµ‹è¯•ç»„ä»¶ã€‚ â¬† è¿”å›žé¡¶éƒ¨ Jest å¯¹æ¯” Jasmine æœ‰ä»€ä¹ˆä¼˜åŠ¿?ä¸Ž Jasmine ç›¸æ¯”ï¼Œæœ‰å‡ ä¸ªä¼˜ç‚¹ï¼š è‡ªåŠ¨æŸ¥æ‰¾åœ¨æºä»£ç ä¸­è¦æ‰§è¡Œæµ‹è¯•ã€‚ åœ¨è¿è¡Œæµ‹è¯•æ—¶è‡ªåŠ¨æ¨¡æ‹Ÿä¾èµ–é¡¹ã€‚ å…è®¸æ‚¨åŒæ­¥æµ‹è¯•å¼‚æ­¥ä»£ç ã€‚ ä½¿ç”¨å‡çš„ DOM å®žçŽ°ï¼ˆé€šè¿‡jsdomï¼‰è¿è¡Œæµ‹è¯•ï¼Œä»¥ä¾¿å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸Šè¿è¡Œæµ‹è¯•ã€‚ åœ¨å¹¶è¡Œæµç¨‹ä¸­è¿è¡Œæµ‹è¯•ï¼Œä»¥ä¾¿æ›´å¿«å®Œæˆã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸¾ä¸€ä¸ªç®€å•çš„ Jest æµ‹è¯•ç”¨ä¾‹è®©æˆ‘ä»¬ä¸ºsum.jsæ–‡ä»¶ä¸­æ·»åŠ ä¸¤ä¸ªæ•°å­—çš„å‡½æ•°ç¼–å†™ä¸€ä¸ªæµ‹è¯•ï¼š 123const sum = (a, b) =&gt; a + bexport default sum åˆ›å»ºä¸€ä¸ªåä¸ºsum.test.jsçš„æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«å®žé™…æµ‹è¯•ï¼š 12345import sum from './sum'test('adds 1 + 2 to equal 3', () =&gt; &#123; expect(sum(1, 2)).toBe(3)&#125;) ç„¶åŽå°†ä»¥ä¸‹éƒ¨åˆ†æ·»åŠ åˆ°package.jsonï¼š 12345&#123; "scripts": &#123; "test": "jest" &#125;&#125; æœ€åŽï¼Œè¿è¡Œyarn testæˆ–npm testï¼ŒJest å°†æ‰“å°ç»“æžœï¼š 123$ yarn testPASS ./sum.test.jsâœ“ adds 1 + 2 to equal 3 (2ms) â¬† è¿”å›žé¡¶éƒ¨ React Redux ä»€ä¹ˆæ˜¯ Flux?Flux æ˜¯åº”ç”¨ç¨‹åºè®¾è®¡èŒƒä¾‹ï¼Œç”¨äºŽæ›¿ä»£æ›´ä¼ ç»Ÿçš„ MVC æ¨¡å¼ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªæ¡†æž¶æˆ–åº“ï¼Œè€Œæ˜¯ä¸€ç§æ–°çš„ä½“ç³»ç»“æž„ï¼Œå®ƒè¡¥å……äº† React å’Œå•å‘æ•°æ®æµçš„æ¦‚å¿µã€‚åœ¨ä½¿ç”¨ React æ—¶ï¼ŒFacebook ä¼šåœ¨å†…éƒ¨ä½¿ç”¨æ­¤æ¨¡å¼ã€‚ åœ¨ dispatcherï¼Œstores å’Œè§†å›¾ç»„ä»¶å…·æœ‰å¦‚ä¸‹ä¸åŒçš„è¾“å…¥å’Œè¾“å‡ºï¼š â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Redux?Redux æ˜¯åŸºäºŽ Fluxè®¾è®¡æ¨¡å¼ çš„ JavaScript åº”ç”¨ç¨‹åºçš„å¯é¢„æµ‹çŠ¶æ€å®¹å™¨ã€‚Redux å¯ä»¥ä¸Ž React ä¸€èµ·ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸Žä»»ä½•å…¶ä»–è§†å›¾åº“ä¸€èµ·ä½¿ç”¨ã€‚å®ƒå¾ˆå°ï¼ˆçº¦2kBï¼‰å¹¶ä¸”æ²¡æœ‰ä¾èµ–æ€§ã€‚ â¬† è¿”å›žé¡¶éƒ¨ Redux çš„æ ¸å¿ƒåŽŸåˆ™æ˜¯ä»€ä¹ˆï¼Ÿ?Redux éµå¾ªä¸‰ä¸ªåŸºæœ¬åŽŸåˆ™ï¼š å•ä¸€æ•°æ®æ¥æºï¼š æ•´ä¸ªåº”ç”¨ç¨‹åºçš„çŠ¶æ€å­˜å‚¨åœ¨å•ä¸ªå¯¹è±¡æ ‘ä¸­ã€‚å•çŠ¶æ€æ ‘å¯ä»¥æ›´å®¹æ˜“åœ°è·Ÿè¸ªéšæ—¶é—´çš„å˜åŒ–å¹¶è°ƒè¯•æˆ–æ£€æŸ¥åº”ç”¨ç¨‹åºã€‚ çŠ¶æ€æ˜¯åªè¯»çš„ï¼š æ”¹å˜çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯å‘å‡ºä¸€ä¸ªåŠ¨ä½œï¼Œä¸€ä¸ªæè¿°å‘ç”Ÿçš„äº‹æƒ…çš„å¯¹è±¡ã€‚è¿™å¯ä»¥ç¡®ä¿è§†å›¾å’Œç½‘ç»œè¯·æ±‚éƒ½ä¸ä¼šç›´æŽ¥å†™å…¥çŠ¶æ€ã€‚ ä½¿ç”¨çº¯å‡½æ•°è¿›è¡Œæ›´æ”¹ï¼š è¦æŒ‡å®šçŠ¶æ€æ ‘å¦‚ä½•é€šè¿‡æ“ä½œè¿›è¡Œè½¬æ¢ï¼Œæ‚¨å¯ä»¥ç¼–å†™reducersã€‚Reducers åªæ˜¯çº¯å‡½æ•°ï¼Œå®ƒå°†å…ˆå‰çš„çŠ¶æ€å’Œæ“ä½œä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›žä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸Ž Flux ç›¸æ¯”ï¼ŒRedux çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆ?æˆ‘ä»¬åº”è¯¥è¯´ä½¿ç”¨ Redux è€Œä¸æ˜¯ Flux å‡ ä¹Žæ²¡æœ‰ä»»ä½•ç¼ºç‚¹ã€‚è¿™äº›å¦‚ä¸‹ï¼š æ‚¨å°†éœ€è¦å­¦ä¼šé¿å…çªå˜ï¼š Flux å¯¹å˜å¼‚æ•°æ®æ¯«ä¸åå•¬ï¼Œä½† Redux ä¸å–œæ¬¢çªå˜ï¼Œè®¸å¤šä¸Ž Redux äº’è¡¥çš„åŒ…å‡è®¾æ‚¨ä»Žä¸æ”¹å˜çŠ¶æ€ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ dev-only è½¯ä»¶åŒ…å¼ºåˆ¶æ‰§è¡Œæ­¤æ“ä½œï¼Œä¾‹å¦‚redux-immutable-state-invariantï¼ŒImmutable.jsï¼Œæˆ–æŒ‡ç¤ºæ‚¨çš„å›¢é˜Ÿç¼–å†™éžå˜å¼‚ä»£ç ã€‚ æ‚¨å°†ä¸å¾—ä¸ä»”ç»†é€‰æ‹©æ‚¨çš„è½¯ä»¶åŒ…ï¼š è™½ç„¶ Flux æ˜Žç¡®æ²¡æœ‰å°è¯•è§£å†³è¯¸å¦‚æ’¤æ¶ˆ/é‡åšï¼ŒæŒä¹…æ€§æˆ–è¡¨å•ä¹‹ç±»çš„é—®é¢˜ï¼Œä½† Redux æœ‰æ‰©å±•ç‚¹ï¼Œä¾‹å¦‚ä¸­é—´ä»¶å’Œå­˜å‚¨å¢žå¼ºå™¨ï¼Œä»¥åŠå®ƒå‚¬ç”Ÿäº†ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿã€‚ è¿˜æ²¡æœ‰å¾ˆå¥½çš„ Flow é›†æˆï¼š Flux ç›®å‰å¯ä»¥è®©ä½ åšä¸€äº›éžå¸¸ä»¤äººå°è±¡æ·±åˆ»çš„é™æ€ç±»åž‹æ£€æŸ¥ï¼ŒRedux è¿˜ä¸æ”¯æŒã€‚ â¬† è¿”å›žé¡¶éƒ¨ mapStateToProps() å’Œ mapDispatchToProps() ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«?mapStateToProps()æ˜¯ä¸€ä¸ªå®žç”¨æ–¹æ³•ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ‚¨çš„ç»„ä»¶èŽ·å¾—æœ€æ–°çš„çŠ¶æ€ï¼ˆç”±å…¶ä»–ä¸€äº›ç»„ä»¶æ›´æ–°ï¼‰ï¼š 12345const mapStateToProps = (state) =&gt; &#123; return &#123; todos: getVisibleTodos(state.todos, state.visibilityFilter) &#125;&#125; mapDispatchToProps()æ˜¯ä¸€ä¸ªå®žç”¨æ–¹æ³•ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ çš„ç»„ä»¶è§¦å‘ä¸€ä¸ªåŠ¨ä½œäº‹ä»¶ï¼ˆå¯èƒ½å¯¼è‡´åº”ç”¨ç¨‹åºçŠ¶æ€æ”¹å˜çš„è°ƒåº¦åŠ¨ä½œï¼‰ï¼š 1234567const mapDispatchToProps = (dispatch) =&gt; &#123; return &#123; onTodoClick: (id) =&gt; &#123; dispatch(toggleTodo(id)) &#125; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ æˆ‘å¯ä»¥åœ¨ reducer ä¸­è§¦å‘ä¸€ä¸ª Action å—?åœ¨ reducer ä¸­è§¦å‘ Action æ˜¯åæ¨¡å¼ã€‚æ‚¨çš„ reducer åº”è¯¥æ²¡æœ‰å‰¯ä½œç”¨ï¼Œåªæ˜¯æŽ¥æ”¶ Action å¹¶è¿”å›žä¸€ä¸ªæ–°çš„çŠ¶æ€å¯¹è±¡ã€‚åœ¨ reducer ä¸­æ·»åŠ ä¾¦å¬å™¨å’Œè°ƒåº¦æ“ä½œå¯èƒ½ä¼šå¯¼è‡´é“¾æŽ¥çš„ Action å’Œå…¶ä»–å‰¯ä½œç”¨ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ç»„ä»¶å¤–éƒ¨è®¿é—® Redux å­˜å‚¨çš„å¯¹è±¡?æ˜¯çš„ï¼Œæ‚¨åªéœ€è¦ä½¿ç”¨createStore()ä»Žå®ƒåˆ›å»ºçš„æ¨¡å—ä¸­å¯¼å‡ºå­˜å‚¨ã€‚æ­¤å¤–ï¼Œå®ƒä¸åº”æ±¡æŸ“å…¨å±€çª—å£å¯¹è±¡ã€‚ 123store = createStore(myReducer)export default store â¬† è¿”å›žé¡¶éƒ¨ MVW æ¨¡å¼çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆ? DOM æ“ä½œéžå¸¸æ˜‚è´µï¼Œå¯¼è‡´åº”ç”¨ç¨‹åºè¡Œä¸ºç¼“æ…¢ä¸”æ•ˆçŽ‡ä½Žä¸‹ã€‚ ç”±äºŽå¾ªçŽ¯ä¾èµ–æ€§ï¼Œå›´ç»•æ¨¡åž‹å’Œè§†å›¾åˆ›å»ºäº†å¤æ‚çš„æ¨¡åž‹ã€‚ åä½œåž‹åº”ç”¨ç¨‹åºï¼ˆå¦‚Google Docsï¼‰ä¼šå‘ç”Ÿå¤§é‡æ•°æ®æ›´æ”¹ã€‚ æ— éœ€æ·»åŠ å¤ªå¤šé¢å¤–ä»£ç å°±æ— æ³•è½»æ¾æ’¤æ¶ˆï¼ˆåŠæ—¶å›žé€€ï¼‰ã€‚ â¬† è¿”å›žé¡¶éƒ¨ Redux å’Œ RxJS ä¹‹é—´æ˜¯å¦æœ‰ä»»ä½•ç›¸ä¼¼ä¹‹å¤„?è¿™äº›åº“çš„ç›®çš„æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯å­˜åœ¨ä¸€äº›æ¨¡ç³Šçš„ç›¸ä¼¼ä¹‹å¤„ã€‚ Redux æ˜¯ä¸€ä¸ªåœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ç®¡ç†çŠ¶æ€çš„å·¥å…·ã€‚å®ƒé€šå¸¸ç”¨ä½œ UI çš„ä½“ç³»ç»“æž„ã€‚å¯ä»¥å°†å…¶è§†ä¸ºï¼ˆä¸€åŠï¼‰Angular çš„æ›¿ä»£å“ã€‚ RxJS æ˜¯ä¸€ä¸ªååº”å¼ç¼–ç¨‹åº“ã€‚å®ƒé€šå¸¸ç”¨ä½œåœ¨ JavaScript ä¸­å®Œæˆå¼‚æ­¥ä»»åŠ¡çš„å·¥å…·ã€‚æŠŠå®ƒæƒ³è±¡æˆ Promise çš„æ›¿ä»£å“ã€‚ Redux ä½¿ç”¨ Reactive èŒƒä¾‹ï¼Œå› ä¸ºStoreæ˜¯è¢«åŠ¨çš„ã€‚Store æ£€æµ‹åˆ° Actionï¼Œå¹¶è‡ªè¡Œæ”¹å˜ã€‚RxJSä¹Ÿä½¿ç”¨ Reactive èŒƒä¾‹ï¼Œä½†å®ƒä¸æ˜¯ä¸€ä¸ªä½“ç³»ç»“æž„ï¼Œå®ƒä¸ºæ‚¨æä¾›äº†åŸºæœ¬æž„å»ºå— Observables æ¥å®Œæˆè¿™ç§æ¨¡å¼ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨åŠ è½½æ—¶è§¦å‘ Action?æ‚¨å¯ä»¥åœ¨componentDidMount()æ–¹æ³•ä¸­è§¦å‘ Actionï¼Œç„¶åŽåœ¨render()æ–¹æ³•ä¸­å¯ä»¥éªŒè¯æ•°æ®ã€‚ 12345678910111213141516171819class App extends Component &#123; componentDidMount() &#123; this.props.fetchData() &#125; render() &#123; return this.props.isLoaded ? &lt;div&gt;&#123;'Loaded'&#125;&lt;/div&gt; : &lt;div&gt;&#123;'Not Loaded'&#125;&lt;/div&gt; &#125;&#125;const mapStateToProps = (state) =&gt; (&#123; isLoaded: state.isLoaded&#125;)const mapDispatchToProps = &#123; fetchData &#125;export default connect(mapStateToProps, mapDispatchToProps)(App) â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­å¦‚ä½•ä½¿ç”¨ Redux çš„ connect() ?æ‚¨éœ€è¦æŒ‰ç…§ä¸¤ä¸ªæ­¥éª¤åœ¨å®¹å™¨ä¸­ä½¿ç”¨æ‚¨çš„ Storeï¼š ä½¿ç”¨mapStateToProps()ï¼š å®ƒå°† Store ä¸­çš„çŠ¶æ€å˜é‡æ˜ å°„åˆ°æ‚¨æŒ‡å®šçš„å±žæ€§ã€‚ å°†ä¸Šè¿°å±žæ€§è¿žæŽ¥åˆ°å®¹å™¨ï¼š mapStateToPropså‡½æ•°è¿”å›žçš„å¯¹è±¡è¿žæŽ¥åˆ°å®¹å™¨ã€‚ä½ å¯ä»¥ä»Žreact-reduxå¯¼å…¥connect()ã€‚ 1234567891011121314import React from 'react'import &#123; connect &#125; from 'react-redux'class App extends React.Component &#123; render() &#123; return &lt;div&gt;&#123;this.props.containerData&#125;&lt;/div&gt; &#125;&#125;function mapStateToProps(state) &#123; return &#123; containerData: state.data &#125;&#125;export default connect(mapStateToProps)(App) â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ Redux ä¸­é‡ç½®çŠ¶æ€?ä½ éœ€è¦åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ç¼–å†™ä¸€ä¸ªroot reducerï¼Œå®ƒå°†å¤„ç†åŠ¨ä½œå§”æ‰˜ç»™combineReducers()ç”Ÿæˆçš„ reducerã€‚ ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬åœ¨USER_LOGOUTåŠ¨ä½œä¹‹åŽè®©rootReducer()è¿”å›žåˆå§‹çŠ¶æ€ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæ— è®º Action æ€Žä¹ˆæ ·ï¼Œå½“ä½¿ç”¨undefinedä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°è°ƒç”¨å®ƒä»¬æ—¶ï¼Œreducers åº”è¯¥è¿”å›žåˆå§‹çŠ¶æ€ã€‚ 1234567891011const appReducer = combineReducers(&#123; /* your app's top-level reducers */&#125;)const rootReducer = (state, action) =&gt; &#123; if (action.type === 'USER_LOGOUT') &#123; state = undefined &#125; return appReducer(state, action)&#125; å¦‚æžœä½¿ç”¨redux-persistï¼Œæ‚¨å¯èƒ½è¿˜éœ€è¦æ¸…ç†å­˜å‚¨ç©ºé—´ã€‚redux-persiståœ¨ storage å¼•æ“Žä¸­ä¿å­˜æ‚¨çš„çŠ¶æ€å‰¯æœ¬ã€‚é¦–å…ˆï¼Œæ‚¨éœ€è¦å¯¼å…¥é€‚å½“çš„ storage å¼•æ“Žï¼Œç„¶åŽåœ¨å°†å…¶è®¾ç½®ä¸ºundefinedä¹‹å‰è§£æžçŠ¶æ€å¹¶æ¸…ç†æ¯ä¸ªå­˜å‚¨çŠ¶æ€é”®ã€‚ 123456789101112131415const appReducer = combineReducers(&#123; /* your app's top-level reducers */&#125;)const rootReducer = (state, action) =&gt; &#123; if (action.type === 'USER_LOGOUT') &#123; Object.keys(state).forEach(key =&gt; &#123; storage.removeItem(`persist:$&#123;key&#125;`) &#125;) state = undefined &#125; return appReducer(state, action)&#125; â¬† è¿”å›žé¡¶éƒ¨ Redux ä¸­è¿žæŽ¥è£…é¥°å™¨çš„ at ç¬¦å·çš„ç›®çš„æ˜¯ä»€ä¹ˆ?@ç¬¦å·å®žé™…ä¸Šæ˜¯ç”¨äºŽè¡¨ç¤ºè£…é¥°å™¨çš„ JavaScript è¡¨è¾¾å¼ã€‚è£…é¥°å™¨å¯ä»¥åœ¨è®¾è®¡æ—¶æ³¨é‡Šå’Œä¿®æ”¹ç±»å’Œå±žæ€§ã€‚ è®©æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨æ²¡æœ‰è£…é¥°å™¨çš„æƒ…å†µä¸‹è®¾ç½® Redux ã€‚ æœªä½¿ç”¨è£…é¥°å™¨: 123456789101112131415161718import React from 'react'import * as actionCreators from './actionCreators'import &#123; bindActionCreators &#125; from 'redux'import &#123; connect &#125; from 'react-redux'function mapStateToProps(state) &#123; return &#123; todos: state.todos &#125;&#125;function mapDispatchToProps(dispatch) &#123; return &#123; actions: bindActionCreators(actionCreators, dispatch) &#125;&#125;class MyApp extends React.Component &#123; // ...define your main app here&#125;export default connect(mapStateToProps, mapDispatchToProps)(MyApp) ä½¿ç”¨è£…é¥°å™¨: 1234567891011121314151617import React from 'react'import * as actionCreators from './actionCreators'import &#123; bindActionCreators &#125; from 'redux'import &#123; connect &#125; from 'react-redux'function mapStateToProps(state) &#123; return &#123; todos: state.todos &#125;&#125;function mapDispatchToProps(dispatch) &#123; return &#123; actions: bindActionCreators(actionCreators, dispatch) &#125;&#125;@connect(mapStateToProps, mapDispatchToProps)export default class MyApp extends React.Component &#123; // ...define your main app here&#125; é™¤äº†è£…é¥°å™¨çš„ä½¿ç”¨å¤–ï¼Œä¸Šé¢çš„ä¾‹å­å‡ ä¹Žç›¸ä¼¼ã€‚è£…é¥°å™¨è¯­æ³•å°šæœªæž„å»ºåˆ°ä»»ä½• JavaScript è¿è¡Œæ—¶ä¸­ï¼Œå¹¶ä¸”ä»ç„¶æ˜¯å®žéªŒæ€§çš„å¹¶ä¸”å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚æ‚¨å¯ä»¥ä½¿ç”¨babelæ¥èŽ·å¾—è£…é¥°å™¨æ”¯æŒã€‚ â¬† è¿”å›žé¡¶éƒ¨ React ä¸Šä¸‹æ–‡å’Œ React Redux ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«?æ‚¨å¯ä»¥ç›´æŽ¥åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨Contextï¼Œè¿™å¯¹äºŽå°†æ•°æ®ä¼ é€’ç»™æ·±åº¦åµŒå¥—çš„ç»„ä»¶éžå¸¸æœ‰ç”¨ã€‚è€ŒReduxåŠŸèƒ½æ›´å¼ºå¤§ï¼Œå®ƒè¿˜æä¾›äº† Context API æ— æ³•æä¾›çš„å¤§é‡åŠŸèƒ½ã€‚æ­¤å¤–ï¼ŒReact Redux åœ¨å†…éƒ¨ä½¿ç”¨ä¸Šä¸‹æ–‡ï¼Œä½†å®ƒä¸ä¼šåœ¨å…¬å…± API ä¸­æœ‰æ‰€ä½“çŽ°ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆ Redux çŠ¶æ€å‡½æ•°ç§°ä¸º reducers ?Reducers æ€»æ˜¯è¿”å›žçŠ¶æ€çš„ç´¯ç§¯ï¼ˆåŸºäºŽæ‰€æœ‰å…ˆå‰çŠ¶æ€å’Œå½“å‰ Actionï¼‰ã€‚å› æ­¤ï¼Œå®ƒä»¬å……å½“äº†çŠ¶æ€çš„ Reducerã€‚æ¯æ¬¡è°ƒç”¨ Redux reducer æ—¶ï¼ŒçŠ¶æ€å’Œ Action éƒ½å°†ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ç„¶åŽåŸºäºŽè¯¥ Action å‡å°‘ï¼ˆæˆ–ç´¯ç§¯ï¼‰è¯¥çŠ¶æ€ï¼Œç„¶åŽè¿”å›žä¸‹ä¸€çŠ¶æ€ã€‚æ‚¨å¯ä»¥reduceä¸€ç»„æ“ä½œå’Œä¸€ä¸ªåˆå§‹çŠ¶æ€ï¼ˆStoreï¼‰ï¼Œåœ¨è¯¥çŠ¶æ€ä¸‹æ‰§è¡Œè¿™äº›æ“ä½œä»¥èŽ·å¾—æœ€ç»ˆçš„æœ€ç»ˆçŠ¶æ€ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ Redux ä¸­å‘èµ· AJAX è¯·æ±‚?æ‚¨å¯ä»¥ä½¿ç”¨redux-thunkä¸­é—´ä»¶ï¼Œå®ƒå…è®¸æ‚¨å®šä¹‰å¼‚æ­¥æ“ä½œã€‚ è®©æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼Œä½¿ç”¨fetch APIå°†ç‰¹å®šå¸æˆ·ä½œä¸º AJAX è°ƒç”¨èŽ·å–ï¼š 1234567891011121314151617export function fetchAccount(id) &#123; return dispatch =&gt; &#123; dispatch(setLoadingAccountState()) // Show a loading spinner fetch(`/account/$&#123;id&#125;`, (response) =&gt; &#123; dispatch(doneFetchingAccount()) // Hide loading spinner if (response.status === 200) &#123; dispatch(setAccount(response.json)) // Use a normal function to set the received state &#125; else &#123; dispatch(someError) &#125; &#125;) &#125;&#125;function setAccount(data) &#123; return &#123; type: 'SET_Account', data: data &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ æˆ‘åº”è¯¥åœ¨ Redux Store ä¸­ä¿ç•™æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€å—? å°†æ•°æ®ä¿å­˜åœ¨ Redux å­˜å‚¨ä¸­ï¼Œå¹¶åœ¨ç»„ä»¶å†…éƒ¨ä¿æŒ UI ç›¸å…³çŠ¶æ€ã€‚ â¬† è¿”å›žé¡¶éƒ¨ è®¿é—® Redux Store çš„æ­£ç¡®æ–¹æ³•æ˜¯ä»€ä¹ˆ?åœ¨ç»„ä»¶ä¸­è®¿é—® Store çš„æœ€ä½³æ–¹æ³•æ˜¯ä½¿ç”¨connect()å‡½æ•°ï¼Œè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªåŒ…è£¹çŽ°æœ‰ç»„ä»¶çš„æ–°ç»„ä»¶ã€‚æ­¤æ¨¡å¼ç§°ä¸ºé«˜é˜¶ç»„ä»¶ï¼Œé€šå¸¸æ˜¯åœ¨ React ä¸­æ‰©å±•ç»„ä»¶åŠŸèƒ½çš„é¦–é€‰æ–¹å¼ã€‚è¿™å…è®¸æ‚¨å°†çŠ¶æ€å’Œ Action åˆ›å»ºè€…æ˜ å°„åˆ°ç»„ä»¶ï¼Œå¹¶åœ¨ Store æ›´æ–°æ—¶è‡ªåŠ¨ä¼ é€’å®ƒä»¬ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä½¿ç”¨ connect çš„&lt;FilterLink&gt;ç»„ä»¶çš„ä¾‹å­ï¼š 123456789101112131415161718import &#123; connect &#125; from 'react-redux'import &#123; setVisibilityFilter &#125; from '../actions'import Link from '../components/Link'const mapStateToProps = (state, ownProps) =&gt; (&#123; active: ownProps.filter === state.visibilityFilter&#125;)const mapDispatchToProps = (dispatch, ownProps) =&gt; (&#123; onClick: () =&gt; dispatch(setVisibilityFilter(ownProps.filter))&#125;)const FilterLink = connect( mapStateToProps, mapDispatchToProps)(Link)export default FilterLink ç”±äºŽå®ƒå…·æœ‰ç›¸å½“å¤šçš„æ€§èƒ½ä¼˜åŒ–å¹¶ä¸”é€šå¸¸ä¸å¤ªå¯èƒ½å¯¼è‡´é”™è¯¯ï¼Œå› æ­¤ Redux å¼€å‘äººå‘˜å‡ ä¹Žæ€»æ˜¯å»ºè®®ä½¿ç”¨connect()ç›´æŽ¥è®¿é—® Storeï¼ˆä½¿ç”¨ä¸Šä¸‹æ–‡APIï¼‰ã€‚ 12345class MyComponent &#123; someMethod() &#123; doSomethingWith(this.context.store) &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ React Redux ä¸­å±•ç¤ºç»„ä»¶å’Œå®¹å™¨ç»„ä»¶ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?å±•ç¤ºç»„ä»¶æ˜¯ä¸€ä¸ªç±»æˆ–åŠŸèƒ½ç»„ä»¶ï¼Œç”¨äºŽæè¿°åº”ç”¨ç¨‹åºçš„å±•ç¤ºéƒ¨åˆ†ã€‚ å®¹å™¨ç»„ä»¶æ˜¯è¿žæŽ¥åˆ° Redux Storeçš„ç»„ä»¶çš„éžæ­£å¼æœ¯è¯­ã€‚å®¹å™¨ç»„ä»¶è®¢é˜… Redux çŠ¶æ€æ›´æ–°å’Œdispatchæ“ä½œï¼Œå®ƒä»¬é€šå¸¸ä¸å‘ˆçŽ° DOM å…ƒç´ ; ä»–ä»¬å°†æ¸²æŸ“å§”æ‰˜ç»™å±•ç¤ºæ€§çš„å­ç»„ä»¶ã€‚ â¬† è¿”å›žé¡¶éƒ¨ Redux ä¸­å¸¸é‡çš„ç”¨é€”æ˜¯ä»€ä¹ˆ?å¸¸é‡å…è®¸æ‚¨åœ¨ä½¿ç”¨ IDE æ—¶è½»æ¾æŸ¥æ‰¾é¡¹ç›®ä¸­è¯¥ç‰¹å®šåŠŸèƒ½çš„æ‰€æœ‰ç”¨æ³•ã€‚å®ƒè¿˜å¯ä»¥é˜²æ­¢ä½ æ‹¼å†™é”™è¯¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä¼šç«‹å³å¾—åˆ°ä¸€ä¸ªReferenceErrorã€‚ é€šå¸¸æˆ‘ä»¬ä¼šå°†å®ƒä»¬ä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼ˆconstants.jsæˆ–actionTypes.jsï¼‰ã€‚ 123456export const ADD_TODO = 'ADD_TODO'export const DELETE_TODO = 'DELETE_TODO'export const EDIT_TODO = 'EDIT_TODO'export const COMPLETE_TODO = 'COMPLETE_TODO'export const COMPLETE_ALL = 'COMPLETE_ALL'export const CLEAR_COMPLETED = 'CLEAR_COMPLETED' åœ¨ Redux ä¸­ï¼Œæ‚¨å¯ä»¥åœ¨ä¸¤ä¸ªåœ°æ–¹ä½¿ç”¨å®ƒä»¬ï¼š åœ¨ Action åˆ›å»ºæ—¶: è®©æˆ‘ä»¬çœ‹çœ‹ actions.js: 12345import &#123; ADD_TODO &#125; from './actionTypes';export function addTodo(text) &#123; return &#123; type: ADD_TODO, text &#125;&#125; åœ¨ reducers é‡Œ: è®©æˆ‘ä»¬åˆ›å»º reducer.js æ–‡ä»¶: 12345678910111213141516import &#123; ADD_TODO &#125; from './actionTypes'export default (state = [], action) =&gt; &#123; switch (action.type) &#123; case ADD_TODO: return [ ...state, &#123; text: action.text, completed: false &#125; ]; default: return state &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ ç¼–å†™ mapDispatchToProps() æœ‰å“ªäº›ä¸åŒçš„æ–¹æ³•?æœ‰ä¸€äº›æ–¹æ³•å¯ä»¥å°†action creatorsç»‘å®šåˆ°mapDispatchToProps()ä¸­çš„dispatch()ã€‚ä»¥ä¸‹æ˜¯å¯èƒ½çš„å†™æ³•ï¼š 123const mapDispatchToProps = (dispatch) =&gt; (&#123; action: () =&gt; dispatch(action())&#125;) 123const mapDispatchToProps = (dispatch) =&gt; (&#123; action: bindActionCreators(action, dispatch)&#125;) 1const mapDispatchToProps = &#123; action &#125; ç¬¬ä¸‰ç§å†™æ³•åªæ˜¯ç¬¬ä¸€ç§å†™æ³•çš„ç®€å†™ã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ mapStateToProps() å’Œ mapDispatchToProps() ä¸­ä½¿ç”¨ ownProps å‚æ•°æœ‰ä»€ä¹ˆç”¨?å¦‚æžœæŒ‡å®šäº†ownPropså‚æ•°ï¼ŒReact Redux ä¼šå°†ä¼ é€’ç»™è¯¥ç»„ä»¶çš„ props ä¼ é€’ç»™ä½ çš„connectå‡½æ•°ã€‚å› æ­¤ï¼Œå¦‚æžœæ‚¨ä½¿ç”¨è¿žæŽ¥ç»„ä»¶ï¼š 123import ConnectedComponent from './containers/ConnectedComponent';&lt;ConnectedComponent user=&#123;'john'&#125; /&gt; ä½ çš„mapStateToProps()å’ŒmapDispatchToProps()å‡½æ•°é‡Œé¢çš„ownPropså°†æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼š 1&#123; user: 'john' &#125; æ‚¨å¯ä»¥ä½¿ç”¨æ­¤å¯¹è±¡æ¥å†³å®šä»Žè¿™äº›å‡½æ•°è¿”å›žçš„å†…å®¹ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•æž„å»º Redux é¡¹ç›®ç›®å½•?å¤§å¤šæ•°é¡¹ç›®éƒ½æœ‰å‡ ä¸ªé¡¶çº§ç›®å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š Components: ç”¨äºŽdumbç»„ä»¶ï¼ŒRedux ä¸å¿…å…³å¿ƒçš„ç»„ä»¶ã€‚ Containers: ç”¨äºŽè¿žæŽ¥åˆ° Redux çš„smartç»„ä»¶ã€‚ Actions: ç”¨äºŽæ‰€æœ‰ Action åˆ›å»ºå™¨ï¼Œå…¶ä¸­æ–‡ä»¶åå¯¹åº”äºŽåº”ç”¨ç¨‹åºçš„ä¸€éƒ¨åˆ†ã€‚ Reducers: ç”¨äºŽæ‰€æœ‰ reducerï¼Œå…¶ä¸­æ–‡ä»¶åå¯¹åº”äºŽstate keyã€‚ Store: ç”¨äºŽ Store åˆå§‹åŒ–ã€‚ è¿™ç§ç»“æž„é€‚ç”¨äºŽä¸­å°åž‹é¡¹ç›®ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ redux-saga?redux-sagaæ˜¯ä¸€ä¸ªåº“ï¼Œæ—¨åœ¨ä½¿ React/Redux é¡¹ç›®ä¸­çš„å‰¯ä½œç”¨ï¼ˆæ•°æ®èŽ·å–ç­‰å¼‚æ­¥æ“ä½œå’Œè®¿é—®æµè§ˆå™¨ç¼“å­˜ç­‰å¯èƒ½äº§ç”Ÿå‰¯ä½œç”¨çš„åŠ¨ä½œï¼‰æ›´å®¹æ˜“ï¼Œæ›´å¥½ã€‚ è¿™ä¸ªåŒ…åœ¨ NPM ä¸Šæœ‰å‘å¸ƒ: 1$ npm install --save redux-saga â¬† è¿”å›žé¡¶éƒ¨ redux-saga çš„æ¨¡åž‹æ¦‚å¿µæ˜¯ä»€ä¹ˆ?Sagaå°±åƒä½ çš„é¡¹ç›®ä¸­çš„ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ï¼Œå®ƒç‹¬è‡ªè´Ÿè´£å‰¯ä½œç”¨ã€‚redux-saga æ˜¯ä¸€ä¸ª redux ä¸­é—´ä»¶ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åœ¨é¡¹ç›®å¯åŠ¨ä¸­ä½¿ç”¨æ­£å¸¸çš„ Redux æ“ä½œï¼Œæš‚åœå’Œå–æ¶ˆè¯¥çº¿ç¨‹ï¼Œå®ƒå¯ä»¥è®¿é—®å®Œæ•´çš„ Redux åº”ç”¨ç¨‹åºçŠ¶æ€ï¼Œå¹¶ä¸”å®ƒä¹Ÿå¯ä»¥è°ƒåº¦ Redux æ“ä½œã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ redux-saga ä¸­ call() å’Œ put() ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«?call()å’Œput()éƒ½æ˜¯ Effect åˆ›å»ºå‡½æ•°ã€‚ call()å‡½æ•°ç”¨äºŽåˆ›å»º Effect æè¿°ï¼ŒæŒ‡ç¤ºä¸­é—´ä»¶è°ƒç”¨ promiseã€‚put()å‡½æ•°åˆ›å»ºä¸€ä¸ª Effectï¼ŒæŒ‡ç¤ºä¸­é—´ä»¶å°†ä¸€ä¸ª Action åˆ†æ´¾ç»™ Storeã€‚ è®©æˆ‘ä»¬ä¸¾ä¾‹è¯´æ˜Žè¿™äº› Effect å¦‚ä½•ç”¨äºŽèŽ·å–ç‰¹å®šç”¨æˆ·æ•°æ®ã€‚ 1234567891011function* fetchUserSaga(action) &#123; // `call` function accepts rest arguments, which will be passed to `api.fetchUser` function. // Instructing middleware to call promise, it resolved value will be assigned to `userData` variable const userData = yield call(api.fetchUser, action.userId) // Instructing middleware to dispatch corresponding action. yield put(&#123; type: 'FETCH_USER_SUCCESS', userData &#125;)&#125; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Redux Thunk?Redux Thunkä¸­é—´ä»¶å…è®¸æ‚¨ç¼–å†™è¿”å›žå‡½æ•°è€Œä¸æ˜¯ Action çš„åˆ›å»ºè€…ã€‚ thunk å¯ç”¨äºŽå»¶è¿Ÿ Action çš„å‘é€ï¼Œæˆ–ä»…åœ¨æ»¡è¶³æŸä¸ªæ¡ä»¶æ—¶å‘é€ã€‚å†…éƒ¨å‡½æ•°æŽ¥æ”¶ Store çš„æ–¹æ³•dispatch()å’ŒgetState()ä½œä¸ºå‚æ•°ã€‚ â¬† è¿”å›žé¡¶éƒ¨ redux-saga å’Œ redux-thunk ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«?Redux Thunkå’ŒRedux Sagaéƒ½è´Ÿè´£å¤„ç†å‰¯ä½œç”¨ã€‚åœ¨å¤§å¤šæ•°åœºæ™¯ä¸­ï¼ŒThunk ä½¿ç”¨Promisesæ¥å¤„ç†å®ƒä»¬ï¼Œè€Œ Saga ä½¿ç”¨Generatorsã€‚Thunk æ˜“äºŽä½¿ç”¨ï¼Œå› ä¸ºè®¸å¤šå¼€å‘äººå‘˜éƒ½ç†Ÿæ‚‰ Promiseï¼ŒSagas/Generators åŠŸèƒ½æ›´å¼ºå¤§ï¼Œä½†æ‚¨éœ€è¦å­¦ä¹ å®ƒä»¬ã€‚ä½†æ˜¯è¿™ä¸¤ä¸ªä¸­é—´ä»¶å¯ä»¥å…±å­˜ï¼Œæ‰€ä»¥ä½ å¯ä»¥ä»Ž Thunks å¼€å§‹ï¼Œå¹¶åœ¨éœ€è¦æ—¶å¼•å…¥ Sagasã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Redux DevTools?Redux DevToolsæ˜¯ Redux çš„å®žæ—¶ç¼–è¾‘çš„æ—¶é—´æ—…è¡ŒçŽ¯å¢ƒï¼Œå…·æœ‰çƒ­é‡æ–°åŠ è½½ï¼ŒAction é‡æ”¾å’Œå¯è‡ªå®šä¹‰çš„ UIã€‚å¦‚æžœæ‚¨ä¸æƒ³å®‰è£… Redux DevTools å¹¶å°†å…¶é›†æˆåˆ°é¡¹ç›®ä¸­ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ Chrome å’Œ Firefox çš„æ‰©å±•æ’ä»¶ã€‚ â¬† è¿”å›žé¡¶éƒ¨ Redux DevTools çš„åŠŸèƒ½æœ‰å“ªäº›? å…è®¸æ‚¨æ£€æŸ¥æ¯ä¸ªçŠ¶æ€å’Œ action è´Ÿè½½ã€‚ è®©ä½ å¯ä»¥é€šè¿‡æ’¤é”€å›žåˆ°è¿‡åŽ»ã€‚ å¦‚æžœæ›´æ”¹ reducer ä»£ç ï¼Œå°†é‡æ–°è¯„ä¼°æ¯ä¸ªå·²æš‚å­˜çš„ Actionã€‚ å¦‚æžœ Reducers æŠ›å‡ºé”™è¯¯ï¼Œä½ ä¼šçœ‹åˆ°è¿™å‘ç”Ÿäº†ä»€ä¹ˆ Actionï¼Œä»¥åŠé”™è¯¯æ˜¯ä»€ä¹ˆã€‚ ä½¿ç”¨persistState()å­˜å‚¨å¢žå¼ºå™¨ï¼Œæ‚¨å¯ä»¥åœ¨é¡µé¢é‡æ–°åŠ è½½æœŸé—´ä¿æŒè°ƒè¯•ä¼šè¯ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Redux é€‰æ‹©å™¨ä»¥åŠä½¿ç”¨å®ƒä»¬çš„åŽŸå› ?é€‰æ‹©å™¨æ˜¯å°† Redux çŠ¶æ€ä½œä¸ºå‚æ•°å¹¶è¿”å›žä¸€äº›æ•°æ®ä»¥ä¼ é€’ç»™ç»„ä»¶çš„å‡½æ•°ã€‚ ä¾‹å¦‚ï¼Œè¦ä»Ž state ä¸­èŽ·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ï¼š 1const getUserData = state =&gt; state.user.data â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Redux Form?Redux Formä¸Ž React å’Œ Redux ä¸€èµ·ä½¿ç”¨ï¼Œä»¥ä½¿ React ä¸­çš„è¡¨å•èƒ½å¤Ÿä½¿ç”¨ Redux æ¥å­˜å‚¨å…¶æ‰€æœ‰çŠ¶æ€ã€‚Redux Form å¯ä»¥ä¸ŽåŽŸå§‹ HTML5 è¾“å…¥ä¸€èµ·ä½¿ç”¨ï¼Œä½†å®ƒä¹Ÿé€‚ç”¨äºŽå¸¸è§çš„ UI æ¡†æž¶ï¼Œå¦‚ Material UIï¼ŒReact Widgetså’ŒReact Bootstrapã€‚ â¬† è¿”å›žé¡¶éƒ¨ Redux Form çš„ä¸»è¦åŠŸèƒ½æœ‰å“ªäº›? å­—æ®µå€¼é€šè¿‡ Redux å­˜å‚¨æŒä¹…åŒ–ã€‚ éªŒè¯ï¼ˆåŒæ­¥/å¼‚æ­¥ï¼‰å’Œæäº¤ã€‚ å­—æ®µå€¼çš„æ ¼å¼åŒ–ï¼Œè§£æžå’Œè§„èŒƒåŒ–ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•å‘ Redux æ·»åŠ å¤šä¸ªä¸­é—´ä»¶?ä½ å¯ä»¥ä½¿ç”¨applyMiddleware()ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥æ·»åŠ redux-thunkå’Œloggerä½œä¸ºå‚æ•°ä¼ é€’ç»™applyMiddleware()ï¼š 12import &#123; createStore, applyMiddleware &#125; from 'redux'const createStoreWithMiddleware = applyMiddleware(ReduxThunk, logger)(createStore) â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ Redux ä¸­è®¾ç½®åˆå§‹çŠ¶æ€?æ‚¨éœ€è¦å°†åˆå§‹çŠ¶æ€ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ç»™ createStore ï¼š 12345678910111213const rootReducer = combineReducers(&#123; todos: todos, visibilityFilter: visibilityFilter&#125;)const initialState = &#123; todos: [&#123; id: 123, name: 'example', completed: false &#125;]&#125;const store = createStore( rootReducer, initialState) â¬† è¿”å›žé¡¶éƒ¨ Relay ä¸Ž Redux æœ‰ä½•ä¸åŒ?Relay ä¸Ž Redux ç±»ä¼¼ï¼Œå› ä¸ºå®ƒä»¬éƒ½ä½¿ç”¨å•ä¸ª Storeã€‚ä¸»è¦åŒºåˆ«åœ¨äºŽ relay ä»…ç®¡ç†æºè‡ªæœåŠ¡å™¨çš„çŠ¶æ€ï¼Œå¹¶ä¸”é€šè¿‡GraphQLæŸ¥è¯¢ï¼ˆç”¨äºŽè¯»å–æ•°æ®ï¼‰å’Œçªå˜ï¼ˆç”¨äºŽæ›´æ”¹æ•°æ®ï¼‰æ¥ä½¿ç”¨å¯¹çŠ¶æ€çš„æ‰€æœ‰è®¿é—®ã€‚Relay é€šè¿‡ä»…æå–å·²æ›´æ”¹çš„æ•°æ®è€Œä¸ºæ‚¨ç¼“å­˜æ•°æ®å¹¶ä¼˜åŒ–æ•°æ®æå–ã€‚ â¬† è¿”å›žé¡¶éƒ¨ React Native React Native å’Œ React æœ‰ä»€ä¹ˆåŒºåˆ«?Reactæ˜¯ä¸€ä¸ª JavaScript åº“ï¼Œæ”¯æŒå‰ç«¯ Web å’Œåœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼Œç”¨äºŽæž„å»ºç”¨æˆ·ç•Œé¢å’Œ Web åº”ç”¨ç¨‹åºã€‚ React Nativeæ˜¯ä¸€ä¸ªç§»åŠ¨ç«¯æ¡†æž¶ï¼Œå¯ç¼–è¯‘ä¸ºæœ¬æœºåº”ç”¨ç¨‹åºç»„ä»¶ï¼Œå…è®¸æ‚¨ä½¿ç”¨ JavaScript æž„å»ºæœ¬æœºç§»åŠ¨åº”ç”¨ç¨‹åºï¼ˆiOSï¼ŒAndroidå’ŒWindowsï¼‰ï¼Œå…è®¸æ‚¨ä½¿ç”¨ React æž„å»ºç»„ä»¶ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•æµ‹è¯• React Native åº”ç”¨ç¨‹åº?React Native åªèƒ½åœ¨ iOS å’Œ Android ç­‰ç§»åŠ¨æ¨¡æ‹Ÿå™¨ä¸­è¿›è¡Œæµ‹è¯•ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ expo appï¼ˆhttps://expo.ioï¼‰åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè¿è¡Œè¯¥åº”ç”¨ç¨‹åºã€‚å¦‚æžœä½¿ç”¨ QR ä»£ç è¿›è¡ŒåŒæ­¥ï¼Œåˆ™æ‚¨çš„ç§»åŠ¨è®¾å¤‡å’Œè®¡ç®—æœºåº”ä½äºŽåŒä¸€ä¸ªæ— çº¿ç½‘ç»œä¸­ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ React Native æŸ¥çœ‹æ—¥å¿—?æ‚¨å¯ä»¥ä½¿ç”¨console.logï¼Œconsole.warnç­‰ã€‚ä»Ž React Native v0.29 å¼€å§‹ï¼Œæ‚¨åªéœ€è¿è¡Œä»¥ä¸‹å‘½ä»¤å³å¯åœ¨æŽ§åˆ¶å°ä¸­æŸ¥çœ‹æ—¥å¿—ï¼š 12$ react-native log-ios$ react-native log-android â¬† è¿”å›žé¡¶éƒ¨ æ€Žä¹ˆè°ƒè¯• React Native åº”ç”¨?æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è°ƒè¯• React Native åº”ç”¨ç¨‹åºï¼š åœ¨ iOS æ¨¡æ‹Ÿå™¨ä¸­è¿è¡Œæ‚¨çš„åº”ç”¨ç¨‹åºã€‚ æŒ‰Command + Dï¼Œç„¶åŽåœ¨ç½‘é¡µä¸­æ‰“å¼€http://localhost:8081/debugger-uiã€‚ å¯ç”¨Pause On Caught Exceptionsä»¥èŽ·å¾—æ›´å¥½çš„è°ƒè¯•ä½“éªŒã€‚ æŒ‰Command + Option + Iæ‰“å¼€ Chrome Developer å·¥å…·ï¼Œæˆ–é€šè¿‡View -&gt;Developer -&gt;Developer Toolsæ‰“å¼€å®ƒã€‚ æ‚¨çŽ°åœ¨åº”è¯¥èƒ½å¤Ÿåƒå¹³å¸¸é‚£æ ·è¿›è¡Œè°ƒè¯•ã€‚ â¬† è¿”å›žé¡¶éƒ¨ React supported libraries &amp; Integration ä»€ä¹ˆæ˜¯ Reselect ä»¥åŠå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„?Reselectæ˜¯ä¸€ä¸ªé€‰æ‹©å™¨åº“ï¼ˆç”¨äºŽ Redux ï¼‰ï¼Œå®ƒä½¿ç”¨memoizationæ¦‚å¿µã€‚å®ƒæœ€åˆç¼–å†™ç”¨äºŽè®¡ç®—ç±»ä¼¼ Redux çš„åº”ç”¨ç¨‹åºçŠ¶æ€çš„æ´¾ç”Ÿæ•°æ®ï¼Œä½†å®ƒä¸èƒ½ç»‘å®šåˆ°ä»»ä½•ä½“ç³»ç»“æž„æˆ–åº“ã€‚ Reselect ä¿ç•™æœ€åŽä¸€æ¬¡è°ƒç”¨çš„æœ€åŽè¾“å…¥/è¾“å‡ºçš„å‰¯æœ¬ï¼Œå¹¶ä»…åœ¨å…¶ä¸­ä¸€ä¸ªè¾“å…¥å‘ç”Ÿæ›´æ”¹æ—¶é‡æ–°è®¡ç®—ç»“æžœã€‚å¦‚æžœè¿žç»­ä¸¤æ¬¡æä¾›ç›¸åŒçš„è¾“å…¥ï¼Œåˆ™ Reselect å°†è¿”å›žç¼“å­˜çš„è¾“å‡ºã€‚å®ƒçš„ memoization å’Œç¼“å­˜æ˜¯å®Œå…¨å¯å®šåˆ¶çš„ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Flow?Flow æ˜¯ä¸€ä¸ªé™æ€ç±»åž‹æ£€æŸ¥å™¨ï¼Œæ—¨åœ¨æŸ¥æ‰¾ JavaScript ä¸­çš„ç±»åž‹é”™è¯¯ã€‚ä¸Žä¼ ç»Ÿç±»åž‹ç³»ç»Ÿç›¸æ¯”ï¼ŒFlow ç±»åž‹å¯ä»¥è¡¨è¾¾æ›´ç»†ç²’åº¦çš„åŒºåˆ«ã€‚ä¾‹å¦‚ï¼Œä¸Žå¤§å¤šæ•°ç±»åž‹ç³»ç»Ÿä¸åŒï¼ŒFlow èƒ½å¸®åŠ©ä½ æ•èŽ·æ¶‰åŠ null çš„é”™è¯¯ã€‚ â¬† è¿”å›žé¡¶éƒ¨ Flow å’Œ PropTypes æœ‰ä»€ä¹ˆåŒºåˆ«?Flow æ˜¯ä¸€ä¸ªé™æ€åˆ†æžå·¥å…·ï¼ˆé™æ€æ£€æŸ¥å™¨ï¼‰ï¼Œå®ƒä½¿ç”¨è¯¥è¯­è¨€çš„è¶…é›†ï¼Œå…è®¸ä½ åœ¨æ‰€æœ‰ä»£ç ä¸­æ·»åŠ ç±»åž‹æ³¨é‡Šï¼Œå¹¶åœ¨ç¼–è¯‘æ—¶æ•èŽ·æ•´ä¸ªç±»çš„é”™è¯¯ã€‚PropTypes æ˜¯ä¸€ä¸ªåŸºæœ¬ç±»åž‹æ£€æŸ¥å™¨ï¼ˆè¿è¡Œæ—¶æ£€æŸ¥å™¨ï¼‰ï¼Œå·²ç»è¢«æ·»åŠ åˆ° React ä¸­ã€‚é™¤äº†æ£€æŸ¥ä¼ é€’ç»™ç»™å®šç»„ä»¶çš„å±žæ€§ç±»åž‹å¤–ï¼Œå®ƒä¸èƒ½æ£€æŸ¥å…¶ä»–ä»»ä½•å†…å®¹ã€‚å¦‚æžœä½ å¸Œæœ›å¯¹æ•´ä¸ªé¡¹ç›®è¿›è¡Œæ›´çµæ´»çš„ç±»åž‹æ£€æŸ¥ï¼Œé‚£ä¹ˆ Flow/TypeScript æ˜¯æ›´åˆé€‚çš„é€‰æ‹©ã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­å¦‚ä½•ä½¿ç”¨ Font Awesome å›¾æ ‡?æŽ¥ä¸‹æ¥çš„æ­¥éª¤å°†åœ¨ React ä¸­å¼•å…¥ Font Awesomeï¼š å®‰è£… font-awesome: 1$ npm install --save font-awesome åœ¨ index.js æ–‡ä»¶ä¸­å¯¼å…¥ font-awesome: 1import 'font-awesome/css/font-awesome.min.css' åœ¨ className ä¸­æ·»åŠ  Font Awesome ç±»: 123render() &#123; return &lt;div&gt;&lt;i className=&#123;'fa fa-spinner'&#125; /&gt;&lt;/div&gt;&#125; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆ æ˜¯ React å¼€å‘è€…å·¥å…·?React Developer Tools å…è®¸æ‚¨æ£€æŸ¥ç»„ä»¶å±‚æ¬¡ç»“æž„ï¼ŒåŒ…æ‹¬ç»„ä»¶å±žæ€§å’ŒçŠ¶æ€ã€‚å®ƒæ—¢å¯ä»¥ä½œä¸ºæµè§ˆå™¨æ‰©å±•ï¼ˆç”¨äºŽ Chrome å’Œ Firefox ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºç‹¬ç«‹çš„åº”ç”¨ç¨‹åºï¼ˆç”¨äºŽå…¶ä»–çŽ¯å¢ƒï¼ŒåŒ…æ‹¬ Safariã€IE å’Œ React Nativeï¼‰ã€‚ å¯ç”¨äºŽä¸åŒæµè§ˆå™¨æˆ–çŽ¯å¢ƒçš„å®˜æ–¹æ‰©å±•ã€‚ Chromeæ’ä»¶ Firefoxæ’ä»¶ ç‹¬ç«‹åº”ç”¨ (Safari, React Native, ç­‰) â¬† è¿”å›žé¡¶éƒ¨ åœ¨ Chrome ä¸­ä¸ºä»€ä¹ˆ DevTools æ²¡æœ‰åŠ è½½æœ¬åœ°æ–‡ä»¶?å¦‚æžœæ‚¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€äº†æœ¬åœ° HTML æ–‡ä»¶ï¼ˆfile://...ï¼‰ï¼Œåˆ™å¿…é¡»å…ˆæ‰“å¼€Chrome Extensionså¹¶é€‰ä¸­â€œå…è®¸è®¿é—®æ–‡ä»¶URLâ€ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ React ä¸­ä½¿ç”¨ Polymer? åˆ›å»º Polymer å…ƒç´ ï¼š 1234567&lt;link rel='import' href='../../bower_components/polymer/polymer.html' /&gt;Polymer(&#123; is: 'calender-element', ready: function() &#123; this.textContent = 'I am a calender' &#125;&#125;) é€šè¿‡åœ¨ HTML æ–‡æ¡£ä¸­å¯¼å…¥ Polymer ç»„ä»¶ï¼Œæ¥åˆ›å»ºè¯¥ç»„ä»¶å¯¹åº”çš„æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œåœ¨ React åº”ç”¨ç¨‹åºçš„ index.html æ–‡ä»¶ä¸­å¯¼å…¥ã€‚ 1&lt;link rel='import' href='./src/polymer-components/calender-element.html'&gt; åœ¨ JSX æ–‡ä»¶ä¸­ä½¿ç”¨è¯¥å…ƒç´ ï¼š 1234567891011import React from 'react'class MyComponent extends React.Component &#123; render() &#123; return ( &lt;calender-element /&gt; ) &#125;&#125;export default MyComponent â¬† è¿”å›žé¡¶éƒ¨ ä¸Ž Vue.js ç›¸æ¯”ï¼ŒReact æœ‰å“ªäº›ä¼˜åŠ¿?ä¸Ž Vue.js ç›¸æ¯”ï¼ŒReact å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š åœ¨å¤§åž‹åº”ç”¨ç¨‹åºå¼€å‘ä¸­æä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚ æ›´å®¹æ˜“æµ‹è¯•ã€‚ æ›´é€‚åˆåˆ›å»ºç§»åŠ¨ç«¯åº”ç”¨ç¨‹åºã€‚ æä¾›æ›´å¤šçš„ä¿¡æ¯å’Œè§£å†³æ–¹æ¡ˆã€‚ â¬† è¿”å›žé¡¶éƒ¨ React å’Œ Angular æœ‰ä»€ä¹ˆåŒºåˆ«?| React | Angular || â€”â€“ | â€”â€”- || React æ˜¯ä¸€ä¸ªåº“ï¼Œåªæœ‰Viewå±‚ | Angularæ˜¯ä¸€ä¸ªæ¡†æž¶ï¼Œå…·æœ‰å®Œæ•´çš„ MVC åŠŸèƒ½ || React å¯ä»¥å¤„ç†æœåŠ¡å™¨ç«¯çš„æ¸²æŸ“ | AngularJS ä»…åœ¨å®¢æˆ·ç«¯å‘ˆçŽ°ï¼Œä½† Angular 2 åŠæ›´é«˜ç‰ˆæœ¬å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“ || React åœ¨ JS ä¸­ä½¿ç”¨çœ‹èµ·æ¥åƒ HTML çš„ JSXï¼Œè¿™å¯èƒ½ä»¤äººå›°æƒ‘ | Angular éµå¾ª HTML çš„æ¨¡æ¿æ–¹æ³•ï¼Œè¿™ä½¿å¾—ä»£ç æ›´çŸ­ä¸”æ˜“äºŽç†è§£ || React Native æ˜¯ä¸€ç§ React ç±»åž‹ï¼Œå®ƒç”¨äºŽæž„å»ºç§»åŠ¨åº”ç”¨ç¨‹åºï¼Œå®ƒæ›´å¿«ï¼Œæ›´ç¨³å®š | Ionicï¼ŒAngular çš„ç§»åŠ¨ app ç›¸å¯¹åŽŸç”Ÿ app æ¥è¯´ä¸å¤ªç¨³å®šå’Œæ…¢ || åœ¨ Reac tä¸­ï¼Œæ•°æ®åªä»¥å•ä¸€æ–¹å‘ä¼ é€’ï¼Œå› æ­¤è°ƒè¯•å¾ˆå®¹æ˜“ | åœ¨ Angular ä¸­ï¼Œæ•°æ®ä»¥ä¸¤ç§æ–¹å¼ä¼ é€’ï¼Œå³å®ƒåœ¨å­èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹ä¹‹é—´å…·æœ‰åŒå‘æ•°æ®ç»‘å®šï¼Œå› æ­¤è°ƒè¯•é€šå¸¸å¾ˆå›°éš¾ | â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆ React é€‰é¡¹å¡ä¸ä¼šæ˜¾ç¤ºåœ¨ DevTools ä¸­?å½“é¡µé¢åŠ è½½æ—¶ï¼ŒReact DevToolsè®¾ç½®ä¸€ä¸ªåä¸º__REACT_DEVTOOLS_GLOBAL_HOOK__çš„å…¨å±€å˜é‡ï¼Œç„¶åŽ React åœ¨åˆå§‹åŒ–æœŸé—´ä¸Žè¯¥é’©å­é€šä¿¡ã€‚å¦‚æžœç½‘ç«™æ²¡æœ‰ä½¿ç”¨ Reactï¼Œæˆ–è€…å¦‚æžœ React æ— æ³•ä¸Ž DevTools é€šä¿¡ï¼Œé‚£ä¹ˆå®ƒå°†ä¸ä¼šæ˜¾ç¤ºè¯¥é€‰é¡¹å¡ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Styled Components?styled-components æ˜¯ä¸€ä¸ªç”¨äºŽæ ·å¼åŒ– React åº”ç”¨ç¨‹åºçš„ JavaScript åº“ã€‚ å®ƒåˆ é™¤äº†æ ·å¼å’Œç»„ä»¶ä¹‹é—´çš„æ˜ å°„ï¼Œå¹¶å…è®¸æ‚¨åœ¨ js ä¸­ç¼–å†™ CSSã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸¾ä¸€ä¸ª Styled Components çš„ä¾‹å­?è®©æˆ‘ä»¬åˆ›å»ºå…·æœ‰ç‰¹å®šæ ·å¼çš„&lt;Title&gt;å’Œ&lt;Wrapper&gt;ç»„ä»¶ã€‚ 123456789101112131415import React from 'react'import styled from 'styled-components'// Create a &lt;Title&gt; component that renders an &lt;h1&gt; which is centered, red and sized at 1.5emconst Title = styled.h1` font-size: 1.5em; text-align: center; color: palevioletred;`// Create a &lt;Wrapper&gt; component that renders a &lt;section&gt; with some padding and a papayawhip backgroundconst Wrapper = styled.section` padding: 4em; background: papayawhip;` Titleå’ŒWrapperå˜é‡çŽ°åœ¨æ˜¯å¯ä»¥åƒä»»ä½•å…¶ä»– react ç»„ä»¶ä¸€æ ·æ¸²æŸ“ã€‚ 123&lt;Wrapper&gt; &lt;Title&gt;&#123;'Lets start first styled component!'&#125;&lt;/Title&gt;&lt;/Wrapper&gt; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Relay?Relay æ˜¯ä¸€ä¸ª JavaScript æ¡†æž¶ï¼Œç”¨äºŽä½¿ç”¨ React è§†å›¾å±‚ä¸º Web åº”ç”¨ç¨‹åºæä¾›æ•°æ®å±‚å’Œå®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ create-react-app ä¸­ä½¿ç”¨ TypeScript?å½“æ‚¨åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®å¸¦æœ‰--scripts-versioné€‰é¡¹å€¼ä¸ºreact-scripts-tsæ—¶ä¾¿å¯å°† TypeScript å¼•å…¥ã€‚ ç”Ÿæˆçš„é¡¹ç›®ç»“æž„å¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112my-app/â”œâ”€ .gitignoreâ”œâ”€ images.d.tsâ”œâ”€ node_modules/â”œâ”€ public/â”œâ”€ src/â”‚ â””â”€ ...â”œâ”€ package.jsonâ”œâ”€ tsconfig.jsonâ”œâ”€ tsconfig.prod.jsonâ”œâ”€ tsconfig.test.jsonâ””â”€ tslint.json â¬† è¿”å›žé¡¶éƒ¨ Miscellaneous Reselect åº“çš„ä¸»è¦åŠŸèƒ½æœ‰å“ªäº›? é€‰æ‹©å™¨å¯ä»¥è®¡ç®—æ´¾ç”Ÿæ•°æ®ï¼Œå…è®¸ Redux å­˜å‚¨æœ€å°å¯èƒ½çŠ¶æ€ã€‚ é€‰æ‹©å™¨æ˜¯æœ‰æ•ˆçš„ã€‚é™¤éžå…¶å‚æ•°ä¹‹ä¸€å‘ç”Ÿæ›´æ”¹ï¼Œå¦åˆ™ä¸ä¼šé‡æ–°è®¡ç®—é€‰æ‹©å™¨ã€‚ é€‰æ‹©å™¨æ˜¯å¯ç»„åˆçš„ã€‚å®ƒä»¬å¯ä»¥ç”¨ä½œå…¶ä»–é€‰æ‹©å™¨çš„è¾“å…¥ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸¾ä¸€ä¸ª Reselect ç”¨æ³•çš„ä¾‹å­?è®©æˆ‘ä»¬é€šè¿‡ä½¿ç”¨ Reselect æ¥ç®€åŒ–è®¡ç®—ä¸åŒæ•°é‡çš„è£…è¿è®¢å•ï¼š 1234567891011121314151617181920212223242526272829303132333435import &#123; createSelector &#125; from 'reselect'const shopItemsSelector = state =&gt; state.shop.itemsconst taxPercentSelector = state =&gt; state.shop.taxPercentconst subtotalSelector = createSelector( shopItemsSelector, items =&gt; items.reduce((acc, item) =&gt; acc + item.value, 0))const taxSelector = createSelector( subtotalSelector, taxPercentSelector, (subtotal, taxPercent) =&gt; subtotal * (taxPercent / 100))export const totalSelector = createSelector( subtotalSelector, taxSelector, (subtotal, tax) =&gt; (&#123; total: subtotal + tax &#125;))let exampleState = &#123; shop: &#123; taxPercent: 8, items: [ &#123; name: 'apple', value: 1.20 &#125;, &#123; name: 'orange', value: 0.95 &#125;, ] &#125;&#125;console.log(subtotalSelector(exampleState)) // 2.15console.log(taxSelector(exampleState)) // 0.172console.log(totalSelector(exampleState)) // &#123; total: 2.322 &#125; â¬† è¿”å›žé¡¶éƒ¨ Redux ä¸­çš„ Action æ˜¯ä»€ä¹ˆ?Actionsæ˜¯çº¯ JavaScript å¯¹è±¡æˆ–ä¿¡æ¯çš„æœ‰æ•ˆè´Ÿè½½ï¼Œå¯å°†æ•°æ®ä»Žæ‚¨çš„åº”ç”¨ç¨‹åºå‘é€åˆ°æ‚¨çš„ Storeã€‚ å®ƒä»¬æ˜¯ Store å”¯ä¸€çš„æ•°æ®æ¥æºã€‚ Action å¿…é¡»å…·æœ‰æŒ‡ç¤ºæ­£åœ¨æ‰§è¡Œçš„æ“ä½œç±»åž‹çš„ type å±žæ€§ã€‚ ä¾‹å¦‚ï¼Œè¡¨ç¤ºæ·»åŠ æ–°å¾…åŠžäº‹é¡¹çš„ç¤ºä¾‹æ“ä½œï¼š 1234&#123; type: ADD_TODO, text: &apos;Add todo item&apos;&#125; â¬† è¿”å›žé¡¶éƒ¨ åœ¨ React ä¸­ statics å¯¹è±¡æ˜¯å¦èƒ½ä¸Ž ES6 ç±»ä¸€èµ·ä½¿ç”¨?ä¸è¡Œï¼Œstatics ä»…é€‚ç”¨äºŽ React.createClass()ï¼š 1234567someComponent= React.createClass(&#123; statics: &#123; someMethod: function() &#123; // .. &#125; &#125;&#125;) ä½†æ˜¯ä½ å¯ä»¥åœ¨ ES6+ çš„ç±»ä¸­ç¼–å†™é™æ€ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 123456789class Component extends React.Component &#123; static propTypes = &#123; // ... &#125; static someMethod() &#123; // ... &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ Redux åªèƒ½ä¸Ž React ä¸€èµ·ä½¿ç”¨ä¹ˆ?Redux å¯ä»¥ç”¨åšä»»ä½• UI å±‚çš„æ•°æ®å­˜å‚¨ã€‚æœ€å¸¸è§çš„åº”ç”¨åœºæ™¯æ˜¯ React å’Œ React Nativeï¼Œä½†ä¹Ÿæœ‰ä¸€äº› bindings å¯ç”¨äºŽ AngularJSï¼ŒAngular 2,Vueï¼ŒMithril ç­‰é¡¹ç›®ã€‚Redux åªæä¾›äº†ä¸€ç§è®¢é˜…æœºåˆ¶ï¼Œä»»ä½•å…¶ä»–ä»£ç éƒ½å¯ä»¥ä½¿ç”¨å®ƒã€‚ â¬† è¿”å›žé¡¶éƒ¨ æ‚¨æ˜¯å¦éœ€è¦ä½¿ç”¨ç‰¹å®šçš„æž„å»ºå·¥å…·æ¥ä½¿ç”¨ Redux ?Redux æœ€åˆæ˜¯ç”¨ ES6 ç¼–å†™çš„ï¼Œç”¨ Webpack å’Œ Babel ç¼–è¯‘æˆ ES5ã€‚ æ— è®ºæ‚¨çš„ JavaScript æž„å»ºè¿‡ç¨‹å¦‚ä½•ï¼Œæ‚¨éƒ½åº”è¯¥èƒ½å¤Ÿä½¿ç”¨å®ƒã€‚Redux è¿˜æä¾›äº†ä¸€ä¸ª UMD ç‰ˆæœ¬ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨è€Œæ— éœ€ä»»ä½•æž„å»ºè¿‡ç¨‹ã€‚ â¬† è¿”å›žé¡¶éƒ¨ Redux Form çš„ initialValues å¦‚ä½•ä»ŽçŠ¶æ€æ›´æ–°?ä½ éœ€è¦æ·»åŠ enableReinitializeï¼štrueè®¾ç½®ã€‚ 1234const InitializeFromStateForm = reduxForm(&#123; form: 'initializeFromState', enableReinitialize : true&#125;)(UserEdit) å¦‚æžœä½ çš„initialValueså±žæ€§å¾—åˆ°æ›´æ–°ï¼Œä½ çš„è¡¨å•ä¹Ÿä¼šæ›´æ–°ã€‚ â¬† è¿”å›žé¡¶éƒ¨ React æ˜¯å¦‚ä½•ä¸ºä¸€ä¸ªå±žæ€§å£°æ˜Žä¸åŒçš„ç±»åž‹?ä½ å¯ä»¥ä½¿ç”¨ PropTypes ä¸­çš„ oneOfType() æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œå¦‚ä¸‹æ‰€ç¤º size çš„å±žæ€§å€¼å¯ä»¥æ˜¯ string æˆ– number ç±»åž‹ã€‚ 123456Component.PropTypes = &#123; size: PropTypes.oneOfType([ PropTypes.string, PropTypes.number ])&#125; â¬† è¿”å›žé¡¶éƒ¨ æˆ‘å¯ä»¥å¯¼å…¥ä¸€ä¸ª SVG æ–‡ä»¶ä½œä¸º React ç»„ä»¶ä¹ˆ?ä½ å¯ä»¥ç›´æŽ¥å°† SVG ä½œä¸ºç»„ä»¶å¯¼å…¥ï¼Œè€Œä¸æ˜¯å°†å…¶ä½œä¸ºæ–‡ä»¶åŠ è½½ã€‚æ­¤åŠŸèƒ½ä»…åœ¨ `react-scripts@2.0.0` åŠæ›´é«˜ç‰ˆæœ¬ä¸­å¯ç”¨ã€‚ 12345678import &#123; ReactComponent as Logo &#125; from './logo.svg' const App = () =&gt; ( &lt;div&gt; &#123;/* Logo is an actual react component */&#125; &lt;Logo /&gt; &lt;/div&gt;) **[â¬† è¿”å›žé¡¶éƒ¨](#ç›®å½•)** ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨å†…è”å¼•ç”¨å›žè°ƒæˆ–å‡½æ•°?å¦‚æžœå°† ref å›žè°ƒå®šä¹‰ä¸ºå†…è”å‡½æ•°ï¼Œåˆ™åœ¨æ›´æ–°æœŸé—´å®ƒå°†ä¼šè¢«è°ƒç”¨ä¸¤æ¬¡ã€‚é¦–å…ˆä½¿ç”¨ null å€¼ï¼Œç„¶åŽå†ä½¿ç”¨ DOM å…ƒç´ ã€‚è¿™æ˜¯å› ä¸ºæ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°å®žä¾‹ï¼Œå› æ­¤ React å¿…é¡»æ¸…é™¤æ—§çš„ ref å¹¶è®¾ç½®æ–°çš„ refã€‚ 12345678910111213141516class UserForm extends Component &#123; handleSubmit = () =&gt; &#123; console.log("Input Value is: ", this.input.value) &#125; render () &#123; return ( &lt;form onSubmit=&#123;this.handleSubmit&#125;&gt; &lt;input type='text' ref=&#123;(input) =&gt; this.input = input&#125; /&gt; // Access DOM input in handle submit &lt;button type='submit'&gt;Submit&lt;/button&gt; &lt;/form&gt; ) &#125;&#125; ä½†æˆ‘ä»¬æœŸæœ›çš„æ˜¯å½“ç»„ä»¶æŒ‚è½½æ—¶ï¼Œref å›žè°ƒåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚ä¸€ä¸ªå¿«é€Ÿä¿®å¤çš„æ–¹æ³•æ˜¯ä½¿ç”¨ ES7 ç±»å±žæ€§è¯­æ³•å®šä¹‰å‡½æ•°ã€‚ 1234567891011121314151617181920class UserForm extends Component &#123; handleSubmit = () =&gt; &#123; console.log("Input Value is: ", this.input.value) &#125; setSearchInput = (input) =&gt; &#123; this.input = input &#125; render () &#123; return ( &lt;form onSubmit=&#123;this.handleSubmit&#125;&gt; &lt;input type='text' ref=&#123;this.setSearchInput&#125; /&gt; // Access DOM input in handle submit &lt;button type='submit'&gt;Submit&lt;/button&gt; &lt;/form&gt; ) &#125;&#125; **[â¬† è¿”å›žé¡¶éƒ¨](#ç›®å½•)** åœ¨ React ä¸­ä»€ä¹ˆæ˜¯æ¸²æŸ“åŠ«æŒ?æ¸²æŸ“åŠ«æŒçš„æ¦‚å¿µæ˜¯æŽ§åˆ¶ä¸€ä¸ªç»„ä»¶å°†ä»Žå¦ä¸€ä¸ªç»„ä»¶è¾“å‡ºä»€ä¹ˆçš„èƒ½åŠ›ã€‚å®žé™…ä¸Šï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡å°†ç»„ä»¶åŒ…è£…æˆé«˜é˜¶ç»„ä»¶æ¥è£…é¥°ç»„ä»¶ã€‚é€šè¿‡åŒ…è£…ï¼Œä½ å¯ä»¥æ³¨å…¥é¢å¤–çš„å±žæ€§æˆ–äº§ç”Ÿå…¶ä»–å˜åŒ–ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ¸²æŸ“é€»è¾‘çš„æ›´æ”¹ã€‚å®žé™…ä¸Šå®ƒä¸æ”¯æŒåŠ«æŒï¼Œä½†é€šè¿‡ä½¿ç”¨ HOCï¼Œä½ å¯ä»¥ä½¿ç»„ä»¶ä»¥ä¸åŒçš„æ–¹å¼å·¥ä½œã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ HOC å·¥åŽ‚å®žçŽ°?åœ¨ React ä¸­å®žçŽ° HOC æœ‰ä¸¤ç§ä¸»è¦æ–¹å¼ã€‚ 1.å±žæ€§ä»£ç†ï¼ˆPPï¼‰å’Œ 2.ç»§æ‰¿å€’ç½®ï¼ˆIIï¼‰ã€‚ä»–ä»¬éµå¾ªä¸åŒçš„æ–¹æ³•æ¥æ“çºµWrappedComponentã€‚å±žæ€§ä»£ç† åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼ŒHOC çš„ render æ–¹æ³•è¿”å›ž WrappedComponent ç±»åž‹çš„ React å…ƒç´ ã€‚æˆ‘ä»¬é€šè¿‡ HOC æ”¶åˆ° propsï¼Œå› æ­¤å®šä¹‰ä¸ºå±žæ€§ä»£ç†ã€‚ 12345678function ppHOC(WrappedComponent) &#123; return class PP extends React.Component &#123; render() &#123; return &lt;WrappedComponent &#123;...this.props&#125;/&gt; &#125; &#125;&#125; ç»§æ‰¿å€’ç½®åœ¨è¿™ç§æ–¹æ³•ä¸­ï¼Œè¿”å›žçš„ HOC ç±»ï¼ˆEnhancerï¼‰æ‰©å±•äº† WrappedComponent ã€‚å®ƒè¢«ç§°ä¸ºç»§æ‰¿åè½¬ï¼Œå› ä¸ºå®ƒä¸æ˜¯æ‰©å±•ä¸€äº› Enhancer ç±»çš„ WrappedComponentï¼Œè€Œæ˜¯ç”± Enhancer è¢«åŠ¨æ‰©å±•ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»ä¼¼ä¹Žæ˜¯é€†çš„ã€‚ 1234567function iiHOC(WrappedComponent) &#123; return class Enhancer extends WrappedComponent &#123; render() &#123; return super.render() &#125; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ä¼ é€’æ•°å­—ç»™ React ç»„ä»¶?ä¼ é€’æ•°å­—æ—¶ä½ åº”è¯¥ä½¿ç”¨ {}ï¼Œè€Œä¼ é€’å­—ç¬¦ä¸²æ—¶è¿˜éœ€è¦ä½¿ç”¨å¼•å·ï¼š 1React.render(&lt;User age=&#123;30&#125; department=&#123;"IT"&#125; /&gt;, document.getElementById('container')); â¬† è¿”å›žé¡¶éƒ¨ æˆ‘éœ€è¦å°†æ‰€æœ‰çŠ¶æ€ä¿å­˜åˆ° Redux ä¸­å—ï¼Ÿæˆ‘åº”è¯¥ä½¿ç”¨ react çš„å†…éƒ¨çŠ¶æ€å—?è¿™å–å†³äºŽå¼€å‘è€…çš„å†³å®šã€‚å³å¼€å‘äººå‘˜çš„å·¥ä½œæ˜¯ç¡®å®šåº”ç”¨ç¨‹åºçš„å“ªç§çŠ¶æ€ï¼Œä»¥åŠæ¯ä¸ªçŠ¶æ€åº”è¯¥å­˜åœ¨çš„ä½ç½®ï¼Œæœ‰äº›ç”¨æˆ·å–œæ¬¢å°†æ¯ä¸€ä¸ªæ•°æ®ä¿å­˜åœ¨ Redux ä¸­ï¼Œä»¥ç»´æŠ¤å…¶åº”ç”¨ç¨‹åºçš„å®Œå…¨å¯åºåˆ—åŒ–å’Œå—æŽ§ã€‚å…¶ä»–äººæ›´å–œæ¬¢åœ¨ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€å†…ä¿æŒéžå…³é”®æˆ–UIçŠ¶æ€ï¼Œä¾‹å¦‚â€œæ­¤ä¸‹æ‹‰åˆ—è¡¨å½“å‰æ˜¯å¦æ‰“å¼€â€ã€‚ ä»¥ä¸‹æ˜¯ç¡®å®šåº”å°†å“ªç§æ•°æ®æ”¾å…¥Reduxçš„ä¸»è¦è§„åˆ™ï¼š åº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†æ˜¯å¦å…³å¿ƒæ­¤æ•°æ®ï¼Ÿ æ‚¨æ˜¯å¦éœ€è¦èƒ½å¤ŸåŸºäºŽæ­¤åŽŸå§‹æ•°æ®åˆ›å»ºæ›´å¤šæ´¾ç”Ÿæ•°æ®ï¼Ÿ æ˜¯å¦ä½¿ç”¨ç›¸åŒçš„æ•°æ®æ¥é©±åŠ¨å¤šä¸ªç»„ä»¶ï¼Ÿ èƒ½å¤Ÿå°†æ­¤çŠ¶æ€æ¢å¤åˆ°ç»™å®šæ—¶é—´ç‚¹ï¼ˆå³æ—¶é—´æ—…è¡Œè°ƒè¯•ï¼‰æ˜¯å¦å¯¹æ‚¨æœ‰ä»·å€¼ï¼Ÿ æ‚¨æ˜¯å¦è¦ç¼“å­˜æ•°æ®ï¼ˆå³ï¼Œå¦‚æžœå·²ç»å­˜åœ¨ï¼Œåˆ™ä½¿ç”¨å¤„äºŽçŠ¶æ€çš„çŠ¶æ€è€Œä¸æ˜¯é‡æ–°è¯·æ±‚å®ƒï¼‰ï¼Ÿ åœ¨ React ä¸­ registerServiceWorker çš„ç”¨é€”æ˜¯ä»€ä¹ˆ?é»˜è®¤æƒ…å†µä¸‹ï¼ŒReact ä¼šä¸ºä½ åˆ›å»ºä¸€ä¸ªæ²¡æœ‰ä»»ä½•é…ç½®çš„ service workerã€‚Service worker æ˜¯ä¸€ä¸ª Web APIï¼Œå®ƒå¸®åŠ©ä½ ç¼“å­˜èµ„æºå’Œå…¶ä»–æ–‡ä»¶ï¼Œä»¥ä¾¿å½“ç”¨æˆ·ç¦»çº¿æˆ–åœ¨å¼±ç½‘ç»œæ—¶ï¼Œä»–/å¥¹ä»ç„¶å¯ä»¥åœ¨å±å¹•ä¸Šçœ‹åˆ°ç»“æžœï¼Œå› æ­¤ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ å»ºç«‹æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè¿™æ˜¯ä½ ç›®å‰åº”è¯¥äº†è§£çš„å…³äºŽ Service worker çš„å†…å®¹ã€‚ 1234567import React from 'react';import ReactDOM from 'react-dom';import App from './App';import registerServiceWorker from './registerServiceWorker';ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));registerServiceWorker(); â¬† è¿”å›žé¡¶éƒ¨ React memo å‡½æ•°æ˜¯ä»€ä¹ˆ?å½“ç±»ç»„ä»¶çš„è¾“å…¥å±žæ€§ç›¸åŒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ pureComponent æˆ– shouldComponentUpdate æ¥é¿å…ç»„ä»¶çš„æ¸²æŸ“ã€‚çŽ°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡æŠŠå‡½æ•°ç»„ä»¶åŒ…è£…åœ¨ React.memo ä¸­æ¥å®žçŽ°ç›¸åŒçš„åŠŸèƒ½ã€‚ 123const MyComponent = React.memo(function MyComponent(props) &#123; /* only rerenders if props change */&#125;); â¬† è¿”å›žé¡¶éƒ¨ React lazy å‡½æ•°æ˜¯ä»€ä¹ˆ?ä½¿ç”¨ React.lazy å‡½æ•°å…è®¸ä½ å°†åŠ¨æ€å¯¼å…¥çš„ç»„ä»¶ä½œä¸ºå¸¸è§„ç»„ä»¶è¿›è¡Œæ¸²æŸ“ã€‚å½“ç»„ä»¶å¼€å§‹æ¸²æŸ“æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨åŠ è½½åŒ…å« OtherComponent çš„åŒ…ã€‚å®ƒå¿…é¡»è¿”å›žä¸€ä¸ª Promiseï¼Œè¯¥ Promise è§£æžåŽä¸ºä¸€ä¸ªå¸¦æœ‰é»˜è®¤å¯¼å‡º React ç»„ä»¶çš„æ¨¡å—ã€‚ 123456789const OtherComponent = React.lazy(() =&gt; import('./OtherComponent'));function MyComponent() &#123; return ( &lt;div&gt; &lt;OtherComponent /&gt; &lt;/div&gt; );&#125; æ³¨æ„ï¼š React.lazy å’Œ Suspense è¿˜ä¸èƒ½ç”¨äºŽæœåŠ¡ç«¯æ¸²æŸ“ã€‚å¦‚æžœè¦åœ¨æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨ç¨‹åºä¸­è¿›è¡Œä»£ç æ‹†åˆ†ï¼Œæˆ‘ä»¬ä»ç„¶å»ºè®®ä½¿ç”¨ React Loadableã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ä½¿ç”¨ setState é˜²æ­¢ä¸å¿…è¦çš„æ›´æ–°?ä½ å¯ä»¥æŠŠçŠ¶æ€çš„å½“å‰å€¼ä¸Žå·²æœ‰çš„å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶å†³å®šæ˜¯å¦é‡æ–°æ¸²æŸ“é¡µé¢ã€‚å¦‚æžœæ²¡æœ‰æ›´æ”¹ï¼Œä½ éœ€è¦è¿”å›ž null ä»¥é˜»æ­¢æ¸²æŸ“ï¼Œå¦åˆ™è¿”å›žæœ€æ–°çš„çŠ¶æ€å€¼ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·é…ç½®ä¿¡æ¯ç»„ä»¶å°†æŒ‰ä»¥ä¸‹æ–¹å¼å®žçŽ°æ¡ä»¶æ¸²æŸ“ï¼š 12345678910getUserProfile = user =&gt; &#123; const latestAddress = user.address; this.setState(state =&gt; &#123; if (state.address === latestAddress) &#123; return null; &#125; else &#123; return &#123; title: latestAddress &#125;; &#125; &#125;);&#125;; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ React 16 ç‰ˆæœ¬ä¸­æ¸²æŸ“æ•°ç»„ã€å­—ç¬¦ä¸²å’Œæ•°å€¼?Arrays: ä¸Žæ—§ç‰ˆæœ¬ä¸åŒçš„æ˜¯ï¼Œåœ¨ React 16 ä¸­ä½ ä¸éœ€è¦ç¡®ä¿ render æ–¹æ³•å¿…é¡»è¿”å›žå•ä¸ªå…ƒç´ ã€‚é€šè¿‡è¿”å›žæ•°ç»„ï¼Œä½ å¯ä»¥è¿”å›žå¤šä¸ªæ²¡æœ‰åŒ…è£…å…ƒç´ çš„åŒçº§å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä¸‹é¢çš„å¼€å‘äººå‘˜åˆ—è¡¨ï¼š 1234567const ReactJSDevs = () =&gt; &#123; return [ &lt;li key="1"&gt;John&lt;/li&gt;, &lt;li key="2"&gt;Jackie&lt;/li&gt;, &lt;li key="3"&gt;Jordan&lt;/li&gt; ];&#125; ä½ è¿˜å¯ä»¥å°†æ­¤æ•°ç»„é¡¹åˆå¹¶åˆ°å¦ä¸€ä¸ªæ•°ç»„ç»„ä»¶ä¸­ï¼š 12345678910const JSDevs = () =&gt; &#123; return ( &lt;ul&gt; &lt;li&gt;Brad&lt;/li&gt; &lt;li&gt;Brodge&lt;/li&gt; &lt;ReactJSDevs/&gt; &lt;li&gt;Brandon&lt;/li&gt; &lt;/ul&gt; );&#125; Strings and Numbers: åœ¨ render æ–¹æ³•ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥è¿”å›žå­—ç¬¦ä¸²å’Œæ•°å€¼ç±»åž‹ï¼š 12345678// Stringrender() &#123; return 'Welcome to ReactJS questions';&#125;// Numberrender() &#123; return 2018;&#125; â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ React ç±»ä¸­ä½¿ç”¨ç±»å­—æ®µå£°æ˜Žè¯­æ³•?ä½¿ç”¨ç±»å­—æ®µå£°æ˜Žå¯ä»¥ä½¿ React ç±»ç»„ä»¶æ›´åŠ ç®€æ´ã€‚ä½ å¯ä»¥åœ¨ä¸ä½¿ç”¨æž„é€ å‡½æ•°çš„æƒ…å†µä¸‹åˆå§‹åŒ–æœ¬åœ°çŠ¶æ€ï¼Œå¹¶é€šè¿‡ä½¿ç”¨ç®­å¤´å‡½æ•°å£°æ˜Žç±»æ–¹æ³•ï¼Œè€Œæ— éœ€é¢å¤–å¯¹å®ƒä»¬è¿›è¡Œç»‘å®šã€‚è®©æˆ‘ä»¬ä»¥ä¸€ä¸ª counter ç¤ºä¾‹æ¥æ¼”ç¤ºç±»å­—æ®µå£°æ˜Žï¼Œå³ä¸ä½¿ç”¨æž„é€ å‡½æ•°åˆå§‹åŒ–çŠ¶æ€ä¸”ä¸è¿›è¡Œæ–¹æ³•ç»‘å®šï¼š 1234567891011121314151617181920212223242526class Counter extends Component &#123; state = &#123; value: 0 &#125;; handleIncrement = () =&gt; &#123; this.setState(prevState =&gt; (&#123; value: prevState.value + 1 &#125;)); &#125;; handleDecrement = () =&gt; &#123; this.setState(prevState =&gt; (&#123; value: prevState.value - 1 &#125;)); &#125;; render() &#123; return ( &lt;div&gt; &#123;this.state.value&#125; &lt;button onClick=&#123;this.handleIncrement&#125;&gt;+&lt;/button&gt; &lt;button onClick=&#123;this.handleDecrement&#125;&gt;-&lt;/button&gt; &lt;/div&gt; ) &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ hooks?Hooks æ˜¯ä¸€ä¸ªæ–°çš„è‰æ¡ˆï¼Œå®ƒå…è®¸ä½ åœ¨ä¸ç¼–å†™ç±»çš„æƒ…å†µä¸‹ä½¿ç”¨çŠ¶æ€å’Œå…¶ä»– React ç‰¹æ€§ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª useState é’©å­ç¤ºä¾‹ï¼š 123456789101112131415import &#123; useState &#125; from 'react';function Example() &#123; // Declare a new state variable, which we'll call "count" const [count, setCount] = useState(0); return ( &lt;div&gt; &lt;p&gt;You clicked &#123;count&#125; times&lt;/p&gt; &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt; Click me &lt;/button&gt; &lt;/div&gt; );&#125; é˜…è¯»èµ„æºï¼š æŽ˜é‡‘ - 30åˆ†é’Ÿç²¾é€šReact Hooks â¬† è¿”å›žé¡¶éƒ¨ Hooks éœ€è¦éµå¾ªä»€ä¹ˆè§„åˆ™?ä¸ºäº†ä½¿ç”¨ hooksï¼Œä½ éœ€è¦éµå®ˆä¸¤ä¸ªè§„åˆ™ï¼š ä»…åœ¨é¡¶å±‚çš„ React å‡½æ•°è°ƒç”¨ hooksã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸èƒ½åœ¨å¾ªçŽ¯ã€æ¡ä»¶æˆ–å†…åµŒå‡½æ•°ä¸­è°ƒç”¨ hooksã€‚è¿™å°†ç¡®ä¿æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶éƒ½ä»¥ç›¸åŒçš„é¡ºåºè°ƒç”¨ hooksï¼Œå¹¶ä¸”å®ƒä¼šåœ¨å¤šä¸ª useState å’Œ useEffect è°ƒç”¨ä¹‹é—´ä¿ç•™ hooks çš„çŠ¶æ€ã€‚ ä»…åœ¨ React å‡½æ•°ä¸­è°ƒç”¨ hooksã€‚ä¾‹å¦‚ï¼Œä½ ä¸èƒ½åœ¨å¸¸è§„çš„ JavaScript å‡½æ•°ä¸­è°ƒç”¨ hooksã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ç¡®ä¿é’©å­éµå¾ªæ­£ç¡®çš„ä½¿ç”¨è§„åˆ™?React å›¢é˜Ÿå‘å¸ƒäº†ä¸€ä¸ªåä¸ºeslint-plugin-react-hooksçš„ ESLint æ’ä»¶ï¼Œå®ƒå®žæ–½äº†è¿™ä¸¤ä¸ªè§„åˆ™ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†æ­¤æ’ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼Œ 1npm install eslint-plugin-react-hooks@next å¹¶åœ¨æ‚¨çš„ ESLint é…ç½®æ–‡ä»¶ä¸­åº”ç”¨ä»¥ä¸‹é…ç½®ï¼š 1234567891011// Your ESLint configuration&#123; "plugins": [ // ... "react-hooks" ], "rules": &#123; // ... "react-hooks/rules-of-hooks": "error" &#125;&#125; æ³¨æ„ï¼š æ­¤æ’ä»¶åœ¨ Create React App å·²ç»é»˜è®¤é…ç½®ã€‚ â¬† è¿”å›žé¡¶éƒ¨ Flux å’Œ Redux ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«?ä»¥ä¸‹æ˜¯ Flux å’Œ Redux ä¹‹é—´çš„ä¸»è¦åŒºåˆ« | Flux | Redux || â€”â€“ | â€”â€”- || çŠ¶æ€æ˜¯å¯å˜çš„ | çŠ¶æ€æ˜¯ä¸å¯å˜çš„ || Store åŒ…å«çŠ¶æ€å’Œæ›´æ”¹é€»è¾‘ | å­˜å‚¨å’Œæ›´æ”¹é€»è¾‘æ˜¯åˆ†å¼€çš„ || å­˜åœ¨å¤šä¸ª Store | ä»…å­˜åœ¨ä¸€ä¸ª Store || æ‰€æœ‰çš„ Store éƒ½æ˜¯æ–­å¼€è¿žæŽ¥çš„ | å¸¦æœ‰åˆ†å±‚ reducers çš„ Store || å®ƒæœ‰ä¸€ä¸ªå•ç‹¬çš„ dispatcher | æ²¡æœ‰ dispatcher çš„æ¦‚å¿µ || React ç»„ä»¶ç›‘æµ‹ Store | å®¹å™¨ç»„ä»¶ä½¿ç”¨è¿žæŽ¥å‡½æ•° | â¬† è¿”å›žé¡¶éƒ¨ React Router V4 æœ‰ä»€ä¹ˆå¥½å¤„?ä»¥ä¸‹æ˜¯ React Router V4 æ¨¡å—çš„ä¸»è¦ä¼˜ç‚¹ï¼š åœ¨React Router v4ï¼ˆç‰ˆæœ¬4ï¼‰ä¸­ï¼ŒAPIå®Œå…¨ä¸Žç»„ä»¶æœ‰å…³ã€‚è·¯ç”±å™¨å¯ä»¥æ˜¾ç¤ºä¸ºå•ä¸ªç»„ä»¶ï¼ˆï¼‰ï¼Œå®ƒåŒ…è£…ç‰¹å®šçš„å­è·¯ç”±å™¨ç»„ä»¶ï¼ˆï¼‰ã€‚ æ‚¨æ— éœ€æ‰‹åŠ¨è®¾ç½®åŽ†å²è®°å½•ã€‚è·¯ç”±å™¨æ¨¡å—å°†é€šè¿‡ä½¿ç”¨ç»„ä»¶åŒ…è£…è·¯ç”±æ¥å¤„ç†åŽ†å²è®°å½•ã€‚ é€šè¿‡ä»…æ·»åŠ ç‰¹å®šè·¯ç”±å™¨æ¨¡å—ï¼ˆWebï¼Œcore æˆ– nativeï¼‰æ¥å‡å°‘åº”ç”¨å¤§å°ã€‚ â¬† è¿”å›žé¡¶éƒ¨ æ‚¨èƒ½æè¿°ä¸€ä¸‹ componentDidCatch ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ç­¾åå—?åœ¨åŽä»£å±‚çº§çš„ç»„ä»¶æŠ›å‡ºé”™è¯¯åŽï¼Œå°†è°ƒç”¨componentDidCatchç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚è¯¥æ–¹æ³•æŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š error: - æŠ›å‡ºçš„é”™è¯¯å¯¹è±¡ info: - å…·æœ‰ componentStack é”®çš„å¯¹è±¡ï¼ŒåŒ…å«æœ‰å…³å“ªä¸ªç»„ä»¶å¼•å‘é”™è¯¯çš„ä¿¡æ¯ã€‚ æ–¹æ³•ç»“æž„å¦‚ä¸‹ï¼š 1componentDidCatch(error, info) â¬† è¿”å›žé¡¶éƒ¨ åœ¨å“ªäº›æƒ…å†µä¸‹ï¼Œé”™è¯¯è¾¹ç•Œä¸ä¼šæ•èŽ·é”™è¯¯?ä»¥ä¸‹æ˜¯é”™è¯¯è¾¹ç•Œä¸èµ·ä½œç”¨çš„æƒ…å†µï¼š åœ¨äº‹ä»¶å¤„ç†å™¨å†…ã€‚ setTimeout æˆ– requestAnimationFrame å›žè°ƒä¸­çš„å¼‚æ­¥ä»£ç ã€‚ åœ¨æœåŠ¡ç«¯æ¸²æŸ“æœŸé—´ã€‚ é”™è¯¯è¾¹ç•Œä»£ç æœ¬èº«ä¸­å¼•å‘é”™è¯¯æ—¶ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆäº‹ä»¶å¤„ç†å™¨ä¸éœ€è¦é”™è¯¯è¾¹ç•Œ?é”™è¯¯è¾¹ç•Œä¸ä¼šæ•èŽ·äº‹ä»¶å¤„ç†ç¨‹åºä¸­çš„é”™è¯¯ã€‚ä¸Ž render æ–¹æ³•æˆ–ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸åŒï¼Œåœ¨æ¸²æŸ“æœŸé—´äº‹ä»¶å¤„ç†å™¨ä¸ä¼šè¢«æ‰§è¡Œæˆ–è°ƒç”¨ã€‚ å¦‚æžœä»ç„¶éœ€è¦åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­æ•èŽ·é”™è¯¯ï¼Œè¯·ä½¿ç”¨ä¸‹é¢çš„å¸¸è§„ JavaScript try/catch è¯­å¥ï¼š 123456789101112131415161718192021class MyComponent extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; error: null &#125;; &#125; handleClick = () =&gt; &#123; try &#123; // Do something that could throw &#125; catch (error) &#123; this.setState(&#123; error &#125;); &#125; &#125; render() &#123; if (this.state.error) &#123; return &lt;h1&gt;Caught an error.&lt;/h1&gt; &#125; return &lt;div onClick=&#123;this.handleClick&#125;&gt;Click Me&lt;/div&gt; &#125;&#125; ä¸Šé¢çš„ä»£ç ä½¿ç”¨æ™®é€šçš„ JavaScript try/catch å—è€Œä¸æ˜¯é”™è¯¯è¾¹ç•Œæ¥æ•èŽ·é”™è¯¯ã€‚ â¬† è¿”å›žé¡¶éƒ¨ try catch ä¸Žé”™è¯¯è¾¹ç•Œæœ‰ä»€ä¹ˆåŒºåˆ«?Try catch å—ä½¿ç”¨å‘½ä»¤å¼ä»£ç ï¼Œè€Œé”™è¯¯è¾¹ç•Œåˆ™æ˜¯ä½¿ç”¨åœ¨å±å¹•ä¸Šå‘ˆçŽ°å£°æ˜Žæ€§ä»£ç ã€‚ ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä½¿ç”¨å£°æ˜Žå¼ä»£ç çš„ try/catch å—ï¼š 12345try &#123; showButton();&#125; catch (error) &#123; // ...&#125; è€Œé”™è¯¯è¾¹ç•ŒåŒ…è£…çš„å£°æ˜Žå¼ä»£ç å¦‚ä¸‹ï¼š 123&lt;ErrorBoundary&gt; &lt;MyComponent /&gt;&lt;/ErrorBoundary&gt; å› æ­¤ï¼Œå¦‚æžœåœ¨ç»„ä»¶æ ‘æ·±å¤„æŸä¸ªä½ç½®ç»„ä»¶çš„ componentDidUpdate æ–¹æ³•ä¸­ï¼Œå‘ç”Ÿäº†ç”± setState å¼•å‘çš„é”™è¯¯ï¼Œå®ƒä»ç„¶ä¼šæ­£ç¡®åœ°å†’æ³¡åˆ°æœ€è¿‘çš„é”™è¯¯è¾¹ç•Œã€‚ â¬† è¿”å›žé¡¶éƒ¨ React 16 ä¸­æœªæ•èŽ·çš„é”™è¯¯çš„è¡Œä¸ºæ˜¯ä»€ä¹ˆ?åœ¨ React 16 ä¸­ï¼Œæœªè¢«ä»»ä½•é”™è¯¯è¾¹ç•Œæ•èŽ·çš„é”™è¯¯å°†å¯¼è‡´æ•´ä¸ª React ç»„ä»¶æ ‘çš„å¸è½½ã€‚è¿™ä¸€å†³å®šèƒŒåŽçš„åŽŸå› æ˜¯ï¼Œä¸Žå…¶æ˜¾ç¤ºå·²æŸåçš„ç•Œé¢ï¼Œä¸å¦‚å®Œå…¨ç§»é™¤å®ƒã€‚ä¾‹å¦‚ï¼Œå¯¹äºŽæ”¯ä»˜åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œæ˜¾ç¤ºé”™è¯¯çš„é‡‘é¢æ¯”ä»€ä¹ˆéƒ½ä¸æä¾›æ›´ç³Ÿç³•ã€‚ â¬† è¿”å›žé¡¶éƒ¨ æ”¾ç½®é”™è¯¯è¾¹ç•Œçš„æ­£ç¡®ä½ç½®æ˜¯ä»€ä¹ˆ?é”™è¯¯è¾¹ç•Œä½¿ç”¨çš„ç²’åº¦ç”±å¼€å‘äººå‘˜æ ¹æ®é¡¹ç›®éœ€è¦å†³å®šã€‚ä½ å¯ä»¥éµå¾ªè¿™äº›æ–¹æ³•ä¸­çš„ä»»ä½•ä¸€ç§ï¼š å¯ä»¥åŒ…è£…é¡¶å±‚è·¯ç”±ç»„ä»¶ä»¥æ˜¾ç¤ºæ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å¸¸è§çš„é”™è¯¯æ¶ˆæ¯ã€‚ ä½ è¿˜å¯ä»¥å°†å•ä¸ªç»„ä»¶åŒ…è£…åœ¨é”™è¯¯è¾¹ç•Œä¸­ï¼Œä»¥é˜²æ­¢å®ƒä»¬å¥”æºƒæ—¶å½±å“åˆ°åº”ç”¨ç¨‹åºçš„å…¶ä½™éƒ¨åˆ†ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»Žé”™è¯¯è¾¹ç•Œè·Ÿè¸ªç»„ä»¶å †æ ˆæœ‰ä»€ä¹ˆå¥½å¤„?é™¤äº†é”™è¯¯æ¶ˆæ¯å’Œ JavaScript å †æ ˆï¼ŒReact 16 å°†ä½¿ç”¨é”™è¯¯è¾¹ç•Œçš„æ¦‚å¿µæ˜¾ç¤ºå¸¦æœ‰æ–‡ä»¶åå’Œè¡Œå·çš„ç»„ä»¶å †æ ˆã€‚ä¾‹å¦‚ï¼ŒBuggyCounter ç»„ä»¶æ˜¾ç¤ºç»„ä»¶å †æ ˆä¿¡æ¯ï¼š â¬† è¿”å›žé¡¶éƒ¨ åœ¨å®šä¹‰ç±»ç»„ä»¶æ—¶ï¼Œä»€ä¹ˆæ˜¯å¿…é¡»çš„æ–¹æ³•?åœ¨ç±»ç»„ä»¶ä¸­ render() æ–¹æ³•æ˜¯å”¯ä¸€éœ€è¦çš„æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºŽç±»ç»„ä»¶ï¼Œé™¤äº† render() æ–¹æ³•ä¹‹å¤–çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯å¯é€‰çš„ã€‚ â¬† è¿”å›žé¡¶éƒ¨ render æ–¹æ³•å¯èƒ½è¿”å›žçš„ç±»åž‹æ˜¯ä»€ä¹ˆ?ä»¥ä¸‹åˆ—è¡¨æ˜¯ render æ–¹æ³•è¿”å›žçš„ç±»åž‹ï¼š React elements: ç”¨äºŽå‘Šè¯‰ React å¦‚ä½•æ¸²æŸ“ DOM èŠ‚ç‚¹ã€‚å®ƒåŒ…æ‹¬ HTML å…ƒç´ ï¼Œå¦‚ &lt;div /&gt; å’Œç”¨æˆ·å®šä¹‰çš„å…ƒç´ ã€‚ Arrays and fragments: ä»¥æ•°ç»„çš„å½¢å¼è¿”å›žå¤šä¸ªå…ƒç´ å’ŒåŒ…è£…å¤šä¸ªå…ƒç´ çš„ç‰‡æ®µã€‚ Portals: å°†å­å…ƒç´ æ¸²æŸ“åˆ°ä¸åŒçš„ DOM å­æ ‘ä¸­ã€‚ String and numbers: åœ¨ DOM ä¸­å°†å­—ç¬¦ä¸²å’Œæ•°å­—éƒ½ä½œä¸ºæ–‡æœ¬èŠ‚ç‚¹è¿›è¡Œå‘ˆçŽ°ã€‚ Booleans or null: ä¸ä¼šæ¸²æŸ“ä»»ä½•å†…å®¹ï¼Œä½†è¿™äº›ç±»åž‹ç”¨äºŽæœ‰æ¡ä»¶åœ°æ¸²æŸ“å†…å®¹ã€‚ â¬† è¿”å›žé¡¶éƒ¨ æž„é€ å‡½æ•°çš„ä¸»è¦ç›®çš„æ˜¯ä»€ä¹ˆ?ä½¿ç”¨æž„é€ å‡½æ•°ä¸»è¦æœ‰ä¸¤ä¸ªç›®çš„ï¼š é€šè¿‡å°†å¯¹è±¡åˆ†é…ç»™ this.state æ¥åˆå§‹åŒ–æœ¬åœ°çŠ¶æ€ã€‚ ç”¨äºŽä¸ºç»„ä»¶å®žä¾‹ç»‘å®šäº‹ä»¶å¤„ç†æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç æ¶µç›–äº†ä¸Šè¿°ä¸¤ç§æƒ…å†µï¼š 123456constructor(props) &#123; super(props); // Don't call this.setState() here! this.state = &#123; counter: 0 &#125;; this.handleClick = this.handleClick.bind(this);&#125; â¬† è¿”å›žé¡¶éƒ¨ æ˜¯å¦å¿…é¡»ä¸º React ç»„ä»¶å®šä¹‰æž„é€ å‡½æ•°?ä¸ï¼Œè¿™ä¸æ˜¯å¼ºåˆ¶çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœä½ ä¸éœ€è¦åˆå§‹åŒ–çŠ¶æ€ä¸”ä¸éœ€è¦ç»‘å®šæ–¹æ³•ï¼Œåˆ™ä½ ä¸éœ€è¦ä¸º React ç»„ä»¶å®žçŽ°ä¸€ä¸ªæž„é€ å‡½æ•°ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯é»˜è®¤å±žæ€§?defaultProps è¢«å®šä¹‰ä¸ºç»„ä»¶ç±»ä¸Šçš„å±žæ€§ï¼Œç”¨äºŽè®¾ç½®ç»„ä»¶ç±»é»˜è®¤çš„å±žæ€§å€¼ã€‚å®ƒåªé€‚ç”¨äºŽ undefined çš„å±žæ€§ï¼Œè€Œä¸é€‚ç”¨äºŽ null å±žæ€§ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ä¸ºæŒ‰é’®ç»„ä»¶åˆ›å»ºé»˜è®¤çš„ color å±žæ€§ï¼š 1234567class MyButton extends React.Component &#123; // ...&#125;MyButton.defaultProps = &#123; color: 'red'&#125;; å¦‚æžœæœªè®¾ç½® props.colorï¼Œåˆ™ä¼šä½¿ç”¨é»˜è®¤å€¼ redã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯å½“ä½ è¯•å›¾è®¿é—® color å±žæ€§æ—¶ï¼Œå®ƒéƒ½ä½¿ç”¨é»˜è®¤å€¼ã€‚ 123render() &#123; return &lt;MyButton /&gt; ; // props.color will be set to red &#125; æ³¨æ„ï¼š å¦‚æžœä½ æä¾›çš„æ˜¯ null å€¼ï¼Œå®ƒä¼šä»ç„¶ä¿ç•™ null å€¼ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆä¸èƒ½åœ¨ componentWillUnmount ä¸­è°ƒç”¨ setState() æ–¹æ³•?ä¸åº”åœ¨ componentWillUnmount() ä¸­è°ƒç”¨ setState()ï¼Œå› ä¸ºä¸€æ—¦å¸è½½äº†ç»„ä»¶å®žä¾‹ï¼Œå°±æ°¸è¿œä¸ä¼šå†æ¬¡è£…è½½å®ƒã€‚ â¬† è¿”å›žé¡¶éƒ¨ getDerivedStateFromError çš„ç›®çš„æ˜¯ä»€ä¹ˆ?åœ¨å­ä»£ç»„ä»¶æŠ›å‡ºå¼‚å¸¸åŽä¼šè°ƒç”¨æ­¤ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚å®ƒä»¥æŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ªå€¼ç”¨äºŽæ›´æ–°çŠ¶æ€ã€‚è¯¥ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ç­¾åå¦‚ä¸‹ï¼š 1static getDerivedStateFromError(error) è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªåŒ…å«ä¸Šè¿°ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„é”™è¯¯è¾¹ç•Œç¤ºä¾‹ï¼Œæ¥è¯´æ˜Ž getDerivedStateFromError çš„ç›®çš„ï¼š 1234567891011121314151617181920class ErrorBoundary extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; hasError: false &#125;; &#125; static getDerivedStateFromError(error) &#123; // Update state so the next render will show the fallback UI. return &#123; hasError: true &#125;; &#125; render() &#123; if (this.state.hasError) &#123; // You can render any custom fallback UI return &lt;h1&gt;Something went wrong.&lt;/h1&gt;; &#125; return this.props.children; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ å½“ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶é¡ºåºæ‰§è¡Œçš„æ–¹æ³•æœ‰å“ªäº›?æ›´æ–°å¯èƒ½ç”±å±žæ€§æˆ–çŠ¶æ€çš„æ›´æ”¹å¼•èµ·ã€‚åœ¨é‡æ–°æ¸²æŸ“ç»„ä»¶æ—¶ï¼Œä¼šæŒ‰ä»¥ä¸‹é¡ºåºè°ƒç”¨ä¸‹åˆ—æ–¹æ³•ã€‚ static getDerivedStateFromProps() shouldComponentUpdate() render() getSnapshotBeforeUpdate() componentDidUpdate() â¬† è¿”å›žé¡¶éƒ¨ é”™è¯¯å¤„ç†æœŸé—´è°ƒç”¨å“ªäº›æ–¹æ³•?åœ¨æ¸²æŸ“æœŸé—´ï¼Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•å†…æˆ–ä»»ä½•å­ç»„ä»¶çš„æž„é€ å‡½æ•°ä¸­å‡ºçŽ°é”™è¯¯æ—¶ï¼Œå°†ä¼šè°ƒç”¨ä»¥ä¸‹æ–¹æ³•ï¼š static getDerivedStateFromError() componentDidCatch() â¬† è¿”å›žé¡¶éƒ¨ displayName ç±»å±žæ€§çš„ç”¨é€”æ˜¯ä»€ä¹ˆ?displayName è¢«ç”¨äºŽè°ƒè¯•ä¿¡æ¯ã€‚é€šå¸¸ï¼Œä½ ä¸éœ€è¦æ˜¾å¼è®¾ç½®å®ƒï¼Œå› ä¸ºå®ƒæ˜¯ä»Žå®šä¹‰ç»„ä»¶çš„å‡½æ•°æˆ–ç±»çš„åç§°æŽ¨æ–­å‡ºæ¥çš„ã€‚å¦‚æžœå‡ºäºŽè°ƒè¯•ç›®çš„æˆ–åœ¨åˆ›å»ºé«˜é˜¶ç»„ä»¶æ—¶æ˜¾ç¤ºä¸åŒçš„åç§°ï¼Œå¯èƒ½éœ€è¦æ˜¾å¼è®¾ç½®å®ƒã€‚ ä¾‹å¦‚ï¼Œè‹¥è¦ç®€åŒ–è°ƒè¯•ï¼Œè¯·é€‰æ‹©ä¸€ä¸ªæ˜¾ç¤ºåç§°ï¼Œä»¥è¡¨æ˜Žå®ƒæ˜¯ withSubscription HOC çš„ç»“æžœã€‚ 123456789function withSubscription(WrappedComponent) &#123; class WithSubscription extends React.Component &#123;/* ... */&#125; WithSubscription.displayName = `WithSubscription($&#123;getDisplayName(WrappedComponent)&#125;)`; return WithSubscription;&#125;function getDisplayName(WrappedComponent) &#123; return WrappedComponent.displayName || WrappedComponent.name || 'Component';&#125; â¬† è¿”å›žé¡¶éƒ¨ æ”¯æŒ React åº”ç”¨ç¨‹åºçš„æµè§ˆå™¨æœ‰å“ªä¸€äº›?React æ”¯æŒæ‰€æœ‰æµè¡Œçš„æµè§ˆå™¨ï¼ŒåŒ…æ‹¬ Internet Explorer 9 å’Œæ›´é«˜ç‰ˆæœ¬ï¼Œä½†æ—§ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼ˆå¦‚IE 9 å’Œ IE 10ï¼‰éœ€è¦ä¸€äº› polyfillã€‚å¦‚æžœä½ ä½¿ç”¨ es5-shim and es5-sham polyfillï¼Œé‚£ä¹ˆå®ƒç”šè‡³æ”¯æŒä¸æ”¯æŒ ES5 æ–¹æ³•çš„æ—§æµè§ˆå™¨ã€‚ â¬† è¿”å›žé¡¶éƒ¨ unmountComponentAtNode æ–¹æ³•çš„ç›®çš„æ˜¯ä»€ä¹ˆ?æ­¤æ–¹æ³•å¯ä»Ž react-dom åŒ…ä¸­èŽ·å¾—ï¼Œå®ƒä»Ž DOM ä¸­ç§»é™¤å·²è£…è½½çš„ React ç»„ä»¶ï¼Œå¹¶æ¸…é™¤å…¶äº‹ä»¶å¤„ç†ç¨‹åºå’ŒçŠ¶æ€ã€‚å¦‚æžœå®¹å™¨ä¸­æ²¡æœ‰è£…è½½ä»»ä½•ç»„ä»¶ï¼Œåˆ™è°ƒç”¨æ­¤å‡½æ•°å°†ä¸èµ·ä»»ä½•ä½œç”¨ã€‚å¦‚æžœç»„ä»¶å·²å¸è½½ï¼Œåˆ™è¿”å›ž trueï¼›å¦‚æžœæ²¡æœ‰è¦å¸è½½çš„ç»„ä»¶ï¼Œåˆ™è¿”å›ž falseã€‚è¯¥æ–¹æ³•çš„ç­¾åå¦‚ä¸‹ï¼š 1ReactDOM.unmountComponentAtNode(container) â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ä»£ç æ‹†åˆ†?Code-Splitting æ˜¯ Webpack å’Œ Browserify ç­‰æ‰“åŒ…å·¥å…·æ‰€æ”¯æŒçš„ä¸€é¡¹åŠŸèƒ½ï¼Œå®ƒå¯ä»¥åˆ›å»ºå¤šä¸ª bundlesï¼Œå¹¶å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åŠ è½½ã€‚React é¡¹ç›®æ”¯æŒé€šè¿‡ dynamic import() ç‰¹æ€§è¿›è¡Œä»£ç æ‹†åˆ†ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œå®ƒå°†ä½¿ moduleA.js åŠå…¶æ‰€æœ‰å”¯ä¸€ä¾èµ–é¡¹ä½œä¸ºå•ç‹¬çš„å—ï¼Œä»…å½“ç”¨æˆ·ç‚¹å‡» â€˜Loadâ€™ æŒ‰é’®åŽæ‰åŠ è½½ã€‚ moduleA.js 123const moduleA = 'Hello';export &#123; moduleA &#125;; App.js 1234567891011121314151617181920212223import React, &#123; Component &#125; from 'react';class App extends Component &#123; handleClick = () =&gt; &#123; import('./moduleA') .then((&#123; moduleA &#125;) =&gt; &#123; // Use moduleA &#125;) .catch(err =&gt; &#123; // Handle failure &#125;); &#125;; render() &#123; return ( &lt;div&gt; &lt;button onClick=&#123;this.handleClick&#125;&gt;Load&lt;/button&gt; &lt;/div&gt; ); &#125;&#125;export default App; â¬† è¿”å›žé¡¶éƒ¨ ä¸¥æ ¼æ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„?åœ¨ä¸‹é¢çš„æƒ…å†µä¸‹ï¼Œ å°†æœ‰æ‰€å¸®åŠ©ï¼š ä½¿ç”¨ unsafe lifecycle methods æ ‡è¯†ç»„ä»¶ã€‚ æœ‰å…³ legacy string ref API ç”¨æ³•å‘å‡ºè­¦å‘Šã€‚ æ£€æµ‹æ— æ³•é¢„æµ‹çš„ side effectsã€‚ æ£€æµ‹ legacy context APIã€‚ æœ‰å…³å·²å¼ƒç”¨çš„ findDOMNode ç”¨æ³•çš„è­¦å‘Šã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ Keyed Fragments ?ä½¿ç”¨æ˜¾å¼ &lt;React.Fragment&gt; è¯­æ³•å£°æ˜Žçš„ç‰‡æ®µå¯èƒ½å…·æœ‰ key ã€‚ä¸€èˆ¬ç”¨ä¾‹æ˜¯å°†é›†åˆæ˜ å°„åˆ°ç‰‡æ®µæ•°ç»„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œ 12345678910111213function Glossary(props) &#123; return ( &lt;dl&gt; &#123;props.items.map(item =&gt; ( // Without the `key`, React will fire a key warning &lt;React.Fragment key=&#123;item.id&#125;&gt; &lt;dt&gt;&#123;item.term&#125;&lt;/dt&gt; &lt;dd&gt;&#123;item.description&#125;&lt;/dd&gt; &lt;/React.Fragment&gt; ))&#125; &lt;/dl&gt; );&#125; æ³¨æ„ï¼š é”®æ˜¯å”¯ä¸€å¯ä»¥ä¼ é€’ç»™ Fragment çš„å±žæ€§ã€‚å°†æ¥ï¼Œå¯èƒ½ä¼šæ”¯æŒå…¶ä»–å±žæ€§ï¼Œä¾‹å¦‚äº‹ä»¶å¤„ç†ç¨‹åºã€‚ â¬† è¿”å›žé¡¶éƒ¨ React æ”¯æŒæ‰€æœ‰çš„ HTML å±žæ€§ä¹ˆ?ä»Ž React 16 å¼€å§‹ï¼Œå®Œå…¨æ”¯æŒæ ‡å‡†æˆ–è‡ªå®šä¹‰ DOM å±žæ€§ã€‚ç”±äºŽ React ç»„ä»¶é€šå¸¸åŒæ—¶ä½¿ç”¨è‡ªå®šä¹‰å’Œä¸Ž DOM ç›¸å…³çš„å±žæ€§ï¼Œå› æ­¤ React ä¸Ž DOM API ä¸€æ ·éƒ½ä½¿ç”¨ camelCase çº¦å®šã€‚è®©æˆ‘ä»¬å¯¹æ ‡å‡† HTML å±žæ€§é‡‡å–ä¸€äº›æŽªæ–½ï¼š 123&lt;div tabIndex="-1" /&gt; // Just like node.tabIndex DOM API&lt;div className="Button" /&gt; // Just like node.className DOM API&lt;input readOnly=&#123;true&#125; /&gt; // Just like node.readOnly DOM API é™¤äº†ç‰¹æ®Šæƒ…å†µå¤–ï¼Œè¿™äº›å±žæ€§çš„å·¥ä½œæ–¹å¼ä¸Žç›¸åº”çš„ HTML å±žæ€§ç±»ä¼¼ã€‚å®ƒè¿˜æ”¯æŒæ‰€æœ‰ SVG å±žæ€§ã€‚ â¬† è¿”å›žé¡¶éƒ¨ HOC æœ‰å“ªäº›é™åˆ¶?é™¤äº†å®ƒçš„å¥½å¤„ä¹‹å¤–ï¼Œé«˜é˜¶ç»„ä»¶è¿˜æœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚ ä»¥ä¸‹åˆ—å‡ºçš„å‡ ä¸ªæ³¨æ„äº‹é¡¹: ä¸è¦åœ¨æ¸²æŸ“æ–¹æ³•ä¸­ä½¿ç”¨HOCï¼šå»ºè®®ä¸è¦å°† HOC åº”ç”¨äºŽç»„ä»¶çš„ render æ–¹æ³•ä¸­çš„ç»„ä»¶ã€‚ 1234567render() &#123; // A new version of EnhancedComponent is created on every render // EnhancedComponent1 !== EnhancedComponent2 const EnhancedComponent = enhance(MyComponent); // That causes the entire subtree to unmount/remount each time! return &lt;EnhancedComponent /&gt;;&#125; ä¸Šè¿°ä»£ç é€šè¿‡é‡æ–°è£…è½½ï¼Œå°†å¯¼è‡´è¯¥ç»„ä»¶åŠå…¶æ‰€æœ‰å­ç»„ä»¶çŠ¶æ€ä¸¢å¤±ï¼Œä¼šå½±å“åˆ°æ€§èƒ½ã€‚æ­£ç¡®çš„åšæ³•åº”è¯¥æ˜¯åœ¨ç»„ä»¶å®šä¹‰ä¹‹å¤–åº”ç”¨ HOC ï¼Œä»¥ä¾¿ä»…ç”Ÿæˆä¸€æ¬¡ç”Ÿæˆçš„ç»„ä»¶ é™æ€æ–¹æ³•å¿…é¡»å¤åˆ¶ï¼šå°† HOC åº”ç”¨äºŽç»„ä»¶æ—¶ï¼Œæ–°ç»„ä»¶ä¸å…·æœ‰åŽŸå§‹ç»„ä»¶çš„ä»»ä½•é™æ€æ–¹æ³• 1234567// Define a static methodWrappedComponent.staticMethod = function() &#123;/*...*/&#125;// Now apply a HOCconst EnhancedComponent = enhance(WrappedComponent);// The enhanced component has no static methodtypeof EnhancedComponent.staticMethod === 'undefined' // true æ‚¨å¯ä»¥é€šè¿‡åœ¨è¿”å›žä¹‹å‰å°†æ–¹æ³•å¤åˆ¶åˆ°è¾“å…¥ç»„ä»¶ä¸Šæ¥è§£å†³æ­¤é—®é¢˜ 123456function enhance(WrappedComponent) &#123; class Enhance extends React.Component &#123;/*...*/&#125; // Must know exactly which method(s) to copy :( Enhance.staticMethod = WrappedComponent.staticMethod; return Enhance;&#125; Refs ä¸ä¼šè¢«å¾€ä¸‹ä¼ é€’å¯¹äºŽHOCï¼Œæ‚¨éœ€è¦å°†æ‰€æœ‰å±žæ€§ä¼ é€’ç»™åŒ…è£…ç»„ä»¶ï¼Œä½†è¿™å¯¹äºŽ refs ä¸èµ·ä½œç”¨ã€‚è¿™æ˜¯å› ä¸º ref å¹¶ä¸æ˜¯ä¸€ä¸ªç±»ä¼¼äºŽ key çš„å±žæ€§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ React.forwardRef APIã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨ DevTools ä¸­è°ƒè¯• forwardRefs?React.forwardRefæŽ¥å—æ¸²æŸ“å‡½æ•°ä½œä¸ºå‚æ•°ï¼ŒDevTools ä½¿ç”¨æ­¤å‡½æ•°æ¥ç¡®å®šä¸º ref è½¬å‘ç»„ä»¶æ˜¾ç¤ºçš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœæ‚¨æ²¡æœ‰ä½¿ç”¨ displayName å±žæ€§å‘½å render å‡½æ•°ï¼Œé‚£ä¹ˆå®ƒå°†åœ¨ DevTools ä¸­æ˜¾ç¤ºä¸ºâ€œForwardRefâ€ï¼Œ 123const WrappedComponent = React.forwardRef((props, ref) =&gt; &#123; return &lt;LogProps &#123;...props&#125; forwardedRef=&#123;ref&#125; /&gt;;&#125;); ä½†å¦‚æžœä½ å‘½å render å‡½æ•°ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¾ç¤ºä¸º â€œForwardRef(myFunction)â€ 12345const WrappedComponent = React.forwardRef( function myFunction(props, ref) &#123; return &lt;LogProps &#123;...props&#125; forwardedRef=&#123;ref&#125; /&gt;; &#125;); ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆï¼Œæ‚¨è¿˜å¯ä»¥ä¸º forwardRef å‡½æ•°è®¾ç½® displayName å±žæ€§ï¼Œ 12345678910111213141516function logProps(Component) &#123; class LogProps extends React.Component &#123; // ... &#125; function forwardRef(props, ref) &#123; return &lt;LogProps &#123;...props&#125; forwardedRef=&#123;ref&#125; /&gt;; &#125; // Give this component a more helpful display name in DevTools. // e.g. "ForwardRef(logProps(MyComponent))" const name = Component.displayName || Component.name; forwardRef.displayName = `logProps($&#123;name&#125;)`; return React.forwardRef(forwardRef);&#125; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ—¶å€™ç»„ä»¶çš„ props å±žæ€§é»˜è®¤ä¸º true?å¦‚æžœæ²¡æœ‰ä¼ é€’å±žæ€§å€¼ï¼Œåˆ™é»˜è®¤ä¸º trueã€‚æ­¤è¡Œä¸ºå¯ç”¨ï¼Œä»¥ä¾¿ä¸Ž HTML çš„è¡Œä¸ºåŒ¹é…ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„è¡¨è¾¾å¼æ˜¯ç­‰ä»·çš„ï¼š 123&lt;MyInput autocomplete /&gt;&lt;MyInput autocomplete=&#123;true&#125; /&gt; æ³¨æ„ï¼š ä¸å»ºè®®ä½¿ç”¨æ­¤æ–¹æ³•ï¼Œå› ä¸ºå®ƒå¯èƒ½ä¸Ž ES6 å¯¹è±¡ shorthand æ··æ·†ï¼ˆä¾‹å¦‚ï¼Œ{name}ï¼Œå®ƒæ˜¯{ name:name } çš„ç¼©å†™ï¼‰ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ NextJS åŠå…¶ä¸»è¦ç‰¹å¾?Next.js æ˜¯ä¸€ä¸ªæµè¡Œçš„è½»é‡çº§æ¡†æž¶ï¼Œç”¨äºŽä½¿ç”¨ React æž„å»ºé™æ€å’ŒæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ç¨‹åºã€‚å®ƒè¿˜æä¾›æ ·å¼å’Œè·¯ç”±è§£å†³æ–¹æ¡ˆã€‚ä»¥ä¸‹æ˜¯ NextJS æä¾›çš„ä¸»è¦åŠŸèƒ½ï¼š é»˜è®¤æœåŠ¡ç«¯æ¸²æŸ“ è‡ªåŠ¨ä»£ç æ‹†åˆ†ä»¥åŠ å¿«é¡µé¢åŠ è½½é€Ÿåº¦ ç®€å•çš„å®¢æˆ·ç«¯è·¯ç”± (åŸºäºŽé¡µé¢) åŸºäºŽ Webpack çš„å¼€å‘çŽ¯å¢ƒæ”¯æŒ (HMR) èƒ½å¤Ÿä½¿ç”¨ Express æˆ–ä»»ä½•å…¶ä»– Node.js HTTP æœåŠ¡å™¨ å¯è‡ªå®šä¹‰ä½ è‡ªå·±çš„ Babel å’Œ Webpack é…ç½® â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•å°†äº‹ä»¶å¤„ç†ç¨‹åºä¼ é€’ç»™ç»„ä»¶?å¯ä»¥å°†äº‹ä»¶å¤„ç†ç¨‹åºå’Œå…¶ä»–å‡½æ•°ä½œä¸ºå±žæ€§ä¼ é€’ç»™å­ç»„ä»¶ã€‚å®ƒå¯ä»¥åœ¨å­ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1&lt;button onClick=&#123;this.handleClick&#125;&gt; â¬† è¿”å›žé¡¶éƒ¨ åœ¨æ¸²æŸ“æ–¹æ³•ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°å¥½ä¹ˆ?æ˜¯çš„ï¼Œä½ å¯ä»¥ç”¨ã€‚å®ƒé€šå¸¸æ˜¯å‘å›žè°ƒå‡½æ•°ä¼ é€’å‚æ•°çš„æœ€ç®€å•æ–¹æ³•ã€‚ä½†åœ¨ä½¿ç”¨æ—¶éœ€è¦ä¼˜åŒ–æ€§èƒ½ã€‚ 12345678class Foo extends Component &#123; handleClick() &#123; console.log('Click happened'); &#125; render() &#123; return &lt;button onClick=&#123;() =&gt; this.handleClick()&#125;&gt;Click Me&lt;/button&gt;; &#125;&#125; æ³¨æ„ï¼š ç»„ä»¶æ¯æ¬¡æ¸²æŸ“æ—¶ï¼Œåœ¨ render æ–¹æ³•ä¸­çš„ç®­å¤´å‡½æ•°éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™å¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•é˜²æ­¢å‡½æ•°è¢«å¤šæ¬¡è°ƒç”¨?å¦‚æžœä½ ä½¿ç”¨ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¦‚ onClick or onScroll å¹¶å¸Œæœ›é˜²æ­¢å›žè°ƒè¢«è¿‡å¿«åœ°è§¦å‘ï¼Œé‚£ä¹ˆä½ å¯ä»¥é™åˆ¶å›žè°ƒçš„æ‰§è¡Œé€Ÿåº¦ã€‚ è¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹å¯èƒ½çš„æ–¹å¼å®žçŽ°ï¼š Throttling: åŸºäºŽæ—¶é—´çš„é¢‘çŽ‡è¿›è¡Œæ›´æ”¹ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ lodash çš„ _.throttle å‡½æ•°ã€‚ Debouncing: åœ¨ä¸€æ®µæ—¶é—´ä¸æ´»åŠ¨åŽå‘å¸ƒæ›´æ”¹ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ lodash çš„ _.debounce å‡½æ•°ã€‚ RequestAnimationFrame throttling: åŸºäºŽ requestAnimationFrame çš„æ›´æ”¹ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ raf-schdã€‚ æ³¨æ„ï¼š_.debounce , _.throttle å’Œ raf-schd éƒ½æä¾›äº†ä¸€ä¸ª cancel æ–¹æ³•æ¥å–æ¶ˆå»¶è¿Ÿå›žè°ƒã€‚æ‰€ä»¥éœ€è¦è°ƒç”¨ componentWillUnmountï¼Œæˆ–è€…å¯¹ä»£ç è¿›è¡Œæ£€æŸ¥æ¥ä¿è¯åœ¨å»¶è¿Ÿå‡½æ•°æœ‰æ•ˆæœŸé—´å†…ç»„ä»¶å§‹ç»ˆæŒ‚è½½ã€‚ â¬† è¿”å›žé¡¶éƒ¨ JSX å¦‚ä½•é˜²æ­¢æ³¨å…¥æ”»å‡»?React DOM ä¼šåœ¨æ¸²æŸ“ JSX ä¸­åµŒå…¥çš„ä»»ä½•å€¼ä¹‹å‰å¯¹å…¶è¿›è¡Œè½¬ä¹‰ã€‚å› æ­¤ï¼Œå®ƒç¡®ä¿ä½ æ°¸è¿œä¸èƒ½æ³¨å…¥ä»»ä½•æœªåœ¨åº”ç”¨ç¨‹åºä¸­æ˜¾å¼å†™å…¥çš„å†…å®¹ã€‚ 12const name = response.potentiallyMaliciousInput;const element = &lt;h1&gt;&#123;name&#125;&lt;/h1&gt;; è¿™æ ·å¯ä»¥é˜²æ­¢åº”ç”¨ç¨‹åºä¸­çš„XSSï¼ˆè·¨ç«™ç‚¹è„šæœ¬ï¼‰æ”»å‡»ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•æ›´æ–°å·²æ¸²æŸ“çš„å…ƒç´ ?é€šè¿‡å°†æ–°åˆ›å»ºçš„å…ƒç´ ä¼ é€’ç»™ ReactDOM çš„ render æ–¹æ³•ï¼Œå¯ä»¥å®žçŽ° UI æ›´æ–°ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªæ»´ç­”æ—¶é’Ÿçš„ä¾‹å­ï¼Œå®ƒé€šè¿‡å¤šæ¬¡è°ƒç”¨ render æ–¹æ³•æ¥æ›´æ–°æ—¶é—´ï¼š 1234567891011function tick() &#123; const element = ( &lt;div&gt; &lt;h1&gt;Hello, world!&lt;/h1&gt; &lt;h2&gt;It is &#123;new Date().toLocaleTimeString()&#125;.&lt;/h2&gt; &lt;/div&gt; ); ReactDOM.render(element, document.getElementById('root'));&#125;setInterval(tick, 1000); â¬† è¿”å›žé¡¶éƒ¨ ä½ æ€Žä¹ˆè¯´ props æ˜¯åªè¯»çš„?å½“ä½ å°†ç»„ä»¶å£°æ˜Žä¸ºå‡½æ•°æˆ–ç±»æ—¶ï¼Œå®ƒå†³ä¸èƒ½ä¿®æ”¹è‡ªå·±çš„å±žæ€§ã€‚è®©æˆ‘ä»¬æ¥å®žçŽ°ä¸€ä¸ª capital çš„å‡½æ•°ï¼š 123function capital(amount, interest) &#123; return amount + interest;&#125; ä¸Šé¢çš„å‡½æ•°ç§°ä¸º â€œpureâ€ å‡½æ•°ï¼Œå› ä¸ºå®ƒä¸ä¼šå°è¯•æ›´æ”¹è¾“å…¥ï¼Œå¹¶æ€»æ˜¯ä¸ºç›¸åŒçš„è¾“å…¥è¿”å›žç›¸åŒçš„ç»“æžœã€‚å› æ­¤ï¼ŒReact æœ‰ä¸€æ¡è§„åˆ™ï¼Œå³â€æ‰€æœ‰ React ç»„ä»¶çš„è¡Œä¸ºéƒ½å¿…é¡»åƒçº¯å‡½æ•°ä¸€æ ·ã€‚â€ â¬† è¿”å›žé¡¶éƒ¨ ä½ è®¤ä¸ºçŠ¶æ€æ›´æ–°æ˜¯å¦‚ä½•åˆå¹¶çš„?When you call setState() in the component, React merges the object you provide into the current state. For example, let us take a facebook user with posts and comments details as state variables,å½“ä½ åœ¨ç»„ä»¶ä¸­è°ƒç”¨ setState() æ–¹æ³•æ—¶ï¼ŒReact ä¼šå°†æä¾›çš„å¯¹è±¡åˆå¹¶åˆ°å½“å‰çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ä»¥ä¸€ä¸ªä½¿ç”¨å¸–å­å’Œè¯„è®ºè¯¦ç»†ä¿¡æ¯çš„ä½œä¸ºçŠ¶æ€å˜é‡çš„ Facebook ç”¨æˆ·ä¸ºä¾‹ï¼š 1234567constructor(props) &#123; super(props); this.state = &#123; posts: [], comments: [] &#125;;&#125; çŽ°åœ¨ï¼Œä½ å¯ä»¥ç‹¬ç«‹è°ƒç”¨ setState() æ–¹æ³•ï¼Œå•ç‹¬æ›´æ–°çŠ¶æ€å˜é‡ï¼š 12345678910111213componentDidMount() &#123; fetchPosts().then(response =&gt; &#123; this.setState(&#123; posts: response.posts &#125;); &#125;); fetchComments().then(response =&gt; &#123; this.setState(&#123; comments: response.comments &#125;); &#125;); &#125; å¦‚ä¸Šé¢çš„ä»£ç æ®µæ‰€ç¤ºï¼Œthis.setState({comments}) åªä¼šæ›´æ–° comments å˜é‡ï¼Œè€Œä¸ä¼šä¿®æ”¹æˆ–æ›¿æ¢ posts å˜é‡ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•å°†å‚æ•°ä¼ é€’ç»™äº‹ä»¶å¤„ç†ç¨‹åº?åœ¨è¿­ä»£æˆ–å¾ªçŽ¯æœŸé—´ï¼Œå‘äº‹ä»¶å¤„ç†ç¨‹åºä¼ é€’é¢å¤–çš„å‚æ•°æ˜¯å¾ˆå¸¸è§çš„ã€‚è¿™å¯ä»¥é€šè¿‡ç®­å¤´å‡½æ•°æˆ–ç»‘å®šæ–¹æ³•å®žçŽ°ã€‚è®©æˆ‘ä»¬ä»¥ç½‘æ ¼ä¸­æ›´æ–°çš„ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ä¸ºä¾‹ï¼š 12&lt;button onClick=&#123;(e) =&gt; this.updateUser(userId, e)&#125;&gt;Update User details&lt;/button&gt;&lt;button onClick=&#123;this.updateUser.bind(this, userId)&#125;&gt;Update User details&lt;/button&gt; åœ¨è¿™ä¸¤ç§æ–¹æ³•ä¸­ï¼Œåˆæˆå‚æ•° e ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’ã€‚ä½ éœ€è¦åœ¨ç®­å¤´å‡½æ•°ä¸­æ˜¾å¼ä¼ é€’å®ƒï¼Œå¹¶ä½¿ç”¨ bind æ–¹æ³•è‡ªåŠ¨è½¬å‘å®ƒã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•é˜²æ­¢ç»„ä»¶æ¸²æŸ“?ä½ å¯ä»¥åŸºäºŽç‰¹å®šçš„æ¡ä»¶é€šè¿‡è¿”å›ž null å€¼æ¥é˜»æ­¢ç»„ä»¶çš„æ¸²æŸ“ã€‚è¿™æ ·å®ƒå°±å¯ä»¥æœ‰æ¡ä»¶åœ°æ¸²æŸ“ç»„ä»¶ã€‚ 1234567891011function Greeting(props) &#123; if (!props.loggedIn) &#123; return null; &#125; return ( &lt;div className="greeting"&gt; welcome, &#123;props.name&#125; &lt;/div&gt; );&#125; 123456789101112131415class User extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123;loggedIn: false, name: 'John'&#125;; &#125; render() &#123; return ( &lt;div&gt; //Prevent component render if it is not loggedIn &lt;Greeting loggedIn=&#123;this.state.loggedIn&#125; /&gt; &lt;UserDetails name=&#123;this.state.name&#125;&gt; &lt;/div&gt; ); &#125; åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œgreeting ç»„ä»¶é€šè¿‡åº”ç”¨æ¡ä»¶å¹¶è¿”å›žç©ºå€¼è·³è¿‡å…¶æ¸²æŸ“éƒ¨åˆ†ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å®‰å…¨åœ°ä½¿ç”¨ç´¢å¼•ä½œä¸ºé”®çš„æ¡ä»¶æ˜¯ä»€ä¹ˆ?æœ‰ä¸‰ä¸ªæ¡ä»¶å¯ä»¥ç¡®ä¿ï¼Œä½¿ç”¨ç´¢å¼•ä½œä¸ºé”®æ˜¯å®‰å…¨çš„ï¼š åˆ—è¡¨é¡¹æ˜¯é™æ€çš„ï¼Œå®ƒä»¬ä¸ä¼šè¢«è®¡ç®—ï¼Œä¹Ÿä¸ä¼šæ›´æ”¹ã€‚ åˆ—è¡¨ä¸­çš„åˆ—è¡¨é¡¹æ²¡æœ‰ ids å±žæ€§ã€‚ åˆ—è¡¨ä¸ä¼šè¢«é‡æ–°æŽ’åºæˆ–ç­›é€‰ã€‚ â¬† è¿”å›žé¡¶éƒ¨ keys æ˜¯å¦éœ€è¦å…¨å±€å”¯ä¸€?æ•°ç»„ä¸­ä½¿ç”¨çš„é”®åœ¨å…¶åŒçº§ä¸­åº”è¯¥æ˜¯å”¯ä¸€çš„ï¼Œä½†å®ƒä»¬ä¸éœ€è¦æ˜¯å…¨å±€å”¯ä¸€çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥åœ¨ä¸¤ä¸ªä¸åŒçš„æ•°ç»„ä¸­ä½¿ç”¨ç›¸åŒçš„é”®ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ book ç»„ä»¶åœ¨ä¸åŒçš„ç»„ä»¶ä¸­ä½¿ç”¨ç›¸åŒçš„æ•°ç»„ï¼š 12345678910111213141516171819202122232425function Book(props) &#123; const index = ( &lt;ul&gt; &#123;props.pages.map((page) =&gt; &lt;li key=&#123;page.id&#125;&gt; &#123;page.title&#125; &lt;/li&gt; )&#125; &lt;/ul&gt; ); const content = props.pages.map((page) =&gt; &lt;div key=&#123;page.id&#125;&gt; &lt;h3&gt;&#123;page.title&#125;&lt;/h3&gt; &lt;p&gt;&#123;page.content&#125;&lt;/p&gt; &lt;p&gt;&#123;page.pageNumber&#125;&lt;/p&gt; &lt;/div&gt; ); return ( &lt;div&gt; &#123;index&#125; &lt;hr /&gt; &#123;content&#125; &lt;/div&gt; );&#125; â¬† è¿”å›žé¡¶éƒ¨ ç”¨äºŽè¡¨å•å¤„ç†çš„æµè¡Œé€‰æ‹©æ˜¯ä»€ä¹ˆ?Formik æ˜¯ä¸€ä¸ªç”¨äºŽ React çš„è¡¨å•åº“ï¼Œå®ƒæä¾›éªŒè¯ã€è·Ÿè¸ªè®¿é—®å­—æ®µå’Œå¤„ç†è¡¨å•æäº¤ç­‰è§£å†³æ–¹æ¡ˆã€‚å…·ä½“æ¥è¯´ï¼Œä½ å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼å¯¹å®ƒä»¬è¿›è¡Œåˆ†ç±»ï¼š èŽ·å–è¡¨å•çŠ¶æ€è¾“å…¥å’Œè¾“å‡ºçš„å€¼ã€‚ è¡¨å•éªŒè¯å’Œé”™è¯¯æ¶ˆæ¯ã€‚ å¤„ç†è¡¨å•æäº¤ã€‚ å®ƒç”¨äºŽåˆ›å»ºä¸€ä¸ªå…·æœ‰æœ€å° API çš„å¯ä¼¸ç¼©ã€æ€§èƒ½è‰¯å¥½çš„è¡¨å•åŠ©æ‰‹ï¼Œä»¥è§£å†³ä»¤äººè®¨åŽŒçš„é—®é¢˜ã€‚ â¬† è¿”å›žé¡¶éƒ¨ formik ç›¸å¯¹äºŽå…¶ä»– redux è¡¨å•åº“æœ‰ä»€ä¹ˆä¼˜åŠ¿?ä¸‹é¢æ˜¯å»ºè®®ä½¿ç”¨ formik è€Œä¸æ˜¯ redux è¡¨å•åº“çš„ä¸»è¦åŽŸå› ï¼š è¡¨å•çŠ¶æ€æœ¬è´¨ä¸Šæ˜¯çŸ­æœŸçš„å’Œå±€éƒ¨çš„ï¼Œå› æ­¤ä¸éœ€è¦åœ¨ reduxï¼ˆæˆ–ä»»ä½•ç±»åž‹çš„fluxåº“ï¼‰ä¸­è·Ÿè¸ªå®ƒã€‚ æ¯æ¬¡æŒ‰ä¸€ä¸ªé”®ï¼ŒRedux-Form éƒ½ä¼šå¤šæ¬¡è°ƒç”¨æ•´ä¸ªé¡¶çº§ Redux Reducerã€‚è¿™æ ·å°±å¢žåŠ äº†å¤§åž‹åº”ç”¨ç¨‹åºçš„è¾“å…¥å»¶è¿Ÿã€‚ ç»è¿‡ gzip åŽ‹ç¼©è¿‡çš„ Redux-Form ä¸º 22.5 kBï¼Œè€Œ Formik åªæœ‰ 12.7 kBã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸ºä»€ä¹ˆä¸éœ€è¦ä½¿ç”¨ç»§æ‰¿?åœ¨ React ä¸­ï¼Œå»ºè®®ä½¿ç”¨ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿æ¥é‡ç”¨ç»„ä»¶ä¹‹é—´çš„ä»£ç ã€‚Props å’Œ composition éƒ½ä¸ºä½ æä¾›äº†ä»¥ä¸€ç§æ˜Žç¡®å’Œå®‰å…¨çš„æ–¹å¼è‡ªå®šä¹‰ç»„ä»¶å¤–è§‚å’Œè¡Œä¸ºæ‰€éœ€çš„çµæ´»æ€§ã€‚ä½†æ˜¯ï¼Œå¦‚æžœä½ å¸Œæœ›åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨éž UI åŠŸèƒ½ï¼Œå»ºè®®å°†å…¶æå–åˆ°å•ç‹¬çš„ JavaScript æ¨¡å—ä¸­ã€‚ä¹‹åŽçš„ç»„ä»¶å¯¼å…¥å®ƒå¹¶ä½¿ç”¨è¯¥å‡½æ•°ã€å¯¹è±¡æˆ–ç±»ï¼Œè€Œä¸éœ€æ‰©å±•å®ƒã€‚ â¬† è¿”å›žé¡¶éƒ¨ æˆ‘å¯ä»¥åœ¨ React åº”ç”¨ç¨‹åºä¸­å¯ä»¥ä½¿ç”¨ web components ä¹ˆ?æ˜¯çš„ï¼Œä½ å¯ä»¥åœ¨ React åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ Web Componentsã€‚å°½ç®¡è®¸å¤šå¼€å‘äººå‘˜ä¸ä¼šä½¿ç”¨è¿™ç§ç»„åˆæ–¹å¼ï¼Œä½†å¦‚æžœä½ ä½¿ç”¨çš„æ˜¯ä½¿ç”¨ Web Components ç¼–å†™çš„ç¬¬ä¸‰æ–¹ UI ç»„ä»¶ï¼Œåˆ™å¯èƒ½éœ€è¦è¿™ç§ç»„åˆã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ Vaadin æä¾›çš„ Web Components æ—¥æœŸé€‰æ‹©å™¨ç»„ä»¶ï¼š 123456789101112131415import React, &#123; Component &#125; from 'react';import './App.css';import '@vaadin/vaadin-date-picker';class App extends Component &#123; render() &#123; return ( &lt;div className="App"&gt; &lt;vaadin-date-picker label="When were you born?"&gt;&lt;/vaadin-date-picker&gt; &lt;/div&gt; ); &#125;&#125;export default App; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯åŠ¨æ€å¯¼å…¥?åŠ¨æ€å¯¼å…¥è¯­æ³•æ˜¯ ECMAScript ææ¡ˆï¼Œç›®å‰ä¸å±žäºŽè¯­è¨€æ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚å®ƒæœ‰æœ›åœ¨ä¸ä¹…çš„å°†æ¥è¢«é‡‡çº³ã€‚åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨åŠ¨æ€å¯¼å…¥æ¥å®žçŽ°ä»£ç æ‹†åˆ†ã€‚è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªåŠ æ³•çš„ä¾‹å­ï¼š Normal Import 12import &#123; add &#125; from './math';console.log(add(10, 20)); Dynamic Import 123import("./math").then(math =&gt; &#123; console.log(math.add(10, 20));&#125;); â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ loadable ç»„ä»¶?å¦‚æžœä½ æƒ³è¦åœ¨æœåŠ¡ç«¯æ¸²æŸ“çš„åº”ç”¨ç¨‹åºä¸­å®žçŽ°ä»£ç æ‹†åˆ†ï¼Œå»ºè®®ä½¿ç”¨ Loadable ç»„ä»¶ï¼Œå› ä¸º React.lazy å’Œ Suspense è¿˜ä¸å¯ç”¨äºŽæœåŠ¡å™¨ç«¯æ¸²æŸ“ã€‚Loadable å…è®¸ä½ å°†åŠ¨æ€å¯¼å…¥çš„ç»„ä»¶ä½œä¸ºå¸¸è§„çš„ç»„ä»¶è¿›è¡Œæ¸²æŸ“ã€‚è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­ï¼š 1234567891011import loadable from '@loadable/component'const OtherComponent = loadable(() =&gt; import('./OtherComponent'))function MyComponent() &#123; return ( &lt;div&gt; &lt;OtherComponent /&gt; &lt;/div&gt; )&#125; çŽ°åœ¨ï¼Œå…¶ä»–ç»„ä»¶å°†ä»¥å•ç‹¬çš„åŒ…è¿›è¡ŒåŠ è½½ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ suspense ç»„ä»¶?å¦‚æžœçˆ¶ç»„ä»¶åœ¨æ¸²æŸ“æ—¶åŒ…å« dynamic import çš„æ¨¡å—å°šæœªåŠ è½½å®Œæˆï¼Œåœ¨æ­¤åŠ è½½è¿‡ç¨‹ä¸­ï¼Œä½ å¿…é¡»ä½¿ç”¨ä¸€ä¸ª loading æŒ‡ç¤ºå™¨æ˜¾ç¤ºåŽå¤‡å†…å®¹ã€‚è¿™å¯ä»¥ä½¿ç”¨ Suspense ç»„ä»¶æ¥å®žçŽ°ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ä½¿ç”¨ Suspense ç»„ä»¶ï¼š 1234567891011const OtherComponent = React.lazy(() =&gt; import('./OtherComponent'));function MyComponent() &#123; return ( &lt;div&gt; &lt;Suspense fallback=&#123;&lt;div&gt;Loading...&lt;/div&gt;&#125;&gt; &lt;OtherComponent /&gt; &lt;/Suspense&gt; &lt;/div&gt; );&#125; æ­£å¦‚ä¸Šé¢çš„ä»£ç ä¸­æ‰€å±•ç¤ºçš„ï¼Œæ‡’åŠ è½½çš„ç»„ä»¶è¢«åŒ…è£…åœ¨ Suspense ç»„ä»¶ä¸­ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯åŸºäºŽè·¯ç”±çš„ä»£ç æ‹†åˆ†?è¿›è¡Œä»£ç æ‹†åˆ†çš„æœ€ä½³ä½ç½®ä¹‹ä¸€æ˜¯è·¯ç”±ã€‚æ•´ä¸ªé¡µé¢å°†ç«‹å³é‡æ–°æ¸²æŸ“ï¼Œå› æ­¤ç”¨æˆ·ä¸å¤ªå¯èƒ½åŒæ—¶ä¸Žé¡µé¢ä¸­çš„å…¶ä»–å…ƒç´ è¿›è¡Œäº¤äº’ã€‚å› æ­¤ï¼Œç”¨æˆ·ä½“éªŒä¸ä¼šå—åˆ°å¹²æ‰°ã€‚è®©æˆ‘ä»¬ä»¥åŸºäºŽè·¯ç”±çš„ç½‘ç«™ä¸ºä¾‹ï¼Œä½¿ç”¨åƒ React Router å’Œ React.lazy è¿™æ ·çš„åº“ï¼š 12345678910111213141516import &#123; BrowserRouter as Router, Route, Switch &#125; from 'react-router-dom';import React, &#123; Suspense, lazy &#125; from 'react';const Home = lazy(() =&gt; import('./routes/Home'));const About = lazy(() =&gt; import('./routes/About'));const App = () =&gt; ( &lt;Router&gt; &lt;Suspense fallback=&#123;&lt;div&gt;Loading...&lt;/div&gt;&#125;&gt; &lt;Switch&gt; &lt;Route exact path="/" component=&#123;Home&#125;/&gt; &lt;Route path="/about" component=&#123;About&#125;/&gt; &lt;/Switch&gt; &lt;/Suspense&gt; &lt;/Router&gt;); åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä»£ç æ‹†åˆ†å°†å‘ç”Ÿåœ¨æ¯ä¸ªè·¯ç”±å±‚çº§ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä¸¾ä¾‹è¯´æ˜Žå¦‚ä½•ä½¿ç”¨ context?Context æ—¨åœ¨å…±äº«å¯è¢«è§†ä¸ºå…¨å±€çš„æ•°æ®ï¼Œç”¨äºŽ React ç»„ä»¶æ ‘ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼Œå…è®¸æ‰‹åŠ¨é€šè¿‡ä¸€ä¸ª theme å±žæ€§æ¥è®¾ç½®æŒ‰é’®ç»„ä»¶çš„æ ·å¼ã€‚ 123456789101112131415161718192021222324252627//Lets create a context with a default theme value "luna"const ThemeContext = React.createContext('luna');// Create App component where it uses provider to pass theme value in the treeclass App extends React.Component &#123; render() &#123; return ( &lt;ThemeContext.Provider value="nova"&gt; &lt;Toolbar /&gt; &lt;/ThemeContext.Provider&gt; ); &#125;&#125;// A middle component where you don't need to pass theme prop anymorefunction Toolbar(props) &#123; return ( &lt;div&gt; &lt;ThemedButton /&gt; &lt;/div&gt; );&#125;// Lets read theme value in the button component to useclass ThemedButton extends React.Component &#123; static contextType = ThemeContext; render() &#123; return &lt;Button theme=&#123;this.context&#125; /&gt;; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ åœ¨ context ä¸­é»˜è®¤å€¼çš„ç›®çš„æ˜¯ä»€ä¹ˆ?å½“åœ¨ç»„ä»¶æ ‘ä¸­çš„ç»„ä»¶æ²¡æœ‰åŒ¹é…åˆ°åœ¨å…¶ä¸Šæ–¹çš„ Provider æ—¶ï¼Œæ‰ä¼šä½¿ç”¨ defaultValue å‚æ•°ã€‚è¿™æœ‰åŠ©äºŽåœ¨ä¸åŒ…è£…ç»„ä»¶çš„æƒ…å†µä¸‹å•ç‹¬æµ‹è¯•ç»„ä»¶ã€‚ä¸‹é¢çš„ä»£ç æ®µæä¾›äº†é»˜è®¤çš„ä¸»é¢˜å€¼ Lunaã€‚ 12const defaultTheme = "Luna"ï¼›const MyContext = React.createContext(defaultTheme); â¬† è¿”å›žé¡¶éƒ¨ ä½ æ˜¯æ€Žä¹ˆä½¿ç”¨ contextType?ContextType ç”¨äºŽæ¶ˆè´¹ context å¯¹è±¡ã€‚ContextType å±žæ€§å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼ä½¿ç”¨ï¼š contextType as property of class:å¯ä»¥ä¸ºç±»çš„ contextType å±žæ€§åˆ†é…é€šè¿‡ React.createContext() åˆ›å»ºçš„ context å¯¹è±¡ã€‚ä¹‹åŽï¼Œä½ å¯ä»¥åœ¨ä»»ä½•ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å’Œ render å‡½æ•°ä¸­ä½¿ç”¨ this.context å¼•ç”¨è¯¥ä¸Šä¸‹æ–‡ç±»åž‹æœ€è¿‘çš„å½“å‰å€¼ã€‚ è®©æˆ‘ä»¬åœ¨ MyClass ä¸ŠæŒ‰å¦‚ä¸‹æ–¹å¼è®¾ç½® contextType å±žæ€§ï¼š 12345678910111213141516171819class MyClass extends React.Component &#123; componentDidMount() &#123; let value = this.context; /* perform a side-effect at mount using the value of MyContext */ &#125; componentDidUpdate() &#123; let value = this.context; /* ... */ &#125; componentWillUnmount() &#123; let value = this.context; /* ... */ &#125; render() &#123; let value = this.context; /* render something based on the value of MyContext */ &#125;&#125;MyClass.contextType = MyContext; Static fieldä½ å¯ä»¥ä½¿ç”¨é™æ€ç±»å±žæ€§æ¥åˆå§‹åŒ– contextType å±žæ€§ï¼š 1234567class MyClass extends React.Component &#123; static contextType = MyContext; render() &#123; let value = this.context; /* render something based on the value */ &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ consumer?Consumer æ˜¯ä¸€ä¸ªè®¢é˜…ä¸Šä¸‹æ–‡æ›´æ”¹çš„ React ç»„ä»¶ã€‚å®ƒéœ€è¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå­å…ƒç´ ï¼Œè¯¥å‡½æ•°æŽ¥æ”¶å½“å‰ä¸Šä¸‹æ–‡çš„å€¼ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›žä¸€ä¸ª React å…ƒç´ ã€‚ä¼ é€’ç»™å‡½æ•° value å‚æ•°çš„å‚æ•°å€¼å°†ç­‰äºŽåœ¨ç»„ä»¶æ ‘ä¸­å½“å‰ç»„ä»¶æœ€è¿‘çš„ Provider å…ƒç´ çš„ value å±žæ€§å€¼ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š 123&lt;MyContext.Consumer&gt; &#123;value =&gt; /* render something based on the context value */&#125;&lt;/MyContext.Consumer&gt; â¬† è¿”å›žé¡¶éƒ¨ åœ¨ä½¿ç”¨ context æ—¶ï¼Œå¦‚ä½•è§£å†³æ€§èƒ½æ–¹é¢çš„é—®é¢˜?Context ä½¿ç”¨å¼•ç”¨æ ‡è¯†æ¥ç¡®å®šä½•æ—¶é‡æ–°æ¸²æŸ“ï¼Œå½“ Provider çš„çˆ¶å…ƒç´ é‡æ–°æ¸²æŸ“æ—¶ï¼Œä¼šæœ‰ä¸€äº›é—®é¢˜å³å¯èƒ½ä¼šåœ¨ Consumers ä¸­è§¦å‘æ— ä»»ä½•æ„å›¾çš„æ¸²æŸ“ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å°†åœ¨æ¯æ¬¡ Provider é‡æ–°æ¸²æŸ“æ—¶ï¼Œé‡æ–°æ¸²æŸ“æ‰€æœ‰çš„ Consumersï¼Œè¿™æ˜¯å› ä¸ºæ¸²æŸ“ Provider æ—¶ï¼Œå§‹ç»ˆä¼šä¸º value å±žæ€§åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼š 123456789class App extends React.Component &#123; render() &#123; return ( &lt;Provider value=&#123;&#123;something: 'something'&#125;&#125;&gt; &lt;Toolbar /&gt; &lt;/Provider&gt; ); &#125;&#125; å¯ä»¥é€šè¿‡æŠŠ value çš„å€¼æå‡åˆ°çˆ¶çŠ¶æ€ä¸­æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š 12345678910111213141516class App extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; value: &#123;something: 'something'&#125;, &#125;; &#125; render() &#123; return ( &lt;Provider value=&#123;this.state.value&#125;&gt; &lt;Toolbar /&gt; &lt;/Provider&gt; ); &#125;&#125; **[â¬† è¿”å›žé¡¶éƒ¨](#ç›®å½•)** åœ¨ HOCs ä¸­ forward ref çš„ç›®çš„æ˜¯ä»€ä¹ˆ?å› ä¸º ref ä¸æ˜¯ä¸€ä¸ªå±žæ€§ï¼Œæ‰€ä»¥ Refs ä¸ä¼šè¢«ä¼ é€’ã€‚å°±åƒ key ä¸€æ ·ï¼ŒReact ä¼šä»¥ä¸åŒçš„æ–¹å¼å¤„ç†å®ƒã€‚å¦‚æžœä½ å°† ref æ·»åŠ åˆ° HOCï¼Œåˆ™è¯¥ ref å°†å¼•ç”¨æœ€å¤–å±‚çš„å®¹å™¨ç»„ä»¶ï¼Œè€Œä¸æ˜¯åŒ…è£…çš„ç»„ä»¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ Forward Ref APIã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ React.forwardRef API æ˜¾å¼åœ°å°† refs è½¬å‘çš„å†…éƒ¨çš„ FancyButton ç»„ä»¶ã€‚ ä»¥ä¸‹çš„ HOC ä¼šè®°å½•æ‰€æœ‰çš„ props å˜åŒ–ï¼š 12345678910111213141516171819function logProps(Component) &#123; class LogProps extends React.Component &#123; componentDidUpdate(prevProps) &#123; console.log('old props:', prevProps); console.log('new props:', this.props); &#125; render() &#123; const &#123;forwardedRef, ...rest&#125; = this.props; // Assign the custom prop "forwardedRef" as a ref return &lt;Component ref=&#123;forwardedRef&#125; &#123;...rest&#125; /&gt;; &#125; &#125; return React.forwardRef((props, ref) =&gt; &#123; return &lt;LogProps &#123;...props&#125; forwardedRef=&#123;ref&#125; /&gt;; &#125;);&#125; è®©æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ª HOC æ¥è®°å½•æ‰€æœ‰ä¼ é€’åˆ°æˆ‘ä»¬ â€œfancy buttonâ€ ç»„ä»¶çš„å±žæ€§ï¼š 12345678class FancyButton extends React.Component &#123; focus() &#123; // ... &#125; // ...&#125;export default logProps(FancyButton); çŽ°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª ref å¹¶å°†å…¶ä¼ é€’ç»™ FancyButton ç»„ä»¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥èšç„¦åˆ° button å…ƒç´ ä¸Šã€‚ 123456789import FancyButton from './FancyButton';const ref = React.createRef();ref.current.focus();&lt;FancyButton label="Click Me" handleClick=&#123;handleClick&#125; ref=&#123;ref&#125;/&gt;; â¬† è¿”å›žé¡¶éƒ¨ ref å‚æ•°å¯¹äºŽæ‰€æœ‰å‡½æ•°æˆ–ç±»ç»„ä»¶æ˜¯å¦å¯ç”¨?å¸¸è§„å‡½æ•°æˆ–ç±»ç»„ä»¶ä¸ä¼šæŽ¥æ”¶åˆ° ref å‚æ•°ï¼Œå¹¶ä¸” ref åœ¨ props ä¸­ä¹Ÿä¸å¯ç”¨ã€‚åªæœ‰åœ¨ä½¿ç”¨ React.forwardRef å®šä¹‰ç»„ä»¶æ—¶ï¼Œæ‰å­˜åœ¨ç¬¬äºŒä¸ª ref å‚æ•°ã€‚ â¬† è¿”å›žé¡¶éƒ¨ åœ¨ç»„ä»¶åº“ä¸­å½“ä½¿ç”¨ forward refs æ—¶ï¼Œä½ éœ€è¦é¢å¤–çš„æ³¨æ„?å½“ä½ å¼€å§‹åœ¨ç»„ä»¶åº“ä¸­ä½¿ç”¨ forwardRef æ—¶ï¼Œä½ åº”è¯¥å°†å…¶è§†ä¸ºä¸€ä¸ªç ´åæ€§çš„æ›´æ”¹ï¼Œå¹¶ä¸ºåº“å‘å¸ƒä¸€ä¸ªæ–°çš„ä¸»è¦ç‰ˆæœ¬ã€‚è¿™æ˜¯å› ä¸ºä½ çš„åº“å¯èƒ½å…·æœ‰ä¸åŒçš„è¡Œä¸ºï¼Œå¦‚å·²åˆ†é…äº†å“ªäº›å¼•ç”¨ï¼Œä»¥åŠå¯¼å‡ºå“ªäº›ç±»åž‹ã€‚è¿™äº›æ›´æ”¹å¯èƒ½ä¼šç ´åä¾èµ–äºŽæ—§è¡Œä¸ºçš„åº”ç”¨ç¨‹åºå’Œå…¶ä»–åº“ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•åœ¨æ²¡æœ‰ ES6 çš„æƒ…å†µä¸‹åˆ›å»º React ç±»ç»„ä»¶å¦‚æžœä½ ä¸ä½¿ç”¨ ES6ï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦ä½¿ç”¨ create-react-class æ¨¡å—ã€‚å¯¹äºŽé»˜è®¤å±žæ€§ï¼Œä½ éœ€è¦åœ¨ä¼ é€’å¯¹è±¡ä¸Šå®šä¹‰ getDefaultProps() å‡½æ•°ã€‚è€Œå¯¹äºŽåˆå§‹çŠ¶æ€ï¼Œå¿…é¡»æä¾›è¿”å›žåˆå§‹çŠ¶æ€çš„å•ç‹¬ getInitialState æ–¹æ³•ã€‚ 12345678910111213141516var Greeting = createReactClass(&#123; getDefaultProps: function() &#123; return &#123; name: 'Jhohn' &#125;; &#125;, getInitialState: function() &#123; return &#123;message: this.props.message&#125;; &#125;, handleClick: function() &#123; console.log(this.state.message); &#125;, render: function() &#123; return &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;/h1&gt;; &#125;&#125;); æ³¨æ„ï¼š å¦‚æžœä½¿ç”¨ createReactClassï¼Œåˆ™æ‰€æœ‰æ–¹æ³•éƒ½ä¼šè‡ªåŠ¨ç»‘å®šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸éœ€è¦åœ¨äº‹ä»¶å¤„ç†ç¨‹åºçš„æž„é€ å‡½æ•°ä¸­ä½¿ç”¨ .bind(this)ã€‚ â¬† è¿”å›žé¡¶éƒ¨ æ˜¯å¦å¯ä»¥åœ¨æ²¡æœ‰ JSX çš„æƒ…å†µä¸‹ä½¿ç”¨ React?æ˜¯çš„ï¼Œä½¿ç”¨ React ä¸å¼ºåˆ¶ä½¿ç”¨ JSXã€‚å®žé™…ä¸Šï¼Œå½“ä½ ä¸æƒ³åœ¨æž„å»ºçŽ¯å¢ƒä¸­é…ç½®ç¼–è¯‘çŽ¯å¢ƒæ—¶ï¼Œè¿™æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚æ¯ä¸ª JSX å…ƒç´ åªæ˜¯è°ƒç”¨ React.createElement(component, props, â€¦children) çš„è¯­æ³•ç³–ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä½¿ç”¨ JSX çš„ greeting ç¤ºä¾‹ï¼š 12345678910class Greeting extends React.Component &#123; render() &#123; return &lt;div&gt;Hello &#123;this.props.message&#125;&lt;/div&gt;; &#125;&#125;ReactDOM.render( &lt;Greeting message="World" /&gt;, document.getElementById('root')); ä½ å¯ä»¥åœ¨æ²¡æœ‰ JSX çš„æƒ…å†µä¸‹ç¼–å†™ç›¸åŒçš„åŠŸèƒ½ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910class Greeting extends React.Component &#123; render() &#123; return React.createElement('div', null, `Hello $&#123;this.props.message&#125;`); &#125;&#125;ReactDOM.render( React.createElement(Greeting, &#123;message: 'World'&#125;, null), document.getElementById('root')); â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯å·®å¼‚ç®—æ³•?React éœ€è¦ä½¿ç”¨ç®—æ³•æ¥äº†è§£å¦‚ä½•æœ‰æ•ˆåœ°æ›´æ–° UI ä»¥åŒ¹é…æœ€æ–°çš„æ ‘ã€‚å·®å¼‚ç®—æ³•å°†ç”Ÿæˆå°†ä¸€æ£µæ ‘è½¬æ¢ä¸ºå¦ä¸€æ£µæ ‘çš„æœ€å°æ“ä½œæ¬¡æ•°ã€‚ç„¶è€Œï¼Œç®—æ³•å…·æœ‰ O(n3) çš„å¤æ‚åº¦ï¼Œå…¶ä¸­ n æ˜¯æ ‘ä¸­å…ƒç´ çš„æ•°é‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯¹äºŽæ˜¾ç¤º 1000 ä¸ªå…ƒç´ å°†éœ€è¦å¤§çº¦ 10 äº¿ä¸ªæ¯”è¾ƒã€‚è¿™å¤ªæ˜‚è´µäº†ã€‚ç›¸åï¼ŒReact åŸºäºŽä¸¤ä¸ªå‡è®¾å®žçŽ°äº†ä¸€ä¸ªå¤æ‚åº¦ä¸º O(n) çš„ç®—æ³•ï¼š ä¸¤ç§ä¸åŒç±»åž‹çš„å…ƒç´ ä¼šäº§ç”Ÿä¸åŒçš„æ ‘ç»“æž„ã€‚ å¼€å‘è€…å¯ä»¥é€šè¿‡ä¸€ä¸ª key å±žæ€§ï¼Œæ ‡è¯†å“ªäº›å­å…ƒç´ å¯ä»¥åœ¨ä¸åŒæ¸²æŸ“ä¸­ä¿æŒç¨³å®šã€‚ â¬† è¿”å›žé¡¶éƒ¨ å·®å¼‚ç®—æ³•æ¶µç›–äº†å“ªäº›è§„åˆ™?åœ¨åŒºåˆ†ä¸¤æ£µæ ‘æ—¶ï¼ŒReact é¦–å…ˆæ¯”è¾ƒä¸¤ä¸ªæ ¹å…ƒç´ ã€‚æ ¹æ®æ ¹å…ƒç´ çš„ç±»åž‹ï¼Œè¡Œä¸ºä¼šæœ‰æ‰€ä¸åŒã€‚å®ƒåœ¨é‡æž„ç®—æ³•ä¸­æ¶µç›–äº†ä»¥ä¸‹è§„åˆ™ï¼š ä¸åŒç±»åž‹çš„å…ƒç´ ï¼šæ¯å½“æ ¹å…ƒç´ å…·æœ‰ä¸åŒçš„ç±»åž‹æ—¶ï¼ŒReact å°†ç§»é™¤æ—§æ ‘å¹¶ä»Žå¤´å¼€å§‹æž„å»ºæ–°æ ‘ã€‚ä¾‹å¦‚ï¼Œå…ƒç´  åˆ° ï¼Œæˆ–ä»Ž åˆ° çš„ä¸åŒç±»åž‹çš„å…ƒç´ å¼•å¯¼å®Œå…¨é‡å»ºã€‚ ç›¸åŒç±»åž‹çš„DOMå…ƒç´ ï¼šå½“æ¯”è¾ƒä¸¤ä¸ªç›¸åŒç±»åž‹çš„ React DOM å…ƒç´ æ—¶ï¼ŒReact æŸ¥çœ‹ä¸¤è€…çš„å±žæ€§ï¼Œä¿æŒç›¸åŒçš„åº•å±‚ DOM èŠ‚ç‚¹ï¼Œå¹¶ä»…æ›´æ–°å·²æ›´æ”¹çš„å±žæ€§ã€‚è®©æˆ‘ä»¬ä»¥ç›¸åŒçš„ DOM å…ƒç´ ä¸ºä¾‹ï¼Œé™¤äº† className å±žæ€§ï¼Œ 123&lt;div className="show" title="ReactJS" /&gt;&lt;div className="hide" title="ReactJS" /&gt; ç›¸åŒç±»åž‹çš„ç»„ä»¶å…ƒç´ ï¼š å½“ç»„ä»¶æ›´æ–°æ—¶ï¼Œå®žä¾‹ä¿æŒä¸å˜ï¼Œä»¥ä¾¿åœ¨æ¸²æŸ“ä¹‹é—´ä¿æŒçŠ¶æ€ã€‚React æ›´æ–°åº•å±‚ç»„ä»¶å®žä¾‹çš„ props ä»¥åŒ¹é…æ–°å…ƒç´ ï¼Œå¹¶åœ¨åº•å±‚å®žä¾‹ä¸Šè°ƒç”¨ componentWillReceiveProps() å’Œ componentWillUpdate()ã€‚ä¹‹åŽï¼Œè°ƒç”¨ render() æ–¹æ³•ï¼Œdiff ç®—æ³•å¯¹å‰ä¸€ä¸ªç»“æžœå’Œæ–°ç»“æžœè¿›è¡Œé€’å½’ã€‚ é€’å½’å­èŠ‚ç‚¹ï¼šå½“å¯¹ DOM èŠ‚ç‚¹çš„å­èŠ‚ç‚¹è¿›è¡Œé€’å½’æ—¶ï¼ŒReact ä¼šåŒæ—¶è¿­ä»£ä¸¤ä¸ªå­èŠ‚ç‚¹åˆ—è¡¨ï¼Œå¹¶åœ¨å‡ºçŽ°å·®å¼‚æ—¶ç”Ÿæˆå˜å¼‚ã€‚ä¾‹å¦‚ï¼Œåœ¨å­èŠ‚ç‚¹æœ«å°¾æ·»åŠ å…ƒç´ æ—¶ï¼Œåœ¨è¿™ä¸¤ä¸ªæ ‘ä¹‹é—´è¿›è¡Œè½¬æ¢æ•ˆæžœå¾ˆå¥½ã€‚ 12345678910&lt;ul&gt; &lt;li&gt;first&lt;/li&gt; &lt;li&gt;second&lt;/li&gt;&lt;/ul&gt;&lt;ul&gt; &lt;li&gt;first&lt;/li&gt; &lt;li&gt;second&lt;/li&gt; &lt;li&gt;third&lt;/li&gt;&lt;/ul&gt; å¤„ç† Keyï¼š Reactæ”¯æŒ key å±žæ€§ã€‚å½“å­èŠ‚ç‚¹æœ‰ key æ—¶ï¼ŒReact ä½¿ç”¨ key å°†åŽŸå§‹æ ‘ä¸­çš„å­èŠ‚ç‚¹ä¸ŽåŽç»­æ ‘ä¸­çš„å­èŠ‚ç‚¹ç›¸åŒ¹é…ã€‚ä¾‹å¦‚ï¼Œæ·»åŠ  key å¯ä»¥ä½¿æ ‘æœ‰æ•ˆåœ°è½¬æ¢ï¼Œ 12345678910&lt;ul&gt; &lt;li key="2015"&gt;Duke&lt;/li&gt; &lt;li key="2016"&gt;Villanova&lt;/li&gt;&lt;/ul&gt;&lt;ul&gt; &lt;li key="2014"&gt;Connecticut&lt;/li&gt; &lt;li key="2015"&gt;Duke&lt;/li&gt; &lt;li key="2016"&gt;Villanova&lt;/li&gt;&lt;/ul&gt; â¬† è¿”å›žé¡¶éƒ¨ ä½ ä»€ä¹ˆæ—¶å€™éœ€è¦ä½¿ç”¨ refs?è¿™é‡Œæ˜¯ refs çš„ä¸€äº›ä½¿ç”¨åœºæ™¯ï¼š ç®¡ç†èšç„¦ã€æ–‡æœ¬é€‰æ‹©æˆ–åª’ä½“æ’­æ”¾ã€‚ è§¦å‘å‘½ä»¤å¼åŠ¨ç”»ã€‚ ä¸Žç¬¬ä¸‰æ–¹ DOM åº“é›†æˆã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¯¹äºŽæ¸²æŸ“å±žæ€§æ¥è¯´æ˜¯å¦å¿…é¡»å°† prop å±žæ€§å‘½åä¸º render?å³ä½¿æ¨¡å¼åä¸º render propsï¼Œä½ ä¹Ÿä¸å¿…ä½¿ç”¨åä¸º render çš„å±žæ€§åæ¥ä½¿ç”¨æ­¤æ¨¡å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç»„ä»¶ç”¨äºŽçŸ¥é“å³å°†æ¸²æŸ“å†…å®¹çš„ä»»ä½•å‡½æ•°å±žæ€§ï¼Œåœ¨æŠ€æœ¯ä¸Šéƒ½æ˜¯ä¸€ä¸ª render propsã€‚è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªåä¸º children æ¸²æŸ“å±žæ€§çš„ç¤ºä¾‹ï¼š 123&lt;Mouse children=&#123;mouse =&gt; ( &lt;p&gt;The mouse position is &#123;mouse.x&#125;, &#123;mouse.y&#125;&lt;/p&gt;)&#125;/&gt; å®žé™…ä¸Šï¼Œä»¥ä¸Šçš„ children å±žæ€§ä¸ä¸€å®šéœ€è¦åœ¨ JSX å…ƒç´ çš„ `attributes` åˆ—è¡¨ä¸­å‘½åã€‚åä¹‹ï¼Œä½ å¯ä»¥å°†å®ƒç›´æŽ¥æ”¾åœ¨å…ƒç´ å†…éƒ¨ï¼š 12345&lt;Mouse&gt; &#123;mouse =&gt; ( &lt;p&gt;The mouse position is &#123;mouse.x&#125;, &#123;mouse.y&#125;&lt;/p&gt; )&#125;&lt;/Mouse&gt; å½“ä½¿ç”¨ä¸Šè¿°çš„æŠ€æœ¯ï¼Œéœ€è¦åœ¨ propTypes ä¸­æ˜Žç¡®å£°æ˜Ž children å¿…é¡»ä¸ºå‡½æ•°ç±»åž‹ï¼š 123Mouse.propTypes = &#123; children: PropTypes.func.isRequired&#125;; **[â¬† è¿”å›žé¡¶éƒ¨](#ç›®å½•)** åœ¨ Pure Component ä¸­ä½¿ç”¨æ¸²æŸ“å±žæ€§ä¼šæœ‰ä»€ä¹ˆé—®é¢˜?å¦‚æžœåœ¨æ¸²æŸ“æ–¹æ³•ä¸­åˆ›å»ºå‡½æ•°ï¼Œåˆ™ä¼šå¦å®šçº¯ç»„ä»¶çš„ç”¨é€”ã€‚å› ä¸ºæµ…å±žæ€§æ¯”è¾ƒå¯¹äºŽæ–°å±žæ€§æ€»æ˜¯è¿”å›ž falseï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½å°†ä¸ºæ¸²æŸ“å±žæ€§ç”Ÿæˆä¸€ä¸ªæ–°å€¼ã€‚ä½ å¯ä»¥é€šè¿‡å°†æ¸²æŸ“å‡½æ•°å®šä¹‰ä¸ºå®žä¾‹æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ä½¿ç”¨æ¸²æŸ“å±žæ€§åˆ›å»º HOC?å¯ä»¥ä½¿ç”¨å¸¦æœ‰æ¸²æŸ“å±žæ€§çš„å¸¸è§„ç»„ä»¶å®žçŽ°å¤§å¤šæ•°é«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœå¸Œæœ›ä½¿ç”¨ withMouse HOC è€Œä¸æ˜¯ ç»„ä»¶ï¼Œåˆ™ä½ å¯ä»¥ä½¿ç”¨å¸¦æœ‰æ¸²æŸ“å±žæ€§çš„å¸¸è§„ ç»„ä»¶è½»æ¾åˆ›å»ºä¸€ä¸ª HOC ç»„ä»¶ã€‚ 1234567891011function withMouse(Component) &#123; return class extends React.Component &#123; render() &#123; return ( &lt;Mouse render=&#123;mouse =&gt; ( &lt;Component &#123;...this.props&#125; mouse=&#123;mouse&#125; /&gt; )&#125;/&gt; ); &#125; &#125;&#125; â¬† è¿”å›žé¡¶éƒ¨ ä»€ä¹ˆæ˜¯ windowing æŠ€æœ¯?Windowing æ˜¯ä¸€ç§æŠ€æœ¯ï¼Œå®ƒåœ¨ä»»ä½•ç»™å®šæ—¶é—´åªå‘ˆçŽ°ä¸€å°éƒ¨åˆ†è¡Œï¼Œå¹¶ä¸”å¯ä»¥æ˜¾è‘—å‡å°‘é‡æ–°å‘ˆçŽ°ç»„ä»¶æ‰€éœ€çš„æ—¶é—´ä»¥åŠåˆ›å»ºçš„ DOM èŠ‚ç‚¹çš„æ•°é‡ã€‚å¦‚æžœåº”ç”¨ç¨‹åºå‘ˆçŽ°é•¿çš„æ•°æ®åˆ—è¡¨ï¼Œåˆ™å»ºè®®ä½¿ç”¨æ­¤æŠ€æœ¯ã€‚react-window å’Œ react-virtualized éƒ½æ˜¯å¸¸ç”¨çš„ windowing åº“ï¼Œå®ƒæä¾›äº†å‡ ä¸ªå¯é‡ç”¨çš„ç»„ä»¶ï¼Œç”¨äºŽæ˜¾ç¤ºåˆ—è¡¨ã€ç½‘æ ¼å’Œè¡¨æ ¼æ•°æ®ã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä½ å¦‚ä½•åœ¨ JSX ä¸­æ‰“å° falsy å€¼?Falsy å€¼æ¯”å¦‚ falseï¼Œnullï¼Œundefined æ˜¯æœ‰æ•ˆçš„å­å…ƒç´ ï¼Œä½†å®ƒä»¬ä¸ä¼šå‘ˆçŽ°ä»»ä½•å†…å®¹ã€‚å¦‚æžœä»è¦æ˜¾ç¤ºå®ƒä»¬ï¼Œåˆ™éœ€è¦å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªå¦‚ä½•è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„ä¾‹å­ï¼š 123&lt;div&gt; My JavaScript variable is &#123;String(myVariable)&#125;.&lt;/div&gt; â¬† è¿”å›žé¡¶éƒ¨ portals çš„å…¸åž‹ä½¿ç”¨åœºæ™¯æ˜¯ä»€ä¹ˆ?å½“çˆ¶ç»„ä»¶æ‹¥æœ‰ overflow: hidden æˆ–å«æœ‰å½±å“å †å ä¸Šä¸‹æ–‡çš„å±žæ€§ï¼ˆz-indexã€positionã€opacity ç­‰æ ·å¼ï¼‰ï¼Œä¸”éœ€è¦è„±ç¦»å®ƒçš„å®¹å™¨è¿›è¡Œå±•ç¤ºæ—¶ï¼ŒReact portal å°±éžå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå¯¹è¯æ¡†ã€å…¨å±€æ¶ˆæ¯é€šçŸ¥ã€æ‚¬åœå¡å’Œå·¥å…·æç¤ºã€‚ â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•è®¾ç½®éžå—æŽ§ç»„ä»¶çš„é»˜è®¤å€¼?åœ¨ React ä¸­ï¼Œè¡¨å•å…ƒç´ çš„å±žæ€§å€¼å°†è¦†ç›–å…¶ DOM ä¸­çš„å€¼ã€‚å¯¹äºŽéžå—æŽ§ç»„ä»¶ï¼Œä½ å¯èƒ½å¸Œæœ›èƒ½å¤ŸæŒ‡å®šå…¶åˆå§‹å€¼ï¼Œä½†ä¸ä¼šæŽ§åˆ¶åŽç»­çš„æ›´æ–°ã€‚è¦å¤„ç†è¿™ç§æƒ…å½¢ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€ä¸ª defaultValue å±žæ€§æ¥å–ä»£ value å±žæ€§ã€‚ 1234567891011121314render() &#123; return ( &lt;form onSubmit=&#123;this.handleSubmit&#125;&gt; &lt;label&gt; User Name: &lt;input defaultValue="John" type="text" ref=&#123;this.input&#125; /&gt; &lt;/label&gt; &lt;input type="submit" value="Submit" /&gt; &lt;/form&gt; );&#125; è¿™åŒæ ·é€‚ç”¨äºŽ select å’Œ textArea è¾“å…¥æ¡†ã€‚ä½†å¯¹äºŽ checkbox å’Œ radio æŽ§ä»¶ï¼Œéœ€è¦ä½¿ç”¨ defaultCheckedã€‚ â¬† è¿”å›žé¡¶éƒ¨ ä½ æœ€å–œæ¬¢çš„ React æŠ€æœ¯æ ˆæ˜¯ä»€ä¹ˆ?å°½ç®¡æŠ€æœ¯æ ˆå› å¼€å‘äººå‘˜è€Œå¼‚ï¼Œä½†æœ€æµè¡Œçš„æŠ€æœ¯æ ˆç”¨äºŽ React boilerplate é¡¹ç›®ä»£ç ä¸­ã€‚å®ƒä¸»è¦ä½¿ç”¨ redux å’Œ redux saga è¿›è¡ŒçŠ¶æ€ç®¡ç†å’Œå…·æœ‰å‰¯ä½œç”¨çš„å¼‚æ­¥æ“ä½œï¼Œä½¿ç”¨ react-router è¿›è¡Œè·¯ç”±ç®¡ç†ï¼Œä½¿ç”¨ styled-components åº“å¼€å‘ React ç»„ä»¶ï¼Œä½¿ç”¨ axios è°ƒç”¨ REST apiï¼Œä»¥åŠå…¶ä»–æ”¯æŒçš„æŠ€æœ¯æ ˆï¼Œå¦‚ webpackã€reseselectã€esnextã€babel ç­‰ã€‚ ä½ å¯ä»¥å…‹éš† https://github.com/react-boilerplate/react-boilerplate å¹¶å¼€å§‹å¼€å‘ä»»ä½•æ–°çš„ React é¡¹ç›®ã€‚ â¬† è¿”å›žé¡¶éƒ¨ Real DOM å’Œ Virtual DOM æœ‰ä»€ä¹ˆåŒºåˆ«?ä»¥ä¸‹æ˜¯Real DOMå’ŒVirtual DOMä¹‹é—´çš„ä¸»è¦åŒºåˆ«ï¼š | Real DOM | Virtual DOM || â€”â€“ | â€”â€”- || æ›´æ–°é€Ÿåº¦æ…¢ | æ›´æ–°é€Ÿåº¦å¿« || DOM æ“ä½œéžå¸¸æ˜‚è´µ | DOM æ“ä½œéžå¸¸ç®€å• || å¯ä»¥ç›´æŽ¥æ›´æ–° HTML | ä½ ä¸èƒ½ç›´æŽ¥æ›´æ–° HTML || é€ æˆå¤ªå¤šå†…å­˜æµªè´¹ | æ›´å°‘çš„å†…å­˜æ¶ˆè€— || å¦‚æžœå…ƒç´ æ›´æ–°äº†ï¼Œåˆ›å»ºæ–°çš„ DOM èŠ‚ç‚¹ | å¦‚æžœå…ƒç´ æ›´æ–°ï¼Œåˆ™æ›´æ–° JSX å…ƒç´  | â¬† è¿”å›žé¡¶éƒ¨ å¦‚ä½•ä¸º React åº”ç”¨ç¨‹åºæ·»åŠ  bootstrap?Bootstrap å¯ä»¥é€šè¿‡ä¸‰ç§å¯èƒ½çš„æ–¹å¼æ·»åŠ åˆ° React åº”ç”¨ç¨‹åºä¸­ï¼š ä½¿ç”¨ Bootstrap CDN:è¿™æ˜¯æ·»åŠ  bootstrap æœ€ç®€å•çš„æ–¹å¼ã€‚åœ¨ head æ ‡ç­¾ä¸­æ·»åŠ  bootstrap ç›¸åº”çš„ CSS å’Œ JS èµ„æºã€‚ æŠŠ Bootstrap ä½œä¸ºä¾èµ–é¡¹ï¼šå¦‚æžœä½ ä½¿ç”¨çš„æ˜¯æž„å»ºå·¥å…·æˆ–æ¨¡å—ç»‘å®šå™¨ï¼ˆå¦‚Webpackï¼‰ï¼Œé‚£ä¹ˆè¿™æ˜¯å‘ React åº”ç”¨ç¨‹åºæ·»åŠ  bootstrap çš„é¦–é€‰é€‰é¡¹ã€‚ 1npm install bootstrap ä½¿ç”¨ React Bootstrap åŒ…:åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥å°† Bootstrap æ·»åŠ åˆ°æˆ‘ä»¬çš„ React åº”ç”¨ç¨‹åºä¸­ï¼Œæ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªä»¥ React ç»„ä»¶å½¢å¼å¯¹ Bootstrap ç»„ä»¶è¿›è¡ŒåŒ…è£…åŽåŒ…ã€‚ä¸‹é¢çš„åŒ…åœ¨æ­¤ç±»åˆ«ä¸­å¾ˆæµè¡Œï¼š react-bootstrap reactstrap â¬† è¿”å›žé¡¶éƒ¨ ä½ èƒ½å¦åˆ—å‡ºä½¿ç”¨ React ä½œä¸ºå‰ç«¯æ¡†æž¶çš„é¡¶çº§ç½‘ç«™æˆ–åº”ç”¨ç¨‹åº?ä»¥ä¸‹æ˜¯ä½¿ç”¨ React ä½œä¸ºå‰ç«¯æ¡†æž¶çš„å‰ 10 ä¸ªç½‘ç«™ï¼š Facebook Uber Instagram WhatsApp Khan Academy Airbnb Dropbox Flipboard Netflix PayPal â¬† è¿”å›žé¡¶éƒ¨ æ˜¯å¦å»ºè®®åœ¨ React ä¸­ä½¿ç”¨ CSS In JS æŠ€æœ¯?React å¯¹å¦‚ä½•å®šä¹‰æ ·å¼æ²¡æœ‰ä»»ä½•æ„è§ï¼Œä½†å¦‚æžœä½ æ˜¯åˆå­¦è€…ï¼Œé‚£ä¹ˆå¥½çš„èµ·ç‚¹æ˜¯åƒå¾€å¸¸ä¸€æ ·åœ¨å•ç‹¬çš„ *.css æ–‡ä»¶ä¸­å®šä¹‰æ ·å¼ï¼Œå¹¶ä½¿ç”¨ç±»åå¼•ç”¨å®ƒä»¬ã€‚æ­¤åŠŸèƒ½ä¸æ˜¯ React çš„ä¸€éƒ¨åˆ†ï¼Œè€Œæ˜¯æ¥è‡ªç¬¬ä¸‰æ–¹åº“ã€‚ä½†æ˜¯å¦‚æžœä½ æƒ³å°è¯•ä¸åŒçš„æ–¹æ³•ï¼ˆJSä¸­çš„CSSï¼‰ï¼Œé‚£ä¹ˆ styled-components åº“æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ â¬† è¿”å›žé¡¶éƒ¨ å‰ç«¯çš„ä¸€äº›çŸ¥è¯†æ¨¡å— HTML å¯¹Webç†è§£ï¼Œä¸åŒæµè§ˆå™¨çš„å†…æ ¸åŒºåˆ†å’Œå…¼å®¹æ€§ï¼Œé€‰æ‹©å™¨çš„ä¼˜å…ˆçº§ï¼Œæ ‡ç­¾å…ƒç´ ç±»åž‹ï¼ŒHTML5ï¼ŒHTMLç½‘é¡µç¼“å­˜ä¸Žå­˜å‚¨ CSS flexå¸ƒå±€ï¼Œç®€å•å¸ƒå±€ï¼Œåœ£æ¯å¸ƒå±€å’ŒåŒé£žç¿¼å¸ƒå±€ï¼Œå“åº”å¼å¸ƒå±€ï¼ŒåŠ¨ç”»ï¼Œç¼–è¯‘å·¥å…·ï¼ˆSass,Less,Stylusï¼‰ï¼Œç›’å­æ¨¡åž‹ï¼Œå®šä½æœºåˆ¶ï¼Œiconfontå­—ä½“ï¼ŒCSS3å¸¸è§æ–°ç‰¹æ€§ JavaScript æ•°æ®ç±»åž‹ï¼Œå¯¹è±¡æ“ä½œï¼Œç®—æ³•è¿ç®—ï¼Œç»§æ‰¿ï¼Œé—­åŒ…ï¼Œä½œç”¨åŸŸï¼ŒåŽŸåž‹é“¾ï¼Œäº‹ä»¶ï¼Œfunctionï¼ŒJSONï¼ŒAJaxï¼ŒRegExpï¼Œè·¨åŸŸï¼Œå¼‚æ­¥æ“ä½œï¼ŒDOMï¼ŒBOMï¼Œå†…å­˜æ³„æ¼ï¼Œå‰ç«¯MVCï¼Œæ¨¡å—åŒ–ï¼Œè·¯ç”±ï¼ŒCanvasï¼ŒES6ï¼ŒNodeJsï¼ŒReactï¼ŒVUE å…¶ä»– ç§»åŠ¨ç«¯ï¼Œè‡ªåŠ¨åŒ–æž„å»ºï¼ŒWEBå®‰å…¨ï¼Œé¡¹ç›®ä¼˜åŒ–ï¼Œé¡¹ç›®é‡æž„ï¼ŒèŒä¸šè§„åˆ’ï¼Œå­¦ä¹ ï¼Œå›¢é˜Ÿåä½œ ä½œä¸ºä¸€åå‰ç«¯å·¥ç¨‹å¸ˆï¼Œåº”è¯¥æœ‰ä¸€é¢—éšæ—¶å­¦ä¹ çš„å¿ƒæ€ï¼Œå­¦ä¼šæ€»ç»“ï¼Œå¯¹äºŽæœ‰äº›çŸ¥è¯†ç‚¹æˆ‘ä»¬åº”è¯¥æ—¶å¸¸è®°ä½ã€‚ HTMLDoctypeä½œç”¨ï¼Ÿæ ‡å‡†æ¨¡å¼ä¸Žå…¼å®¹æ¨¡å¼å„æœ‰ä»€ä¹ˆåŒºåˆ«?1ã€&lt;!DOCTYPE&gt;å£°æ˜Žä½äºŽä½äºŽHTMLæ–‡æ¡£ä¸­çš„ç¬¬ä¸€è¡Œï¼Œå¤„äºŽ &lt;html&gt;æ ‡ç­¾ä¹‹å‰ã€‚å‘ŠçŸ¥æµè§ˆå™¨çš„è§£æžå™¨ç”¨ä»€ä¹ˆæ–‡æ¡£æ ‡å‡†è§£æžè¿™ä¸ªæ–‡æ¡£ã€‚DOCTYPEä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®ä¼šå¯¼è‡´æ–‡æ¡£ä»¥å…¼å®¹æ¨¡å¼å‘ˆçŽ°ã€‚ 2ã€æ ‡å‡†æ¨¡å¼çš„æŽ’ç‰ˆ å’Œ JSè¿ä½œæ¨¡å¼éƒ½æ˜¯ä»¥è¯¥æµè§ˆå™¨æ”¯æŒçš„æœ€é«˜æ ‡å‡†è¿è¡Œã€‚åœ¨å…¼å®¹æ¨¡å¼ä¸­ï¼Œé¡µé¢ä»¥å®½æ¾çš„å½¢å¼å‘åŽå…¼å®¹çš„æ–¹å¼æ˜¾ç¤º,æ¨¡æ‹Ÿè€å¼æµè§ˆå™¨çš„è¡Œä¸ºé˜²æ­¢é¡µé¢æ¸²æŸ“å¤±è´¥ã€‚ HTML5 ä¸ºä»€ä¹ˆåªéœ€è¦å†™ &lt;!DOCTYPE HTML&gt;ï¼ŸHTML5ä¸åŸºäºŽSGML,æ‰€ä»¥ä¸éœ€è¦å¯¹DTDè¿›è¡Œå¼•ç”¨ï¼Œä½†æ˜¯ä»–ä¹Ÿéœ€è¦DOCTYPEæ¥è§„èŒƒæµè§ˆå™¨çš„è¡Œä¸ºã€‚ å¸¸è§çš„æµè§ˆå™¨æœ‰å“ªäº›ï¼ŒåŠå…¶æµè§ˆå™¨çš„å†…æ ¸æ˜¯å•¥ï¼ŸTridentå†…æ ¸ï¼šIE,MaxThon,TT,The World,360,æœç‹—æµè§ˆå™¨ç­‰ã€‚ [åˆç§°MSHTML]Geckoå†…æ ¸ï¼šNetscape6åŠä»¥ä¸Šç‰ˆæœ¬ï¼ŒFF,MozillaSuite/SeaMonkeyç­‰Prestoå†…æ ¸ï¼šOpera7åŠä»¥ä¸Šã€‚ [Operaå†…æ ¸åŽŸä¸ºï¼šPrestoï¼ŒçŽ°ä¸ºï¼šBlink;]Webkitå†…æ ¸ï¼šSafari,Chromeç­‰ã€‚ [ Chromeçš„ï¼šBlinkï¼ˆWebKitçš„åˆ†æ”¯ï¼‰] æµè§ˆå™¨å†…æ ¸çš„ç†è§£ï¼Ÿä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šæ¸²æŸ“å¼•æ“Žï¼ˆLayout engineeræˆ–Rendering Engineï¼‰å’ŒJSå¼•æ“Ž æ¸²æŸ“å¼•æ“Ž:è´Ÿè´£ç½‘é¡µçš„å†…å®¹ï¼ˆHTMLã€XMLã€å›¾åƒç­‰ï¼‰ã€æ•´ç†è®¯æ¯ï¼ˆå¼•å…¥CSSã€JSç­‰ï¼‰ï¼Œè®¡ç®—ç½‘é¡µçš„æ˜¾ç¤ºæ–¹å¼ï¼Œè¾“å‡ºæ˜¾ç¤ºã€‚ä¸åŒçš„æµè§ˆå™¨å†…æ ¸å¯¹äºŽç½‘é¡µçš„è¯­æ³•è§£é‡Šä¹Ÿå°±ä¸åŒï¼Œå°±å­˜åœ¨ç½‘é¡µæ¸²æŸ“çš„æ•ˆæžœä¸åŒï¼Œè¿™ä¹Ÿå°±æ˜¯å…¼å®¹æ€§ã€‚ JSå¼•æ“Žï¼šè§£æžå’Œæ‰§è¡ŒJavaScriptå®žçŽ°ç½‘é¡µåŠ¨æ€æ•ˆæžœã€‚ é¡µé¢æ ·å¼å¼•å…¥ï¼Œlinkä¸Ž@import`çš„åŒºåˆ«ï¼Ÿ1ã€linkå±žäºŽXHTMLæ ‡ç­¾ï¼Œé™¤äº†åŠ è½½CSSå¤–ï¼Œè¿˜èƒ½ç”¨äºŽå®šä¹‰RSS, å®šä¹‰relè¿žæŽ¥å±žæ€§ç­‰ä½œç”¨ï¼›2ã€@importæ˜¯CSSæä¾›çš„ï¼Œåªèƒ½ç”¨äºŽåŠ è½½CSS;3ã€é¡µé¢è¢«åŠ è½½çš„æ—¶ï¼Œlinkä¼šåŒæ—¶è¢«åŠ è½½ï¼Œè€Œ@importå¼•ç”¨çš„CSSä¼šç­‰åˆ°é¡µé¢è¢«åŠ è½½å®Œå†åŠ è½½;4ã€importæ˜¯CSS2.1 æå‡ºçš„ï¼Œåªåœ¨IE5ä»¥ä¸Šæ‰èƒ½è¢«è¯†åˆ«ï¼Œè€Œlinkæ˜¯XHTMLæ ‡ç­¾ï¼Œæ— å…¼å®¹é—®é¢˜; è¡Œå†…å…ƒç´ æœ‰å“ªäº›ï¼Œå—çº§å…ƒç´ æœ‰å“ªäº›ï¼Œç©ºå…ƒç´ æœ‰å“ªäº›ï¼Ÿ CSSè§„èŒƒè§„å®šï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰displayå±žæ€§ï¼Œç¡®å®šè¯¥å…ƒç´ çš„ç±»åž‹ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æœ‰é»˜è®¤çš„displayå€¼ï¼Œå¦‚divçš„displayé»˜è®¤å€¼ä¸ºâ€œblockâ€ï¼Œåˆ™ä¸ºâ€œå—çº§â€å…ƒç´ ï¼›spané»˜è®¤displayå±žæ€§å€¼ä¸ºâ€œinlineâ€ï¼Œæ˜¯â€œè¡Œå†…â€å…ƒç´ ã€‚ è¡Œå†…å…ƒç´ : a b span img input select strong(å¼ºè°ƒçš„è¯­æ°”)å—çº§å…ƒç´ ï¼šdiv p ul ol li dl dt dd h1 h2 h3 h4 ...å¸¸è§çš„ç©ºå…ƒç´ : &lt;br&gt; &lt;hr&gt; &lt;img&gt; &lt;input&gt; &lt;link&gt; &lt;meta&gt;å’Œ&lt;area&gt; &lt;base&gt; &lt;col&gt; &lt;command&gt; &lt;embed&gt; &lt;keygen&gt; &lt;param&gt; &lt;source&gt; &lt;track&gt; &lt;wbr&gt; HTML5æœ‰å“ªäº›æ–°ç‰¹æ€§ã€ç§»é™¤äº†é‚£äº›å…ƒç´ ï¼Ÿå¦‚ä½•å¤„ç†HTML5æ–°æ ‡ç­¾çš„æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Ÿå¦‚ä½•åŒºåˆ† HTML å’Œ HTML5ï¼Ÿ123456789101112131415161718192021222324HTML5 çŽ°åœ¨å·²ç»ä¸æ˜¯ SGML çš„å­é›†ï¼Œä¸»è¦æ˜¯å…³äºŽå›¾åƒï¼Œä½ç½®ï¼Œå­˜å‚¨ï¼Œå¤šä»»åŠ¡ç­‰åŠŸèƒ½çš„å¢žåŠ ã€‚ - ç»˜ç”» canvas; - ç”¨äºŽåª’ä»‹å›žæ”¾çš„ video å’Œ audio å…ƒç´ ; - æœ¬åœ°ç¦»çº¿å­˜å‚¨ localStorage é•¿æœŸå­˜å‚¨æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åŽæ•°æ®ä¸ä¸¢å¤±; - sessionStorage çš„æ•°æ®åœ¨æµè§ˆå™¨å…³é—­åŽè‡ªåŠ¨åˆ é™¤; - è¯­æ„åŒ–æ›´å¥½çš„å†…å®¹å…ƒç´ ï¼Œæ¯”å¦‚ articleã€footerã€headerã€navã€section; - è¡¨å•æŽ§ä»¶ï¼Œcalendarã€dateã€timeã€emailã€urlã€search; - æ–°çš„æŠ€æœ¯webworker, websocket, Geolocation; - ç§»é™¤çš„å…ƒç´ ï¼š çº¯è¡¨çŽ°çš„å…ƒç´ ï¼šbasefontï¼Œbigï¼Œcenterï¼Œfont, sï¼Œstrikeï¼Œttï¼Œu; å¯¹å¯ç”¨æ€§äº§ç”Ÿè´Ÿé¢å½±å“çš„å…ƒç´ ï¼šframeï¼Œframesetï¼Œnoframesï¼› - æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼š IE8/IE7/IE6æ”¯æŒé€šè¿‡document.createElementæ–¹æ³•äº§ç”Ÿçš„æ ‡ç­¾ï¼Œ å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‰¹æ€§è®©è¿™äº›æµè§ˆå™¨æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼Œ æµè§ˆå™¨æ”¯æŒæ–°æ ‡ç­¾åŽï¼Œè¿˜éœ€è¦æ·»åŠ æ ‡ç­¾é»˜è®¤çš„æ ·å¼ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥ç›´æŽ¥ä½¿ç”¨æˆç†Ÿçš„æ¡†æž¶ã€æ¯”å¦‚html5shim; &lt;!--[if lt IE 9]&gt; &lt;script&gt; src="http://html5shim.googlecode.com/svn/trunk/html5.js"&lt;/script&gt; &lt;![endif]--&gt;å¦‚ä½•åŒºåˆ†HTML5ï¼š DOCTYPEå£°æ˜Ž\æ–°å¢žçš„ç»“æž„å…ƒç´ \åŠŸèƒ½å…ƒç´  ç®€è¿°ä¸€ä¸‹ä½ å¯¹HTMLè¯­ä¹‰åŒ–çš„ç†è§£ï¼Ÿç”¨æ­£ç¡®çš„æ ‡ç­¾åšæ­£ç¡®çš„äº‹æƒ…ã€‚htmlè¯­ä¹‰åŒ–è®©é¡µé¢çš„å†…å®¹ç»“æž„åŒ–ï¼Œç»“æž„æ›´æ¸…æ™°ï¼Œä¾¿äºŽå¯¹æµè§ˆå™¨ã€æœç´¢å¼•æ“Žè§£æž;å³ä½¿åœ¨æ²¡æœ‰æ ·å¼CSSæƒ…å†µä¸‹ä¹Ÿä»¥ä¸€ç§æ–‡æ¡£æ ¼å¼æ˜¾ç¤ºï¼Œå¹¶ä¸”æ˜¯å®¹æ˜“é˜…è¯»çš„;æœç´¢å¼•æ“Žçš„çˆ¬è™«ä¹Ÿä¾èµ–äºŽHTMLæ ‡è®°æ¥ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ï¼Œåˆ©äºŽSEO;ä½¿é˜…è¯»æºä»£ç çš„äººå¯¹ç½‘ç«™æ›´å®¹æ˜“å°†ç½‘ç«™åˆ†å—ï¼Œä¾¿äºŽé˜…è¯»ç»´æŠ¤ç†è§£ã€‚ HTML5çš„ç¦»çº¿å‚¨å­˜æ€Žä¹ˆä½¿ç”¨ï¼Œå·¥ä½œåŽŸç†èƒ½ä¸èƒ½è§£é‡Šä¸€ä¸‹ï¼Ÿ åŽŸç†ï¼šHTML5çš„ç¦»çº¿å­˜å‚¨æ˜¯åŸºäºŽä¸€ä¸ªæ–°å»ºçš„.appcacheæ–‡ä»¶çš„ç¼“å­˜æœºåˆ¶(ä¸æ˜¯å­˜å‚¨æŠ€æœ¯)ï¼Œé€šè¿‡è¿™ä¸ªæ–‡ä»¶ä¸Šçš„è§£æžæ¸…å•ç¦»çº¿å­˜å‚¨èµ„æºï¼Œè¿™äº›èµ„æºå°±ä¼šåƒcookieä¸€æ ·è¢«å­˜å‚¨äº†ä¸‹æ¥ã€‚ä¹‹åŽå½“ç½‘ç»œåœ¨å¤„äºŽç¦»çº¿çŠ¶æ€ä¸‹æ—¶ï¼Œæµè§ˆå™¨ä¼šé€šè¿‡è¢«ç¦»çº¿å­˜å‚¨çš„æ•°æ®è¿›è¡Œé¡µé¢å±•ç¤ºã€‚ å¦‚ä½•ä½¿ç”¨ï¼š1ã€é¡µé¢å¤´éƒ¨åƒä¸‹é¢ä¸€æ ·åŠ å…¥ä¸€ä¸ªmanifestçš„å±žæ€§ï¼›2ã€åœ¨cache.manifestæ–‡ä»¶çš„ç¼–å†™ç¦»çº¿å­˜å‚¨çš„èµ„æºï¼› CACHE MANIFEST #v0.11 CACHE: js/app.js css/style.css NETWORK: resourse/logo.png FALLBACK: / /offline.html3ã€åœ¨ç¦»çº¿çŠ¶æ€æ—¶ï¼Œæ“ä½œwindow.applicationCacheè¿›è¡Œéœ€æ±‚å®žçŽ°ã€‚ è¯¦ç»†çš„ä½¿ç”¨è¯·å‚è€ƒï¼šHTML5 ç¦»çº¿ç¼“å­˜-manifestç®€ä»‹,æœ‰è¶£çš„HTML5ï¼šç¦»çº¿å­˜å‚¨ æµè§ˆå™¨æ˜¯æ€Žä¹ˆå¯¹HTML5çš„ç¦»çº¿å‚¨å­˜èµ„æºè¿›è¡Œç®¡ç†å’ŒåŠ è½½çš„å‘¢ï¼Ÿåœ¨çº¿çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å‘çŽ°htmlå¤´éƒ¨æœ‰manifestå±žæ€§ï¼Œå®ƒä¼šè¯·æ±‚manifestæ–‡ä»¶ï¼Œå¦‚æžœæ˜¯ç¬¬ä¸€æ¬¡è®¿é—®appï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šæ ¹æ®manifestæ–‡ä»¶çš„å†…å®¹ä¸‹è½½ç›¸åº”çš„èµ„æºå¹¶ä¸”è¿›è¡Œç¦»çº¿å­˜å‚¨ã€‚å¦‚æžœå·²ç»è®¿é—®è¿‡appå¹¶ä¸”èµ„æºå·²ç»ç¦»çº¿å­˜å‚¨äº†ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šä½¿ç”¨ç¦»çº¿çš„èµ„æºåŠ è½½é¡µé¢ï¼Œç„¶åŽæµè§ˆå™¨ä¼šå¯¹æ¯”æ–°çš„manifestæ–‡ä»¶ä¸Žæ—§çš„manifestæ–‡ä»¶ï¼Œå¦‚æžœæ–‡ä»¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå°±ä¸åšä»»ä½•æ“ä½œï¼Œå¦‚æžœæ–‡ä»¶æ”¹å˜äº†ï¼Œé‚£ä¹ˆå°±ä¼šé‡æ–°ä¸‹è½½æ–‡ä»¶ä¸­çš„èµ„æºå¹¶è¿›è¡Œç¦»çº¿å­˜å‚¨ã€‚ç¦»çº¿çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨å°±ç›´æŽ¥ä½¿ç”¨ç¦»çº¿å­˜å‚¨çš„èµ„æºã€‚è¯¦ç»†è¯·å‚è€ƒï¼šæœ‰è¶£çš„HTML5ï¼šç¦»çº¿å­˜å‚¨ æè¿°ä¸€ä¸‹ Cookiesï¼ŒSessionStorage å’Œ LocalStorage çš„åŒºåˆ«ï¼Ÿcookieæ˜¯ç½‘ç«™ä¸ºäº†æ ‡ç¤ºç”¨æˆ·èº«ä»½è€Œå‚¨å­˜åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ï¼ˆClient Sideï¼‰ä¸Šçš„æ•°æ®ï¼ˆé€šå¸¸ç»è¿‡åŠ å¯†ï¼‰ã€‚cookieæ•°æ®å§‹ç»ˆåœ¨åŒæºçš„httpè¯·æ±‚ä¸­æºå¸¦ï¼ˆå³ä½¿ä¸éœ€è¦ï¼‰ï¼Œè®°ä¼šåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨é—´æ¥å›žä¼ é€’ã€‚sessionStorageå’ŒlocalStorageä¸ä¼šè‡ªåŠ¨æŠŠæ•°æ®å‘ç»™æœåŠ¡å™¨ï¼Œä»…åœ¨æœ¬åœ°ä¿å­˜ã€‚å­˜å‚¨å¤§å°ï¼š cookieæ•°æ®å¤§å°ä¸èƒ½è¶…è¿‡4kã€‚ sessionStorageå’ŒlocalStorage è™½ç„¶ä¹Ÿæœ‰å­˜å‚¨å¤§å°çš„é™åˆ¶ï¼Œä½†æ¯”cookieå¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ°5Mæˆ–æ›´å¤§ã€‚ æœ‰æœŸæ—¶é—´ï¼š localStorage å­˜å‚¨æŒä¹…æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åŽæ•°æ®ä¸ä¸¢å¤±é™¤éžä¸»åŠ¨åˆ é™¤æ•°æ®ï¼› sessionStorage æ•°æ®åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­åŽè‡ªåŠ¨åˆ é™¤ã€‚ cookie è®¾ç½®çš„cookieè¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿çª—å£æˆ–æµè§ˆå™¨å…³é—­ Iframeæœ‰é‚£äº›ç¼ºç‚¹ï¼Ÿiframeä¼šé˜»å¡žä¸»é¡µé¢çš„Onloadäº‹ä»¶ï¼›æœç´¢å¼•æ“Žçš„æ£€ç´¢ç¨‹åºæ— æ³•è§£è¯»è¿™ç§é¡µé¢ï¼Œä¸åˆ©äºŽSEO; iframeå’Œä¸»é¡µé¢å…±äº«è¿žæŽ¥æ± ï¼Œè€Œæµè§ˆå™¨å¯¹ç›¸åŒåŸŸçš„è¿žæŽ¥æœ‰é™åˆ¶ï¼Œæ‰€ä»¥ä¼šå½±å“é¡µé¢çš„å¹¶è¡ŒåŠ è½½ã€‚ ä½¿ç”¨iframeä¹‹å‰éœ€è¦è€ƒè™‘è¿™ä¸¤ä¸ªç¼ºç‚¹ã€‚å¦‚æžœéœ€è¦ä½¿ç”¨iframeï¼Œæœ€å¥½æ˜¯é€šè¿‡javascriptåŠ¨æ€ç»™iframeæ·»åŠ srcå±žæ€§å€¼ï¼Œè¿™æ ·å¯ä»¥ç»•å¼€ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ã€‚ Labelçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯æ€Žä¹ˆç”¨çš„ï¼Ÿ labelæ ‡ç­¾æ¥å®šä¹‰è¡¨å•æŽ§åˆ¶é—´çš„å…³ç³»,å½“ç”¨æˆ·é€‰æ‹©è¯¥æ ‡ç­¾æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°†ç„¦ç‚¹è½¬åˆ°å’Œæ ‡ç­¾ç›¸å…³çš„è¡¨å•æŽ§ä»¶ä¸Šã€‚ 1234&lt;label for=&quot;Name&quot;&gt;Number:&lt;/label&gt;&lt;input type=â€œtextâ€œname=&quot;Name&quot; id=&quot;Name&quot;/&gt;&lt;label&gt;Date:&lt;input type=&quot;text&quot; name=&quot;B&quot;/&gt;&lt;/label&gt; CSSä»‹ç»ä¸€ä¸‹æ ‡å‡†çš„CSSçš„ç›’å­æ¨¡åž‹ï¼Ÿä½Žç‰ˆæœ¬IEçš„ç›’å­æ¨¡åž‹æœ‰ä»€ä¹ˆä¸åŒçš„ï¼Ÿï¼ˆ1ï¼‰æœ‰ä¸¤ç§ï¼Œ IE ç›’å­æ¨¡åž‹ã€W3C ç›’å­æ¨¡åž‹ï¼›ï¼ˆ2ï¼‰ç›’æ¨¡åž‹ï¼š å†…å®¹(content)ã€å¡«å……(padding)ã€è¾¹ç•Œ(margin)ã€ è¾¹æ¡†(border)ï¼›ï¼ˆ3ï¼‰åŒº åˆ«ï¼š IEçš„contentéƒ¨åˆ†æŠŠ border å’Œ paddingè®¡ç®—äº†è¿›åŽ»; ç®—æ³•é¢˜å¿«é€ŸæŽ’åºæ€è·¯: éšæœºé€‰æ‹©æ•°ç»„ä¸­çš„ä¸€ä¸ªæ•° Aï¼Œä»¥è¿™ä¸ªæ•°ä¸ºåŸºå‡† å…¶ä»–æ•°å­—è·Ÿè¿™ä¸ªæ•°è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”è¿™ä¸ªæ•°å°çš„æ”¾åœ¨å…¶å·¦è¾¹ï¼Œå¤§çš„æ”¾åˆ°å…¶å³è¾¹ ç»è¿‡ä¸€æ¬¡å¾ªçŽ¯ä¹‹åŽï¼ŒA å·¦è¾¹ä¸ºå°äºŽ A çš„ï¼Œå³è¾¹ä¸ºå¤§äºŽ A çš„ è¿™æ—¶å€™å°†å·¦è¾¹å’Œå³è¾¹çš„æ•°å†é€’å½’ä¸Šé¢çš„è¿‡ç¨‹123456789101112131415161718192021const Arr = [85, 24, 63, 45, 17, 31, 96, 50];function quickSort(arr) &#123; if (arr.length &lt;= 1) &#123; return arr; &#125; let pivotIndex = Math.floor(arr.length / 2); let pivot = arr.splice(pivotIndex, 1)[0]; let left = []; let right = []; for (let i = 0; i &lt; arr.length; i++) &#123; if (arr[i] &lt; pivot) &#123; left.push(arr[i]); &#125; else &#123; right.push(arr[i]); &#125; &#125; // é€’å½’ return quickSort(left).concat([pivot], quickSort(right));&#125;console.log(quickSort(Arr)); ps:è¿™æ˜¯é˜®è€å¸ˆçš„ä¸€ä¸ªå¿«æŽ’å†™æ³•ï¼Œç½‘ä¸Šå¯¹äºŽè¿™ä¸ªçš„äº‰è®ºå¾ˆå¤šï¼Œç¬¬ä¸€è¯´äº†é˜®è€å¸ˆä¸åº”è¯¥ç”¨spliceåŽ»å–å€¼ï¼Œåº”è¯¥ç”¨ä¸‹æ ‡ï¼Œè¿˜æœ‰å°±æ˜¯ä¸åº”è¯¥æ¯æ¬¡éƒ½ä»Žæ–°å¼€ä¿©ä¸ªæ–°æ•°ç»„ã€‚å…¶å®žæˆ‘è§‰å¾—ç®—æ³•é¢˜é‡è¦çš„æ˜¯æ€è·¯ï¼Œå®žçŽ°çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œä¸ä¸€å®šè¯´è°å¯¹è°é”™ï¼Œæ•ˆçŽ‡è¶Šå¥½çš„ç®—æ³•çš„ç¡®æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œä½†æ˜¯æ›´å¤šçš„ç†è§£ä¸€äº›ä¸åŒçš„å®žçŽ°æ€è·¯ï¼Œæˆ‘è§‰å¾—ä¹Ÿæ˜¯å¯ä»¥çš„ï½žã€‚ è¿™é‡Œæ˜¯ä¸åŒçš„å£°éŸ³ï¼š é¢è¯•å®˜ï¼šé˜®ä¸€å³°ç‰ˆçš„å¿«é€ŸæŽ’åºå®Œå…¨æ˜¯é”™çš„ äºŒåˆ†æŽ’åºæ³•äºŒåˆ†æŸ¥æ‰¾æ³•ä¸»è¦æ˜¯è§£å†³ã€Œåœ¨ä¸€å †æœ‰åºçš„æ•°ä¸­æ‰¾å‡ºæŒ‡å®šçš„æ•°ã€è¿™ç±»é—®é¢˜ï¼Œä¸ç®¡è¿™äº›æ•°æ˜¯ä¸€ç»´æ•°ç»„è¿˜æ˜¯å¤šç»´æ•°ç»„ï¼Œåªè¦æœ‰åºï¼Œå°±å¯ä»¥ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥ä¼˜åŒ–ã€‚äºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸€ç§ã€Œåˆ†æ²»ã€æ€æƒ³çš„ç®—æ³•ï¼Œå¤§æ¦‚æµç¨‹å¦‚ä¸‹ï¼š æ•°ç»„ä¸­æŽ’åœ¨ä¸­é—´çš„æ•°å­— Aï¼Œä¸Žè¦æ‰¾çš„æ•°å­—æ¯”è¾ƒå¤§å° å› ä¸ºæ•°ç»„æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥ï¼š a) A è¾ƒå¤§åˆ™è¯´æ˜Žè¦æŸ¥æ‰¾çš„æ•°å­—åº”è¯¥ä»Žå‰åŠéƒ¨åˆ†æŸ¥æ‰¾ b) A è¾ƒå°åˆ™è¯´æ˜Žåº”è¯¥ä»ŽæŸ¥æ‰¾æ•°å­—çš„åŽåŠéƒ¨åˆ†æŸ¥æ‰¾ è¿™æ ·ä¸æ–­æŸ¥æ‰¾ç¼©å°æ•°é‡çº§ï¼ˆæ‰”æŽ‰ä¸€åŠæ•°æ®ï¼‰ï¼Œç›´åˆ°æ‰¾å®Œæ•°ç»„ä¸ºæ­¢ é¢˜ç›®ï¼šåœ¨ä¸€ä¸ªäºŒç»´æ•°ç»„ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»Žå·¦åˆ°å³é€’å¢žçš„é¡ºåºæŽ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»Žä¸Šåˆ°ä¸‹é€’å¢žçš„é¡ºåºæŽ’åºã€‚è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚1234567891011121314151617181920212223function Find(target, array) &#123; let i = 0; let j = array[i].length - 1; while (i &lt; array.length &amp;&amp; j &gt;= 0) &#123; if (array[i][j] &lt; target) &#123; i++; &#125; else if (array[i][j] &gt; target) &#123; j--; &#125; else &#123; return true; &#125; &#125; return false;&#125;//æµ‹è¯•ç”¨ä¾‹console.log(Find(10, [ [1, 2, 3, 4], [5, 9, 10, 11], [13, 20, 21, 23] ])); è§£æžurlåŽçš„å‚æ•°123456789101112131415161718192021222324252627282930313233343536373839function parseParam(url) &#123; let obj = &#123;&#125;; let arr = url.split("?"); if (arr.length == 1) &#123; //åˆ¤æ–­æ²¡æœ‰é—®å· return "æ— å‚æ•°" &#125; let total = arr[1].split("&amp;"); for (let i = 0; i &lt; total.length; i++) &#123; let single = total[i].split("="); if (single[0] == '') &#123; //åˆ¤æ–­æœ‰ï¼Ÿä½†æ˜¯æ²¡æœ‰å‚æ•° return 'æ— å‚æ•°' &#125; if (!single[1]) &#123; obj[single[0]] = true; &#125; else &#123; if (obj[single[0]]) &#123; let concat if (!Array.isArray(obj[single[0]])) &#123; //åˆ¤æ–­æ˜¯å¦æ•°ç»„ concat = [obj[single[0]]] &#125; else &#123; concat = obj[single[0]]; &#125; concat.push(single[1]); concat = new Set(concat); concat = Array.from(concat) //æ•°ç»„åŽ»é‡ obj[single[0]] = concat &#125; else &#123; obj[single[0]] = decodeURI(single[1]) //è¿›è¡Œè½¬ç  &#125; &#125; &#125; return obj&#125;var url = 'http://www.baidu.com/?user=huixin&amp;id=123&amp;id=456&amp;city=%E5%8C%97%E4%BA%AC&amp;enabled';var params = parseParam(url)console.log(params) å®žçŽ°ä¸€ä¸ªç®€å•çš„æ¨¡ç‰ˆå¼•æ“Žï¼šä¾‹å¦‚ï¼šæˆ‘å«a,å¹´é¾„bï¼Œæ€§åˆ«cï¼› let data = { name: â€˜å°æ˜Žâ€™, age: 18, } æ²¡æœ‰å®šä¹‰çš„è¿”å›žundefined 12345678910111213141516171819202122232425262728let template = 'æˆ‘æ˜¯&#123;name&#125;ï¼Œå¹´é¾„&#123;age&#125;ï¼Œæ€§åˆ«&#123;sex&#125;';let data = &#123; name: 'å°æ˜Ž', age: 18,&#125;const reg= /(&#123;([a-zA-Z]+)&#125;)/g;var r= '',regrounp=&#123;&#125;;while( r = reg.exec(template) )&#123; Object.defineProperty(regrounp,r[2],&#123; enumerable:true, value:r[2] &#125;)&#125;var render = (template,regrounp)=&gt;&#123; var result=''; for( key in regrounp)&#123; if(data[key] == undefined)&#123; result = (result || template).replace(new RegExp(`&#123;$&#123;regrounp[key]&#125;&#125;`,"g"),undefined); &#125;else&#123; result = (result || template).replace(new RegExp(`&#123;$&#123;regrounp[key]&#125;&#125;`,"g"),data[key]); &#125; &#125; return result&#125;let newtemple = render(template, regrounp);console.log(newtemple) // ç»“æžœï¼š æˆ‘æ˜¯å°æ˜Žï¼Œå¹´é¾„18ï¼Œæ€§åˆ«undefined å¯¹äºŽ{}è¿™æ ·å£°æ˜Žçš„å¯¹è±¡ï¼Œå¯ä»¥ç›´æŽ¥æžšä¸¾ï¼ŒObject.definePropertyå£°æ˜Žå‡ºçš„å¯¹è±¡ï¼Œå¦‚æžœä¸å®šä¹‰enumerable:trueçš„è¯ï¼Œæ˜¯ä¸èƒ½ç”¨for-in æžšä¸¾çš„ã€‚ è¿™é‡Œæœ‰ä¸€ç‰‡å¾ˆå¥½çš„æ–‡ç«  æŽ¨è ç¼–å†™ä¸€ä¸ªç®€å•çš„JavaScriptæ¨¡æ¿å¼•æ“Ž å¦‚ä½•å¿«é€Ÿè®©å­—ç¬¦ä¸²å˜æˆå·²åƒä¸ºç²¾åº¦çš„æ•°å­—1234567891011121314function exchange(num) &#123; num += ''; //è½¬æˆå­—ç¬¦ä¸² if (num.length &lt;= 3) &#123; return num; &#125; num = num.replace(/\d&#123;1,3&#125;(?=(\d&#123;3&#125;)+$)/g, (v) =&gt; &#123; console.log(v) return v + ','; &#125;); return num;&#125;console.log(exchange(1234567)); å®žçŽ° JS å¯¹è±¡çš„æ·±æ‹·è´æ·±æ‹·è´å°±æ˜¯åœ¨æ‹·è´æ•°æ®çš„æ—¶å€™ï¼Œå°†æ•°æ®çš„æ‰€æœ‰å¼•ç”¨ç»“æž„éƒ½æ‹·è´ä¸€ä»½ã€‚ç®€å•çš„è¯´å°±æ˜¯ï¼Œåœ¨å†…å­˜ä¸­å­˜åœ¨ä¸¤ä¸ªæ•°æ®ç»“æž„å®Œå…¨ç›¸åŒåˆç›¸äº’ç‹¬ç«‹çš„æ•°æ®ï¼Œå°†å¼•ç”¨åž‹ç±»åž‹è¿›è¡Œå¤åˆ¶ï¼Œè€Œä¸æ˜¯åªå¤åˆ¶å…¶å¼•ç”¨å…³ç³»ã€‚åˆ†æžä¸‹æ€Žä¹ˆåš æ·±æ‹·è´ ï¼š é¦–å…ˆå‡è®¾æ·±æ‹·è´è¿™ä¸ªæ–¹æ³•å·²ç»å®Œæˆï¼Œä¸º deepClo è¦æ‹·è´ä¸€ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬è‚¯å®šè¦åŽ»éåŽ†å®ƒçš„å±žæ€§ï¼Œå¦‚æžœè¿™ä¸ªå¯¹è±¡çš„å±žæ€§ä»æ˜¯å¯¹è±¡ï¼Œç»§ç»­ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æ­¤å¾€å¤ 1234567891011121314151617181920function deepClo(o1, o2) &#123; for (let k in o2) &#123; if (typeof o2[k] === 'object') &#123; o1[k] = &#123;&#125;; deepClo(o1[k], o2[k]); &#125; else &#123; o1[k] = o2[k]; &#125; &#125;&#125;// æµ‹è¯•ç”¨ä¾‹let obj = &#123; a: 1, b: [1, 2, 3], c: &#123;&#125;&#125;;let emptyObj = Object.create(null);deepClo(emptyObj, obj);console.log(emptyObj.a == obj.a);console.log(emptyObj.b == obj.b); é€’å½’å®¹æ˜“é€ æˆçˆ†æ ˆï¼Œå°¾éƒ¨è°ƒç”¨å¯ä»¥è§£å†³é€’å½’çš„è¿™ä¸ªé—®é¢˜ï¼ŒChrome çš„ V8 å¼•æ“Žåšäº†å°¾éƒ¨è°ƒç”¨ä¼˜åŒ–ï¼Œæˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™ä¹Ÿè¦æ³¨æ„å°¾éƒ¨è°ƒç”¨å†™æ³•ã€‚é€’å½’çš„çˆ†æ ˆé—®é¢˜å¯ä»¥é€šè¿‡å°†é€’å½’æ”¹å†™æˆæžšä¸¾çš„æ–¹å¼æ¥è§£å†³ï¼Œå°±æ˜¯é€šè¿‡foræˆ–è€…whileæ¥ä»£æ›¿é€’å½’ã€‚ æ±‚æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼ˆå…”å­æ•°åˆ—ï¼‰ 1,1,2,3,5,8,13,21,34,55,89â€¦ä¸­çš„ç¬¬ n é¡¹1234567891011121314151617181920212223242526272829303132ä¸‹é¢çš„ä»£ç ä¸­countè®°å½•é€’å½’çš„æ¬¡æ•°ï¼Œæˆ‘ä»¬çœ‹ä¸‹ä¸¤ç§å·®å¼‚æ€§çš„ä»£ç ä¸­çš„countçš„å€¼ï¼š let count = 0; function fn(n) &#123; let cache = &#123;&#125;; function _fn(n) &#123; if (cache[n]) &#123; return cache[n]; &#125; count++; if (n == 1 || n == 2) &#123; return 1; &#125; let prev = _fn(n - 1); cache[n - 1] = prev; let next = _fn(n - 2); cache[n - 2] = next; return prev + next; &#125; return _fn(n);&#125;let count2 = 0;function fn2(n) &#123; count2++; if (n == 1 || n == 2) &#123; return 1; &#125; return fn2(n - 1) + fn2(n - 2);&#125;console.log(fn(20), count); // 6765 20console.log(fn2(20), count2); // 6765 13529 ç®—æ³•çš„æ•ˆçŽ‡ç®—æ³•çš„å¥½åå¯ä»¥é€šè¿‡ç®—æ³•å¤æ‚åº¦æ¥è¡¡é‡ï¼Œç®—æ³•å¤æ‚åº¦åŒ…æ‹¬æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ä¸¤ä¸ªã€‚æ—¶é—´å¤æ‚åº¦ç”±äºŽå¥½ä¼°ç®—ã€å¥½è¯„ä¼°ç­‰ç‰¹ç‚¹ï¼Œæ˜¯é¢è¯•ä¸­è€ƒæŸ¥çš„é‡ç‚¹ã€‚ç©ºé—´å¤æ‚åº¦åœ¨é¢è¯•ä¸­è€ƒæŸ¥å¾—ä¸å¤šã€‚å¸¸è§çš„æ—¶é—´å¤æ‚åº¦æœ‰ï¼š å¸¸æ•°é˜¶ O(1) å¯¹æ•°é˜¶ O(logN) çº¿æ€§é˜¶ O(n) çº¿æ€§å¯¹æ•°é˜¶ O(nlogN) å¹³æ–¹é˜¶ O(n^2) ç«‹æ–¹é˜¶ O(n^3) !kæ¬¡æ–¹é˜¶ O(n^k) æŒ‡æ•°é˜¶ O(2^n) éšç€é—®é¢˜è§„æ¨¡ n çš„ä¸æ–­å¢žå¤§ï¼Œä¸Šè¿°æ—¶é—´å¤æ‚åº¦ä¸æ–­å¢žå¤§ï¼Œç®—æ³•çš„æ‰§è¡Œæ•ˆçŽ‡è¶Šä½Žã€‚ä¸€èˆ¬åšç®—æ³•å¤æ‚åº¦åˆ†æžçš„æ—¶å€™ï¼Œéµå¾ªä¸‹é¢çš„æŠ€å·§ï¼š çœ‹çœ‹æœ‰å‡ é‡å¾ªçŽ¯ï¼Œä¸€èˆ¬æ¥è¯´ä¸€é‡å°±æ˜¯O(n)ï¼Œä¸¤é‡å°±æ˜¯ O(n^2)ï¼Œä»¥æ­¤ç±»æŽ¨ å¦‚æžœæœ‰äºŒåˆ†ï¼Œåˆ™ä¸ºO(logN) ä¿ç•™æœ€é«˜é¡¹ï¼ŒåŽ»é™¤å¸¸æ•°é¡¹ é¢˜ç›®ï¼šåˆ†æžä¸‹é¢ä»£ç çš„ç®—æ³•å¤æ‚åº¦ 123456let i =0; // è¯­å¥æ‰§è¡Œä¸€æ¬¡ while (i &lt; n) &#123; // è¯­å¥æ‰§è¡Œ n æ¬¡ console.log(`Current i is $&#123;i&#125;`); //è¯­å¥æ‰§è¡Œ n æ¬¡ i++; // è¯­å¥æ‰§è¡Œ n æ¬¡&#125;æ ¹æ®æ³¨é‡Šå¯ä»¥å¾—åˆ°ï¼Œç®—æ³•å¤æ‚åº¦ä¸º1 + n + n + n = 1 + 3nï¼ŒåŽ»é™¤å¸¸æ•°é¡¹ï¼Œä¸ºO(n)ã€‚ æ›´å¤šé˜…è¯»ï¼šåœ¨ JavaScript ä¸­å­¦ä¹ æ•°æ®ç»“æž„ä¸Žç®—æ³•æˆ‘æŽ¥è§¦è¿‡çš„å‰ç«¯æ•°æ®ç»“æž„ä¸Žç®—æ³•]]></content>
      <categories>
        <category>ç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>ES6</tag>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°ç¨‹åºä¹‹æ—…â€”è®¤è¯†ä¸€ä¸‹]]></title>
    <url>%2Fblog%2F2018%2F05%2F22%2F%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B9%8B%E6%97%85%E2%80%94-%E8%AE%A4%E8%AF%86%E4%B8%80%E4%B8%8B%2F</url>
    <content type="text"><![CDATA[å°ç¨‹åºæ˜¯ä¸€ç§æ–°çš„å¼€æ”¾èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿåœ°å¼€å‘ä¸€ä¸ªå°ç¨‹åºã€‚å°ç¨‹åºå¯ä»¥åœ¨å¾®ä¿¡å†…è¢«ä¾¿æ·åœ°èŽ·å–å’Œä¼ æ’­ï¼ŒåŒæ—¶å…·æœ‰å‡ºè‰²çš„ä½¿ç”¨ä½“éªŒã€‚ ç›®å½•ç»“æž„ page â€” é¡¹ç›®æ‰€æœ‰çš„é¡µé¢æ¨¡æ¿ utils â€” å…¬å…±jså·¥å…· app.js â€” å¯åŠ¨å…¥å£æ–‡ä»¶ app.wxss â€” é¡¹ç›®çš„å…¨å±€æ ·å¼æ–‡ä»¶ app.json â€” é¡¹ç›®çš„é…ç½®æ–‡ä»¶ åœ¨app.jsoné‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°pageä¸‹é¢å°±æ˜¯æˆ‘ä»¬å¯ä»¥é…ç½®çš„é¡µé¢è·¯å¾„ï¼Œpages/index/indexè¿™ä¸ªè·¯å¾„å°±å¯ä»¥è®¿é—®index.wxmlä¸‹çš„ä¸œè¥¿ï¼Œæ¯ä¸€ä¸ªé¡µé¢éƒ½æœ‰â€œä¸‰å¤§ä»¶â€â€”jsã€wxmlã€wxssç»„æˆã€‚ ä¸‹é¢å¼€å§‹æˆ‘ä»¬å°æ —å­ï¼š æ–°å¢žä¸€ä¸ªviewï¼Œwxmlä¸Žwxsså°±æ˜¯æˆ‘ä»¬çš„HTMLå’Œcss,éœ€è¦å¢žåŠ å’Œä¿®æ”¹æ ·å¼çš„è¯å°±ç›´æŽ¥ä¿®æ”¹å°±å¥½äº†ã€‚ 12345678910111213141516&lt;!--index.wxml--&gt;&lt;view class="container"&gt; &lt;view class="userinfo"&gt; &lt;button wx:if="&#123;&#123;!hasUserInfo &amp;&amp; canIUse&#125;&#125;" open-type="getUserInfo" bindgetuserinfo="getUserInfo"&gt; èŽ·å–å¤´åƒæ˜µç§° &lt;/button&gt; &lt;block wx:else&gt; &lt;image bindtap="bindViewTap" class="userinfo-avatar" src="&#123;&#123;userInfo.avatarUrl&#125;&#125;" background-size="cover"&gt;&lt;/image&gt; &lt;text class="userinfo-nickname"&gt;&#123;&#123;userInfo.nickName&#125;&#125;&lt;/text&gt; &lt;/block&gt; &lt;/view&gt; &lt;view class="usermotto"&gt; &lt;text class="user-motto"&gt;&#123;&#123;motto&#125;&#125;&lt;/text&gt; &lt;/view&gt; &lt;view&gt; &lt;text class="demo"&gt;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å°æ —å­&lt;/text&gt; &lt;/view&gt;&lt;/view&gt; 12345678910111213141516171819202122232425/**index.wxss**/.userinfo &#123; display: flex; flex-direction: column; align-items: center;&#125;.userinfo-avatar &#123; width: 128rpx; height: 128rpx; margin: 20rpx; border-radius: 50%;&#125;.userinfo-nickname &#123; color: #aaa;&#125;.usermotto &#123; margin-top: 200px;&#125;/*æ–°å¢žåŠ çš„ */.demo&#123; color:blueviolet&#125; ä¿å­˜å¥½å°±å¯ä»¥çœ‹åˆ°æ•ˆæžœäº†ã€‚æŽ¥ä¸‹æ¥æˆ‘ä»¬è¯•ä¸€ä¸‹åŠ¨æ€æ”¹å˜å†…å®¹ï¼Œå…ˆæ¥ä»‹ç»ä¸‹jsæ–‡ä»¶ä¸‹çš„ä¸€äº›å‡½æ•°æ¨¡å—æ˜¯ä»€ä¹ˆæ„æ€ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354//index.js//èŽ·å–åº”ç”¨å®žä¾‹const app = getApp()Page(&#123; data: &#123; // å½“å‰é¡µé¢çš„æ‰€æœ‰æ•°æ® motto: 'æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå°ç¨‹åºã€‚', userInfo: &#123;&#125;, hasUserInfo: false, canIUse: wx.canIUse('button.open-type.getUserInfo') &#125;, //äº‹ä»¶å¤„ç†å‡½æ•° bindViewTap: function() &#123; wx.navigateTo(&#123; // é¡µé¢è·³è½¬å‡½æ•° url: '../logs/logs' &#125;) &#125;, onLoad: function () &#123; // åŠ è½½é¡µé¢æ—¶è§¦å‘å‡½æ•°é›†åˆ if (app.globalData.userInfo) &#123; this.setData(&#123; userInfo: app.globalData.userInfo, hasUserInfo: true &#125;) &#125; else if (this.data.canIUse)&#123; // ç”±äºŽ getUserInfo æ˜¯ç½‘ç»œè¯·æ±‚ï¼Œå¯èƒ½ä¼šåœ¨ Page.onLoad ä¹‹åŽæ‰è¿”å›ž // æ‰€ä»¥æ­¤å¤„åŠ å…¥ callback ä»¥é˜²æ­¢è¿™ç§æƒ…å†µ app.userInfoReadyCallback = res =&gt; &#123; this.setData(&#123; userInfo: res.userInfo, hasUserInfo: true &#125;) &#125; &#125; else &#123; // åœ¨æ²¡æœ‰ open-type=getUserInfo ç‰ˆæœ¬çš„å…¼å®¹å¤„ç† wx.getUserInfo(&#123; success: res =&gt; &#123; app.globalData.userInfo = res.userInfo this.setData(&#123; userInfo: res.userInfo, hasUserInfo: true &#125;) &#125; &#125;) &#125; &#125;, getUserInfo: function(e) &#123; //èŽ·å–ç”¨æˆ·ä¿¡æ¯ console.log(e) app.globalData.userInfo = e.detail.userInfo this.setData(&#123; userInfo: e.detail.userInfo, hasUserInfo: true &#125;) &#125;&#125;) å…·ä½“å‡½æ•°å¯¹åº”å«ä¹‰ä¹Ÿå¯ä»¥å‚è€ƒå¾®ä¿¡å…¬ä¼—å¹³å°å¼€å‘ã€‚ å…ˆåŽ»wxmlæ–‡ä»¶ä¸‹å¢žåŠ ä¸€ä¸ªæŒ‰&lt;button class=&#39;primary&#39; bindtap=&#39;changeDemo&#39;&gt;ç‚¹å‡»æ”¹å˜çŠ¶æ€&lt;/button&gt;,æŽ¥ç€åŽ»jsæ–‡ä»¶ä¸‹æ·»åŠ åˆå§‹æ•°æ®ï¼Œå’Œç‚¹å‡»çš„äº‹ä»¶å‡½æ•°ã€‚123456789101112131415161718&lt;!--index.wxml--&gt;&lt;view class="container"&gt; &lt;view class="userinfo"&gt; &lt;button wx:if="&#123;&#123;!hasUserInfo &amp;&amp; canIUse&#125;&#125;" open-type="getUserInfo" bindgetuserinfo="getUserInfo"&gt; èŽ·å–å¤´åƒæ˜µç§° &lt;/button&gt; &lt;block wx:else&gt; &lt;image bindtap="bindViewTap" class="userinfo-avatar" src="&#123;&#123;userInfo.avatarUrl&#125;&#125;" background-size="cover"&gt;&lt;/image&gt; &lt;text class="userinfo-nickname"&gt;&#123;&#123;userInfo.nickName&#125;&#125;&lt;/text&gt; &lt;/block&gt; &lt;/view&gt; &lt;view class="usermotto"&gt; &lt;text class="user-motto"&gt;&#123;&#123;motto&#125;&#125;&lt;/text&gt; &lt;/view&gt; &lt;view&gt; &lt;text class="demo"&gt;&#123;&#123;demotext&#125;&#125;&lt;/text&gt; &lt;/view&gt; &lt;button class='primary' bindtap='changeDemo'&gt;ç‚¹å‡»æ”¹å˜çŠ¶æ€&lt;/button&gt;&lt;/view&gt; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061//index.js//èŽ·å–åº”ç”¨å®žä¾‹const app = getApp()Page(&#123; data: &#123; // å½“å‰é¡µé¢çš„æ‰€æœ‰æ•°æ® motto: 'æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå°ç¨‹åºã€‚', demotext:'å½“å‰æˆ‘çš„çŠ¶æ€', // æ–°å¢žåˆå§‹å€¼ userInfo: &#123;&#125;, hasUserInfo: false, canIUse: wx.canIUse('button.open-type.getUserInfo') &#125;, //äº‹ä»¶å¤„ç†å‡½æ•° bindViewTap: function() &#123; wx.navigateTo(&#123; // é¡µé¢è·³è½¬å‡½æ•° url: '../logs/logs' &#125;) &#125;, //æ–°å¢žåŠ çš„äº‹ä»¶ changeDemo:function()&#123; this.setDate(&#123; demotext: 'ç‚¹å‡»ä¹‹åŽå°±æ”¹å˜äº†æˆ‘çš„çŠ¶æ€', &#125;) &#125;, onLoad: function () &#123; // åŠ è½½é¡µé¢æ—¶è§¦å‘å‡½æ•°é›†åˆ if (app.globalData.userInfo) &#123; this.setData(&#123; userInfo: app.globalData.userInfo, hasUserInfo: true &#125;) &#125; else if (this.data.canIUse)&#123; // ç”±äºŽ getUserInfo æ˜¯ç½‘ç»œè¯·æ±‚ï¼Œå¯èƒ½ä¼šåœ¨ Page.onLoad ä¹‹åŽæ‰è¿”å›ž // æ‰€ä»¥æ­¤å¤„åŠ å…¥ callback ä»¥é˜²æ­¢è¿™ç§æƒ…å†µ app.userInfoReadyCallback = res =&gt; &#123; this.setData(&#123; userInfo: res.userInfo, hasUserInfo: true &#125;) &#125; &#125; else &#123; // åœ¨æ²¡æœ‰ open-type=getUserInfo ç‰ˆæœ¬çš„å…¼å®¹å¤„ç† wx.getUserInfo(&#123; success: res =&gt; &#123; app.globalData.userInfo = res.userInfo this.setData(&#123; userInfo: res.userInfo, hasUserInfo: true &#125;) &#125; &#125;) &#125; &#125;, getUserInfo: function(e) &#123; //èŽ·å–ç”¨æˆ·ä¿¡æ¯ console.log(e) app.globalData.userInfo = e.detail.userInfo this.setData(&#123; userInfo: e.detail.userInfo, hasUserInfo: true &#125;) &#125;&#125;) åœ¨wxmlæ–‡ä»¶é‡ŒåŠ å…¥if-elseçš„åˆ¤æ–­ï¼š12345678910111213141516171819&lt;!--index.wxml--&gt;&lt;view class="container"&gt; &lt;view class="userinfo"&gt; &lt;button wx:if="&#123;&#123;!hasUserInfo &amp;&amp; canIUse&#125;&#125;" open-type="getUserInfo" bindgetuserinfo="getUserInfo"&gt; èŽ·å–å¤´åƒæ˜µç§° &lt;/button&gt; &lt;block wx:else&gt; &lt;image bindtap="bindViewTap" class="userinfo-avatar" src="&#123;&#123;userInfo.avatarUrl&#125;&#125;" background-size="cover"&gt;&lt;/image&gt; &lt;text class="userinfo-nickname"&gt;&#123;&#123;userInfo.nickName&#125;&#125;&lt;/text&gt; &lt;/block&gt; &lt;/view&gt; &lt;view class="usermotto"&gt; &lt;text class="user-motto"&gt;&#123;&#123;motto&#125;&#125;&lt;/text&gt; &lt;/view&gt; &lt;view&gt; &lt;text wx:if="&#123;&#123;demotext=='å½“å‰æˆ‘çš„çŠ¶æ€'&#125;&#125;" class="demo"&gt;&#123;&#123;demotext&#125;&#125;&lt;/text&gt; &lt;text wx:else class="demo"&gt;&#123;&#123;demovalue&#125;&#125;&lt;/text&gt; &lt;/view&gt; &lt;button class='primary' bindtap='changeDemo'&gt;ç‚¹å‡»æ”¹å˜çŠ¶æ€&lt;/button&gt;&lt;/view&gt; 123456789101112// index.jsPage(&#123; data: &#123; // å½“å‰é¡µé¢çš„æ‰€æœ‰æ•°æ® motto: 'æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå°ç¨‹åºã€‚', demotext:'å½“å‰æˆ‘çš„çŠ¶æ€', // æ–°å¢žåˆå§‹å€¼ demovalue:'ifåˆ¤æ–­çš„æ•°æ®', userInfo: &#123;&#125;, hasUserInfo: false, canIUse: wx.canIUse('button.open-type.getUserInfo') &#125;, &#125;) æŽ¥ä¸‹æ¥æ˜¯forå¾ªçŽ¯éåŽ†æ•°æ®ï¼š123456789101112131415161718192021&lt;!--index.wxml--&gt;&lt;view class="container"&gt; &lt;view class="userinfo"&gt; &lt;button wx:if="&#123;&#123;!hasUserInfo &amp;&amp; canIUse&#125;&#125;" open-type="getUserInfo" bindgetuserinfo="getUserInfo"&gt; èŽ·å–å¤´åƒæ˜µç§° &lt;/button&gt; &lt;block wx:else&gt; &lt;image bindtap="bindViewTap" class="userinfo-avatar" src="&#123;&#123;userInfo.avatarUrl&#125;&#125;" background-size="cover"&gt;&lt;/image&gt; &lt;text class="userinfo-nickname"&gt;&#123;&#123;userInfo.nickName&#125;&#125;&lt;/text&gt; &lt;/block&gt; &lt;/view&gt; &lt;view class="usermotto"&gt; &lt;text class="user-motto"&gt;&#123;&#123;motto&#125;&#125;&lt;/text&gt; &lt;/view&gt; &lt;view&gt; &lt;text wx:if="&#123;&#123;demotext=='å½“å‰æˆ‘çš„çŠ¶æ€'&#125;&#125;" class="demo"&gt;&#123;&#123;demotext&#125;&#125;&lt;/text&gt; &lt;text wx:else class="demo"&gt;&#123;&#123;demovalue&#125;&#125;&lt;/text&gt; &lt;/view&gt; &lt;button class='primary' bindtap='changeDemo'&gt;ç‚¹å‡»æ”¹å˜çŠ¶æ€&lt;/button&gt; &lt;view wx:for="&#123;&#123;fordata&#125;&#125;" wx:for-index="id" wx:for-item="itemvalue"&gt; ID:&#123;&#123;id&#125;&#125;å§“åï¼š&#123;&#123;itemvalue.name&#125;&#125;----æ•°é‡ï¼š&#123;&#123;itemvalue.num&#125;&#125; &lt;/view&gt;&lt;/view&gt; 12345678910111213// index.jsPage(&#123; data: &#123; // å½“å‰é¡µé¢çš„æ‰€æœ‰æ•°æ® motto: 'æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå°ç¨‹åºã€‚', demotext:'å½“å‰æˆ‘çš„çŠ¶æ€', // æ–°å¢žåˆå§‹å€¼ demovalue:'ifåˆ¤æ–­çš„æ•°æ®', fordata: [&#123; name: 'æµ‹è¯•1', num: 12 &#125;, &#123; name: 'æµ‹è¯•2', num: 22 &#125;, &#123; name: 'æµ‹è¯•3', num: 32 &#125;], userInfo: &#123;&#125;, hasUserInfo: false, canIUse: wx.canIUse('button.open-type.getUserInfo') &#125;, &#125;) æœ¬åœ°æ•°æ®éƒ½æ²¡æœ‰é—®é¢˜äº†ï¼Œé‚£ä¹ˆæŽ¥ä¸‹æ¥å°±æ˜¯Ajax è·¨åŸŸè¯·æ±‚,åœ¨å°ç¨‹åºé‡Œé¢æˆ‘ä»¬ä¸ç”¨è€ƒè™‘é‚£ä¹ˆå¤šï¼Œå› ä¸ºä»–ä»¬å·²ç»ä¸ºæˆ‘ä»¬å°è£…äº†ä¸€å¥—æ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨å°±å¥½äº†ï¼Œå‚è€ƒå‘èµ·ç½‘ç»œè¯·æ±‚wx.request(OBJECT) ç¤ºä¾‹ä»£ç ï¼š12345678910111213wx.request(&#123; url: 'test.php', //ä»…ä¸ºç¤ºä¾‹ï¼Œå¹¶éžçœŸå®žçš„æŽ¥å£åœ°å€ data: &#123; x: '' , y: '' &#125;, header: &#123; 'content-type': 'application/json' // é»˜è®¤å€¼ &#125;, success: function(res) &#123; console.log(res.data) &#125;&#125;) æœ€åŽæˆ‘ä»¬æ¥ä¸€ä¸ªåŠ¨æ€èŽ·å–æœ¬åœ°å›¾ç‰‡ä¸Šä¼ ï¼Œä½¿ç”¨æ–‡æ¡£æä¾›çš„æ–¹æ³•èŽ·å–æœ¬åœ°ç›¸å†Œwx.chooseImage(OBJECT),åœ¨jsæ–‡ä»¶é‡Œæ–°å¢žä¸€ä¸ªæ–¹æ³•ã€‚12345678910111213141516onLoad: function () &#123; // åŠ è½½é¡µé¢æ—¶è§¦å‘å‡½æ•°é›†åˆ var that = this; wx.chooseImage(&#123; // èŽ·å–æœ¬åœ°å›¾ç‰‡ count: 1, // é»˜è®¤9 sizeType: ['original', 'compressed'], // å¯ä»¥æŒ‡å®šæ˜¯åŽŸå›¾è¿˜æ˜¯åŽ‹ç¼©å›¾ï¼Œé»˜è®¤äºŒè€…éƒ½æœ‰ sourceType: ['album', 'camera'], // å¯ä»¥æŒ‡å®šæ¥æºæ˜¯ç›¸å†Œè¿˜æ˜¯ç›¸æœºï¼Œé»˜è®¤äºŒè€…éƒ½æœ‰ success: function (res) &#123; // è¿”å›žé€‰å®šç…§ç‰‡çš„æœ¬åœ°æ–‡ä»¶è·¯å¾„åˆ—è¡¨ï¼ŒtempFilePathå¯ä»¥ä½œä¸ºimgæ ‡ç­¾çš„srcå±žæ€§æ˜¾ç¤ºå›¾ç‰‡ var tempFilePaths = res.tempFilePaths console.log(tempFilePaths) that.setData(&#123; demoImg: tempFilePaths &#125;); &#125; &#125;)&#125; wxmlæ–‡ä»¶ï¼š12345678910111213141516171819202122&lt;!--index.wxml--&gt;&lt;view class="container"&gt; &lt;view class="userinfo"&gt; &lt;button wx:if="&#123;&#123;!hasUserInfo &amp;&amp; canIUse&#125;&#125;" open-type="getUserInfo" bindgetuserinfo="getUserInfo"&gt; èŽ·å–å¤´åƒæ˜µç§° &lt;/button&gt; &lt;block wx:else&gt; &lt;image wx:if="&#123;&#123;demoImg!=null&#125;&#125;" src='&#123;&#123;demoImg&#125;&#125;'&gt;&lt;/image&gt; &lt;image wx:else bindtap="bindViewTap" class="userinfo-avatar" src="&#123;&#123;userInfo.avatarUrl&#125;&#125;" background-size="cover"&gt;&lt;/image&gt; &lt;text class="userinfo-nickname"&gt;&#123;&#123;userInfo.nickName&#125;&#125;&lt;/text&gt; &lt;/block&gt; &lt;/view&gt; &lt;view class="usermotto"&gt; &lt;text class="user-motto"&gt;&#123;&#123;motto&#125;&#125;&lt;/text&gt; &lt;/view&gt; &lt;view&gt; &lt;text wx:if="&#123;&#123;demotext=='å½“å‰æˆ‘çš„çŠ¶æ€'&#125;&#125;" class="demo"&gt;&#123;&#123;demotext&#125;&#125;&lt;/text&gt; &lt;text wx:else class="demo"&gt;&#123;&#123;demovalue&#125;&#125;&lt;/text&gt; &lt;/view&gt; &lt;button class='primary' bindtap='changeDemo'&gt;ç‚¹å‡»æ”¹å˜çŠ¶æ€&lt;/button&gt; &lt;view wx:key="id" wx:for="&#123;&#123;fordata&#125;&#125;" wx:for-index="id" wx:for-item="itemvalue"&gt; ID:&#123;&#123;id&#125;&#125;å§“åï¼š&#123;&#123;itemvalue.name&#125;&#125;----æ•°é‡ï¼š&#123;&#123;itemvalue.num&#125;&#125; &lt;/view&gt;&lt;/view&gt; æ€»ç»“è¿™äº›éƒ½æ˜¯ç®€å•çš„é¡µé¢æ•°æ®æ“ä½œå’ŒèŽ·å–ï¼Œé‡åˆ°çœŸå®žåœºæ™¯éœ€è¦ç‰¹æ®Šå¯¹å¾…ï¼ŒæŽ¥ä¸‹å°±ä»¥å®žä¾‹ä¸ºä¸»ã€‚]]></content>
      <categories>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mongodbæ•°æ®åº“çš„ä½¿ç”¨]]></title>
    <url>%2Fblog%2F2018%2F05%2F21%2Fmongodb%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[çªç„¶é—´éœ€è¦ä½¿ç”¨è¿™ä¸ªä¸œè¥¿äº†ï¼Œè°ƒè¯•è¿˜é‡åˆ°äº†é—®é¢˜ï¼Œæ‰€ä»¥è¿˜æ˜¯ç®€å•äº†è§£ä¸€ä¸‹ä»–å§ã€‚ ä¸€ã€mongodbçš„å¼€å¯å’Œå…³é—­1. æŸ¥æ‰¾mongodæ˜¯å¦å¯ç”¨which mongod 2. å¯åŠ¨mongodbæŒ‡å®špath å’Œlogæ—¥å¿—mongod --dbpath /data2/db --port=27017 --fork /data2/db/log/mongod.log 3. å…³é—­æ•°æ®åº“mongod --shutdown äºŒã€mongodbçš„æ“ä½œ1. è¿žæŽ¥æœåŠ¡å™¨mongod 115.29.137.34:27017 2. ä½¿ç”¨æ•°æ®åº“(ä¸å­˜åœ¨çš„æ•°æ®åº“ä¹Ÿå¯ä»¥ä½¿ç”¨,æ’å…¥æ•°æ®ä¹‹åŽä¼šè‡ªåŠ¨ä¿å­˜)use mydb 3. æƒé™ç™»é™†db.auth(&#39;username&#39;,&#39;password&#39;) 4. å±•ç¤ºæ•°æ®åº“åˆ—è¡¨show dbs 5. æ’å…¥æ•°æ®(ç±»ä¼¼äºŽmysqlçš„è¡¨)db.users.insert({&#39;name&#39;:&#39;xiaomo&#39;})db.users.insert({&#39;name&#39;:&#39;xiaoming&#39;,&#39;age&#39;:25})db.users.insert({&#39;name&#39;:&#39;xiaoming&#39;,&#39;age&#39;:24,&#39;sex&#39;:&#39;å¥³&#39;}) 6. æŸ¥è¯¢é›†åˆ(å‰ææ˜¯useäº†ä¸€ä¸ªæ•°æ®åº“)æœ‰ä¸€ä¸ªSystem.indexes æ˜¯ç´¢å¼•show collections 7. ä¸å¸¦æ¡ä»¶æŸ¥è¯¢db.users.find() 8. å¸¦æ¡ä»¶æŸ¥è¯¢(å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡)db.users.find({&#39;name&#39;:&#39;xiaomo&#39;}) 9. æ›´æ–°æ•°æ®(æœ‰ä¸‰ä¸ªå‚æ•°,1:æŸ¥è¯¢æ¡ä»¶,2:æ›´æ–°çš„å†…å®¹ 3ï¼šæ›´æ–°çš„é…ç½®)db.users.update({&#39;name&#39;:&#39;xiaomo&#39;,{$set:{&#39;name:&#39;xm}})ä¿®æ”¹æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€æ¡æ•°æ®db.users.update({&#39;name&#39;:&#39;xiaomo&#39;,{$set:{&#39;name:&#39;xm}},{multi:true})ä¿®æ”¹æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„æ•°æ® 10. ä¿å­˜æ•°æ®(åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¿…é¡»è¦ä¼ idï¼ŒåŽé¢æ˜¯è¦ä¿®æ”¹çš„æ•°æ®)db.users.save({&#39;id&#39;:&#39;objectId(574710a97a3afd63cde56a49)&#39;,&#39;age&#39;:30}) 11. åˆ é™¤æ•°æ®(1:æ¡ä»¶ 2 æ˜¯å¦åˆ é™¤æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„)db.users.remove({&#39;name&#39;:&#39;xiaomoing&#39;},true) 12. åˆ é™¤é›†åˆdb.users.drop() ä¸‰ã€ä½¿ç”¨mongooseæ“ä½œæ•°æ®åº“1. æ¨¡å—çš„ä»‹ç»è¿žæŽ¥mongdodbçš„é©±åŠ¨ 2. é…ç½®å’Œé“¾æŽ¥npm install --save mongoose1234var mongoose = require('mongoose');&lt;!-- var uri = 'mongodb://username:password@hostname:port/databasename'; --&gt;var uri = 'mongodb://xiaomo:xiaomo@115.29.137.34:27017/admin';mongoose.connect(uri); 3. Model å’ŒShema12345678910111213141516171819202122232425262728293031 // model.jsvar Schema = mongoose.Schema, ObjectId = Schema.ObjectId;var BlogPost = new Schema(&#123; author : ObjectId, title : String, body : String, date : Date&#125;);//Modelmongoose.model('blog',Schema);var Comment = new Schema(&#123; name: &#123; type: String, default: 'hahaha' &#125;, age: &#123; type: Number, min: 18, index: true &#125;, bio: &#123; type: String, match: /[a-z]/ &#125;, date: &#123; type: Date, default: Date.now &#125;&#125;);// a setterComment.path('name').set(function (v) &#123; return capitalize(v);&#125;);// middlewareComment.pre('save', function (next) &#123; notify(this.get('email')); next();&#125;); 4. åˆ›å»ºæ–‡æ¡£1234567891011121314//insert.jsvar mongoose ï¼ require('mongoose');require('./model.js'); //æ‰§è¡Œvar Blog = mongoose.model('blog');var blog = new Blog(&#123; name:'xiaomo', age:25, bio:'don't know', date:new Date &#125;);book.save(function(err)&#123; console.log('save status:'+err); &#125;); 5. åˆ é™¤æ–‡æ¡£123456789101112var mongoose = require('mongoose');require('./model.js');var Blog = mongoose.model('blog');Blog.findOne(&#123;'name':'xiaomo'&#125;,function(err,doc)&#123; if(err)&#123; console.log(err) return; &#125; if(doc)&#123; doc.reomove();&#125; &#125;) 6. ç®€å•æŸ¥è¯¢12345678910var mongoose = require('mongoose');require('./model.js');var Blog = mongoose.model('blog');Blog.find(&#123;&#125;,function(err,doc)&#123; if(err)&#123; console.log(err) return; &#125; console.log('result',doc) &#125;) ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„ç»“æžœ12345678910var mongoose = require('mongoose');require('./model.js');var Blog = mongoose.model('blog');Blog.findOne(&#123;'name':'xiaomo'&#125;,function(err,doc)&#123; if(err)&#123; console.log(err) return; &#125; console.log('result',doc) &#125;) 7. æ¡ä»¶è¯­å¥123456789101112131415161718// condation.js var mongoose = require('mongoose'); require('./model.js'); var Blog = mongoose.model('blog'); //åå­—æ˜¯xiaomoæˆ–è€…xiaoming å¯ä»¥ç”¨$orå’Œ$and var condation = &#123; $or $and:[ &#123;'name':'xiaomo'&#125;, &#123;'name':'xiaoming'&#125; ] &#125; Blog.find(condation,function(err,doc)&#123; if(err)&#123; console.log(err) return; &#125; console.log('result',doc) &#125;) ä¸‰ã€åœ¨é¡¹ç›®ä¸­ä½¿ç”¨mongoose1. ç”Ÿæˆé¡¹ç›®koa koatest -e koatest 2. å®‰è£…ä¾èµ–cd koatest &amp;&amp; npm install 3. å®‰è£…mongoosenpm install --save mongoose 4. åˆ›å»ºæ¨¡åž‹123456789// models/users.server.model.jsvar mongoose = require('mongoose');var UserSchema = new mongoose.Schema(&#123; uid:Number, username:String, createTime:Date, lastLogin:Date &#125;)module.exports = mongoose.model('User',UserSchema); 5. åˆ›å»ºé…ç½®æ–‡ä»¶12345678910111213// config/config.jsmodule.exports=&#123; mongodb:'mongodb://xiaomo:xiaomo@115.29.137.34:27017/admin'&#125;//config/mongoose.jsvar mongoose = require('mongoose');var config = require('./config.js');module.exports=function()&#123; var db = mongoose.connect(config.mongodb); require('./../models/users.server.model.js'); return db;&#125; 6. æ“ä½œmongdodb ä»£ç 123456789101112//routers/users.jsvar router = require('koa-router')();var mongoose = require('mongoose');var User = mongoose.model('User');router.get('/', function *(next) &#123; //add var user = new User(&#123; uid: &#125;) this.body = yield User.find(&#123;&#125;);&#125;);module.exports = router; å—¯å—¯,å°±è¿™æ ·å§ï¼Œå®Œï¼]]></content>
      <categories>
        <category>mongoDB</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>mongoDB</tag>
        <tag>Node</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactå¼€å‘å¸¸ç”¨è®¾è®¡æ¨¡å¼-Flux]]></title>
    <url>%2Fblog%2F2018%2F05%2F18%2FReact%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-Flux%2F</url>
    <content type="text"><![CDATA[Flux æ˜¯ä¸€ç§æž„å»ºç”¨æˆ·ç•Œé¢çš„æž¶æž„è®¾è®¡æ¨¡å¼ã€‚å®ƒæ˜¯ç”± Facebook åœ¨å®ƒä»¬çš„ F8 å¼€å‘è€…å¤§ä¼šä¸ŠæŽ¨å‡ºçš„ã€‚åœ¨æ­¤ä¹‹åŽï¼Œè®¸å¤šå…¬å¸éƒ½é‡‡çº³äº†è¿™ä¸ªæƒ³æ³•ï¼Œè¿™ç§æ¨¡å¼ç”¨æ¥æž„å»ºå‰ç«¯åº”ç”¨ä¼¼ä¹Žéžå¸¸ä¸é”™ã€‚Flux é€šå¸¸å’Œ React æ­é…ä½¿ç”¨ã€‚React æ˜¯ Facebook å‘å¸ƒçš„å¦å¤–ä¸€ä¸ªåº“ã€‚åœ¨ æ—¥å¸¸å·¥ä½œ ä¸­ä½¿ç”¨çš„æ˜¯ React+Flux/Redux ï¼Œæ•¢è¯´è¿™ç§æž¶æž„çœŸçš„éžå¸¸ç®€å•å’Œçµæ´»ã€‚è¯¥æ¨¡å¼æœ‰åŠ©äºŽæ›´å¿«åœ°åˆ›å»ºåº”ç”¨ï¼ŒåŒæ—¶ä½¿ä»£ç ä¿æŒè‰¯å¥½çš„ç»„ç»‡ç»“æž„ã€‚ Fluxæˆ‘ç—´è¿·äºŽå°†ä»£ç å˜å¾—ç®€å•ã€‚æ³¨æ„ï¼Œæˆ‘è¯´çš„ä¸æ˜¯ä»£ç é‡æ›´å°‘ï¼Œè€Œæ˜¯ç®€å•ã€‚å› ä¸ºä»£ç é‡æ›´å°‘å¹¶ä¸ä¸€å®šæ„å‘³ç€ç®€å•ã€‚æˆ‘ç›¸ä¿¡è½¯ä»¶è¡Œä¸šä¸­å¤§éƒ¨åˆ†é—®é¢˜éƒ½æºè‡ªä¸å¿…è¦çš„å¤æ‚åº¦ã€‚å¤æ‚åº¦æ˜¯æˆ‘ä»¬è¿›è¡ŒæŠ½è±¡çš„ç»“æžœã€‚ä½ ä¹ŸçŸ¥é“ï¼Œæˆ‘ä»¬ (ç¨‹åºå‘˜) éƒ½å–œæ¬¢è¿›è¡ŒæŠ½è±¡ã€‚æˆ‘ä»¬å–œæ¬¢å°†æŠ½è±¡çš„ä¸œè¥¿æ”¾å…¥é»‘ç›’ä¸­ï¼Œå¹¶å¸Œæœ›è¿™äº›é»‘ç›’èƒ½å¤Ÿåœ¨ä¸€èµ·å·¥ä½œã€‚ Flux æ˜¯ä¸€ç§æž„å»ºç”¨æˆ·ç•Œé¢çš„æž¶æž„è®¾è®¡æ¨¡å¼ã€‚å®ƒæ˜¯ç”± Facebook åœ¨å®ƒä»¬çš„ F8 å¼€å‘è€…å¤§ä¼šä¸ŠæŽ¨å‡ºçš„ã€‚åœ¨æ­¤ä¹‹åŽï¼Œè®¸å¤šå…¬å¸éƒ½é‡‡çº³äº†è¿™ä¸ªæƒ³æ³•ï¼Œè¿™ç§æ¨¡å¼ç”¨æ¥æž„å»ºå‰ç«¯åº”ç”¨ä¼¼ä¹Žéžå¸¸ä¸é”™ã€‚Flux é€šå¸¸å’Œ React æ­é…ä½¿ç”¨ã€‚React æ˜¯ Facebook å‘å¸ƒçš„å¦å¤–ä¸€ä¸ªåº“ã€‚åœ¨ æ—¥å¸¸å·¥ä½œ ä¸­ä½¿ç”¨çš„æ˜¯ React+Flux/Redux ï¼Œæ•¢è¯´è¿™ç§æž¶æž„çœŸçš„éžå¸¸ç®€å•å’Œçµæ´»ã€‚è¯¥æ¨¡å¼æœ‰åŠ©äºŽæ›´å¿«åœ°åˆ›å»ºåº”ç”¨ï¼ŒåŒæ—¶ä½¿ä»£ç ä¿æŒè‰¯å¥½çš„ç»„ç»‡ç»“æž„ã€‚ Flux æž¶æž„åŠå…¶ä¸»è¦ç‰¹ç‚¹ è¿™ç§æ¨¡å¼çš„ä¸»è§’æ˜¯dispatcher ã€‚å®ƒæ‹…å½“ç³»ç»Ÿä¸­æ‰€æœ‰äº‹ä»¶çš„æž¢çº½ã€‚å®ƒçš„å·¥ä½œå°±æ˜¯æŽ¥æ”¶æˆ‘ä»¬ç§°ä¹‹ä¸º actions (åŠ¨ä½œ) çš„é€šçŸ¥å¹¶å°†å…¶ä¼ ç»™æ‰€æœ‰çš„ stores ã€‚store å†³å®šäº†æ˜¯å¦å¯¹ä¼ å…¥çš„åŠ¨ä½œæ„Ÿå…´è¶£ï¼Œå¦‚æžœæ„Ÿå…´è¶£åˆ™é€šè¿‡æ”¹å˜è‡ªå·±çš„å†…éƒ¨çŠ¶æ€/æ•°æ®æ¥è¿›è¡Œå“åº”ã€‚æ”¹å˜ä¼šè§¦å‘ views(è§†å›¾ï¼Œè¿™é‡ŒæŒ‡ React ç»„ä»¶) çš„é‡æ–°æ¸²æŸ“ã€‚å¦‚æžœéžè¦å°† Fluxå’Œå¤§åé¼Žé¼Žçš„MVC ç›¸æ¯”è¾ƒçš„è¯ï¼ŒFlux ä¸­çš„store ç±»ä¼¼äºŽMVCä¸­çš„ model ã€‚å®ƒè´Ÿè´£ä¿å­˜å’Œä¿®æ”¹æ•°æ®ã€‚ ä¼ ç»™ dispatcher çš„åŠ¨ä½œå¯ä»¥æ¥è‡ªäºŽè§†å›¾ï¼Œä¹Ÿå¯ä»¥æ¥è‡ªäºŽç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†ï¼Œæ¯”å¦‚ services ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªæ‰§è¡Œ HTTP è¯·æ±‚çš„æ¨¡å—ï¼Œå½“å®ƒæŽ¥æ”¶åˆ°ç»“æžœæ•°æ®æ—¶ï¼Œå®ƒå¯ä»¥è§¦å‘åŠ¨ä½œä»¥é€šçŸ¥ç³»ç»Ÿè¯·æ±‚æˆåŠŸã€‚ å®žçŽ° Flux æž¶æž„å¦‚å…¶ä»–æµè¡Œçš„æ¦‚å¿µä¸€æ ·ï¼ŒFlux ä¹Ÿæœ‰ä¸€äº› å˜ç§ ã€‚é€šå¸¸ï¼Œè¦ç†è§£æŸç§æŠ€æœ¯çš„æœ€å¥½é€”å¾„å°±æ˜¯åŽ»å®žçŽ°å®ƒã€‚åœ¨ä¸‹é¢çš„å‡ èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåº“ï¼Œå®ƒæä¾›è¾…åŠ©å‡½æ•°æ¥æž„å»º Flux æ¨¡å¼ã€‚ Dispatcherå¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå•ä¸ªçš„dispatcher ã€‚å› ä¸ºå®ƒæ‰®æ¼”èƒ¶æ°´çš„è§’è‰²ï¼Œç”¨æ¥ç²˜åˆå…¶ä»–éƒ¨åˆ†ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªå°±å¤Ÿäº†ã€‚dispatcher éœ€è¦çŸ¥é“ä¸¤æ ·ä¸œè¥¿: åŠ¨ä½œå’Œ stores ã€‚åŠ¨ä½œåªæ˜¯ç®€å•åœ°è½¬å‘ç»™ storesï¼Œæ‰€ä»¥æ²¡å¿…è¦ä¿å­˜å®ƒä»¬ã€‚ç„¶è€Œï¼Œstores åº”è¯¥åœ¨ dispatcher ä¸­è¿›è¡Œè¿½è¸ªï¼Œè¿™æ ·æ‰å¯ä»¥éåŽ†å®ƒä»¬: å¯ä»¥è¿™æ ·å†™ï¼š123456789101112131415var Dispatcher = function () &#123; return &#123; _stores: [], register: function (store) &#123; this._stores.push(&#123; store: store &#125;); &#125;, dispatch: function (action) &#123; if (this._stores.length &gt; 0) &#123; this._stores.forEach(function (entry) &#123; entry.store.update(action); &#125;); &#125; &#125; &#125;&#125;; é¦–å…ˆéœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬æœŸæœ›ä¼ å…¥çš„ stores ä¸Šå­˜åœ¨ update æ–¹æ³•ã€‚å¦‚æžœæ­¤æ–¹æ³•ä¸å­˜åœ¨çš„è¯ï¼ŒæŠ›å‡ºé”™è¯¯ä¼šæ›´å¥½äº›:1234567register: function (store) &#123; if (!store || !store.update) &#123; throw new Error('You should provide a store that has an `update` method.'); &#125; else &#123; this._stores.push(&#123; store: store &#125;); &#125;&#125; å°†è§†å›¾å’Œ stores è¿›è¡Œç»‘å®šä¸‹ä¸€æ­¥æ˜¯å°†è§†å›¾ä¸Ž stores é“¾æŽ¥ï¼Œè¿™æ ·å½“ stores çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæˆ‘ä»¬æ‰èƒ½è¿›è¡Œé‡æ–°æ¸²æŸ“ã€‚ ä½¿ç”¨è¾…åŠ©å‡½æ•°ä¸€äº› flux çš„å®žçŽ°ä¼šè‡ªå¸¦è¾…åŠ©å‡½æ•°æ¥å®Œæˆæ­¤å·¥ä½œã€‚ä¾‹å¦‚:1Framework.attachToStore(view, store); è¦è®© attachToStoreæ­£å¸¸è¿è¡Œï¼Œéœ€è¦è§†å›¾å’Œ store ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„ API ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸¥æ ¼å®šä¹‰è¿™ä¸ªæ–°çš„å…¬æœ‰æ–¹æ³•ã€‚æˆ–è€…æ¢å¥è¯è¯´ï¼ŒFramework å¯¹ä½ è¯´é“: â€œä½ çš„è§†å›¾å’Œ store åº”è¯¥å…·å¤‡è¿™æ ·çš„ API ï¼Œè¿™æ ·æˆ‘æ‰èƒ½èƒ½å¤Ÿå°†å®ƒä»¬è¿žæŽ¥èµ·æ¥â€ã€‚å¦‚æžœæˆ‘ä»¬æ²¿ç€è¿™ä¸ªæ–¹å‘å‰è¿›çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯èƒ½ä¼šå®šä¹‰å¯æ‰©å±•çš„åŸºç±»ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šè®© Flux çš„ç»†èŠ‚åŽ»å›°æ‰°å¼€å‘äººå‘˜ã€‚ç„¶åŽï¼ŒFramework åˆå¯¹ä½ è¯´åˆ°: â€œä½ æ‰€æœ‰çš„ç±»éƒ½åº”è¯¥ç»§æ‰¿æˆ‘ä»¬çš„ç±»â€ã€‚è¿™å¬ä¸ŠåŽ»ä¹Ÿå¹¶éžå¥½ä¸»æ„ï¼Œå› ä¸ºå¼€å‘äººå‘˜å¯èƒ½ä¼šåˆ‡æ¢æˆå¦ä¸€ä¸ª Flux æä¾›è€…ï¼Œè¿™ç§åˆ‡æ¢åŠ¿å¿…ä¼šä¿®æ”¹æ‰€æœ‰å†…å®¹ã€‚ ä½¿ç”¨ mixiné‚£ä¹ˆå¦‚æžœä½¿ç”¨ React çš„ mixins å‘¢ï¼Ÿ1234var View = React.createClass(&#123; mixins: [Framework.attachToStore(store)] ...&#125;); ä¸ºå·²å­˜åœ¨çš„ React ç»„ä»¶å®šä¹‰è¡Œä¸ºçš„è¯ï¼Œè¿™æ˜¯ä¸€ç§â€œæ›´å¥½çš„â€æ–¹å¼ã€‚æ‰€ä»¥ï¼Œä»Žç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåˆ›å»ºmixin æ¥å®Œæˆç»‘å®šå·¥ä½œã€‚ä½†è¯´å®žè¯ï¼Œå¹¶è®¤ä¸ºè¿™æ˜¯ä¸ªå¥½ä¸»æ„ã€‚çœ‹èµ·æ¥ ä¸æ­¢æœ‰ä¸å–œæ¬¢ä»–çš„æƒ³æ³•ã€‚ä¸å–œæ¬¢ mixins çš„åŽŸå› æ˜¯å®ƒä»¬ä¿®æ”¹ç»„ä»¶çš„æ–¹å¼æ˜¯ä¸å¯é¢„è§çš„ã€‚å®Œå…¨ä¸çŸ¥é“å¹•åŽå‘ç”Ÿäº†ä»€ä¹ˆã€‚æ‰€ä»¥æ”¾å¼ƒè¿™ä¸ªé€‰é¡¹ã€‚ ä½¿ç”¨ contextè§£å†³æ­¤é—®é¢˜çš„å¦ä¸€é¡¹æŠ€æœ¯ä¾¿æ˜¯ React çš„ context ã€‚ä½¿ç”¨ context å¯ä»¥å°† props ä¼ é€’ç»™å­ç»„ä»¶è€Œæ— éœ€åœ¨ç»„ä»¶æ ‘ä¸­è¿›è¡Œå±‚å±‚ä¼ é€’ã€‚Facebook å»ºè®®åœ¨æ•°æ®å¿…é¡»åˆ°è¾¾åµŒå¥—å±‚çº§éžå¸¸æ·±çš„ç»„ä»¶çš„æƒ…å†µä¸‹ä½¿ç”¨ contextã€‚ å¶å°”ï¼Œä½ å¸Œæœ›é€šè¿‡ç»„ä»¶æ ‘ä¼ é€’æ•°æ®ï¼Œè€Œä¸å¿…åœ¨æ¯ä¸ªçº§åˆ«æ‰‹åŠ¨ä¼ é€’è¿™äº› props ã€‚React çš„ â€œcontextâ€ åŠŸèƒ½å¯ä»¥è®©ä½ åšåˆ°è¿™ä¸€ç‚¹ã€‚ çœ‹åˆ°äº†ä¸Ž mixins çš„ç›¸ä¼¼ä¹‹å¤„ã€‚context æ˜¯åœ¨ç»„ä»¶æ ‘çš„é¡¶å±‚å®šä¹‰çš„ï¼Œå¹¶é­”æ³•èˆ¬çš„ä¸ºç»„ä»¶æ ‘ä¸­çš„æ‰€æœ‰çš„å­ç»„ä»¶æä¾› props ã€‚è‡³äºŽæ•°æ®ä»Žè€Œä½•æ¥ï¼Œå°šä¸å¯çŸ¥ã€‚ é«˜é˜¶ç»„ä»¶æ¦‚å¿µé«˜é˜¶ç»„ä»¶æ¨¡å¼æ˜¯ç”± Sebastian MarkbÃ¥ge æ‰€æå‡ºçš„ã€‚å®ƒåˆ›å»ºä¸€ä¸ªåŒ…è£…ç»„ä»¶å¹¶è¿”å›žåŽŸå§‹çš„è¾“å…¥ç»„ä»¶ã€‚ä½¿ç”¨é«˜é˜¶ç»„ä»¶çš„è¯ï¼Œå°±æœ‰æœºä¼šæ¥ä¼ é€’å±žæ€§æˆ–åº”ç”¨é™„åŠ é€»è¾‘ã€‚ä¾‹å¦‚: 12345678910111213141516171819202122function attachToStore(Component, store, consumer) &#123; const Wrapper = React.createClass(&#123; getInitialState() &#123; return consumer(this.props, store); &#125;, componentDidMount() &#123; store.onChangeEvent(this._handleStoreChange); &#125;, componentWillUnmount() &#123; store.offChangeEvent(this._handleStoreChange); &#125;, _handleStoreChange() &#123; if (this.isMounted()) &#123; this.setState(consumer(this.props, store)); &#125; &#125;, render() &#123; return &lt;Component &#123;...this.props&#125; &#123;...this.state&#125; /&gt;; &#125; &#125;); return Wrapper;&#125;; Component æ˜¯æˆ‘ä»¬æƒ³è¦é™„åŠ åˆ° store ä¸­çš„è§†å›¾ã€‚consumer å‡½æ•°è¯´æ˜Žåº”è¯¥æå–store çš„å“ªéƒ¨åˆ†çŠ¶æ€å¹¶å‘é€ç»™åˆ°è§†å›¾ã€‚ä¸Šé¢å‡½æ•°çš„ç®€å•ç”¨æ³•å¦‚ä¸‹æ‰€ç¤º:1234567class MyView extends React.Component &#123; ...&#125;ProfilePage = connectToStores(MyView, store, (props, store) =&gt; (&#123; data: store.get('key')&#125;)); è¿™æ˜¯ä¸ªæœ‰è¶£çš„æ¨¡å¼ï¼Œå› ä¸ºå®ƒè½¬ç§»äº†èŒè´£ã€‚å®ƒæ˜¯è§†å›¾ä»Ž store ä¸­æ‹‰å–æ•°æ®ï¼Œè€Œä¸æ˜¯ store å°†æ•°æ®æŽ¨é€ç»™è§†å›¾ã€‚å½“ç„¶å®ƒä¹Ÿæœ‰è‡ªå·±çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿ã€‚ä¼˜åŠ¿åœ¨äºŽå®ƒä½¿å¾— store å˜å¾—ç®€å•ã€‚çŽ°åœ¨ store åªä¿®æ”¹æ•°æ®å³å¯ï¼Œå¹¶å‘Šè¯‰å¤§å®¶: â€œå—¨ï¼Œæˆ‘çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜äº†â€ã€‚å®ƒä¸å†è´Ÿè´£å°†æ•°æ®å‘é€ç»™åˆ«äººã€‚è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹å¯èƒ½æ˜¯æˆ‘ä»¬å°†æœ‰ä¸æ­¢ä¸€ä¸ªç»„ä»¶ (åŒ…è£…ç»„ä»¶) å‚ä¸Žå…¶ä¸­ã€‚æˆ‘ä»¬è¿˜éœ€è¦è§†å›¾ã€store å’Œ consumer å‡½æ•°ä¸‰è€…åœ¨åŒä¸€ä¸ªåœ°æ–¹ï¼Œè¿™æ ·æˆ‘ä»¬æ‰å¯ä»¥å»ºç«‹è¿žæŽ¥ã€‚ æœ€ç»ˆçš„é€‰æ‹© æœ€ç»ˆçš„é€‰æ‹©æ˜¯æœ€åŽä¸€ä¸ªé€‰é¡¹ - é«˜é˜¶ç»„ä»¶ï¼Œå®ƒå·²ç»éžå¸¸æŽ¥è¿‘äºŽæˆ‘æƒ³è¦çš„ã€‚æˆ‘å–œæ¬¢ç”±è§†å›¾æ¥å†³å®šå®ƒæ‰€éœ€è¦ä»€ä¹ˆçš„è¿™ç‚¹ã€‚æ— è®ºå¦‚ä½•ï¼Œæ•°æ®éƒ½å­˜åœ¨äºŽç»„ä»¶ä¸­ï¼Œæ‰€ä»¥å°†å®ƒä¿ç•™åœ¨é‚£é‡Œæ˜¯æœ‰é“ç†çš„ã€‚è¿™ä¹Ÿæ­£æ˜¯ä¸ºä»€ä¹ˆç”Ÿæˆé«˜é˜¶ç»„ä»¶çš„å‡½æ•°é€šå¸¸ä¸Žè§†å›¾ä¿æŒåœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­çš„åŽŸå› ã€‚å¦‚æžœæˆ‘ä»¬ä½¿ç”¨ç±»ä¼¼çš„æ–¹æ³•è€ŒåŽ‹æ ¹ä¸ä¼ å…¥ store å‘¢ï¼Ÿæˆ–è€…æ¢å¥è¯è¯´ï¼Œå‡½æ•°åªæŽ¥æ”¶ consumer ã€‚æ¯å½“ store å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚ ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„å®žçŽ°ä¸­åªæœ‰ register æ–¹æ³•ä¸Ž store è¿›è¡Œäº¤äº’ã€‚1234567register: function (store) &#123; if (!store || !store.update) &#123; throw new Error('You should provide a store that has an `update` method.'); &#125; else &#123; this._stores.push(&#123; store: store &#125;); &#125;&#125; å°†æ•´ä¸ª store å‘é€ç»™ consumer å‡½æ•°ï¼Œè€Œä¸æ˜¯ store ä¸­çš„ä¿å­˜çš„æ•°æ®ã€‚å°±åƒåœ¨é«˜é˜¶ç»„ä»¶æ¨¡å¼ä¸­ä¸€æ ·ï¼Œè§†å›¾åº”è¯¥ä½¿ç”¨ store çš„ getter æ¥è¯´æ˜Žå®ƒéœ€è¦ä»€ä¹ˆã€‚è¿™ä½¿å¾— store å˜å¾—ç›¸å½“ç®€å•å¹¶ä¸”ä¸åŒ…å«ä»»ä½•è¡¨çŽ°å±‚ç›¸å…³çš„é€»è¾‘ã€‚ ä¸‹é¢æ˜¯æ›´æ”¹åŽçš„ register æ–¹æ³•:12345678910111213141516register: function (store) &#123; if (!store || !store.update) &#123; throw new Error( 'You should provide a store that has an `update` method.' ); &#125; else &#123; var consumers = []; var subscribe = function (consumer) &#123; consumers.push(consumer); &#125;; this._stores.push(&#123; store: store &#125;); return subscribe; &#125; return false;&#125; æœ€åŽè¦å®Œæˆæ˜¯ store å¦‚ä½•é€šçŸ¥åˆ«äººå®ƒå†…éƒ¨çš„çŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ã€‚æˆ‘ä»¬å·²ç»æ”¶é›†äº† consumer å‡½æ•°ï¼Œä½†çŽ°åœ¨è¿˜æ²¡æœ‰ä»»ä½•ä»£ç æ¥æ‰§è¡Œå®ƒä»¬ã€‚ æ ¹æ® flux æž¶æž„çš„åŸºæœ¬åŽŸåˆ™ï¼Œstores æ”¹å˜è‡ªèº«çŠ¶æ€ä»¥å“åº”åŠ¨ä½œã€‚åœ¨ update æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å‘é€äº† actionï¼Œä½†æˆ‘ä»¬è¿˜åº”è¯¥å‘å‡º change å‡½æ•°ã€‚è°ƒç”¨æ­¤å‡½æ•°æ¥è§¦å‘ consumers :12345678910111213141516171819202122232425262728register: function (store) &#123; if (!store || !store.update) &#123; throw new Error( 'You should provide a store that has an `update` method.' ); &#125; else &#123; var consumers = []; var change = function () &#123; consumers.forEach(function (consumer) &#123; consumer(store); &#125;); &#125;; var subscribe = function (consumer) &#123; consumers.push(consumer); &#125;; this._stores.push(&#123; store: store, change: change &#125;); return subscribe; &#125; return false;&#125;,dispatch: function (action) &#123; if (this._stores.length &gt; 0) &#123; this._stores.forEach(function (entry) &#123; entry.store.update(action, entry.change); &#125;); &#125;&#125; æ³¨æ„å¦‚ä½•åœ¨_storesæ•°ç»„ä¸­å°† change å’Œstore ä¸€èµ·æŽ¨é€å‡ºåŽ»ã€‚ç¨åŽï¼Œåœ¨dispatchæ–¹æ³•ä¸­é€šè¿‡ä¼ å…¥action å’Œ change å‡½æ•°æ¥è°ƒç”¨update å¸¸è§ç”¨æ³•æ˜¯ä½¿ç”¨store çš„åˆå§‹çŠ¶æ€æ¥æ¸²æŸ“è§†å›¾ã€‚åœ¨æˆ‘ä»¬å®žçŽ°ä¸­ï¼Œè¿™æ„å‘³ç€å½“åº“è¢«ä½¿ç”¨æ—¶è‡³å°‘è§¦å‘æ‰€æœ‰ consumer å‡½æ•°ä¸€æ¬¡ã€‚è¿™å¯ä»¥åœ¨subscribe æ–¹æ³•ä¸­è½»æ¾å®Œæˆ:1234var subscribe = function (consumer, noInit) &#123; consumers.push(consumer); !noInit ? consumer(store) : null;&#125;; å½“ç„¶ï¼Œæœ‰æ—¶å€™å¹¶ä¸éœ€è¦ï¼Œæ‰€ä»¥æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªæ ‡è¯†ï¼Œå®ƒçš„é»˜è®¤å€¼æ˜¯å‡å€¼ã€‚ä¸‹é¢æ˜¯ dispatcher çš„æœ€ç»ˆç‰ˆæœ¬:12345678910111213141516171819202122232425262728293031323334var Dispatcher = function () &#123; return &#123; _stores: [], register: function (store) &#123; if (!store || !store.update) &#123; throw new Error( 'You should provide a store that has an `update` method' ); &#125; else &#123; var consumers = []; var change = function () &#123; consumers.forEach(function (consumer) &#123; consumer(store); &#125;); &#125;; var subscribe = function (consumer, noInit) &#123; consumers.push(consumer); !noInit ? consumer(store) : null; &#125;; this._stores.push(&#123; store: store, change: change &#125;); return subscribe; &#125; return false; &#125;, dispatch: function (action) &#123; if (this._stores.length &gt; 0) &#123; this._stores.forEach(function (entry) &#123; entry.store.update(action, entry.change); &#125;); &#125; &#125; &#125;&#125;; åŠ¨ä½œ ( Actions )æˆ–è®¸å·²ç»æ³¨æ„åˆ°äº†ï¼Œæˆ‘ä»¬è¿˜æ²¡è®¨è®ºè¿‡åŠ¨ä½œã€‚ä»€ä¹ˆæ˜¯åŠ¨ä½œï¼Ÿçº¦å®šæ˜¯å®ƒä»¬åº”è¯¥æ˜¯å…·æœ‰ä¸¤ä¸ªå±žæ€§çš„ç®€å•å¯¹è±¡: typeå’Œpayload ï¼š1234567&#123; type: 'USER_LOGIN_REQUEST', payload: &#123; username: '...', password: '...' &#125;&#125; type è¡¨æ˜Žäº†è¿™ä¸ªåŠ¨ä½œå…·ä½“æ˜¯åšä»€ä¹ˆçš„ï¼Œpayload åŒ…å«äº‹ä»¶çš„ç›¸å…³ä¿¡æ¯ï¼Œè€Œä¸”å®ƒå¹¶éžæ˜¯å¿…éœ€çš„ã€‚ æœ‰è¶£çš„æ˜¯typeä»Žä¸€å¼€å§‹å°±å¹¿ä¸ºäººçŸ¥ã€‚æˆ‘ä»¬çŸ¥é“ä»€ä¹ˆç±»åž‹çš„åŠ¨ä½œåº”è¯¥è¿›å…¥åº”ç”¨ï¼Œè°æ¥åˆ†å‘å®ƒä»¬ï¼Œå·²ç» stores å¯¹å“ªäº›åŠ¨ä½œæ„Ÿå…´è¶£ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åº”ç”¨ partial application å¹¶é¿å…ä¼ å…¥åŠ¨ä½œå¯¹è±¡ã€‚ä¾‹å¦‚:123456789101112var createAction = function (type) &#123; if (!type) &#123; throw new Error('Please, provide action\'s type.'); &#125; else &#123; return function (payload) &#123; return dispatcher.dispatch(&#123; type: type, payload: payload &#125;); &#125; &#125;&#125; createAction å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹: æˆ‘ä»¬ä¸å†éœ€è¦è®°ä½åŠ¨ä½œçš„å…·ä½“ç±»åž‹æ˜¯ä»€ä¹ˆã€‚çŽ°åœ¨åªéœ€ä¼ å…¥ payload æ¥è°ƒç”¨æ­¤å‡½æ•°å³å¯ã€‚ æˆ‘ä»¬ä¸å†éœ€è¦è®¿é—® dispatcher äº†ï¼Œè¿™æ˜¯ä¸ªå·¨å¤§çš„ä¼˜åŠ¿ã€‚å¦åˆ™ï¼Œè¿˜éœ€è¦è€ƒè™‘å¦‚ä½•å°†å®ƒä¼ é€’ç»™æ¯ä¸ªéœ€è¦åˆ†å‘åŠ¨ä½œçš„åœ°æ–¹ã€‚ æœ€åŽï¼Œæˆ‘ä»¬ä¸ç”¨å†åŽ»å¤„ç†å¯¹è±¡ï¼Œåªæ˜¯è°ƒç”¨å‡½æ•°ï¼Œè¿™ç§æ–¹å¼è¦å¥½å¾—å¤šã€‚å¯¹è±¡æ˜¯é™æ€çš„ï¼Œè€Œå‡½æ•°æè¿°çš„æ˜¯è¿‡ç¨‹ã€‚ è¿™ç§åˆ›å»ºåŠ¨ä½œçš„æ–¹å¼éžå¸¸æµè¡Œï¼Œåƒä¸Šé¢è¿™æ ·çš„å‡½æ•°ç§°ä¹‹ä¸º â€œaction creatorsâ€ ã€‚ æœ€ç»ˆä»£ç åœ¨ä¸Šä¸€èŠ‚ä¸­ï¼Œåœ¨æˆ‘ä»¬å‘å‡ºåŠ¨ä½œçš„åŒæ—¶éšè—äº† dispatcher ã€‚åœ¨ store çš„æ³¨å†Œè¿‡ç¨‹ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥è¿™æ ·åš:123var createSubscriber = function (store) &#123; return dispatcher.register(store);&#125; æˆ‘ä»¬å¯ä»¥ä¸æš´éœ² dispaatcherï¼Œè€Œåªæš´éœ² createAction å’Œ createSubscriber è¿™ä¸¤ä¸ªå‡½æ•°ã€‚ä¸‹é¢æ˜¯æœ€ç»ˆä»£ç :12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758var Dispatcher = function () &#123; return &#123; _stores: [], register: function (store) &#123; if (!store || !store.update) &#123; throw new Error( 'You should provide a store that has an `update` method' ); &#125; else &#123; var consumers = []; var change = function () &#123; consumers.forEach(function (consumer) &#123; consumer(store); &#125;); &#125;; var subscribe = function (consumer, noInit) &#123; consumers.push(consumer); !noInit ? consumer(store) : null; &#125;; this._stores.push(&#123; store: store, change: change &#125;); return subscribe; &#125; return false; &#125;, dispatch: function (action) &#123; if (this._stores.length &gt; 0) &#123; this._stores.forEach(function (entry) &#123; entry.store.update(action, entry.change); &#125;); &#125; &#125; &#125;&#125;;module.exports = &#123; create: function () &#123; var dispatcher = Dispatcher(); return &#123; createAction: function (type) &#123; if (!type) &#123; throw new Error('Please, provide action\'s type.'); &#125; else &#123; return function (payload) &#123; return dispatcher.dispatch(&#123; type: type, payload: payload &#125;); &#125; &#125; &#125;, createSubscriber: function (store) &#123; return dispatcher.register(store); &#125; &#125; &#125;&#125;; å¦‚æžœæ·»åŠ å¯¹ AMDã€CommonJS å’Œå…¨å±€å¼•ç”¨çš„æ”¯æŒçš„è¯ï¼Œé‚£ä¹ˆæœ€ç»ˆçš„ JavaScript æ–‡ä»¶å…± 66 è¡Œä»£ç ï¼Œæ–‡ä»¶å¤§å°ä¸º 1.7KBï¼ŒåŽ‹ç¼©åŽ 795 å­—èŠ‚ã€‚ æ•´åˆæˆ‘ä»¬å†™å¥½çš„æ¨¡å—æä¾›ä¸¤ä¸ªè¾…åŠ©å‡½æ•°æ¥æž„å»º Flux é¡¹ç›®ã€‚æˆ‘ä»¬æ¥å†™ä¸ªç®€å•çš„è®¡æ•°å™¨åº”ç”¨ï¼Œæ­¤åº”ç”¨ä¸ä½¿ç”¨ React ï¼Œåªä¸ºäº†è§£ Flux æ¨¡å¼çš„å®žé™…ä½¿ç”¨æƒ…å†µã€‚ HTMLæˆ‘ä»¬éœ€è¦ä¸€äº› UI å…ƒç´ æ¥è¿›è¡Œäº’åŠ¨:12345&lt;div id="counter"&gt; &lt;span&gt;&lt;/span&gt; &lt;button&gt;increase&lt;/button&gt; &lt;button&gt;decrease&lt;/button&gt;&lt;/div&gt; span ç”¨æ¥æ˜¾ç¤ºè®¡æ•°å™¨çš„å½“å‰å€¼ã€‚ç‚¹å‡»æŒ‰é’®ä¼šæ”¹å˜è®¡æ•°å™¨çš„å€¼ã€‚ è§†å›¾123456789101112131415const View = function (subscribeToStore, increase, decrease) &#123; var value = null; var el = document.querySelector('#counter'); var display = el.querySelector('span'); var [ increaseBtn, decreaseBtn ] = Array.from(el.querySelectorAll('button')); var render = () =&gt; display.innerHTML = value; var updateState = (store) =&gt; value = store.getValue(); subscribeToStore([updateState, render]); increaseBtn.addEventListener('click', increase); decreaseBtn.addEventListener('click', decrease);&#125;; View æŽ¥æ”¶ store çš„è®¢é˜…è€…å‡½æ•°å’Œå¢žåŠ /å‡å°‘å€¼çš„ä¸¤ä¸ªåŠ¨ä½œå‡½æ•°ã€‚View ä¸­å¼€å§‹çš„å‡ è¡Œä»£ç åªæ˜¯ç”¨æ¥èŽ·å– DOM å…ƒç´ ã€‚ ä¹‹åŽæˆ‘ä»¬å®šä¹‰äº†renderå‡½æ•°ï¼Œå®ƒè´Ÿè´£å°†å€¼æ¸²æŸ“åˆ° span æ ‡ç­¾ä¸­ã€‚å½“ store å‘ç”Ÿå˜åŒ–æ—¶ä¼šè°ƒç”¨updateState æ–¹æ³•ã€‚æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªå‡½æ•°ä¼ ç»™subscribeToStore æ˜¯å› ä¸ºæˆ‘ä»¬æƒ³è¦è§†å›¾æ›´æ–°ä»¥åŠè¿›è¡Œåˆé¦–æ¬¡æ¸²æŸ“ã€‚è¿˜è®°å¾—consumers å‡½æ•°é»˜è®¤è‡³å°‘è¦è°ƒç”¨ä¸€æ¬¡å§ï¼Ÿ æœ€åŽè¦åšçš„æ˜¯ä¸ºæŒ‰é’®ç»‘å®šç‚¹å‡»äº‹ä»¶ã€‚ Storeæ¯ä¸ªåŠ¨ä½œéƒ½æœ‰ç±»åž‹ã€‚ä¸ºè¿™äº›ç±»åž‹åˆ›å»ºå¸¸é‡æ˜¯ä¸€ç§æœ€ä½³å®žè·µï¼Œå› ä¸ºæˆ‘ä»¬ä¸æƒ³å¤„ç†åŽŸå§‹å­—ç¬¦ä¸²ã€‚12const INCREASE = 'INCREASE';const DECREASE = 'DECREASE'; é€šå¸¸æ¯ä¸ª storeåªæœ‰ä¸€ä¸ªå®žä¾‹ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†ç›´æŽ¥åˆ›å»ºä¸€ä¸ªå•ä¾‹å¯¹è±¡ã€‚ 1234567891011121314const CounterStore = &#123; _data: &#123; value: 0 &#125;, getValue: function () &#123; return this._data.value; &#125;, update: function (action, change) &#123; if (action.type === INCREASE) &#123; this._data.value += 1; &#125; else if (action.type === DECREASE) &#123; this._data.value -= 1; &#125; change(); &#125;&#125;; _data æ˜¯ store çš„å†…éƒ¨çŠ¶æ€ã€‚update æ˜¯dispatcher æ‰€è°ƒç”¨çš„æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨ update ä¸­å¤„ç†åŠ¨ä½œï¼Œå¹¶åœ¨å®Œæˆæ—¶è°ƒç”¨change()æ–¹æ³•æ¥é€šçŸ¥å‘ç”Ÿäº†å˜åŒ–ã€‚getValue æ˜¯å…¬å…±æ–¹æ³•ï¼Œè§†å›¾ä¼šä½¿ç”¨å®ƒæ¥èŽ·å–æ‰€éœ€æ•°æ®ã€‚(åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œå°±æ˜¯è®¡æ•°å™¨çš„å€¼ã€‚) æ•´åˆå„ä¸ªéƒ¨åˆ†è¿™æ ·ï¼Œstore å°±å®Œæˆäº†ï¼Œå®ƒç­‰å¾… dispatcher å‘å‡ºçš„åŠ¨ä½œã€‚è§†å›¾æˆ‘ä»¬ä¹Ÿå®šä¹‰å®Œäº†ã€‚çŽ°åœ¨æ¥åˆ›å»º store çš„è®¢é˜…è€…ã€åŠ¨ä½œå¹¶è®©è¿™ä¸€åˆ‡è¿è½¬èµ·æ¥ã€‚ 12345678const &#123; createAction, createSubscriber &#125; = Fluxiny.create();const counterStoreSubscriber = createSubscriber(CounterStore);const actions = &#123; increase: createAction(INCREASE), decrease: createAction(DECREASE)&#125;;View(counterStoreSubscriber, actions.increase, actions.decrease); è¿™æ ·å°±å®Œæˆäº†ã€‚è§†å›¾è®¢é˜…storeå¹¶è¿›è¡Œæ¸²æŸ“ï¼Œå› ä¸ºæˆ‘ä»¬çš„consumerså®žé™…ä¸Šå°±æ˜¯ render æ–¹æ³•ã€‚ åœ¨çº¿ç¤ºä¾‹ è¿™é‡Œæœ‰ JSBin çš„ åœ¨çº¿ç¤ºä¾‹ã€‚å¦‚æžœä½ è§‰å¾—è¿™ä¸ªç¤ºä¾‹è¿‡äºŽç®€å•çš„è¯ï¼Œè¯·æŸ¥é˜… Fluxiny ä»“åº“ä¸­çš„ç¤ºä¾‹ã€‚å®ƒä½¿ç”¨ React ä½œä¸ºè§†å›¾å±‚ã€‚ åœ¨æœ¬ç« ä¸­æ‰€è®¨è®ºçš„ Flux å®žçŽ°å¯ä»¥åœ¨ è¿™é‡Œ æ‰¾åˆ°ã€‚å¯ä»¥ ç›´æŽ¥åœ¨æµè§ˆå™¨ä¸­ ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ npm ä¾èµ– è¿›è¡Œå®‰è£…ã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactå¼€å‘å¸¸ç”¨è®¾è®¡æ¨¡å¼-å•å‘æ•°æ®æµ]]></title>
    <url>%2Fblog%2F2018%2F05%2F16%2FReact%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E5%90%91%E6%95%B0%E6%8D%AE%E6%B5%81%2F</url>
    <content type="text"><![CDATA[å•å‘æ•°æ®æµè¿™ç§æ¨¡å¼ååˆ†é€‚åˆè·Ÿ React æ­é…ä½¿ç”¨ã€‚å®ƒçš„ä¸»è¦æ€æƒ³æ˜¯ç»„ä»¶ä¸ä¼šæ”¹å˜æŽ¥æ”¶çš„æ•°æ®ã€‚å®ƒä»¬åªä¼šç›‘å¬æ•°æ®çš„å˜åŒ–ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶å®ƒä»¬ä¼šä½¿ç”¨æŽ¥æ”¶åˆ°çš„æ–°å€¼ï¼Œè€Œä¸æ˜¯åŽ»ä¿®æ”¹å·²æœ‰çš„å€¼ã€‚å½“ç»„ä»¶çš„æ›´æ–°æœºåˆ¶è§¦å‘åŽï¼Œå®ƒä»¬åªæ˜¯ä½¿ç”¨æ–°å€¼è¿›è¡Œé‡æ–°æ¸²æŸ“è€Œå·²ã€‚ å•å‘æ•°æ®æµå‡è®¾è¯´æœ‰ä¸€ä¸ªç®€å•çš„ Switcher ç»„ä»¶ï¼Œå®ƒåŒ…å«ä¸€ä¸ªæŒ‰é’®ã€‚å½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ä¸€ä¸ªæ ‡è¯†æ¥ä¿å­˜ç»„ä»¶çš„å¼€å…³çŠ¶æ€ã€‚123456789101112131415161718192021class Switcher extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; flag: false &#125;; this._onButtonClick = e =&gt; this.setState(&#123; flag: !this.state.flag &#125;); &#125; render() &#123; return ( &lt;button onClick=&#123; this._onButtonClick &#125;&gt; &#123; this.state.flag ? 'lights on' : 'lights off' &#125; &lt;/button&gt; ); &#125;&#125;;// ... æ¸²æŸ“ç»„ä»¶function App() &#123; return &lt;Switcher /&gt;;&#125;; æ­¤æ—¶ï¼Œæˆ‘ä»¬å°†æ•°æ®ä¿å­˜åœ¨äº†ç»„ä»¶å†…éƒ¨ã€‚æˆ–è€…æ¢å¥è¯è¯´ï¼ŒçŸ¥é“ flag å­˜åœ¨çš„åªæœ‰ Switcher ç»„ä»¶ã€‚æˆ‘ä»¬æ¥å°†flag æå–åˆ° store ä¸­:1234567891011121314151617181920212223242526272829303132var Store = &#123; _flag: false, set: function(value) &#123; this._flag = value; &#125;, get: function() &#123; return this._flag; &#125;&#125;;class Switcher extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; flag: false &#125;; this._onButtonClick = e =&gt; &#123; this.setState(&#123; flag: !this.state.flag &#125;, () =&gt; &#123; this.props.onChange(this.state.flag); &#125;); &#125; &#125; render() &#123; return ( &lt;button onClick=&#123; this._onButtonClick &#125;&gt; &#123; this.state.flag ? 'lights on' : 'lights off' &#125; &lt;/button&gt; ); &#125;&#125;;function App() &#123; return &lt;Switcher onChange=&#123; Store.set.bind(Store) &#125; /&gt;;&#125;; Store å¯¹è±¡æ˜¯ä¸€ä¸ª å•ä¾‹ï¼Œå®ƒæä¾›è¾…åŠ©å‡½æ•° ( getter å’Œ setter ) æ¥è¯»å–/è®¾ç½® _flag å±žæ€§ã€‚é€šè¿‡å°† setter ä¼ ç»™Switcher ç»„ä»¶ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´æ–°å¤–éƒ¨æ•°æ®ã€‚ç›®å‰åº”ç”¨çš„å·¥ä½œæµç¨‹å¤§è‡´å¦‚ä¸‹: å‡è®¾æˆ‘ä»¬å¯ä»¥é€šè¿‡ Store å°† flag å€¼ä¿å­˜è‡³æœåŠ¡ç«¯ã€‚å½“ç”¨æˆ·å†ä½¿ç”¨æ—¶æˆ‘ä»¬å¯ä»¥ä¸ºå…¶æä¾›ä¸€ä¸ªé€‚å½“çš„åˆå§‹å€¼ã€‚å¦‚æžœç”¨æˆ·ä¸Šæ¬¡ç¦»å¼€æ—¶ flag ä¸º true ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ˜¾ç¤º â€œlights onâ€ï¼Œè€Œä¸æ˜¯é»˜è®¤å€¼ â€œlights offâ€ ã€‚çŽ°åœ¨å˜å¾—æœ‰ä¸€äº›éº»çƒ¦ï¼Œå› ä¸ºæ•°æ®å­˜åœ¨äºŽä¸¤ä¸ªåœ°æ–¹ã€‚UI å’Œ Store ä¸­éƒ½æœ‰è‡ªèº«çš„çŠ¶æ€ã€‚æˆ‘ä»¬éœ€è¦è¿›è¡ŒåŒå‘é€šè®¯ï¼ŒStoreåˆ°ç»„ä»¶å’Œç»„ä»¶åˆ°Store ã€‚12345678910// ... åœ¨ App ç»„ä»¶ä¸­&lt;Switcher value=&#123; Store.get() &#125; onChange=&#123; Store.set.bind(Store) &#125; /&gt;// ... åœ¨ Switcher ç»„ä»¶ä¸­constructor(props) &#123; super(props); this.state = &#123; flag: this.props.value &#125;; ... å·¥ä½œæµç¨‹æ”¹å˜åŽå¦‚ä¸‹æ‰€ç¤º: ä»¥ä¸Šè¿™äº›å¯¼è‡´äº†éœ€è¦åœ¨ä¸¤å¤„ç®¡ç†çŠ¶æ€ã€‚å¦‚æžœ Store å¯ä»¥å†æ ¹æ®ç³»ç»Ÿä¸­çš„å…¶ä»–æ“ä½œæ›´æ”¹å…¶å€¼ï¼Œå°†æ¼”å˜æˆæ€Žæ ·ä¸€ç§æƒ…å†µï¼Ÿæˆ‘ä»¬å¿…é¡»å°†è¿™ç§å˜åŒ–ä¼ æ’­ç»™Switcher ç»„ä»¶ï¼Œè¿™æ ·å°±ä¼šå¢žåŠ åº”ç”¨çš„å¤æ‚åº¦ã€‚ å•å‘æ•°æ®æµæ­£æ˜¯ç”¨æ¥è§£å†³æ­¤ç±»é—®é¢˜ã€‚å®ƒæ¶ˆé™¤äº†åœ¨å¤šä¸ªåœ°æ–¹åŒæ—¶ç®¡ç†çŠ¶æ€çš„æƒ…å†µï¼Œå®ƒåªä¼šåœ¨ä¸€ä¸ªåœ°æ–¹ (é€šå¸¸å°±æ˜¯ store) è¿›è¡ŒçŠ¶æ€ç®¡ç†ã€‚è¦å®žçŽ°å•å‘æ•°æ®æµçš„è¯ï¼Œæˆ‘ä»¬éœ€è¦æ”¹é€ ä¸€ä¸‹ Store å¯¹è±¡ã€‚æˆ‘ä»¬éœ€è¦å…è®¸æˆ‘ä»¬è®¢é˜…æ•°æ®å˜åŒ–çš„é€»è¾‘ï¼š1234567891011121314var Store = &#123; _handlers: [], _flag: '', subscribe: function(handler) &#123; this._handlers.push(handler); &#125;, set: function(value) &#123; this._flag = value; this._handlers.forEach(handler =&gt; handler(value)) &#125;, get: function() &#123; return this._flag; &#125;&#125;; ç„¶åŽæˆ‘ä»¬å°†å…¶ä¸Ž App ç»„ä»¶è”ç³»èµ·æ¥ï¼Œæ¯æ¬¡ Store ä¸­çš„å€¼äº§ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½å°†é‡æ–°æ¸²æŸ“ç»„ä»¶:1234567891011121314151617class App extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; value: Store.get() &#125;; Store.subscribe(value =&gt; this.setState(&#123; value &#125;)); &#125; render() &#123; return ( &lt;div&gt; &lt;Switcher value=&#123; this.state.value &#125; onChange=&#123; Store.set.bind(Store) &#125; /&gt; &lt;/div&gt; ); &#125;&#125;; åšå‡ºæ”¹å˜åŽï¼ŒSwitcher å°†å˜å¾—ç›¸å½“ç®€å•ã€‚æˆ‘ä»¬ä¸éœ€è¦å†…éƒ¨çŠ¶æ€ï¼Œæ‰€ä»¥ç»„ä»¶å¯ä»¥ä½¿ç”¨æ— çŠ¶æ€å‡½æ•°ã€‚1234567891011function Switcher(&#123; value, onChange &#125;) &#123; return ( &lt;button onClick=&#123; e =&gt; onChange(!value) &#125;&gt; &#123; value ? 'lights on' : 'lights off' &#125; &lt;/button&gt; );&#125;;&lt;Switcher value=&#123; Store.get() &#125; onChange=&#123; Store.set.bind(Store) &#125; /&gt; ç»“è¯­è¿™ç§æ¨¡å¼çš„å¥½å¤„æ˜¯ç»„ä»¶åªè´Ÿè´£å±•ç¤º store çš„æ•°æ®å³å¯ã€‚è€Œå”¯ä¸€çš„æ•°æ®æºå°†ä½¿å¾—å¼€å‘æ›´åŠ ç®€å•ã€‚å¦‚æžœåªèƒ½ä»Žä¸­æŽŒæ¡ä¸€ä¸ªçŸ¥è¯†ç‚¹çš„è¯ï¼Œä¼šé€‰è¿™ä¸€ç« èŠ‚ã€‚å•å‘æ•°æ®æµå½»åº•åœ°æ”¹å˜äº†æˆ‘è®¾è®¡åŠŸèƒ½æ—¶çš„æ€ç»´æ–¹å¼ï¼Œæ‰€ä»¥ç›¸ä¿¡å¯¹ä½ ä¹ŸåŒæ ·æœ‰æ•ˆã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactå¼€å‘å¸¸ç”¨è®¾è®¡æ¨¡å¼-å±•ç¤ºåž‹ç»„ä»¶å’Œå®¹å™¨åž‹ç»„ä»¶]]></title>
    <url>%2Fblog%2F2018%2F05%2F15%2FReact%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B1%95%E7%A4%BA%E5%9E%8B%E7%BB%84%E4%BB%B6%E5%92%8C%E5%AE%B9%E5%99%A8%E5%9E%8B%E7%BB%84%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[ä¸‡äº‹å¼€å¤´éš¾ã€‚React ä¹Ÿä¸ä¾‹å¤–ï¼Œä½œä¸ºåˆå­¦è€…ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ä¸€å¤§å †é—®é¢˜ã€‚æˆ‘åº”è¯¥å°†æ•°æ®æ”¾åœ¨ä½•å¤„ï¼Ÿå¦‚ä½•è¿›è¡Œå˜åŒ–é€šçŸ¥ï¼Ÿå¦‚ä½•ç®¡ç†çŠ¶æ€ï¼Ÿè¿™äº›é—®é¢˜çš„ç­”æ¡ˆå¾€å¾€ä¸Žä¸Šä¸‹æ–‡æœ‰å…³ï¼Œè€Œæœ‰æ—¶å–å†³äºŽ React çš„å®žæˆ˜ç»éªŒã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„æ¨¡å¼ï¼Œæœ‰åŠ©äºŽç»„ç»‡åŸºäºŽ React çš„åº”ç”¨ï¼Œé‚£ä¾¿æ˜¯å°†ç»„ä»¶åˆ†ä¸ºå±•ç¤ºåž‹ç»„ä»¶å’Œå®¹å™¨åž‹ç»„ä»¶ã€‚ å±•ç¤ºåž‹ç»„ä»¶å’Œå®¹å™¨åž‹ç»„ä»¶ä¸‡äº‹å¼€å¤´éš¾ã€‚React ä¹Ÿä¸ä¾‹å¤–ï¼Œä½œä¸ºåˆå­¦è€…ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ä¸€å¤§å †é—®é¢˜ã€‚æˆ‘åº”è¯¥å°†æ•°æ®æ”¾åœ¨ä½•å¤„ï¼Ÿå¦‚ä½•è¿›è¡Œå˜åŒ–é€šçŸ¥ï¼Ÿå¦‚ä½•ç®¡ç†çŠ¶æ€ï¼Ÿè¿™äº›é—®é¢˜çš„ç­”æ¡ˆå¾€å¾€ä¸Žä¸Šä¸‹æ–‡æœ‰å…³ï¼Œè€Œæœ‰æ—¶å–å†³äºŽ React çš„å®žæˆ˜ç»éªŒã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„æ¨¡å¼ï¼Œæœ‰åŠ©äºŽç»„ç»‡åŸºäºŽ React çš„åº”ç”¨ï¼Œé‚£ä¾¿æ˜¯å°†ç»„ä»¶åˆ†ä¸ºå±•ç¤ºåž‹ç»„ä»¶å’Œå®¹å™¨åž‹ç»„ä»¶ã€‚ æˆ‘ä»¬å…ˆä»Žä¸€ä¸ªç®€å•ç¤ºä¾‹å¼€å§‹ï¼Œé¦–å…ˆè¯´æ˜Žæ­¤ç¤ºä¾‹çš„é—®é¢˜ï¼Œç„¶åŽå°†ç»„ä»¶åˆ†æˆå®¹å™¨åž‹ç»„ä»¶å’Œå±•ç¤ºåž‹ç»„ä»¶ã€‚ç¤ºä¾‹ä¸­ä½¿ç”¨çš„æ˜¯ Clock ç»„ä»¶ï¼Œå®ƒæŽ¥æ”¶ Date å¯¹è±¡ä½œä¸ºå±žæ€§å¹¶æ˜¾ç¤ºå®žæ—¶æ—¶é—´ã€‚12345678910111213141516171819202122232425262728293031323334353637class Clock extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; time: this.props.time &#125;; this._update = this._updateTime.bind(this); &#125; render() &#123; const time = this._formatTime(this.state.time); return ( &lt;h1&gt; &#123; time.hours &#125; : &#123; time.minutes &#125; : &#123; time.seconds &#125; &lt;/h1&gt; ); &#125; componentDidMount() &#123; this._interval = setInterval(this._update, 1000); &#125; componentWillUnmount() &#123; clearInterval(this._interval); &#125; _formatTime(time) &#123; var [ hours, minutes, seconds ] = [ time.getHours(), time.getMinutes(), time.getSeconds() ].map(num =&gt; num &lt; 10 ? '0' + num : num); return &#123; hours, minutes, seconds &#125;; &#125; _updateTime() &#123; this.setState(&#123; time: new Date(this.state.time.getTime() + 1000) &#125;); &#125;&#125;;ReactDOM.render(&lt;Clock time=&#123; new Date() &#125;/&gt;, ...); åœ¨ç»„ä»¶çš„æž„é€ å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆå§‹åŒ–äº†ç»„ä»¶çš„çŠ¶æ€ï¼Œè¿™é‡Œåªä¿å­˜äº†å½“å‰æ—¶é—´ã€‚é€šè¿‡ä½¿ç”¨ setInterval ï¼Œæˆ‘ä»¬æ¯ç§’æ›´æ–°ä¸€æ¬¡çŠ¶æ€ï¼Œç„¶åŽç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ã€‚è¦æƒ³çœ‹èµ·æ¥åƒä¸ªçœŸæ­£çš„æ—¶é’Ÿï¼Œæˆ‘ä»¬è¿˜ä½¿ç”¨äº†ä¸¤ä¸ªè¾…åŠ©å‡½æ•°: _formatTime å’Œ_updateTime ã€‚_formatTime ç”¨æ¥æå–æ—¶åˆ†ç§’å¹¶ç¡®ä¿å®ƒä»¬æ˜¯ä¸¤ä½æ•°çš„å½¢å¼ã€‚_updateTime ç”¨æ¥å°†time å¯¹è±¡è®¾ç½®ä¸ºå½“å‰æ—¶é—´åŠ ä¸€ç§’ã€‚ é—®é¢˜è¿™ä¸ªç»„ä»¶ä¸­å®ƒåšäº†å¥½å‡ ä»¶äº‹ï¼Œä¼¼ä¹Žæ‰¿æ‹…äº†å¤ªå¤šçš„èŒè´£ã€‚ å®ƒé€šè¿‡è‡ªèº«æ¥ä¿®æ”¹çŠ¶æ€ã€‚åœ¨ç»„ä»¶ä¸­æ›´æ”¹æ—¶é—´å¯èƒ½ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºåªæœ‰ Clock ç»„ä»¶çŸ¥é“å½“å‰æ—¶é—´ã€‚å¦‚æžœç³»ç»Ÿä¸­çš„å…¶ä»–éƒ¨åˆ†ä¹Ÿéœ€è¦æ­¤æ•°æ®ï¼Œé‚£ä¹ˆå°†å¾ˆéš¾è¿›è¡Œå…±äº«ã€‚ _formatTime å®žé™…ä¸Šåšäº†ä¸¤ä»¶äº‹ï¼Œå®ƒä»Žæ—¶é—´å¯¹è±¡ä¸­æå–å‡ºæ‰€éœ€ä¿¡æ¯ï¼Œå¹¶ç¡®ä¿è¿™äº›å€¼æ°¸è¿œä»¥ä¸¤ä½æ•°å­—çš„å½¢å¼è¿›è¡Œå±•ç¤ºã€‚è¿™æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†å¦‚æžœæå–æ“ä½œä¸æ˜¯å‡½æ•°çš„ä¸€éƒ¨åˆ†é‚£å°±æ›´å¥½äº†ï¼Œå› ä¸ºå‡½æ•°ç»‘å®šäº† time å¯¹è±¡çš„ç±»åž‹ã€‚å³æ­¤å‡½æ•°æ—¢è¦çŸ¥é“æ•°æ®ç»“æž„ï¼ŒåŒæ—¶åˆè¦å¯¹æ•°æ®è¿›è¡Œå¯è§†åŒ–å¤„ç†ã€‚ æå–å‡ºå®¹å™¨åž‹ç»„ä»¶å®¹å™¨åž‹ç»„ä»¶çŸ¥é“æ•°æ®åŠå…¶ç»“æž„ï¼Œä»¥åŠæ•°æ®çš„æ¥æºã€‚å®ƒä»¬çŸ¥é“æ˜¯å¦‚ä½•è¿è½¬çš„ï¼Œæˆ–æ‰€è°“çš„ä¸šåŠ¡é€»è¾‘ã€‚å®ƒä»¬æŽ¥æ”¶ä¿¡æ¯å¹¶å¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œä»¥æ–¹ä¾¿å±•ç¤ºåž‹ç»„ä»¶ä½¿ç”¨ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨ é«˜é˜¶ç»„ä»¶ æ¥åˆ›å»ºå®¹å™¨åž‹ç»„ä»¶ï¼Œå› ä¸ºå®ƒä»¬ä¸ºæˆ‘ä»¬çš„è‡ªå®šä¹‰é€»è¾‘æä¾›äº†ç¼“å†²åŒºã€‚ ä¸‹é¢æ˜¯ ClockContainer çš„ä»£ç :12345678910111213141516171819202122232425262728293031// Clock/index.jsimport Clock from './Clock.jsx'; // &lt;-- å±•ç¤ºåž‹ç»„ä»¶export default class ClockContainer extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; time: props.time &#125;; this._update = this._updateTime.bind(this); &#125; render() &#123; return &lt;Clock &#123; ...this._extract(this.state.time) &#125;/&gt;; &#125; componentDidMount() &#123; this._interval = setInterval(this._update, 1000); &#125; componentWillUnmount() &#123; clearInterval(this._interval); &#125; _extract(time) &#123; return &#123; hours: time.getHours(), minutes: time.getMinutes(), seconds: time.getSeconds() &#125;; &#125; _updateTime() &#123; this.setState(&#123; time: new Date(this.state.time.getTime() + 1000) &#125;); &#125;&#125;; å®ƒæŽ¥æ”¶ time (date å¯¹è±¡) å±žæ€§ï¼Œä½¿ç”¨setInterval å¾ªçŽ¯å¹¶äº†è§£æ•°æ® (getHoursã€getMinutes å’Œ getSeconds) çš„è¯¦æƒ…ã€‚æœ€åŽæ¸²æŸ“å±•ç¤ºåž‹ç»„ä»¶å¹¶ä¼ å…¥æ—¶åˆ†ç§’ä¸‰ä¸ªæ•°å­—ã€‚è¿™é‡Œæ²¡æœ‰ä»»ä½•å±•ç¤ºç›¸å…³çš„å†…å®¹ã€‚åªæœ‰ä¸šåŠ¡é€»è¾‘ã€‚ å±•ç¤ºåž‹ç»„ä»¶å±•ç¤ºåž‹ç»„ä»¶åªæ¶‰åŠç»„ä»¶çš„å¤–åœ¨å±•çŽ°å½¢å¼ã€‚å®ƒä»¬ä¼šæœ‰é™„åŠ çš„ HTML æ ‡è®°æ¥ä½¿å¾—é¡µé¢æ›´åŠ æ¼‚äº®ã€‚è¿™ç§ç»„ä»¶æ²¡æœ‰ä»»ä½•ç»‘å®šåŠä¾èµ–ã€‚é€šå¸¸éƒ½æ˜¯å®žçŽ°æˆ æ— çŠ¶æ€ç»„ä»¶ï¼Œå®ƒä»¬æ²¡æœ‰å†…éƒ¨çŠ¶æ€ã€‚ åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œå±•ç¤ºåž‹ç»„ä»¶åªåŒ…å«ä¸¤ä½æ•°çš„æ£€æŸ¥å¹¶è¿”å›ž &lt;h1&gt; æ ‡ç­¾:12345678910// Clock/Clock.jsxexport default function Clock(props) &#123; var [ hours, minutes, seconds ] = [ props.hours, props.minutes, props.seconds ].map(num =&gt; num &lt; 10 ? '0' + num : num); return &lt;h1&gt;&#123; hours &#125; : &#123; minutes &#125; : &#123; seconds &#125;&lt;/h1&gt;;&#125;; ä¼˜ç‚¹å°†ç»„ä»¶åˆ†æˆå®¹å™¨åž‹ç»„ä»¶å’Œå±•ç¤ºåž‹ç»„ä»¶å¯ä»¥å¢žåŠ ç»„ä»¶çš„å¯å¤ç”¨æ€§ã€‚ä¸æ”¹å˜æ—¶é—´æˆ–ä¸ä½¿ç”¨ JavaScript Date å¯¹è±¡çš„åº”ç”¨ä¸­ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ Clock å‡½æ•°/ç»„ä»¶ã€‚åŽŸå› æ˜¯å®ƒç›¸å½“å•çº¯ï¼Œä¸éœ€è¦å¯¹æ‰€éœ€æ•°æ®çš„è¯¦æƒ…æœ‰ä»»ä½•äº†è§£ã€‚ å®¹å™¨åž‹ç»„ä»¶å°è£…äº†é€»è¾‘ï¼Œå®ƒä»¬å¯ä»¥æ­é…ä¸åŒçš„å±•ç¤ºåž‹ç»„ä»¶ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä»¬ä¸å‚ä¸Žä»»ä½•å±•ç¤ºç›¸å…³çš„å·¥ä½œã€‚æˆ‘ä»¬ä¸Šé¢æ‰€é‡‡ç”¨çš„æ–¹æ³•æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç¤ºä¾‹ï¼Œå®ƒé˜æ˜Žäº†å®¹å™¨åž‹ç»„ä»¶æ˜¯å¦‚ä½•ä¸å…³å¿ƒå±•ç¤ºéƒ¨åˆ†çš„å†…å®¹çš„ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ä»Žæ•°å­—æ—¶é’Ÿåˆ‡æ¢åˆ°æ¨¡æ‹Ÿæ—¶é’Ÿï¼Œå”¯ä¸€çš„å˜åŒ–å°±æ˜¯æ›¿æ¢ render æ–¹æ³•ä¸­çš„ Â·Â· ç»„ä»¶ã€‚ æµ‹è¯•ä¹Ÿå°†å˜å¾—æ›´å®¹æ˜“ï¼Œå› ä¸ºç»„ä»¶æ‰¿æ‹…çš„èŒè´£æ›´å°‘ã€‚å®¹å™¨åž‹ç»„ä»¶ä¸å…³å¿ƒ UI ã€‚å±•ç¤ºåž‹ç»„ä»¶åªæ˜¯çº¯ç²¹åœ°è´Ÿè´£å±•ç¤ºï¼Œå®ƒå¯ä»¥å¾ˆå¥½åœ°é¢„æµ‹å‡ºæ¸²æŸ“åŽçš„ HTML æ ‡è®°ã€‚ ç»“è¯­å®¹å™¨åž‹å’Œå±•ç¤ºåž‹çš„å¹¶éžæ˜¯æ–°æ¦‚å¿µï¼Œä½†æ˜¯å®ƒçœŸçš„éžå¸¸é€‚åˆ React ã€‚å®ƒä½¿å¾—åº”ç”¨å…·æœ‰æ›´å¥½çš„ç»“æž„ï¼Œæ˜“äºŽç®¡ç†å’Œæ‰©å±•ã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å°ç¨‹åºä¹‹æ—…â€”â€”ä¸ªäººç”³è¯·]]></title>
    <url>%2Fblog%2F2018%2F05%2F15%2F%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B9%8B%E6%97%85%E2%80%94%E2%80%94%E4%B8%AA%E4%BA%BA%E7%94%B3%E8%AF%B7%2F</url>
    <content type="text"><![CDATA[å¼€å§‹å°ç¨‹åºçš„å­¦ä¹ æ‰“å¡ï¼Œå€’è…¾ä¸€é—¨æ–°çš„æŠ€æœ¯å°±è¦ç§¯æžå‚ä¸Žè¿›åŽ»ï¼Œä»Žæ­å»ºåˆå§‹çš„å¼€å‘çŽ¯å¢ƒå¼€å§‹ï¼Œä»Žç®€å•demoå¼€æ—¶ï¼Œé€æ¸æ·±å…¥ï¼Œå¤šæ•²ä»£ç ï¼Œå¤šå°è¯•ï¼Œå¤šå‚è€ƒï¼Œè¿˜è¦è‡ªæˆ‘æ€è€ƒï¼Œä¸¾ä¸€åä¸‰ã€‚æ˜¯æ—¶å€™å¼€å§‹æ’¸ä¸€ä¸‹å¾®ä¿¡å°ç¨‹åºäº†ï¼Œé‚£ä¹ˆå¥½çš„ç”¨æˆ·åŸºç¡€ï¼Œæ€Žä¹ˆèƒ½æ”¾å¼ƒè¿™ä¹ˆå¥½çš„ä¸€ä¸ªå¼€å‘ä¸Žç”¨æˆ·ä½“éªŒçš„æœºä¼šã€‚é‚£ä¹ˆï¼Œå°±è®©æˆ‘ä»¬ä»Žç”³è¯·å°ç¨‹åºå¼€å§‹å§ï¼ å°ç¨‹åºå¼€å‘æ³¨å†Œä¼ é€é—¨ï¼ŒæŒ‰ç…§æ­¥éª¤å®Œæˆæ³¨å†Œè®¤è¯å°±å¯ä»¥å¼€å§‹å¼€å‘å’¯ã€‚ æ³¨å†Œå®Œä¹‹åŽå°±ç™»å½•è¿›å…¥å¼€å‘ å¡«å†™ä¸ªäººèµ„æ–™ å¡«å†™ä¸ªäººèµ„æ–™ æ³¨æ„äº‹é¡¹ï¼š 1.ä¸ªäººä¿¡æ¯ç™»è®°æ—¶ï¼Œç»„ç»‡åç§°å’Œç»„ç»‡æœºæž„ä»£ç å¯éšä¾¿å¡«ï¼Œè€Œç»„ç»‡æœºæž„ä»£ç è¯ï¼Œå¯ä»¥ç›´æŽ¥éšä¾¿æœä¸€å¼ å›¾ç‰‡ä¸Šä¼ å³å¯ã€‚ 2.ç®¡ç†å‘˜ä¿¡æ¯ç™»è®°ï¼Œè¿™ä¿¡æ¯è¦å¡«å†™ä½ çš„çœŸå®žä¿¡æ¯ï¼Œæœ‰èº«ä»½è¯å®žåéªŒè¯çš„ï¼Œè¿˜éœ€è¦å¼€é€šå¾®ä¿¡æ”¯ä»˜çš„ç”¨æˆ·ï¼Œæ‰«ç ç¡®è®¤æ‰å¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥çš„ä¿¡æ¯å¡«å†™ã€‚ 3.æ¯æ¬¡ç™»å½•éƒ½éœ€è¦æ‰«ç è®¤è¯ï¼Œç¡®è®¤æˆåŠŸåŽå°±å¯ä»¥æ­£å¸¸ç™»å½•äº†ã€‚ ä¸ªäººå¼€å‘åªæœ‰è‡ªå·±æ”¯ä»˜æ³¨å†Œè´¹ç”¨ï¼Œæœ‰å…¬å¸æŠ¥é”€é‚£æ˜¯å†å¥½ä¸è¿‡äº†ï¼Œä¹‹åŽå°±æ˜¯ä¸‹è½½å¼€å‘è€…å·¥å…·ï¼š æˆ‘ä»¬æ‰«ç ç™»å½•åŽä¼šæœ‰2ä¸ªé€‰æ‹©:å°ç¨‹åºé¡¹ç›®å’Œå…¬ä¼—å·ç½‘é¡µé¡¹ç›®ï¼Œæˆ‘ä»¬è¿™é‡Œé€‰æ‹©ç¬¬ä¸€ä¸ªå°ç¨‹åºé¡¹ç›® æ–°å»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶ï¼Œè¾“å…¥è‡ªå·±çš„APPIDï¼Œç¡®å®š è¿›å…¥å¼€å‘è°ƒè¯•ç•Œé¢ï¼Œç•Œé¢è¿˜æ˜¯è¶Šæ¥è¶Šé€‚åº”å¼€å‘ï¼ŒçœŸçš„æ˜¯è¶Šæ¥è¶Šå…¼é¡¾å¼€å‘ä¸Žä¼˜ç¾Žç•Œé¢ï¼Œå¼€å¯å±žäºŽè‡ªå·±çš„å°ç¨‹åºä¹‹æ—…å§ï¼ æ³¨æ„äº‹é¡¹ï¼š 1.æ¯æ¬¡ç™»å½•éƒ½éœ€è¦æ‰«ç ç™»å½• 2.éœ€è¦è¾“å…¥è‡ªå·±çš„APPID 3.æ¯æ¬¡ä¿®æ”¹å®Œä»£ç éƒ½è¦ç¼–è¯‘ æ€»ç»“æ˜¯æ—¶å€™å¼€å§‹æ’¸ä¸€ä¸‹å¾®ä¿¡å°ç¨‹åºäº†ï¼Œé‚£ä¹ˆå¥½çš„ç”¨æˆ·åŸºç¡€ï¼Œæ€Žä¹ˆèƒ½æ”¾å¼ƒè¿™ä¹ˆå¥½çš„ä¸€ä¸ªå¼€å‘ä¸Žç”¨æˆ·ä½“éªŒçš„æœºä¼šã€‚é‚£ä¹ˆï¼Œå°±è®©æˆ‘ä»¬ä»Žç”³è¯·å°ç¨‹åºå¼€å§‹å§ï¼å¾®ä¿¡å°ç¨‹åºåŠŸèƒ½éžå¸¸å¼ºå¤§ï¼Œæ˜¯IDEå’Œè°ƒè¯•ç•Œé¢ç»“åˆçš„æ¨¡å¼ï¼ŒçœåŽ»å„ç§æµè§ˆå™¨çš„è°ƒè¯•çƒ¦æ¼ï¼Œè¿˜æœ‰å°±æ˜¯ä»–çš„è½»ä¾¿ä¸Žå‘å±•å‰æ™¯ã€‚]]></content>
      <categories>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
        <tag>å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactå¼€å‘å¸¸ç”¨è®¾è®¡æ¨¡å¼-å—æŽ§è¾“å…¥å’Œéžå—æŽ§è¾“å…¥]]></title>
    <url>%2Fblog%2F2018%2F05%2F15%2FReact%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%97%E6%8E%A7%E8%BE%93%E5%85%A5%E5%92%8C%E9%9D%9E%E5%8F%97%E6%8E%A7%E8%BE%93%E5%85%A5%2F</url>
    <content type="text"><![CDATA[åœ¨ React è¡¨å•ç®¡ç†ä¸­æœ‰ä¸¤ä¸ªç»å¸¸ä½¿ç”¨çš„æœ¯è¯­:å—æŽ§è¾“å…¥å’Œéžå—æŽ§è¾“å…¥ã€‚å—æŽ§è¾“å…¥æ˜¯æŒ‡è¾“å…¥å€¼çš„æ¥æºæ˜¯å•ä¸€çš„ã€‚ä¸Žä¹‹ç›¸åçš„æ˜¯éžå—æŽ§è¾“å…¥ï¼Œå®ƒè®©æµè§ˆå™¨æ¥å¤„ç†ç”¨æˆ·çš„è¾“å…¥ã€‚ä½¿ç”¨å—æŽ§è¾“å…¥è¿˜æ˜¯éžå—æŽ§è¾“å…¥ï¼Œè¿™ä¸ªé€‰æ‹©å¸¸å¸¸ä¸è¢«äººæ‰€é‡è§†ã€‚ä½†æˆ‘ç›¸ä¿¡è¿™æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„å†³ç­–ï¼Œå› ä¸ºå®ƒå†³å®šäº† React ç»„ä»¶çš„æ•°æ®æµã€‚æˆ‘ä¸ªäººè®¤ä¸ºéžå—æŽ§è¾“å…¥æ›´åƒæ˜¯ä¸€ç§åæ¨¡å¼ï¼Œåº”è¯¥å°½é‡é¿å…ä½¿ç”¨ã€‚ å—æŽ§è¾“å…¥å’Œéžå—æŽ§è¾“å…¥åœ¨ React è¡¨å•ç®¡ç†ä¸­æœ‰ä¸¤ä¸ªç»å¸¸ä½¿ç”¨çš„æœ¯è¯­: å—æŽ§è¾“å…¥å’Œéžå—æŽ§è¾“å…¥ã€‚ å—æŽ§è¾“å…¥æ˜¯æŒ‡è¾“å…¥å€¼çš„æ¥æºæ˜¯å•ä¸€çš„ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ App ç»„ä»¶æœ‰ä¸€ä¸ª&lt;input&gt; å­—æ®µï¼Œå®ƒå°±æ˜¯å—æŽ§çš„:123456789 class App extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; value: &apos;hello&apos; &#125;; &#125; render() &#123; return &lt;input type=&apos;text&apos; value=&#123; this.state.value &#125; /&gt;; &#125;&#125;; ä¸Šé¢ä»£ç çš„ç»“æžœæ˜¯æˆ‘ä»¬å¯ä»¥æ“ä½œinput å…ƒç´ ï¼Œä½†æ˜¯æ— æ³•æ”¹å˜å®ƒçš„å€¼ã€‚å®ƒæ°¸è¿œéƒ½ä¸ä¼šæ›´æ–°ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å•ä¸€æ•°æ®æº: App ç»„ä»¶çš„çŠ¶æ€ã€‚è¦æƒ³è®©inputæ­£å¸¸å·¥ä½œçš„è¯ï¼Œéœ€è¦ä¸ºå…¶æ·»åŠ onChange å¤„ç†æ–¹æ³•æ¥æ›´æ–°çŠ¶æ€ (å•ä¸€æ•°æ®æº)ã€‚onChange ä¼šè§¦å‘æ–°çš„æ¸²æŸ“å‘¨æœŸï¼Œæ‰€ä»¥èƒ½çœ‹åˆ°åœ¨ inputä¸­è¾“å…¥çš„æ–‡å­—ã€‚123456789101112131415161718class App extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; value: &apos;hello&apos; &#125;; this._change = this._handleInputChange.bind(this); &#125; render() &#123; return ( &lt;input type=&apos;text&apos; value=&#123; this.state.value &#125; onChange=&#123; this._change &#125; /&gt; ); &#125; _handleInputChange(e) &#123; this.setState(&#123; value: e.target.value &#125;); &#125;&#125;; ä¸Žä¹‹ç›¸åçš„æ˜¯éžå—æŽ§è¾“å…¥ï¼Œå®ƒè®©æµè§ˆå™¨æ¥å¤„ç†ç”¨æˆ·çš„è¾“å…¥ã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨ defaultValue å±žæ€§æ¥æä¾›åˆå§‹å€¼ï¼Œæ­¤åŽæµè§ˆå™¨å°†è´Ÿè´£ä¿å­˜è¾“å…¥çš„çŠ¶æ€ã€‚123456789class App extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; value: &apos;hello&apos; &#125;; &#125; render() &#123; return &lt;input type=&apos;text&apos; defaultValue=&#123; this.state.value &#125; /&gt; &#125;&#125;; ä¸Šé¢çš„ &lt;input&gt;å…ƒç´ å…¶å®žæ²¡ä»€ä¹ˆç”¨ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç»„ä»¶å¹¶ä¸çŸ¥é“ç”¨æˆ·æ›´æ–°çš„å€¼ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨ Refs æ¥èŽ·å– DOM å…ƒç´ çš„å®žé™…å¼•ç”¨ã€‚12345678910111213141516171819class App extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; value: &apos;hello&apos; &#125;; this._change = this._handleInputChange.bind(this); &#125; render() &#123; return ( &lt;input type=&apos;text&apos; defaultValue=&#123; this.state.value &#125; onChange=&#123; this._change &#125; ref=&#123; input =&gt; this.input = input &#125;/&gt; ); &#125; _handleInputChange() &#123; this.setState(&#123; value: this.input.value &#125;); &#125;&#125;; refå±žæ€§æŽ¥æ”¶å­—ç¬¦ä¸²æˆ–å›žè°ƒå‡½æ•°ã€‚ä¸Šé¢çš„ä»£ç ä½¿ç”¨å›žè°ƒå‡½æ•°æ¥å°† DOM å…ƒç´ ä¿å­˜åœ¨å±€éƒ¨å˜é‡inputä¸­ã€‚ä¹‹åŽå½“ onChangeäº‹ä»¶è§¦å‘æ—¶ï¼Œæˆ‘ä»¬å°† input ä¸­çš„æœ€æ–°å€¼ä¿å­˜åˆ° App ç»„ä»¶çš„çŠ¶æ€é‡Œã€‚ å¤§é‡ä½¿ç”¨refs å¹¶éžæ˜¯ä¸ªå¥½ä¸»æ„ã€‚å¦‚æžœä½ çš„åº”ç”¨ä¸­å‡ºçŽ°äº†è¿™ç§æƒ…å†µçš„è¯ï¼Œé‚£ä¹ˆä½ éœ€è¦è€ƒè™‘ä½¿ç”¨å—æŽ§è¾“å…¥å¹¶é‡æ–°å®¡è§†ç»„ä»¶ã€‚ ç»“è¯­ä½¿ç”¨å—æŽ§è¾“å…¥è¿˜æ˜¯éžå—æŽ§è¾“å…¥ï¼Œè¿™ä¸ªé€‰æ‹©å¸¸å¸¸ä¸è¢«äººæ‰€é‡è§†ã€‚ä½†æˆ‘ç›¸ä¿¡è¿™æ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„å†³ç­–ï¼Œå› ä¸ºå®ƒå†³å®šäº† React ç»„ä»¶çš„æ•°æ®æµã€‚æˆ‘ä¸ªäººè®¤ä¸ºéžå—æŽ§è¾“å…¥æ›´åƒæ˜¯ä¸€ç§åæ¨¡å¼ï¼Œåº”è¯¥å°½é‡é¿å…ä½¿ç”¨ã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactå¼€å‘å¸¸ç”¨è®¾è®¡æ¨¡å¼-ç»„åˆ (composition)]]></title>
    <url>%2Fblog%2F2018%2F05%2F14%2FReact%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%BB%84%E5%90%88-composition%2F</url>
    <content type="text"><![CDATA[å¯¹äºŽäº‹ä»¶å¤„ç†ï¼ŒReact æä¾›äº†ä¸€ç³»åˆ—å±žæ€§ã€‚è§£å†³æ–¹æ¡ˆå‡ ä¹Žå’Œä½¿ç”¨æ ‡å‡†åŒ– DOM å®Œå…¨ä¸€æ ·ã€‚ä¹Ÿæœ‰ä¸€äº›ä¸åŒç‚¹ï¼Œæ¯”å¦‚ä½¿ç”¨é©¼å³°å¼æˆ–ä¼ å…¥çš„æ˜¯å‡½æ•°ï¼Œä½†æ€»ä½“æ¥è¯´ï¼Œè¿˜æ˜¯ååˆ†ç›¸ä¼¼çš„ã€‚ä½ æ˜¯å¦å¯¹ä¸ºä½•è¿˜åœ¨ä½¿ç”¨ HTML æ„Ÿåˆ°å¥‡æ€ªï¼ŸHTML æ˜¯åœ¨äº’è”ç½‘åˆ›å»ºä¹‹åˆåˆ›å»ºçš„ï¼Œç›´åˆ°çŽ°åœ¨æˆ‘ä»¬ä»ç„¶åœ¨ä½¿ç”¨å®ƒã€‚åŽŸå› åœ¨äºŽå®ƒçš„é«˜åº¦å¯ç»„åˆæ€§ã€‚React å’Œå®ƒçš„ JSX çœ‹èµ·æ¥åƒè¿›åŒ–çš„ HTML ï¼Œå› æ­¤å®ƒå…·å¤‡åŒæ ·çš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œè¯·ç¡®ä¿ç²¾é€šç»„åˆï¼Œå› ä¸ºå®ƒæ˜¯ React æœ€å¤§çš„å¥½å¤„ä¹‹ä¸€ã€‚ ç»„åˆ ( composition )React æœ€å¤§çš„å¥½å¤„æ˜¯å®ƒçš„å¯ç»„åˆæ€§ã€‚å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘ä¸çŸ¥é“è¿˜æœ‰å“ªä¸ªæ¡†æž¶èƒ½æä¾›è¿™æ ·å¦‚æ­¤ç®€å•åœ°åˆ›å»ºå’Œç»„åˆç»„ä»¶çš„æ–¹å¼ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†æŽ¢è®¨ä¸€äº›å¥½ç”¨çš„ç»„åˆæŠ€å·§ï¼Œè¿™äº›æŠ€å·§éƒ½æ˜¯ç»è¿‡å®žæˆ˜éªŒè¯çš„ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€å•ç¤ºä¾‹ã€‚å‡è®¾æˆ‘ä»¬çš„åº”ç”¨æœ‰ä¸€ä¸ªå¤´éƒ¨ï¼Œæˆ‘ä»¬æƒ³åœ¨å¤´éƒ¨ä¸­æ”¾ç½®å¯¼èˆªã€‚æˆ‘ä»¬æœ‰ä¸‰ä¸ª React ç»„ä»¶ â€”Appã€Header å’Œ Navigation ã€‚è¿™ä¸‰ä¸ªç»„ä»¶æ˜¯ä¸€ä¸ªåµŒå¥—ä¸€ä¸ªçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åˆ°çš„ä¾èµ–å…³ç³»å¦‚ä¸‹:1&lt;App&gt; -&gt; &lt;Header&gt; -&gt; &lt;Navigation&gt; ç»„åˆè¿™äº›ç»„ä»¶çš„ç®€å•æ–¹æ³•æ˜¯åœ¨éœ€è¦å®ƒä»¬çš„æ—¶å€™å¼•ç”¨å³å¯ã€‚123456789101112131415161718// app.jsximport Header from './Header.jsx';export default function App() &#123; return &lt;Header /&gt;;&#125;// Header.jsximport Navigation from './Navigation.jsx';export default function Header() &#123; return &lt;header&gt;&lt;Navigation /&gt;&lt;/header&gt;;&#125;// Navigation.jsxexport default function Navigation() &#123; return (&lt;nav&gt; ... &lt;/nav&gt;);&#125; ä½†æ˜¯ï¼Œè¿™ç§æ–¹å¼ä¼šå¼•å…¥ä¸€äº›é—®é¢˜: æˆ‘ä»¬å¯ä»¥æŠŠ App çœ‹ä½œæ˜¯ä¸»è¦çš„ç»„åˆåœºæ‰€ã€‚Header å¯èƒ½è¿˜æœ‰å…¶ä»–å…ƒç´ ï¼Œæ¯”å¦‚ logoã€æœç´¢æ¡†æˆ–æ ‡è¯­ã€‚å¦‚æžœå®ƒä»¬æ˜¯ä»¥æŸç§æ–¹å¼é€šè¿‡ App ç»„ä»¶ä¼ å…¥çš„å°±å¥½äº†ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ— éœ€åˆ›å»ºç›®å‰è¿™ç§ç¡¬ç¼–ç çš„ä¾èµ–å…³ç³»ã€‚å†æ¯”å¦‚è¯´æˆ‘ä»¬å¦‚æžœéœ€è¦ä¸€ä¸ªæ²¡æœ‰ Navigation çš„ Header ç»„ä»¶è¯¥æ€Žä¹ˆåŠžï¼Ÿæˆ‘ä»¬æ— æ³•è½»æ¾å®žçŽ°ï¼Œå› ä¸ºæˆ‘ä»¬å°†è¿™ä¸¤ä¸ªç»„ä»¶ç´§ç»‘åœ¨äº†ä¸€èµ·ã€‚ ä»£ç å¾ˆéš¾æµ‹è¯•ã€‚åœ¨ Header ä¸­æˆ–è®¸æœ‰ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼Œè¦æµ‹è¯•å®ƒçš„è¯æˆ‘ä»¬éœ€è¦åˆ›å»ºå‡ºä¸€ä¸ªç»„ä»¶å®žä¾‹ã€‚ä½†æ˜¯ï¼Œå› ä¸ºå®ƒè¿˜å¯¼å…¥äº†å…¶ä»–ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦ä¸ºè¿™äº›å¯¼å…¥çš„ç»„ä»¶åˆ›å»ºå®žä¾‹ï¼Œè¿™æ ·çš„è¯æµ‹è¯•å°±å˜çš„å¾ˆé‡ã€‚å¦‚æžœ Navigation ç»„ä»¶å‡ºäº†é—®é¢˜ï¼Œé‚£ä¹ˆ Header ç»„ä»¶çš„æµ‹è¯•å·²å°†è¢«ç ´åï¼Œè¿™å®Œå…¨ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæžœã€‚(æ³¨æ„: æµ…å±‚æ¸²æŸ“ ( shallow rendering ) é€šè¿‡ä¸æ¸²æŸ“ Header ç»„ä»¶åµŒå¥—çš„å­å…ƒç´ èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šè§£å†³æ­¤é—®é¢˜ã€‚) ä½¿ç”¨ React children APIReact æä¾›äº†ä¾¿åˆ©çš„ children å±žæ€§ã€‚é€šè¿‡å®ƒçˆ¶ç»„ä»¶å¯ä»¥è¯»å–/è®¿é—®å®ƒçš„åµŒå¥—å­å…ƒç´ ã€‚æ­¤ API å¯ä»¥ä½¿å¾— Header ç»„ä»¶ä¸ç”¨çŸ¥æ™“å®ƒçš„åµŒå¥—å­å…ƒç´ ï¼Œä»Žè€Œè§£æ”¾ä¹‹å‰çš„ä¾èµ–å…³ç³»:12345678910export default function App() &#123; return ( &lt;Header&gt; &lt;Navigation /&gt; &lt;/Header&gt; );&#125;export default function Header(&#123; children &#125;) &#123; return &lt;header&gt;&#123; children &#125;&lt;/header&gt;;&#125;; æ³¨æ„ï¼Œå¦‚æžœä¸åœ¨ Header ä¸­ä½¿ç”¨ { children }çš„è¯ï¼Œé‚£ä¹ˆ Navigation ç»„ä»¶æ°¸è¿œä¸ä¼šæ¸²æŸ“ã€‚ çŽ°åœ¨ Header ç»„ä»¶çš„æµ‹è¯•å˜å¾—æ›´ç®€å•äº†ï¼Œå› ä¸ºå®Œå…¨å¯ä»¥ä½¿ç”¨ç©º &lt;div&gt; æ¥æ¸²æŸ“ Header ç»„ä»¶ã€‚è¿™ä¼šä½¿ç”¨ç»„ä»¶æ›´ç‹¬ç«‹ï¼Œå¹¶è®©æˆ‘ä»¬ä¸“æ³¨äºŽåº”ç”¨çš„ä¸€å°éƒ¨åˆ†ã€‚ å°† child ä½œä¸º prop ä¼ å…¥æ¯ä¸ª React ç»„ä»¶éƒ½æŽ¥æ”¶å±žæ€§ã€‚æ­£å¦‚ä¹‹å‰æ‰€æåˆ°çš„ï¼Œå…³äºŽä¼ å…¥çš„å±žæ€§æ˜¯ä»€ä¹ˆå¹¶æ²¡æœ‰ä»»ä½•ä¸¥æ ¼çš„è§„å®šã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥ä¼ å…¥å…¶ä»–ç»„ä»¶ã€‚123456789101112131415161718const Title = function () &#123; return &lt;h1&gt;Hello there!&lt;/h1&gt;;&#125;const Header = function (&#123; title, children &#125;) &#123; return ( &lt;header&gt; &#123; title &#125; &#123; children &#125; &lt;/header&gt; );&#125;function App() &#123; return ( &lt;Header title=&#123; &lt;Title /&gt; &#125;&gt; &lt;Navigation /&gt; &lt;/Header&gt; );&#125;; è¿è¡Œç»“æžœï¼š å½“é‡åˆ°åƒ Header è¿™æ ·çš„ç»„ä»¶æ—¶ï¼Œè¿™ç§æŠ€æœ¯éžå¸¸æœ‰ç”¨ï¼Œå®ƒä»¬éœ€è¦å¯¹å…¶åµŒå¥—çš„å­å…ƒç´ è¿›è¡Œå†³ç­–ï¼Œä½†å¹¶ä¸å…³å¿ƒå®ƒä»¬çš„å®žé™…æƒ…å†µã€‚ é«˜é˜¶ç»„ä»¶å¾ˆé•¿ä¸€æ®µæ—¶æœŸå†…ï¼Œé«˜é˜¶ç»„ä»¶éƒ½æ˜¯å¢žå¼ºå’Œç»„åˆ React å…ƒç´ çš„æœ€æµè¡Œçš„æ–¹å¼ã€‚å®ƒä»¬çœ‹ä¸ŠåŽ»ä¸Ž è£…é¥°å™¨æ¨¡å¼ ååˆ†ç›¸ä¼¼ï¼Œå› ä¸ºå®ƒæ˜¯å¯¹ç»„ä»¶çš„åŒ…è£…ä¸Žå¢žå¼ºã€‚ ä»ŽæŠ€æœ¯è§’åº¦æ¥è¯´ï¼Œé«˜é˜¶ç»„ä»¶é€šå¸¸æ˜¯å‡½æ•°ï¼Œå®ƒæŽ¥æ”¶åŽŸå§‹ç»„ä»¶å¹¶è¿”å›žåŽŸå§‹ç»„ä»¶çš„å¢žå¼º/å¡«å……ç‰ˆæœ¬ã€‚æœ€ç®€å•çš„ç¤ºä¾‹å¦‚ä¸‹:1234567891011121314151617var enhanceComponent = (Component) =&gt; class Enhance extends React.Component &#123; render() &#123; return ( &lt;Component &#123;...this.props&#125; /&gt; ) &#125; &#125;;var OriginalTitle = () =&gt; &lt;h1&gt;Hello world&lt;/h1&gt;;var EnhancedTitle = enhanceComponent(OriginalTitle);class App extends React.Component &#123; render() &#123; return &lt;EnhancedTitle /&gt;; &#125;&#125;; é«˜é˜¶ç»„ä»¶è¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ¸²æŸ“åŽŸå§‹ç»„ä»¶ã€‚å°†é«˜é˜¶ç»„ä»¶çš„ props ä¼ ç»™åŽŸå§‹ç»„ä»¶æ˜¯ä¸€ç§æœ€ä½³å®žè·µã€‚è¿™ç§æ–¹å¼å°†ä¿æŒåŽŸå§‹ç»„ä»¶çš„è¾“å…¥ã€‚è¿™ä¾¿æ˜¯è¿™ç§æ¨¡å¼çš„æœ€å¤§å¥½å¤„ï¼Œå› ä¸ºæˆ‘ä»¬æŽ§åˆ¶äº†åŽŸå§‹ç»„ä»¶çš„è¾“å…¥ï¼Œè€Œè¾“å…¥å¯ä»¥åŒ…å«åŽŸå§‹ç»„ä»¶é€šå¸¸æ— æ³•è®¿é—®çš„å†…å®¹ã€‚å‡è®¾æˆ‘ä»¬æœ‰OriginalTitleæ‰€éœ€è¦çš„é…ç½®:12345678910111213141516var config = require('path/to/configuration');var enhanceComponent = (Component) =&gt; class Enhance extends React.Component &#123; render() &#123; return ( &lt;Component &#123;...this.props&#125; title=&#123; config.appTitle &#125; /&gt; ) &#125; &#125;;var OriginalTitle = (&#123; title &#125;) =&gt; &lt;h1&gt;&#123; title &#125;&lt;/h1&gt;;var EnhancedTitle = enhanceComponent(OriginalTitle); appTitle æ˜¯å°è£…åœ¨é«˜é˜¶ç»„ä»¶å†…éƒ¨çš„ã€‚OriginalTitle åªçŸ¥é“å®ƒæ‰€æŽ¥æ”¶çš„ title å±žæ€§ï¼Œå®ƒå®Œå…¨ä¸çŸ¥é“æ•°æ®æ˜¯æ¥è‡ªé…ç½®æ–‡ä»¶çš„ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå·¨å¤§çš„ä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒä½¿å¾—æˆ‘ä»¬å¯ä»¥å°†ç»„ä»¶çš„ä»£ç å—è¿›è¡Œéš”ç¦»ã€‚å®ƒè¿˜æœ‰åŠ©äºŽç»„ä»¶çš„æµ‹è¯•ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥è½»æ˜“åœ°åˆ›å»ºmocks ã€‚ è¿™ç§æ¨¡å¼çš„å¦å¤–ä¸€ä¸ªç‰¹ç‚¹æ˜¯ä¸ºé™„åŠ çš„é€»è¾‘æä¾›äº†å¾ˆå¥½çš„ç¼“å†²åŒºã€‚ä¾‹å¦‚ï¼Œå¦‚æžœ OriginalTitle éœ€è¦çš„æ•°æ®æ¥è‡ªè¿œç¨‹æœåŠ¡å™¨ã€‚æˆ‘ä»¬å¯ä»¥åœ¨é«˜é˜¶ç»„ä»¶ä¸­è¯·æ±‚æ­¤æ•°æ®ï¼Œç„¶åŽå°†å…¶ä½œä¸ºå±žæ€§ä¼ ç»™ OriginalTitle ã€‚1234567891011121314151617181920212223242526var enhanceComponent = (Component) =&gt; class Enhance extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; remoteTitle: null &#125;; &#125; componentDidMount() &#123; fetchRemoteData('path/to/endpoint').then(data =&gt; &#123; this.setState(&#123; remoteTitle: data.title &#125;); &#125;); &#125; render() &#123; return ( &lt;Component &#123;...this.props&#125; title=&#123; config.appTitle &#125; remoteTitle=&#123; this.state.remoteTitle &#125; /&gt; ) &#125; &#125;;var OriginalTitle = (&#123; title, remoteTitle &#125;) =&gt; &lt;h1&gt;&#123; title &#125;&#123; remoteTitle &#125;&lt;/h1&gt;;var EnhancedTitle = enhanceComponent(OriginalTitle); è¿™æ¬¡ï¼ŒOriginalTitle åªçŸ¥é“å®ƒæŽ¥æ”¶ä¸¤ä¸ªå±žæ€§ï¼Œç„¶åŽå°†å®ƒä»¬å¹¶æŽ’æ¸²æŸ“å‡ºæ¥ã€‚å®ƒåªå…³å¿ƒæ•°æ®çš„è¡¨çŽ°ï¼Œè€Œæ— éœ€å…³å¿ƒæ•°æ®çš„æ¥æºå’Œæ–¹å¼ã€‚ å…³äºŽé«˜é˜¶ç»„ä»¶çš„åˆ›å»ºé—®é¢˜ï¼ŒDan Abramov æå‡ºäº†ä¸€ä¸ª éžå¸¸æ£’çš„è§‚ç‚¹ï¼Œåƒè°ƒç”¨ enhanceComponent è¿™æ ·çš„å‡½æ•°æ—¶ï¼Œåº”è¯¥åœ¨ç»„ä»¶å®šä¹‰çš„å±‚çº§è°ƒç”¨ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨å¦ä¸€ä¸ª React ç»„ä»¶ä¸­åšè¿™ä»¶äº‹æ˜¯æœ‰é—®é¢˜çš„ï¼Œå®ƒä¼šå¯¼è‡´åº”ç”¨é€Ÿåº¦å˜æ…¢å¹¶å¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚ å°†å‡½æ•°ä½œä¸º children ä¼ å…¥å’Œ render propReact ç¤¾åŒºå¼€å§‹è½¬å‘ä¸€ä¸ªæœ‰è¶£çš„æ–¹å‘ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ç¤ºä¾‹ä¸­çš„ children å±žæ€§éƒ½æ˜¯ React ç»„ä»¶ã€‚ç„¶è€Œï¼Œæœ‰ä¸€ç§æ–°çš„æ¨¡å¼è¶Šæ¥è¶Šå—æ¬¢è¿Žï¼Œchildren å±žæ€§æ˜¯ä¸€ä¸ª JSX è¡¨è¾¾å¼ã€‚æˆ‘ä»¬å…ˆä»Žä¼ å…¥ä¸€ä¸ªç®€å•å¯¹è±¡å¼€å§‹ã€‚123456789101112131415161718function UserName(&#123; children &#125;) &#123; return ( &lt;div&gt; &lt;b&gt;&#123; children.lastName &#125;&lt;/b&gt;, &#123; children.firstName &#125; &lt;/div&gt; );&#125;function App() &#123; const user = &#123; firstName: 'Krasimir', lastName: 'Tsonev' &#125;; return ( &lt;UserName&gt;&#123; user &#125;&lt;/UserName&gt; );&#125; è¿è¡Œç»“æžœï¼š è¿™çœ‹èµ·æ¥æœ‰ç‚¹æ€ªæ€ªçš„ï¼Œä½†å®žé™…ä¸Šå®ƒç¡®å®žéžå¸¸å¼ºå¤§ã€‚ä¾‹å¦‚ï¼Œå½“æŸäº›çˆ¶ç»„ä»¶æ‰€çŸ¥é“çš„å†…å®¹ä¸éœ€è¦ä¼ ç»™å­ç»„ä»¶æ—¶ã€‚ä¸‹é¢çš„ç¤ºä¾‹æ˜¯å¾…åŠžäº‹é¡¹çš„åˆ—è¡¨ã€‚App ç»„ä»¶æ‹¥æœ‰å…¨éƒ¨çš„æ•°æ®ï¼Œå¹¶ä¸”å®ƒçŸ¥é“å¦‚ä½•ç¡®å®šå¾…åŠžäº‹é¡¹æ˜¯å¦å®Œæˆã€‚TodoList ç»„ä»¶åªæ˜¯ç®€å•åœ°å°è£…äº†æ‰€éœ€çš„ HTML æ ‡è®°ã€‚1234567891011121314151617181920212223242526272829function TodoList(&#123; todos, children &#125;) &#123; return ( &lt;section className='main-section'&gt; &lt;ul className='todo-list'&gt;&#123; todos.map((todo, i) =&gt; ( &lt;li key=&#123; i &#125;&gt;&#123; children(todo) &#125;&lt;/li&gt; )) &#125;&lt;/ul&gt; &lt;/section&gt; );&#125;function App() &#123; const todos = [ &#123; label: 'Write tests', status: 'done' &#125;, &#123; label: 'Sent report', status: 'progress' &#125;, &#123; label: 'Answer emails', status: 'done' &#125; ]; const isCompleted = todo =&gt; todo.status === 'done'; return ( &lt;TodoList todos=&#123; todos &#125;&gt; &#123; todo =&gt; isCompleted(todo) ? &lt;b&gt;&#123; todo.label &#125;&lt;/b&gt; : todo.label &#125; &lt;/TodoList&gt; );&#125; è¿è¡Œç»“æžœï¼š æ³¨æ„è§‚å¯Ÿ App ç»„ä»¶æ˜¯å¦‚ä½•ä¸æš´éœ²æ•°æ®ç»“æž„çš„ã€‚TodoList å®Œå…¨ä¸çŸ¥é“ label å’Œ `status å±žæ€§ã€‚ åä¸º render prop çš„æ¨¡å¼ä¸Žä¸Šé¢æ‰€è®²çš„åŸºæœ¬ç›¸åŒï¼Œé™¤äº†æ¸²æŸ“å¾…åŠžäº‹é¡¹ä½¿ç”¨çš„æ˜¯ render å±žæ€§ï¼Œè€Œä¸æ˜¯ children ã€‚1234567891011121314151617181920function TodoList(&#123; todos, render &#125;) &#123; return ( &lt;section className='main-section'&gt; &lt;ul className='todo-list'&gt;&#123; todos.map((todo, i) =&gt; ( &lt;li key=&#123; i &#125;&gt;&#123; render(todo) &#125;&lt;/li&gt; )) &#125;&lt;/ul&gt; &lt;/section&gt; );&#125;return ( &lt;TodoList todos=&#123; todos &#125; render=&#123; todo =&gt; isCompleted(todo) ? &lt;b&gt;&#123; todo.label &#125;&lt;/b&gt; : todo.label &#125; /&gt;); è¿è¡Œç»“æžœï¼š è¿™ä¸¤ç§æ¨¡å¼ å°†å‡½æ•°ä½œä¸º children ä¼ å…¥ å’Œ render prop æ˜¯æˆ‘æœ€æ–°éžå¸¸å–œæ¬¢çš„ã€‚å½“æˆ‘ä»¬æƒ³è¦å¤ç”¨ä»£ç æ—¶ï¼Œå®ƒä»¬æä¾›äº†çµæ´»æ€§å’Œå¸®åŠ©ã€‚å®ƒä»¬è¿˜æ˜¯æŠ½è±¡å‘½ä»¤å¼ä»£ç çš„å¼ºåŠ›æ–¹å¼ã€‚1234567891011121314class DataProvider extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; data: null &#125;; setTimeout(() =&gt; this.setState(&#123; data: 'Hey there!' &#125;), 5000); &#125; render() &#123; if (this.state.data === null) return null; return ( &lt;section&gt;&#123; this.props.render(this.state.data) &#125;&lt;/section&gt; ); &#125;&#125; DataProvider åˆšå¼€å§‹ä¸æ¸²æŸ“ä»»ä½•å†…å®¹ã€‚5 ç§’åŽæˆ‘ä»¬æ›´æ–°äº†ç»„ä»¶çš„çŠ¶æ€å¹¶æ¸²æŸ“å‡ºä¸€ä¸ª&lt;section&gt;ï¼Œ&lt;section&gt; çš„å†…å®¹æ˜¯ç”± render å±žæ€§è¿”å›žçš„ã€‚å¯ä»¥æƒ³è±¡ä¸€ä¸‹åŒæ ·çš„ç»„ä»¶ï¼Œæ•°æ®æ˜¯ä»Žè¿œç¨‹æœåŠ¡å™¨èŽ·å–çš„ï¼Œæˆ‘ä»¬åªæƒ³æ•°æ®èŽ·å–åŽæ‰è¿›è¡Œæ˜¾ç¤ºã€‚1&lt;DataProvider render=&#123; data =&gt; &lt;p&gt;The data is here!&lt;/p&gt; &#125; /&gt; æˆ‘ä»¬æè¿°äº†æˆ‘ä»¬æƒ³è¦åšçš„äº‹ï¼Œè€Œä¸æ˜¯å¦‚ä½•åŽ»åšã€‚ç»†èŠ‚éƒ½å°è£…åœ¨äº† DataProvider ä¸­ã€‚æœ€è¿‘ï¼Œä½¿ç”¨è¿™ç§æ¨¡å¼ï¼ŒæŸäº›ç•Œé¢é™åˆ¶åªå¯¹å…·æœ‰ read:products æƒé™çš„ç”¨æˆ·å¼€æ”¾ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯render prop æ¨¡å¼ã€‚123&lt;Authorize permissionsInclude=&#123;[ 'read:products' ]&#125; render=&#123; () =&gt; &lt;ProductsList /&gt; &#125; /&gt; è¿™ç§å£°æ˜Žå¼çš„æ–¹å¼ç›¸å½“ä¸é”™ï¼Œä¸è¨€è‡ªæ˜Žã€‚Authorize ä¼šè¿›è¡Œè®¤è¯ï¼Œä»¥æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦å…·æœ‰æƒé™ã€‚å¦‚æžœç”¨æˆ·å…·æœ‰è¯»å–äº§å“åˆ—è¡¨çš„æƒé™ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¾¿æ¸²æŸ“ ProductListã€‚ ç»“è¯­ ä½ æ˜¯å¦å¯¹ä¸ºä½•è¿˜åœ¨ä½¿ç”¨ HTML æ„Ÿåˆ°å¥‡æ€ªï¼ŸHTML æ˜¯åœ¨äº’è”ç½‘åˆ›å»ºä¹‹åˆåˆ›å»ºçš„ï¼Œç›´åˆ°çŽ°åœ¨æˆ‘ä»¬ä»ç„¶åœ¨ä½¿ç”¨å®ƒã€‚åŽŸå› åœ¨äºŽå®ƒçš„é«˜åº¦å¯ç»„åˆæ€§ã€‚React å’Œå®ƒçš„ JSX çœ‹èµ·æ¥åƒè¿›åŒ–çš„ HTML ï¼Œå› æ­¤å®ƒå…·å¤‡åŒæ ·çš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œè¯·ç¡®ä¿ç²¾é€šç»„åˆï¼Œå› ä¸ºå®ƒæ˜¯ React æœ€å¤§çš„å¥½å¤„ä¹‹ä¸€ã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactå¼€å‘å¸¸ç”¨è®¾è®¡æ¨¡å¼-äº‹ä»¶å¤„ç†]]></title>
    <url>%2Fblog%2F2018%2F05%2F14%2FReact%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%2F</url>
    <content type="text"><![CDATA[å¯¹äºŽäº‹ä»¶å¤„ç†ï¼ŒReact æä¾›äº†ä¸€ç³»åˆ—å±žæ€§ã€‚è§£å†³æ–¹æ¡ˆå‡ ä¹Žå’Œä½¿ç”¨æ ‡å‡†åŒ– DOM å®Œå…¨ä¸€æ ·ã€‚ä¹Ÿæœ‰ä¸€äº›ä¸åŒç‚¹ï¼Œæ¯”å¦‚ä½¿ç”¨é©¼å³°å¼æˆ–ä¼ å…¥çš„æ˜¯å‡½æ•°ï¼Œä½†æ€»ä½“æ¥è¯´ï¼Œè¿˜æ˜¯ååˆ†ç›¸ä¼¼çš„ã€‚ äº‹ä»¶å¤„ç†123456const theLogoIsClicked = () =&gt; alert('Clicked');&lt;Logo onClick=&#123; theLogoIsClicked &#125; /&gt;&lt;input type='text' onChange=&#123;event =&gt; theInputIsChanged(event.target.value) &#125; /&gt; é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨åŒ…å«æ´¾å‘äº‹ä»¶çš„å…ƒç´ çš„ç»„ä»¶ä¸­å¤„ç†äº‹ä»¶ã€‚æ¯”å¦‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œæˆ‘ä»¬æƒ³è¦åœ¨åŒä¸€ä¸ªç»„ä»¶ä¸­è¿è¡Œå‡½æ•°æˆ–æ–¹æ³•: 123456789101112 class Switcher extends React.Component &#123; render() &#123; return ( &lt;button onClick=&#123; this._handleButtonClick &#125;&gt; click me &lt;/button&gt; ); &#125; _handleButtonClick() &#123; console.log(&apos;Button is clicked&apos;); &#125;&#125;; è¿™æ ·ä½¿ç”¨å®Œå…¨å¯ä»¥ï¼Œå› ä¸º _handleButtonClick æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè€Œæˆ‘ä»¬ä¹Ÿç¡®å®žå°†è¿™ä¸ªå‡½æ•°ä¼ ç»™äº† onClick å±žæ€§ã€‚é—®é¢˜æ˜¯è¿™æ®µä»£ç ä¸­å¹¶æ²¡æœ‰ä¿æŒåŒä¸€ä¸ªä¸Šä¸‹æ–‡ã€‚æ‰€ä»¥ï¼Œå¦‚æžœæˆ‘ä»¬åœ¨ _handleButtonClick å‡½æ•°ä¸­ä½¿ç”¨ this æ¥èŽ·å– Switcher ç»„ä»¶çš„å¼•ç”¨æ—¶å°†ä¼šæŠ¥é”™ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨ bind æ¥è§£å†³:123&lt;button onClick=&#123; this._handleButtonClick.bind(this) &#125;&gt; click me&lt;/button&gt; ä½†æ˜¯ï¼Œè¿™æ ·åšçš„è¯ bind å‡½æ•°ä¼šä¸€æ¬¡åˆä¸€æ¬¡åœ°è¢«è°ƒç”¨ï¼Œè¿™æ˜¯å› ä¸º button å¯èƒ½ä¼šæ¸²æŸ“å¤šæ¬¡ã€‚ä¸€ç§æ›´å¥½çš„æ–¹å¼æ˜¯åœ¨ç»„ä»¶çš„æž„é€ å‡½æ•°ä¸­æ¥åˆ›å»ºç»‘å®š:1234567891011121314151617class Switcher extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; name: 'React in patterns' &#125;; this._buttonClick = this._handleButtonClick.bind(this); &#125; render() &#123; return ( &lt;button onClick=&#123; this._buttonClick &#125;&gt; click me &lt;/button&gt; ); &#125; _handleButtonClick() &#123; console.log(`Button is clicked inside $&#123; this.state.name &#125;`); &#125;&#125;; è¿è¡Œç»“æžœï¼š é™„å¸¦ä¸€æï¼Œåœ¨å¤„ç†å‡½æ•°éœ€è¦å’Œç»„ä»¶çš„ä¸Šä¸‹æ–‡ä¿æŒç»Ÿä¸€æ—¶ï¼ŒFacebook æŽ¨è çš„ä¹Ÿæ˜¯æ­¤æŠ€å·§ã€‚ æž„é€ å‡½æ•°è¿˜æ˜¯éƒ¨åˆ†æ‰§è¡Œå¤„ç†å‡½æ•°çš„å¥½åœ°æ–¹ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªè¡¨å•ï¼Œä½†æ˜¯ä¸æƒ³ä¸ºæ¯ä¸ª input æä¾›ä¸€ä¸ªå•ç‹¬çš„å¤„ç†å‡½æ•°ã€‚12345678910111213141516171819class Form extends React.Component &#123; constructor(props) &#123; super(props); this._onNameChanged = this._onFieldChange.bind(this, 'name'); this._onPasswordChanged = this._onFieldChange.bind(this, 'password'); &#125; render() &#123; return ( &lt;form&gt; &lt;input onChange=&#123; this._onNameChanged &#125; /&gt; &lt;input onChange=&#123; this._onPasswordChanged &#125; /&gt; &lt;/form&gt; ); &#125; _onFieldChange(field, event) &#123; console.log(`$&#123; field &#125; changed to $&#123; event.target.value &#125;`); &#125;&#125;; è¿è¡Œç»“æžœï¼š ç»“è¯­å¯¹äºŽ React ä¸­çš„äº‹ä»¶å¤„ç†ï¼Œå…¶å®žæ²¡æœ‰å¤ªå¤šéœ€è¦å­¦ä¹ çš„ã€‚React çš„ä½œè€…ä»¬åœ¨ä¿ç•™å¼€å‘è€…çš„ä½¿ç”¨ä¹ æƒ¯ä¸Šåšçš„ååˆ†å‡ºè‰²ã€‚å› ä¸º JSX ä½¿ç”¨çš„æ˜¯ç±»ä¼¼ HTML çš„è¯­æ³•ï¼Œæ‰€ä»¥ä½¿ç”¨ç±»ä¼¼ DOM çš„äº‹ä»¶å¤„ç†æ„ä¹‰é‡å¤§ã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactå¼€å‘å¸¸ç”¨è®¾è®¡æ¨¡å¼-ç»„ä»¶é€šè®¯]]></title>
    <url>%2Fblog%2F2018%2F05%2F14%2FReact%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF%2F</url>
    <content type="text"><![CDATA[æ¯ä¸ª React ç»„ä»¶å°±åƒä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„å°åž‹ç³»ç»Ÿã€‚å®ƒæœ‰è‡ªå·±çš„çŠ¶æ€ã€è¾“å…¥å’Œè¾“å‡ºã€‚æˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ª React ç»„ä»¶æƒ³è±¡æˆæ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œè¿™ç§æ–¹å¼å¾ˆä¸é”™ã€‚å®ƒæœ‰è‡ªå·±çš„è¾“å…¥ã€ç”Ÿå‘½å‘¨æœŸåŠè¾“å‡ºã€‚æˆ‘ä»¬æ‰€éœ€è¦åšçš„åªæ˜¯å°†è¿™äº›ç›’å­ç»„åˆèµ·æ¥ã€‚è¿™æˆ–è®¸å°±æ˜¯ React æ‰€æä¾›çš„ä¼˜åŠ¿ä¹‹ä¸€:æ˜“äºŽæŠ½è±¡ï¼Œæ˜“äºŽç»„åˆã€‚ ç»„ä»¶é€šè®¯æ¯ä¸ª React ç»„ä»¶å°±åƒä¸€ä¸ªç‹¬ç«‹è¿è¡Œçš„å°åž‹ç³»ç»Ÿã€‚å®ƒæœ‰è‡ªå·±çš„çŠ¶æ€ã€è¾“å…¥å’Œè¾“å‡ºã€‚ è¾“å…¥React ç»„ä»¶çš„è¾“å…¥æ˜¯å®ƒçš„ props ã€‚ä¼ é€’æ•°æ®çš„æ–¹å¼å¦‚ä¸‹:123456789101112131415// Demo.jsxfunction Demo(props) &#123; return &lt;h1&gt;&#123; props.text &#125;&lt;/h1&gt;;&#125;Demo.propTypes = &#123; text: PropTypes.string&#125;;Demo.defaultProps = &#123; text: 'Hello world'&#125;;// App.jsxfunction App() &#123; return &lt;Demo text='Hello React' /&gt;;&#125; Demo ç»„ä»¶åªæœ‰ä¸€ä¸ªè¾“å…¥å±žæ€§ text ã€‚çˆ¶ç»„ä»¶ (App) åœ¨ä½¿ç”¨ &lt;Demo&gt; æ ‡ç­¾æ—¶æä¾›æ­¤å±žæ€§ã€‚åœ¨å®šä¹‰ç»„ä»¶çš„åŒæ—¶æˆ‘ä»¬è¿˜å®šä¹‰äº† propTypes ã€‚åœ¨ propTypes ä¸­æˆ‘ä»¬å®šä¹‰äº†æ¯ä¸ªå±žæ€§çš„ç±»åž‹ï¼Œè¿™æ ·çš„è¯ï¼Œå½“æŸäº›å±žæ€§çš„ç±»åž‹å¹¶éžæˆ‘ä»¬æ‰€é¢„æœŸæ—¶ï¼ŒReact ä¼šåœ¨æŽ§åˆ¶å°ä¸­è¿›è¡Œæç¤ºã€‚defaultProps æ˜¯å¦ä¸€ä¸ªæœ‰ç”¨çš„é€‰é¡¹ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥ä¸ºç»„ä»¶çš„å±žæ€§è®¾ç½®é»˜è®¤å€¼ï¼Œè¿™æ ·å°±ç®—å¼€å‘è€…å¿˜è®°ä¼ å…¥å±žæ€§ä¹Ÿèƒ½ä¿éšœç»„ä»¶å…·æœ‰æœ‰æ•ˆå€¼ã€‚ React å¹¶æ²¡æœ‰ä¸¥æ ¼å®šä¹‰ä¼ å…¥çš„å±žæ€§åº”è¯¥æ˜¯ä»€ä¹ˆã€‚å®ƒå¯ä»¥æ˜¯ä»»ä½•æˆ‘ä»¬æƒ³è¦ä¼ å…¥çš„ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯ä»¥æ˜¯å¦å¤–ä¸€ä¸ªç»„ä»¶:12345678function SomethingElse(&#123; answer &#125;) &#123; return &lt;div&gt;The answer is &#123; answer &#125;&lt;/div&gt;;&#125;function Answer() &#123; return &lt;span&gt;42&lt;/span&gt;;&#125;&lt;SomethingElse answer=&#123; &lt;Answer /&gt; &#125; /&gt; è¿˜æœ‰ä¸€ä¸ª props.children å±žæ€§ï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬è®¿é—®çˆ¶ç»„ä»¶æ ‡ç­¾å†…çš„å­å…ƒç´ ã€‚ä¾‹å¦‚:123456789101112131415function Title(&#123; text, children &#125;) &#123; return ( &lt;h1&gt; &#123; text &#125; &#123; children &#125; &lt;/h1&gt; );&#125;function App() &#123; return ( &lt;Title text='Hello React'&gt; &lt;span&gt;community&lt;/span&gt; &lt;/Title&gt; );&#125; è¿è¡Œç»“æžœï¼š åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒApp ç»„ä»¶ä¸­çš„ &lt;span&gt;community&lt;/span&gt; å°±æ˜¯ Title ç»„ä»¶ä¸­çš„ children å±žæ€§ã€‚æ³¨æ„ï¼Œå¦‚æžœæˆ‘ä»¬å°† { children } ä»Ž Title ç»„ä»¶ä¸­ç§»é™¤ï¼Œé‚£ä¹ˆ &lt;span&gt; æ ‡ç­¾å°†ä¸ä¼šæ¸²æŸ“ã€‚ 16.3 ç‰ˆæœ¬ä¹‹å‰ï¼Œç»„ä»¶è¿˜æœ‰ä¸€ç§é—´æŽ¥è¾“å…¥ï¼Œå«åšcontext ã€‚æ•´ä¸ª React ç»„ä»¶æ ‘å¯èƒ½æœ‰ä¸€ä¸ª context å¯¹è±¡ï¼Œç»„ä»¶æ ‘ä¸­çš„æ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥è®¿é—®å®ƒã€‚æƒ³äº†è§£æ›´å¤šï¼Œè¯·é˜…è¯» ä¾èµ–æ³¨å…¥ ç« èŠ‚ã€‚ è¾“å‡ºReact ç»„ä»¶ç¬¬ä¸€ä¸ªæ˜Žæ˜¾çš„è¾“å‡ºä¾¿æ˜¯æ¸²æŸ“å‡ºæ¥çš„ HTML ã€‚è¿™æ˜¯æˆ‘ä»¬è§†è§‰ä¸Šèƒ½çœ‹åˆ°çš„ã€‚ä½†æ˜¯ï¼Œå› ä¸ºä¼ å…¥çš„å±žæ€§å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ï¼ŒåŒ…æ‹¬å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥å‘é€æ•°æ®æˆ–è§¦å‘æ“ä½œã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæœ‰ä¸€ä¸ªç»„ä»¶&lt;NameField /&gt;ï¼Œå®ƒæŽ¥å—ç”¨æˆ·çš„è¾“å…¥å¹¶èƒ½å°†ç»“æžœå‘é€å‡ºåŽ»ã€‚12345678910111213141516171819202122function NameField(&#123; valueUpdated &#125;) &#123; return ( &lt;input onChange=&#123; event =&gt; valueUpdated(event.target.value) &#125; /&gt; );&#125;;class App extends React.Component &#123; constructor(props) &#123; super(props); this.state = &#123; name: '' &#125;; &#125; render() &#123; return ( &lt;div&gt; &lt;NameField valueUpdated=&#123; name =&gt; this.setState(&#123; name &#125;) &#125; /&gt; Name: &#123; this.state.name &#125; &lt;/div&gt; ); &#125;&#125;; è¿è¡Œç»“æžœï¼š é€šå¸¸ï¼Œæˆ‘ä»¬éœ€è¦é€»è¾‘çš„åˆ‡å…¥ç‚¹ã€‚React è‡ªå¸¦äº†ååˆ†æ–¹ä¾¿çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå®ƒä»¬å¯ä»¥ç”¨æ¥è§¦å‘æ“ä½œã€‚ä¾‹å¦‚ï¼Œåœ¨æŸä¸ªé¡µé¢ï¼Œæˆ‘ä»¬éœ€è¦èŽ·å–å¤–éƒ¨çš„æ•°æ®èµ„æºã€‚123456789101112class ResultsPage extends React.Component &#123; componentDidMount() &#123; this.props.getResults(); &#125; render() &#123; if (this.props.results) &#123; return &lt;List results=&#123; this.props.results &#125; /&gt;; &#125; else &#123; return &lt;LoadingScreen /&gt; &#125; &#125;&#125; å‡è®¾ï¼Œæˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªæœç´¢ç»“æžœçš„åŠŸèƒ½ã€‚æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªæœç´¢é¡µé¢ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œè¿›è¡Œæœç´¢ã€‚å½“ç‚¹å‡»æäº¤æŒ‰é’®æ—¶ï¼Œå°†è·³è½¬è‡³ /results é¡µé¢ï¼Œè¿™é‡Œå°†æ˜¾ç¤ºæœç´¢çš„ç»“æžœã€‚å½“æˆ‘ä»¬è¿›å…¥ç»“æžœæ˜¾ç¤ºé¡µæ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦æ¸²æŸ“åŠ è½½é¡µé¢ï¼ŒåŒæ—¶åœ¨componentDidMount ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è§¦å‘è¯·æ±‚ç»“æžœæ•°æ®çš„æ“ä½œã€‚å½“å¾—åˆ°æ•°æ®åŽï¼Œæˆ‘ä»¬ä¼šå°†å…¶ä¼ ç»™ &lt;List&gt; ç»„ä»¶ã€‚ ç»“è¯­æˆ‘ä»¬å¯ä»¥å°†æ¯ä¸ª React ç»„ä»¶æƒ³è±¡æˆæ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œè¿™ç§æ–¹å¼å¾ˆä¸é”™ã€‚å®ƒæœ‰è‡ªå·±çš„è¾“å…¥ã€ç”Ÿå‘½å‘¨æœŸåŠè¾“å‡ºã€‚æˆ‘ä»¬æ‰€éœ€è¦åšçš„åªæ˜¯å°†è¿™äº›ç›’å­ç»„åˆèµ·æ¥ã€‚è¿™æˆ–è®¸å°±æ˜¯ React æ‰€æä¾›çš„ä¼˜åŠ¿ä¹‹ä¸€: æ˜“äºŽæŠ½è±¡ï¼Œæ˜“äºŽç»„åˆã€‚]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[React å¼€å‘å¸¸ç”¨è®¾è®¡æ¨¡å¼-å‰è¨€]]></title>
    <url>%2Fblog%2F2018%2F05%2F14%2FReact-%E5%BC%80%E5%8F%91%E5%B8%B8%E7%94%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%89%8D%E8%A8%80%2F</url>
    <content type="text"><![CDATA[React æ¨¡å¼ä»‹ç»äº†ä½¿ç”¨ React å¼€å‘æ—¶çš„ä¸€äº›å¸¸ç”¨è®¾è®¡æ¨¡å¼ï¼Œå…¶ä¸­åŒ…æ‹¬çš„æŠ€æœ¯æœ‰ç»„åˆ( composition )ã€æ•°æ®æµã€ä¾èµ–ç®¡ç†ï¼Œç­‰ç­‰ã€‚ Web https://sangka.github.io/react-in-patterns-cn/]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javascriptæ­£åˆ™é€ŸæŸ¥è¡¨]]></title>
    <url>%2Fblog%2F2018%2F05%2F13%2FJavascript%E6%AD%A3%E5%88%99%E9%80%9F%E6%9F%A5%E8%A1%A8%2F</url>
    <content type="text"><![CDATA[é’ˆå¯¹å·¥ä½œä¸­æ‰€éœ€çš„æ­£åˆ™è¡¨è¾¾å¼. å¤šé€‚ç”¨äºŽå­—ç¬¦ä¸²å¤„ç†ã€è¡¨å•éªŒè¯ã€æ—¥å¿—æ•°æ®åˆ†æžç­‰åœºåˆï¼Œå®žç”¨é«˜æ•ˆ, å°†é•¿æœŸç»´æŠ¤ã€‚ replace:1234// ä½¿ç”¨æ­£åˆ™åŒ¹é…ä¸­æ–‡å­—èŠ‚, å°†å…¶æ›¿æ¢ä¸ºxx, å†èŽ·å–å­—ç¬¦ä¸²çš„é•¿åº¦å°±æ˜¯å®Œæ•´çš„é•¿åº¦äº†.function getLen(str) &#123; return str.replace(/[^\x00-\xff]/g, &apos;xx&apos;).length;&#125; test:123456789// åŒ¹é…æ˜¯å¦ç¬¦åˆé‚®ä»¶è§„åˆ™var reg = /\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;// testè¿”å›žä¸€ä¸ªå¸ƒå°”å€¼, è¡¨ç¤ºæ˜¯å¦åŒ¹é…åˆ°åˆ¶å®šå­—ç¬¦ä¸²var mail = reg.test(&apos;anran758@gmail.com&apos;)if (mail) &#123; // å¦‚æžœé‚®ä»¶æ ¼å¼æ­£ç¡®çš„è¯, å°±å¯ä»¥åšç‚¹å•¥äº†(é›¾&#125; è¡¨å•éªŒè¯1234567891011121314151617// ç”¨æˆ·åæ­£åˆ™ï¼Œ4åˆ°16ä½ï¼ˆå­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼Œå‡å·ï¼‰var userNameReg = /^[a-zA-Z0-9_-]&#123;4,16&#125;$/;// å¯†ç å¼ºåº¦æ­£åˆ™ï¼Œæœ€å°‘6ä½ï¼ŒåŒ…æ‹¬è‡³å°‘1ä¸ªå¤§å†™å­—æ¯ï¼Œ1ä¸ªå°å†™å­—æ¯ï¼Œ1ä¸ªæ•°å­—ï¼Œ1ä¸ªç‰¹æ®Šå­—ç¬¦var passwordReg = /^.*(?=.&#123;6,&#125;)(?=.*\d)(?=.*[A-Z])(?=.*[a-z])(?=.*[!@#$%^&amp;*? ]).*$/;// åŒ¹é…é‚®ç®±åœ°å€var mailReg = /\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;// ä¸­å›½å…­ä½æ•°çš„é‚®æ”¿ç¼–ç var postalCode = /^\d&#123;6&#125;$/;// åŒ¹é…15~18ä½èº«ä»½è¯var IDCard = /(^[1-9]\d&#123;5&#125;(18|19|([23]\d))\d&#123;2&#125;((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d&#123;3&#125;[0-9Xx]$)|(^[1-9]\d&#123;5&#125;\d&#123;2&#125;((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d&#123;2&#125;$)/;// åŒ¹é…18ä½çš„æ–°ç‰ˆèº«ä»½è¯var IDCard_18 = /^[1-9]\d&#123;5&#125;(18|19|([23]\d))\d&#123;2&#125;((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d&#123;3&#125;[0-9Xx]$/; ç½‘ç»œç›¸å…³1234567891011//ipv4åœ°å€æ­£åˆ™var IPReg = /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.)&#123;3&#125;(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;// Reg Hexé¢œè‰²æ­£åˆ™var pattern = /^#?([a-fA-F0-9]&#123;6&#125;|[a-fA-F0-9]&#123;3&#125;)$/;// URLæ­£åˆ™var urlReg= /^((https?|ftp|file):\/\/)?([\da-z\.-]+)\.([a-z\.]&#123;2,6&#125;)([\/\w \.-]*)*\/?$/;// åŒ¹é…JSONæ ¼å¼var reg = /^\w+\((&#123;[^()]+&#125;)\)$/ è”ç³»æ–¹å¼1234567891011// 5-11ä½çš„è…¾è®¯qqå·var qqReg = /^[1-9][0-9]&#123;4,11&#125;$/;// å¾®ä¿¡å·æ­£åˆ™ï¼Œ6è‡³20ä½ï¼Œä»¥å­—æ¯å¼€å¤´ï¼Œå­—æ¯ï¼Œæ•°å­—ï¼Œå‡å·ï¼Œä¸‹åˆ’çº¿var qqReg = /^[a-zA-Z]([-_a-zA-Z0-9]&#123;5,19&#125;)+$/;// å›½å†…å¸¸è§var phone = /^1[3|5|8|9]\d&#123;9&#125;$/;// å›ºå®šç”µè¯var telephone = /^(0[0-9]&#123;2&#125;)\d&#123;8&#125;$|^(0[0-9]&#123;3&#125;(\d&#123;7,8&#125;))$/; å­—ç¬¦ä¸²ç›¸å…³123456789101112131415161718192021222324// åŒ¹é…ç”±26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²var reg = /^[A-Za-z]+$/;// åŒ¹é…ç”±26ä¸ªè‹±æ–‡å­—æ¯çš„å¤§å†™ç»„æˆçš„å­—ç¬¦ä¸²var reg = /^[A-Z]+$/;// åŒ¹é…ç”±26ä¸ªè‹±æ–‡å­—æ¯çš„å°å†™ç»„æˆçš„å­—ç¬¦ä¸²var reg = /^[a-z]+$/;// åŒ¹é…ç”±æ•°å­—å’Œ26ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²var reg = /^[A-Za-z0-9]+$/;// åŒ¹é…ç”±æ•°å­—ã€26ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹;åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²var reg = /^\w+$/;// åŒ¹é…ç©ºç™½è¡Œçš„æ­£åˆ™è¡¨è¾¾å¼var reg = /\n\s*\r/;// åŒ¹é…é¦–å°¾ç©ºç™½å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼var reg = /^\s*|\s*$/;var rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;// åŒ¹é…åŒå­—èŠ‚å­—ç¬¦(åŒ…æ‹¬æ±‰å­—åœ¨å†…, ä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é•¿åº¦è®¡2ï¼ŒASCIIå­—ç¬¦è®¡1)var reg = /[^\x00-\xff]/g; åŒ¹é…ç‰¹å®šæ•°å­—1234567891011121314151617181920212223242526272829// åŒ¹é…æ­£æ•´æ•°var reg = /^[1-9]\d*$/;// åŒ¹é…è´Ÿæ•´æ•°var reg = /^-[1-9]\d*$/;// åŒ¹é…æ•´æ•°var reg = /^-?[1-9]\d*$/;// åŒ¹é…éžè´Ÿæ•´æ•°ï¼ˆæ­£æ•´æ•° + 0ï¼‰var reg = /^[1-9]\d*|0$/;// åŒ¹é…éžæ­£æ•´æ•°ï¼ˆè´Ÿæ•´æ•° + 0ï¼‰var reg = /^-[1-9]\d*|0$/;// åŒ¹é…æ­£æµ®ç‚¹æ•°var reg = /^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$/;// åŒ¹é…è´Ÿæµ®ç‚¹æ•°var reg = /^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$/;// åŒ¹é…æµ®ç‚¹æ•°var reg = /^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$/;// åŒ¹é…éžè´Ÿæµ®ç‚¹æ•°ï¼ˆæ­£æµ®ç‚¹æ•° + 0ï¼‰var reg = /^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$/;// åŒ¹é…éžæ­£æµ®ç‚¹æ•°ï¼ˆè´Ÿæµ®ç‚¹æ•° + 0ï¼‰var reg = /^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$/;]]></content>
      <categories>
        <category>Javascript</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
        <tag>ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä»€ä¹ˆæ˜¯ Raxï¼Œä»¥åŠ Rax çš„ç‰¹ç‚¹]]></title>
    <url>%2Fblog%2F2018%2F05%2F11%2F%E4%BB%80%E4%B9%88%E6%98%AF-Rax%EF%BC%8C%E4%BB%A5%E5%8F%8A-Rax-%E7%9A%84%E7%89%B9%E7%82%B9%2F</url>
    <content type="text"><![CDATA[Rax is a universal JavaScript library with a largely React-compatible API. If you use React, you already know how to use Rax. Raxç»è¿‡è¿™æ¬¡è¯•æ°´ï¼ŒWeex çš„æ–¹æ¡ˆå¼€å§‹é€æ­¥ä½¿ç”¨ï¼Œè¯æ˜Žäº†è¿™å¥—æ–¹æ¡ˆæœªæ¥çš„åœºæ™¯åŠå¯è¡Œæ€§ï¼Œ2016 å¹´ Weex å¼€å§‹è¿›å…¥å¿«é€Ÿå‘å±•çš„é˜¶æ®µã€‚ä½†æ˜¯ä½¿ç”¨ Weex å°±æ„å‘³ç€å¿…é¡»ç”¨ Vue çš„è¯­æ³•ï¼Œè¿™å¯¹äºŽæ•´ä¸ªå›¢é˜Ÿæ¥è¯´æ˜¯ä¸€ä¸ªä¸å°çš„æŒ‘æˆ˜ï¼šPC åœºæ™¯ä¸‹çš„é¡¹ç›®ï¼Œå°ä¼™ä¼´ä»¬æ™®éåŸºäºŽ React å¼€å‘ï¼Œå·²ç»æœ‰äº†ç›¸å½“å¤šçš„ç»éªŒä¸Žæ²‰æ·€ã€‚å¦‚æžœæ— çº¿çš„é¡¹ç›®è¦é‡‡ç”¨ä¸€ä¸ªä¸åŒæ–¹æ¡ˆï¼ˆVueï¼‰åŽ»åšï¼Œå¼ºæŽ¨æœªå¿…ä¼šä¸å¥æ•ˆï¼Œä½†æ˜¯å°ä¼™ä¼´ä»¬å¤§æ¦‚ä¼šä¼¤å¿ƒå§ã€‚äºŽæ˜¯æˆ‘ä»¬å°è¯•å°† React ä¸Ž Weex ç»“åˆèµ·æ¥ï¼Œä½†æ˜¯ç”±äºŽæ–¹æ¡ˆå¤ªè¿‡ hack å¯¼è‡´å„ç§é—®é¢˜ï¼Œé‚æ— å¥ˆæ”¾å¼ƒã€‚æŽ¥ç€ Rax çš„æ–¹æ¡ˆåº”è¿è€Œç”Ÿï¼šã€ŒRax åŸºäºŽ React çš„æ ‡å‡†ï¼Œæ”¯æŒåœ¨ä¸åŒå®¹å™¨ä¸­æ¸²æŸ“ï¼Œå½“å‰æœ€é‡è¦çš„å®¹å™¨å³ Weex å’Œ Webã€ã€‚ Rax ä¸Ž ReactReact æ˜¯ä¸€ç§æ ‡å‡†ï¼ŒRax æ˜¯å¯¹è¯¥æ ‡å‡†çš„ä¸€ä¸ªå®žçŽ°ã€‚Rax åªæ˜¯æ— çº¿ç«¯çš„è§£å†³æ–¹æ¡ˆï¼Œä¸Ž React å¹¶æ— å†²çªã€‚äº‹å®žä¸Šæ·˜å® PC ç«¯çš„æ–°é¡¹ç›®ï¼Œä¾ç„¶ä¸»è¦æ˜¯åŸºäºŽ Reactã€‚å½“ç„¶ï¼ŒRax è·Ÿ Preact ä¹‹ç±»çš„æ–¹æ¡ˆä¹Ÿæœ‰æœ¬è´¨åŒºåˆ«ï¼Œå‰è€…åå‘äºŽè§£å†³å¤šç«¯é—®é¢˜ï¼ŒåŽè€…åå‘äºŽè§£å†³æ€§èƒ½é—®é¢˜ï¼Œå…·ä½“å¯å‚è€ƒä¸‹æ–‡ã€ŒRax çš„ç‰¹ç‚¹ã€ã€‚ Rax çš„ç‰¹ç‚¹1ã€è®¾è®¡ä¸Šæ”¯æŒä¸åŒå®¹å™¨Rax åœ¨è®¾è®¡ä¸ŠæŠ½è±¡å‡º Driver çš„æ¦‚å¿µï¼Œç”¨æ¥æ”¯æŒåœ¨ä¸åŒå®¹å™¨ä¸­æ¸²æŸ“ï¼Œæ¯”å¦‚ç›®å‰æ‰€æ”¯æŒçš„ï¼šWeb, Weex, Node.js. åŸºäºŽ Driver çš„æ¦‚å¿µï¼Œæœªæ¥å³ä½¿å‡ºçŽ°æ›´å¤šçš„å®¹å™¨ï¼ˆå¦‚ VR ç­‰ï¼‰ï¼ŒRax ä¹Ÿå¯ä»¥ä»Žå®¹åº”å¯¹ã€‚Rax åœ¨è®¾è®¡ä¸Šå°½é‡æŠ¹å¹³å„ä¸ªç«¯çš„å·®å¼‚æ€§ï¼Œè¿™ä¹Ÿä½¿å¾—å¼€å‘è€…åœ¨å·®å¼‚æ€§å’Œå…¼å®¹æ€§æ–¹é¢å†ä¹Ÿä¸éœ€è¦æŠ•å…¥å¤ªå¤šç²¾åŠ›äº†ã€‚ 2ã€ä½“ç§¯è¶³å¤Ÿå°å¦‚ä¸Šæ–‡æ‰€è¯´ï¼ŒRax æ˜¯ä¸€ä¸ªé¢å‘æ— çº¿ç«¯çš„è§£å†³æ–¹æ¡ˆï¼Œå› æ­¤è‡ªèº«çš„ä½“ç§¯å¯¹äºŽæ€§èƒ½æ¥è®²å°±æ˜¾å¾—éžå¸¸é‡è¦ã€‚Rax åŽ‹ç¼© + gzip åŽçš„ä½“ç§¯æ˜¯ 8.0kb, ç›¸æ¯” React çš„ 43.7kb, å¯¹äºŽæ— çº¿ç«¯å‹å¥½äº†å¾ˆå¤šã€‚ 3ã€æ”¯æŒè¿”å›žå¤šä¸ªåŒçº§èŠ‚ç‚¹ä»»ä½•ç”¨è¿‡ React çš„åŒå­¦å¤§æ¦‚éƒ½è¸©è¿‡åŒä¸€ä¸ªå‘ï¼šæ–¹æ³•è¿”å›žäº†å¤šä¸ªåŒçº§èŠ‚ç‚¹å¯¼è‡´æŠ¥é”™ã€‚åœ¨è®¾è®¡ä¸Š React åªèƒ½è¿”å›žå•ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤é¡µé¢ä¸Šæˆ–å¤šæˆ–å°‘ä¼šäº§ç”Ÿä¸€äº›å†—ä½™çš„èŠ‚ç‚¹ï¼Œè¿™åœ¨ PC ç«¯å¹¶æ²¡æœ‰å¤ªå¤šé—®é¢˜ï¼Œç„¶è€Œåœ¨æ— çº¿ Android ç«¯åµŒå¥—å±‚çº§è¶Šå¤šï¼Œåº”ç”¨çš„ crash çŽ‡ä¼šä¸æ–­æé«˜ï¼Œè¿™ä¸€ç‚¹åœ¨ä½Žç«¯ Android æœºä¸Šè¡¨çŽ°å°¤å…¶æ˜Žæ˜¾ã€‚å› æ­¤ Rax æ”¯æŒäº†è¿”å›žå¤šä¸ªåŒçº§èŠ‚ç‚¹çš„åŠŸèƒ½ï¼Œå¦‚ï¼š123456789import &#123;createElement, Component, render&#125; from &apos;rax&apos;;class Test extends Component &#123; render() &#123; return [1, 2, 3].map((item) =&gt; &#123; return &lt;p&gt;&#123;item&#125;&lt;/p&gt;; &#125;); &#125;&#125; è¿™ä¸€ç‰¹æ€§å¯ä»¥æœ‰æ•ˆå‡å°‘é¡µé¢çš„åµŒå¥—å±‚çº§ï¼Œä»Žè€Œå‡å°‘åº”ç”¨å› åµŒå¥—å±‚çº§è¿‡å¤šè€Œå‡ºçŽ°çš„ crash é—®é¢˜ã€‚ 4ã€æ ‡å‡†åŒ–åœ¨ä¸Šæ–‡é‡Œï¼Œæˆ‘ä»¬ä¸æ–­çš„æå„ä¸ªç«¯çš„ä¸€è‡´æ€§ï¼Œä¸€è‡´åˆ™å¿…æœ‰è§„èŒƒå¯ä¾ï¼ŒRax éµå¾ª W3C æ ‡å‡†ï¼Œæ¯”å¦‚åœ¨ Weex å®¹å™¨ä¸­å·²ç»å¯ä»¥ç›´æŽ¥è°ƒç”¨ navigator, document, location, alert ç­‰ W3C çš„æ ‡å‡† API.å½“ç„¶ï¼Œå—é™äºŽå„ä¸ªç«¯çš„å·®å¼‚ï¼Œæ ‡å‡†åŒ–çš„é“è·¯è¿˜å¾ˆé•¿ï¼Œã€Œæ›´æ ‡å‡†åŒ–ã€è¿™ä¹Ÿæ˜¯ Rax æœªæ¥çš„é‡è¦ç›®æ ‡ä¹‹ä¸€ã€‚ æœªæ¥Write once, run everywhere. è¿™æ˜¯å£å·ï¼Œäº¦æ˜¯ç›®æ ‡ã€‚Rax æœªæ¥ä¼šåœ¨æ›´å¤šçš„ç«¯ä¸Šä¸æ–­æŽ¢ç´¢ï¼Œæ¯”å¦‚ VR/AR, ç”šè‡³ä¹‹å‰å¾®åšä¸Šæœ‰åŒå­¦æå‡ºçš„æ˜¯å¦å¯ä»¥ç”¨ Rax å†™å¾®ä¿¡å°ç¨‹åºï¼Œä¹Ÿæ˜¯ä¸€ä¸ªè›®æœ‰æ„æ€çš„æƒ³æ³•ã€‚å¯¹äºŽå¼€å‘è€…æ¥è¯´ï¼Œå½“è¶Šæ¥è¶Šå¤šçš„ç«¯ä¸æ–­å‡ºçŽ°åœ¨çœ¼å‰æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•åº”å¯¹ï¼Ÿæ˜¯é€šè¿‡ä¸æ–­çš„è¸©å‘æ¥æ•´ç†ä¸€ä»½é•¿é•¿çš„ checklist, ç„¶åŽåšé¡¹ç›®æ—¶ä¸€ä¸€å¯¹ç…§ï¼Ÿ æˆ–è€…è®©æˆ‘ä»¬ä¸€èµ·æ¥æŽ¢ç´¢ Rax?äº†è§£æ›´å¤š Rax ç›¸å…³å†…å®¹ï¼Œæ¬¢è¿Žè®¿é—® alibaba.github.io/raxæ¥è‡ªRax å›¢é˜Ÿæ•¬ä¸Šã€‚åŽŸæ–‡é“¾æŽ¥https://alibaba.github.io/rax/blog/whats-rax]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Reactä¸€äº›è·¯ç”±]]></title>
    <url>%2Fblog%2F2018%2F05%2F08%2FReact%E4%B8%80%E4%BA%9B%E8%B7%AF%E7%94%B1%2F</url>
    <content type="text"><![CDATA[Reactè·¯ç”±Promptã€Redirectã€matchã€Switchã€‚ 1ã€Promptç»„ä»¶ é™¤äº†Routerã€Routeã€Linkè¿™ä¸‰ä¸ªreactè·¯ç”±çš„åŸºç¡€æ­é…ä½¿ç”¨ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ¯”è¾ƒé‡è¦çš„ç»„ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨é¡µé¢åˆ‡æ¢æ—¶ï¼Œéœ€è¦è¿›è¡Œä¸€äº›æç¤ºï¼Œæˆ‘ä»¬å°±èƒ½ä½¿ç”¨Promptç»„ä»¶ã€‚ å®ƒæœ‰ä¸€ä¸ªå¿…é¡»çš„å±žæ€§messageï¼Œç”¨äºŽç»™ç”¨æˆ·æç¤ºä¿¡æ¯ã€‚åŸºæœ¬ä½¿ç”¨ï¼š1&lt;Prompt message=&quot;ç»™ç”¨æˆ·æç¤ºä¿¡æ¯&quot;/&gt; æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›æç¤ºæ¶ˆæ¯ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¸å¸Œæœ›æç¤ºå‡ºçŽ°ï¼Œè¿™å°±ç”¨åˆ°å®ƒçš„å¦å¤–ä¸€ä¸ªå±žæ€§-whenã€‚whenæœ‰ä¸¤ç§æƒ…å†µï¼Œå½“å®ƒçš„å€¼æ˜¯trueæ—¶ï¼Œä¼šæç¤ºæ¶ˆæ¯ã€‚å½“å®ƒçš„å€¼ä¸ºfalseæ—¶ï¼Œä¸ä¼šæç¤ºæ¶ˆæ¯ã€‚åŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼š1&lt;Prompt when=&#123;true&#125; message=&quot;ç»™ç”¨æˆ·æç¤ºä¿¡æ¯&quot;/&gt; 2ã€Redirectç»„ä»¶ åœ¨åŒ¹é…ä¸€ä¸ªè·¯å¾„æ—¶ï¼Œä½†æ˜¯å¯èƒ½è¿™ä¸ªè·¯å¾„ï¼Œæˆ‘ä»¬æ›´å¸Œæœ›å®ƒæŒ‡å‘ä¸€ä¸ªæ–°çš„å±•ç¤ºç•Œé¢ï¼Œè€Œä¸æ˜¯å®ƒåŽŸæœ¬çš„è·¯å¾„åŒ¹é…ç•Œé¢ã€‚ Redirectç»„ä»¶çš„å¿…é¡»å±žæ€§æ˜¯toå±žæ€§ï¼Œè¡¨ç¤ºé‡å®šå‘çš„æ–°åœ°å€ã€‚ å› ä¸ºé‡å®šå‘äº†ä¸€ä¸ªæ–°çš„åœ°å€ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªå¯¹åº”çš„æ–°çš„åœ°å€çš„Routeï¼Œæ¥æŒ‡å®šé‡å®šå‘çš„ç•Œé¢ã€‚åŸºæœ¬ä½¿ç”¨ï¼š12&lt;Redirect to=&apos;/new-path&apos; /&gt;&lt;Route path=&apos;/new-path&apos; component=&#123;NewPage&#125;/&gt; 1&lt;Route path=&quot;/index&quot; render=&#123;()=&gt;&lt;Redirect to=&quot;/other&quot;/&gt;&#125;/&gt; Redirecté‡å®šå‘æ˜¯è·¯ç”±çš„é‡å®šå‘ï¼Œåº”è¯¥å†™åœ¨ç»„ä»¶Routeä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨renderæ¥å®žçŽ°å®ƒåŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344import React,&#123; Component &#125; from &quot;react&quot;;import &#123; render &#125; from &quot;react-dom&quot;;import &#123; BrowserRouter as Router, Route, Link, Prompt,Redirect &#125; from &quot;react-router-dom&quot;;class Index extends Component&#123; render()&#123; return ( &lt;div&gt;this a Index page&lt;/div&gt; ) &#125;&#125;class Other extends Component&#123; render()&#123; return ( &lt;div&gt;this a Other page&lt;/div&gt; ) &#125;&#125;class Main extends Component&#123; constructor(props)&#123; super(props); this.state = &#123; toast: false, &#125; &#125; render()&#123; return ( &lt;Router&gt; &lt;div&gt; &lt;ul&gt; &lt;li&gt;&lt;Link to=&quot;/index&quot;&gt;è¿™æ˜¯é¦–é¡µ&lt;/Link&gt;&lt;/li&gt; &lt;li&gt;&lt;Link to=&quot;/other&quot;&gt;è¿™æ˜¯å…¶ä»–é¡µ&lt;/Link&gt;&lt;/li&gt; &lt;/ul&gt; &lt;Route path=&quot;/index&quot; render=&#123;()=&gt;&lt;Redirect to=&quot;/other&quot;/&gt;&#125;/&gt; &lt;Route path=&quot;/other&quot; component=&#123;Other&#125;/&gt; &lt;/div&gt; &lt;/Router&gt; ) &#125;&#125;//å› ä¸ºé‡å®šå‘ï¼Œæ‰€ä»¥æ¯ä¸ªè·¯ç”±å±•ç¤ºç•Œé¢éƒ½æ˜¯otherç•Œé¢render(&lt;Main /&gt;,document.getElementById(&quot;root&quot;)); 3ã€Switchç»„ä»¶ å®ƒçš„ç‰¹æ€§æ˜¯æˆ‘ä»¬åªæ¸²æŸ“æ‰€åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªè·¯ç”±ç»„ä»¶ï¼Œä¸€èˆ¬ç•Œé¢æ¸²æŸ“çš„æ—¶å€™ï¼Œä¼šæ¸²æŸ“æ‰€æœ‰åŒ¹é…åˆ°çš„è·¯ç”±ç»„ä»¶ã€‚å®ƒçš„å­©å­èŠ‚ç‚¹åªèƒ½æ˜¯Routeç»„ä»¶æˆ–è€…Redirectç»„ä»¶ã€‚ åŸºæœ¬ä½¿ç”¨æ–¹å¼ï¼š123456import &#123; Switch &#125; from &quot;react-router-dom&quot;;&lt;Switch&gt; &lt;Route path=&quot;/&quot; component=&#123;Test1&#125; /&gt; &lt;Route path=&quot;/Test&quot; component=&#123;Test2&#125; /&gt;&lt;/Switch&gt; ä»¥ä¸‹å®žä¾‹ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950import React,&#123; Component &#125; from &quot;react&quot;;import &#123; render &#125; from &quot;react-dom&quot;;import &#123; BrowserRouter as Router, Route, Link, Switch &#125; from &quot;react-router-dom&quot;;class Home extends Component&#123; render()&#123; return ( &lt;div&gt;Home&lt;/div&gt; ) &#125;&#125;class Other extends Component&#123; render()&#123; return ( &lt;div&gt;Other&lt;/div&gt; ) &#125;&#125;class Switchs extends Component&#123; render()&#123; return ( &lt;div&gt;Switchs test&lt;/div&gt; ) &#125;&#125;class Main extends Component&#123; constructor(props)&#123; super(props); &#125; render()&#123; return ( &lt;Router&gt; &lt;div&gt; &lt;ul&gt; &lt;li&gt;&lt;Link to=&quot;/home&quot;&gt;é¦–é¡µ&lt;/Link&gt;&lt;/li&gt; &lt;li&gt;&lt;Link to=&quot;/other&quot;&gt;å…¶ä»–é¡µ&lt;/Link&gt;&lt;/li&gt; &lt;/ul&gt; &lt;Switch&gt; &lt;Route path=&quot;/:id&quot; component=&#123;Switchs&#125;/&gt; &lt;Route path=&quot;/home&quot; component=&#123;Home&#125;/&gt; &lt;Route path=&quot;/other&quot; component=&#123;Other&#125;/&gt; &lt;/Switch&gt; &lt;/div&gt; &lt;/Router&gt; ) &#125;&#125;render(&lt;Main /&gt;,document.getElementById(&quot;root&quot;)); 4ã€Matchå¯¹è±¡ matchæ˜¯ä¸€ä¸ªåŒ¹é…è·¯å¾„å‚æ•°çš„å¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ªå±žæ€§paramsï¼Œé‡Œé¢çš„å†…å®¹å°±æ˜¯è·¯å¾„å‚æ•°ï¼Œé™¤å¸¸ç”¨çš„paramså±žæ€§å¤–ï¼Œå®ƒè¿˜æœ‰urlã€pathã€isExactå±žæ€§ã€‚ åœ¨ç»„ä»¶Matchä¸­ï¼Œé€šè¿‡this.props.match.params.idèŽ·å–äº†è·¯å¾„çš„åŒ¹é…å‚æ•°ã€‚é¦–é¡µå‚æ•°homeï¼Œå…¶ä»–é¡µæ˜¯otherã€‚ Matchçš„èŽ·å–æ–¹å¼ï¼šåœ¨Route componentä¸­ï¼Œç»„ä»¶é€šè¿‡this.props.matchèŽ·å–ã€‚åœ¨Route render å’ŒRoute childrenä¸­ï¼Œé€šè¿‡ä¼ é€’ä¸€ä¸ªå‚æ•°çš„æ–¹å¼èŽ·å–ã€‚12345678910111213141516171819202122232425262728293031323334ä»¥ä¸‹å®žä¾‹ï¼š```hashimport &#123; render &#125; from &quot;react-dom&quot;;import &#123; BrowserRouter as Router, Route, Link, Prompt,Redirect &#125; from &quot;react-router-dom&quot;;class Match extends Component&#123; render()&#123; return ( &lt;div&gt;id:&#123;this.props.match.params.id&#125;&lt;/div&gt; ) &#125;&#125;class Main extends Component&#123; constructor(props)&#123; super(props); &#125; render()&#123; return ( &lt;Router&gt; &lt;div&gt; &lt;ul&gt; &lt;li&gt;&lt;Link to=&quot;/home&quot;&gt;é¦–é¡µ&lt;/Link&gt;&lt;/li&gt; &lt;li&gt;&lt;Link to=&quot;/other&quot;&gt;å…¶ä»–é¡µ&lt;/Link&gt;&lt;/li&gt; &lt;/ul&gt; &lt;Route path=&quot;/:id&quot; component=&#123;Match&#125;/&gt; &lt;/div&gt; &lt;/Router&gt; ) &#125;&#125;//idæ˜¯è·¯å¾„åŒ¹é…å‚æ•°ã€‚render(&lt;Main /&gt;,document.getElementById(&quot;root&quot;));]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹</tag>
        <tag>React</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexoæ­å»ºåšå®¢é—®é¢˜æ”¶é›†å™¨]]></title>
    <url>%2Fblog%2F2018%2F05%2F06%2F%E8%AE%B0%E4%B8%80%E6%AC%A1Hexo%E6%96%87%E7%AB%A0%E9%87%8C%E7%9A%84%E5%9B%BE%E7%89%87%E4%B8%8D%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[è®°ä¸€æ¬¡Hexoæ–‡ç« é‡Œçš„å›¾ç‰‡ä¸æ˜¾ç¤ºé—®é¢˜ï¼Œä¸ç„¶è¶…çº§éº»çƒ¦ï¼ï¼ï¼ï¼ First1 æŠŠä¸»é¡µé…ç½®æ–‡ä»¶_config.yml é‡Œçš„post_asset_folder:è¿™ä¸ªé€‰é¡¹è®¾ç½®ä¸ºtrue 2 åœ¨ä½ çš„hexoç›®å½•ä¸‹æ‰§è¡Œè¿™æ ·ä¸€å¥è¯npm install hexo-asset-image --saveï¼Œè¿™æ˜¯ä¸‹è½½å®‰è£…ä¸€ä¸ªå¯ä»¥ä¸Šä¼ æœ¬åœ°å›¾ç‰‡çš„æ’ä»¶ï¼Œæ¥è‡ªdalaoï¼šdalaoçš„git 3 ç­‰å¾…ä¸€å°æ®µæ—¶é—´åŽï¼Œå†è¿è¡Œhexo n &quot;xxxx&quot;æ¥ç”Ÿæˆmdåšæ–‡æ—¶ï¼Œ/source/_postsæ–‡ä»¶å¤¹å†…é™¤äº†xxxx.mdæ–‡ä»¶è¿˜æœ‰ä¸€ä¸ªåŒåçš„æ–‡ä»¶å¤¹ Second4 æœ€åŽåœ¨xxxx.mdä¸­æƒ³å¼•å…¥å›¾ç‰‡æ—¶ï¼Œå…ˆæŠŠå›¾ç‰‡å¤åˆ¶åˆ°xxxxè¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œç„¶åŽåªéœ€è¦åœ¨xxxx.mdä¸­æŒ‰ç…§markdownçš„æ ¼å¼å¼•å…¥å›¾ç‰‡ï¼š ![ä½ æƒ³è¾“å…¥çš„æ›¿ä»£æ–‡å­—](è®°ä¸€æ¬¡Hexoæ–‡ç« é‡Œçš„å›¾ç‰‡ä¸æ˜¾ç¤ºé—®é¢˜/long.png)![ç›´æŽ¥ç»™åœ°å€å’‹æ ·](http://oz2tkq0zj.bkt.clouddn.com/17-11-9/52323298.jpg) ä¹Ÿå¯ä»¥ç›´æŽ¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š1&#123;% asset_img long.png è®°ä¸€æ¬¡Hexoæ–‡ç« é‡Œçš„å›¾ç‰‡ä¸æ˜¾ç¤ºé—®é¢˜ %&#125; æ³¨æ„ï¼š xxxxæ˜¯è¿™ä¸ªmdæ–‡ä»¶çš„åå­—ï¼Œä¹Ÿæ˜¯åŒåæ–‡ä»¶å¤¹çš„åå­—ã€‚åªéœ€è¦æœ‰æ–‡ä»¶å¤¹åå­—å³å¯ï¼Œä¸éœ€è¦æœ‰ä»€ä¹ˆç»å¯¹è·¯å¾„ã€‚ä½ æƒ³å¼•å…¥çš„å›¾ç‰‡å°±åªéœ€è¦æ”¾å…¥xxxxè¿™ä¸ªæ–‡ä»¶å¤¹å†…å°±å¥½äº†ï¼Œå¾ˆåƒå¼•ç”¨ç›¸å¯¹è·¯å¾„ã€‚ 5 æœ€åŽæ£€æŸ¥ä¸€ä¸‹ï¼Œhexo gç”Ÿæˆé¡µé¢åŽï¼Œè¿›å…¥public\2017\02\26\index.htmlæ–‡ä»¶ä¸­æŸ¥çœ‹ç›¸å…³å­—æ®µï¼Œå¯ä»¥å‘çŽ°ï¼Œhtmlæ ‡ç­¾å†…çš„è¯­å¥æ˜¯&lt;img src=&quot;2017/02/26/xxxx/å›¾ç‰‡å.jpg&quot;&gt;ï¼Œè€Œä¸æ˜¯&lt;img src=&quot;xxxx/å›¾ç‰‡å.jpg&gt;ã€‚è¿™å¾ˆé‡è¦ï¼Œå…³ä¹Žä½ çš„ç½‘é¡µæ˜¯å¦å¯ä»¥çœŸæ­£åŠ è½½ä½ æƒ³æ’å…¥çš„å›¾ç‰‡ã€‚ Hexo Next è§£å†³ Busuanzi ç»Ÿè®¡æµè§ˆå¤±æ•ˆç”±äºŽbusuanzi(ä¸è’œå­)çš„ç½‘å€æ›´æ–°,å¯¼è‡´äº†ä½¿ç”¨Hexo Nextä¸»é¢˜æ—¶ç»Ÿè®¡æµè§ˆæ•°å¤±æ•ˆ. ä¸è’œå­å®˜ç½‘:http://ibruce.info/2015/04/04/busuanzi/ è§£å†³æ–¹æ³•: åˆ°hexoçš„themesæ–‡ä»¶å¤¹ä¸‹, è¿›å…¥ \themes\next\layout_third-party\analytics æ‰“å¼€: busuanzi-counter.swig å°†src=â€œhttps://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.jsâ€ ä¿®æ”¹ä¸ºsrc=â€œhttps://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.jsâ€`]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nextä¸»é¢˜æ¨¡æ¿ä¸€äº›é…ç½®]]></title>
    <url>%2Fblog%2F2018%2F05%2F05%2Fnext%E4%B8%BB%E9%A2%98%E6%A8%A1%E6%9D%BF%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[ä½¿ç”¨Hexo + GithubåŽ»æ­å»ºä¸€ä¸ªå±žäºŽè‡ªå·±çš„åšå®¢ç«™ç‚¹ï¼Œè¿™é‡Œæ˜¯ä¸€äº›nextç›¸å…³çš„ç»†èŠ‚é…ç½®ã€‚ 1.ä¿®æ”¹æ–‡ç« åº•éƒ¨çš„é‚£ä¸ªå¸¦#å·çš„æ ‡ç­¾å®žçŽ°æ•ˆæžœå›¾ å…·ä½“å®žçŽ°æ–¹æ³• 123456/themes/next/layout/_macro/post.swigæ‰¾åˆ° rel="tag"&gt;#ä¿®æ”¹ä¸º&lt;i class="fa fa-tag"&gt;&lt;/i&gt;å®Œæ•´çš„åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š &lt;a href="&#123;&#123; url_for(tag.path) &#125;&#125;" rel="tag"&gt;&lt;i class="fa fa-tag"&gt;&lt;/i&gt; &#123;&#123; tag.name &#125;&#125;&lt;/a&gt; 2.åœ¨æ¯ç¯‡æ–‡ç« æœ«å°¾ç»Ÿä¸€æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°å®žçŽ°æ•ˆæžœå›¾ å…·ä½“å®žçŽ°æ–¹æ³• 12345678910111213141516åœ¨è·¯å¾„ \themes\next\layout\_macro ä¸­æ–°å»º passage-end-tag.swig æ–‡ä»¶,å¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š&lt;div&gt; &#123;% if not is_index %&#125; &lt;div style="text-align:center;color: #ccc;font-size:14px;"&gt;-------------æœ¬æ–‡ç»“æŸ&lt;i class="fa fa-paw"&gt;&lt;/i&gt;æ„Ÿè°¢æ‚¨çš„é˜…è¯»-------------&lt;/div&gt; &#123;% endif %&#125;&lt;/div&gt;æŽ¥ç€æ‰“å¼€\themes\next\layout\_macro\post.swigæ–‡ä»¶ï¼Œåœ¨post-body ä¹‹åŽï¼Œ post-footer ä¹‹å‰æ·»åŠ å¦‚ä¸‹éƒ¨åˆ†ä»£ç ï¼ˆpost-footerä¹‹å‰ä¸¤ä¸ªDIVï¼‰ï¼š&lt;div&gt;&#123;% if not is_index %&#125; &#123;% include 'passage-end-tag.swig' %&#125;&#123;% endif %&#125;&lt;/div&gt; ç„¶åŽæ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ˆ_config.yml),åœ¨æœ«å°¾æ·»åŠ ï¼š123# æ–‡ç« æœ«å°¾æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°passage_end_tag:enabled: true å®Œæˆä»¥ä¸Šè®¾ç½®ä¹‹åŽï¼Œåœ¨æ¯ç¯‡æ–‡ç« ä¹‹åŽéƒ½ä¼šæ·»åŠ å¦‚ä¸Šæ•ˆæžœå›¾çš„æ ·å­ã€‚ 3.ä¿®æ”¹â€œä»£ç å—è‡ªå®šä¹‰æ ·å¼å…·ä½“å®žçŽ°æ–¹æ³•æ‰“å¼€ \themes\next\source\css\_custom\custom.styl,å‘é‡Œé¢åŠ å…¥ï¼š(é¢œè‰²å¯ä»¥è‡ªå·±å®šä¹‰)123456789101112131415// Custom styles.code &#123; color: #ff7600; background: #fbf7f8; margin: 2px;&#125;// å¤§ä»£ç å—çš„è‡ªå®šä¹‰æ ·å¼.highlight, pre &#123; margin: 5px 0; padding: 5px; border-radius: 3px;&#125;.highlight, code, pre &#123; border: 1px solid #d6d6d6;&#125; 4.ä¾§è¾¹æ ç¤¾äº¤å°å›¾æ ‡è®¾ç½®å…·ä½“å®žçŽ°æ–¹æ³•æ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ˆ_config.ymlï¼‰ï¼Œæœç´¢social_icons:,åœ¨å›¾æ ‡åº“æ‰¾è‡ªå·±å–œæ¬¢çš„å°å›¾æ ‡ï¼Œå¹¶å°†åå­—å¤åˆ¶åœ¨å¦‚ä¸‹ä½ç½®ï¼Œä¿å­˜å³å¯123456789101112131415161718192021222324252627# ç¤¾äº¤é“¾æŽ¥# Social Linkssocial:GitHub: https://github.com/DuanruilongCSDN: https://github.com/Duanruilongå¾®åš: https://github.com/DuanruilongQQ: https://github.com/DuanruilongçŸ¥ä¹Ž: https://github.com/Duanruilong# Social Links Icons/è®¾å®šé“¾æŽ¥çš„å›¾æ ‡social_icons:enable: trueicons_only: falsetransition: true# Icon Mappings.# KeyMapsToSocialItemKey: NameOfTheIconFromFontAwesomeGitHub: githubE-Mail: envelopeGoogle: googleTwitter: twitterInstagram: instagramStackOverflow: stack-overflowå¾®åš: weiboçŸ¥ä¹Ž: envelopeQQ: qqå¾®ä¿¡: weixinCSDN: crosshairslinks_title: discord 5.åœ¨ç½‘ç«™åº•éƒ¨åŠ ä¸Šè®¿é—®é‡å…·ä½“å®žçŽ°æ–¹æ³•æ‰“å¼€\themes\next\layout\_partials\footer.swigæ–‡ä»¶,åœ¨copyrightå‰åŠ ä¸Šè¿™å¥è¯ï¼š1&lt;script async src=&quot;https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt; ç„¶åŽå†åˆé€‚çš„ä½ç½®æ·»åŠ æ˜¾ç¤ºç»Ÿè®¡çš„ä»£ç ï¼Œå¦‚å›¾ï¼š12345&lt;div class=&quot;powered-by&quot;&gt;&lt;i class=&quot;fa fa-user-md&quot;&gt;&lt;/i&gt;&lt;span id=&quot;busuanzi_container_site_uv&quot;&gt;æœ¬ç«™è®¿å®¢æ•°:&lt;span id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/div&gt; åœ¨è¿™é‡Œæœ‰ä¸¤ä¸­ä¸åŒè®¡ç®—æ–¹å¼çš„ç»Ÿè®¡ä»£ç ï¼š 1.pvçš„æ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·è¿žç»­ç‚¹å‡»nç¯‡æ–‡ç« ï¼Œè®°å½•næ¬¡è®¿é—®é‡ 123&lt;span id=&quot;busuanzi_container_site_pv&quot;&gt; æœ¬ç«™æ€»è®¿é—®é‡&lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;æ¬¡&lt;/span&gt; 2.uvçš„æ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·è¿žç»­ç‚¹å‡»nç¯‡æ–‡ç« ï¼Œåªè®°å½•1æ¬¡è®¿å®¢æ•° 123&lt;span id=&quot;busuanzi_container_site_uv&quot;&gt; æœ¬ç«™æ€»è®¿é—®é‡&lt;span id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;/span&gt;æ¬¡&lt;/span&gt; æ·»åŠ ä¹‹åŽå†æ‰§è¡Œhexo d -gï¼Œç„¶åŽå†åˆ·æ–°é¡µé¢å°±èƒ½çœ‹åˆ°æ•ˆæžœ 6.æ·»åŠ çƒ­åº¦å…·ä½“å®žçŽ°æ–¹æ³•nextä¸»é¢˜é›†æˆleanCloudï¼Œæ‰“å¼€/themes/next/layout/_macro/post.swig,åœ¨ç”»çº¢çº¿çš„åŒºåŸŸæ·»åŠ â„ƒï¼š12345&#123;% if theme.post_meta.item_text %&#125; &lt;span class=&quot;post-meta-item-text&quot;&gt;&#123;&#123;__(&apos;post.visitors&apos;)&#125;&#125; &lt;/span&gt;&#123;% endif %&#125;&lt;span class=&quot;leancloud-visitors-count&quot;&gt;&lt;/span&gt;&lt;span&gt;â„ƒ&lt;/span&gt; ç„¶åŽæ‰“å¼€ï¼Œ/themes/next/languages/zh-Hans.yml,å°†ç”»çº¢æ¡†çš„æ”¹ä¸ºçƒ­åº¦å°±å¯ä»¥äº†12345678910111213post: created: åˆ›å»ºäºŽ modified: æ›´æ–°äºŽ sticky: ç½®é¡¶ posted: å‘è¡¨äºŽ in: åˆ†ç±»äºŽ read_more: é˜…è¯»å…¨æ–‡ untitled: æœªå‘½å toc_empty: æ­¤æ–‡ç« æœªåŒ…å«ç›®å½• visitors: çƒ­åº¦ wordcount: å­—æ•°ç»Ÿè®¡ min2read: é˜…è¯»æ—¶é•¿ copyright: 7.ç½‘ç«™åº•éƒ¨å­—æ•°ç»Ÿè®¡å…·ä½“æ–¹æ³•å®žçŽ°åˆ‡æ¢åˆ°æ ¹ç›®å½•ä¸‹ï¼Œç„¶åŽè¿è¡Œå¦‚ä¸‹ä»£ç 1$ npm install hexo-wordcount --save ç„¶åŽåœ¨/themes/next/layout/_partials/footer.swigæ–‡ä»¶å°¾éƒ¨åŠ ä¸Šï¼š1234&lt;div class=&quot;theme-info&quot;&gt; &lt;div class=&quot;powered-by&quot;&gt;&lt;/div&gt; &lt;span class=&quot;post-count&quot;&gt;åšå®¢å…¨ç«™å…±&#123;&#123; totalcount(site) &#125;&#125;å­—&lt;/span&gt;&lt;/div&gt; 8.æ·»åŠ  README.md æ–‡ä»¶æ¯ä¸ªé¡¹ç›®ä¸‹ä¸€èˆ¬éƒ½æœ‰ä¸€ä¸ª README.md æ–‡ä»¶ï¼Œä½†æ˜¯ä½¿ç”¨ hexo éƒ¨ç½²åˆ°ä»“åº“åŽï¼Œé¡¹ç›®ä¸‹æ˜¯æ²¡æœ‰ README.md æ–‡ä»¶çš„ã€‚ åœ¨ Hexo ç›®å½•ä¸‹çš„ source æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª README.md æ–‡ä»¶ï¼Œä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶ _config.ymlï¼Œå°† skip_render å‚æ•°çš„å€¼è®¾ç½®ä¸º:1skip_render: README.md ä¿å­˜é€€å‡ºå³å¯ã€‚å†æ¬¡ä½¿ç”¨ hexo d å‘½ä»¤éƒ¨ç½²åšå®¢çš„æ—¶å€™å°±ä¸ä¼šåœ¨æ¸²æŸ“ README.md è¿™ä¸ªæ–‡ä»¶äº†ã€‚ 9.è®¾ç½®ç½‘ç«™çš„å›¾æ ‡Faviconåœ¨EasyIconä¸­æ‰¾ä¸€å¼ ï¼ˆ32*32ï¼‰çš„icoå›¾æ ‡,æˆ–è€…åŽ»åˆ«çš„ç½‘ç«™ä¸‹è½½æˆ–è€…åˆ¶ä½œï¼Œå¹¶å°†å›¾æ ‡åç§°æ”¹ä¸ºfavicon.icoï¼Œç„¶åŽæŠŠå›¾æ ‡æ”¾åœ¨/themes/next/source/imagesé‡Œï¼Œå¹¶ä¸”ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼š12# Put your favicon.ico into `hexo-site/source/` directory.favicon: /favicon.ico 11.å®žçŽ°ç»Ÿè®¡åŠŸèƒ½åœ¨æ ¹ç›®å½•ä¸‹å®‰è£… hexo-wordcount,è¿è¡Œï¼š1$ npm install hexo-wordcount --save ç„¶åŽåœ¨ä¸»é¢˜çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®å¦‚ä¸‹ï¼š123456# Post wordcount display settings# Dependencies: https://github.com/willin/hexo-wordcountpost_wordcount: item_text: true wordcount: true min2read: true 12.æ·»åŠ é¡¶éƒ¨åŠ è½½æ¡æ‰“å¼€/themes/next/layout/_partials/head.swigæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç 12&lt;script src=&quot;//cdn.bootcss.com/pace/1.0.2/pace.min.js&quot;&gt;&lt;/script&gt;&lt;link href=&quot;//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css&quot; rel=&quot;stylesheet&quot;&gt; ä½†æ˜¯ï¼Œé»˜è®¤çš„æ˜¯ç²‰è‰²çš„ï¼Œè¦æ”¹å˜é¢œè‰²å¯ä»¥åœ¨/themes/next/layout/_partials/head.swigæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼ˆæŽ¥åœ¨åˆšæ‰linkçš„åŽé¢ï¼‰12345678910111213&lt;style&gt; .pace .pace-progress &#123; background: #1E92FB; /*è¿›åº¦æ¡é¢œè‰²*/ height: 3px; &#125; .pace .pace-progress-inner &#123; box-shadow: 0 0 10px #1E92FB, 0 0 5px #1E92FB; /*é˜´å½±é¢œè‰²*/ &#125; .pace .pace-activity &#123; border-top-color: #1E92FB; /*ä¸Šè¾¹æ¡†é¢œè‰²*/ border-left-color: #1E92FB; /*å·¦è¾¹æ¡†é¢œè‰²*/ &#125;&lt;/style&gt; çŽ°åœ¨å‡çº§æœ€æ–°ç‰ˆçš„nextä¸»é¢˜ï¼Œå‡çº§åŽåªéœ€ä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶(_config.yml)å°†pace: falseæ”¹ä¸ºpace: trueå°±è¡Œäº†ï¼Œä½ è¿˜å¯ä»¥æ¢ä¸åŒæ ·å¼çš„åŠ è½½æ¡. 13.åœ¨æ–‡ç« åº•éƒ¨å¢žåŠ ç‰ˆæƒä¿¡æ¯åœ¨ç›®å½• next/layout/_macro/ä¸‹æ·»åŠ  my-copyright.swigï¼š123456789101112131415161718192021222324252627282930&#123;% if page.copyright %&#125;&lt;div class=&quot;my_post_copyright&quot;&gt; &lt;script src=&quot;//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js&quot;&gt;&lt;/script&gt; &lt;!-- JSåº“ sweetalert å¯ä¿®æ”¹è·¯å¾„ --&gt; &lt;script src=&quot;https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://unpkg.com/sweetalert/dist/sweetalert.min.js&quot;&gt;&lt;/script&gt; &lt;p&gt;&lt;span&gt;æœ¬æ–‡æ ‡é¢˜:&lt;/span&gt;&lt;a href=&quot;&#123;&#123; url_for(page.path) &#125;&#125;&quot;&gt;&#123;&#123; page.title &#125;&#125;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;span&gt;æ–‡ç« ä½œè€…:&lt;/span&gt;&lt;a href=&quot;/&quot; title=&quot;è®¿é—® &#123;&#123; theme.author &#125;&#125; çš„ä¸ªäººåšå®¢&quot;&gt;&#123;&#123; theme.author &#125;&#125;&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;span&gt;å‘å¸ƒæ—¶é—´:&lt;/span&gt;&#123;&#123; page.date.format(&quot;YYYYå¹´MMæœˆDDæ—¥ - HH:MM&quot;) &#125;&#125;&lt;/p&gt; &lt;p&gt;&lt;span&gt;æœ€åŽæ›´æ–°:&lt;/span&gt;&#123;&#123; page.updated.format(&quot;YYYYå¹´MMæœˆDDæ—¥ - HH:MM&quot;) &#125;&#125;&lt;/p&gt; &lt;p&gt;&lt;span&gt;åŽŸå§‹é“¾æŽ¥:&lt;/span&gt;&lt;a href=&quot;&#123;&#123; url_for(page.path) &#125;&#125;&quot; title=&quot;&#123;&#123; page.title &#125;&#125;&quot;&gt;&#123;&#123; page.permalink &#125;&#125;&lt;/a&gt; &lt;span class=&quot;copy-path&quot; title=&quot;ç‚¹å‡»å¤åˆ¶æ–‡ç« é“¾æŽ¥&quot;&gt;&lt;i class=&quot;fa fa-clipboard&quot; data-clipboard-text=&quot;&#123;&#123; page.permalink &#125;&#125;&quot; aria-label=&quot;å¤åˆ¶æˆåŠŸï¼&quot;&gt;&lt;/i&gt;&lt;/span&gt; &lt;/p&gt; &lt;p&gt;&lt;span&gt;è®¸å¯åè®®:&lt;/span&gt;&lt;i class=&quot;fa fa-creative-commons&quot;&gt;&lt;/i&gt; &lt;a rel=&quot;license&quot; href=&quot;https://creativecommons.org/licenses/by-nc-nd/4.0/&quot; target=&quot;_blank&quot; title=&quot;Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)&quot;&gt;ç½²å-éžå•†ä¸šæ€§ä½¿ç”¨-ç¦æ­¢æ¼”ç»Ž 4.0 å›½é™…&lt;/a&gt; è½¬è½½è¯·ä¿ç•™åŽŸæ–‡é“¾æŽ¥åŠä½œè€…ã€‚&lt;/p&gt; &lt;/div&gt;&lt;script&gt; var clipboard = new Clipboard(&apos;.fa-clipboard&apos;); $(&quot;.fa-clipboard&quot;).click(function()&#123; clipboard.on(&apos;success&apos;, function()&#123; swal(&#123; title: &quot;&quot;, text: &apos;å¤åˆ¶æˆåŠŸ&apos;, icon: &quot;success&quot;, showConfirmButton: true &#125;); &#125;); &#125;); &lt;/script&gt;&#123;% endif %&#125; åœ¨ç›®å½•next/source/css/_common/components/post/ä¸‹æ·»åŠ my-post-copyright.stylï¼š123456789101112131415161718192021222324252627282930313233343536373839404142434445.my_post_copyright &#123; width: 85%; max-width: 45em; margin: 2.8em auto 0; padding: 0.5em 1.0em; border: 1px solid #d3d3d3; font-size: 0.93rem; line-height: 1.6em; word-break: break-all; background: rgba(255,255,255,0.4);&#125;.my_post_copyright p&#123;margin:0;&#125;.my_post_copyright span &#123; display: inline-block; width: 5.2em; color: #b5b5b5; font-weight: bold;&#125;.my_post_copyright .raw &#123; margin-left: 1em; width: 5em;&#125;.my_post_copyright a &#123; color: #808080; border-bottom:0;&#125;.my_post_copyright a:hover &#123; color: #a3d2a3; text-decoration: underline;&#125;.my_post_copyright:hover .fa-clipboard &#123; color: #000;&#125;.my_post_copyright .post-url:hover &#123; font-weight: normal;&#125;.my_post_copyright .copy-path &#123; margin-left: 1em; width: 1em; +mobile()&#123;display:none;&#125;&#125;.my_post_copyright .copy-path:hover &#123; color: #808080; cursor: pointer;&#125; ä¿®æ”¹next/layout/_macro/post.swigï¼Œåœ¨ä»£ç 12345&lt;div&gt; &#123;% if not is_index %&#125; &#123;% include &apos;wechat-subscriber.swig&apos; %&#125; &#123;% endif %&#125;&lt;/div&gt; ä¹‹å‰æ·»åŠ å¢žåŠ å¦‚ä¸‹ä»£ç ï¼š12345&lt;div&gt; &#123;% if not is_index %&#125; &#123;% include &apos;my-copyright.swig&apos; %&#125; &#123;% endif %&#125;&lt;/div&gt; ä¿®æ”¹next/source/css/_common/components/post/post.stylæ–‡ä»¶ï¼Œåœ¨æœ€åŽä¸€è¡Œå¢žåŠ ä»£ç ï¼š1@import &quot;my-post-copyright&quot; ä¿å­˜é‡æ–°ç”Ÿæˆå³å¯ã€‚å¦‚æžœè¦åœ¨è¯¥åšæ–‡ä¸‹é¢å¢žåŠ ç‰ˆæƒä¿¡æ¯çš„æ˜¾ç¤ºï¼Œéœ€è¦åœ¨ Markdown ä¸­å¢žåŠ copyright: trueçš„è®¾ç½®ï¼Œç±»ä¼¼ï¼š å°æŠ€å·§ï¼šå¦‚æžœä½ è§‰å¾—æ¯æ¬¡éƒ½è¦è¾“å…¥copyright: trueå¾ˆéº»çƒ¦çš„è¯,é‚£ä¹ˆåœ¨/scaffolds/post.mdæ–‡ä»¶ä¸­æ·»åŠ ï¼š12345678---title: &#123;&#123; title &#125;&#125;date: &#123;&#123; date &#125;&#125;tags:description: copyright: categories:--- è¿™æ ·æ¯æ¬¡hexo new &quot;ä½ çš„å†…å®¹&quot;ä¹‹åŽï¼Œç”Ÿæˆçš„mdæ–‡ä»¶ä¼šè‡ªåŠ¨æŠŠcopyright:åŠ åˆ°é‡Œé¢åŽ»(æ³¨æ„ï¼šå¦‚æžœè§£æžå‡ºæ¥ä¹‹åŽï¼Œä½ çš„åŽŸå§‹é“¾æŽ¥æœ‰é—®é¢˜ï¼šå¦‚ï¼šhttp://yoursite.com/2018/05/05/nextä¸»é¢˜æ¨¡æ¿ä¸€äº›é…ç½®/,é‚£ä¹ˆåœ¨æ ¹ç›®å½•ä¸‹_config.ymlä¸­å†™æˆç±»ä¼¼è¿™æ ·ï¼šï¼‰123456# URL## If your site is put in a subdirectory, set url as &apos;http://yoursite.com/child&apos; and root as &apos;/child/&apos;url: https://duanruilong.github.io/root: /blogpermalink: :year/:month/:day/:title/permalink_defaults: 14.ä¿®æ”¹ç½‘é¡µåº•éƒ¨çš„æ¡ƒå¿ƒæ‰“å¼€themes/next/layout/_partials/footer.swigï¼Œæ‰¾åˆ°ï¼š123&lt;span class=&quot;with-love&quot;&gt; &lt;i class=&quot;fa fa-&#123;&#123; theme.authoricon &#125;&#125;&quot; style=&quot;color:red&quot;&gt;&lt;/i&gt;&lt;/span&gt; ç„¶åŽè¿˜æ˜¯åœ¨å›¾æ ‡åº“ä¸­æ‰¾åˆ°ä½ è‡ªå·±å–œæ¬¢çš„å›¾æ ‡ï¼Œç„¶åŽä¿®æ”¹ç”»çº¢çº¿çš„éƒ¨åˆ†å°±å¯ä»¥äº†ã€‚ 15.æ–‡ç« åŠ å¯†è®¿é—®æ‰“å¼€themes-&gt;next-&gt;layout-&gt;_partials-&gt;head.swigæ–‡ä»¶,åœ¨ä»¥ä¸‹ä½ç½®æ’å…¥è¿™æ ·ä¸€æ®µä»£ç ï¼š1234567891011121314&lt;script&gt; (function () &#123; if (&apos;&#123;&#123; page.password &#125;&#125;&apos;) &#123; if (prompt(&apos;è¯·è¾“å…¥æ–‡ç« å¯†ç &apos;) !== &apos;&#123;&#123; page.password &#125;&#125;&apos;) &#123; alert(&apos;å¯†ç é”™è¯¯ï¼&apos;); if (history.length === 1) &#123; location.replace(&quot;http://xxxxxxx.xxx&quot;); // è¿™é‡Œæ›¿æ¢æˆä½ çš„é¦–é¡µ &#125; else &#123; history.back(); &#125; &#125; &#125; &#125;)();&lt;/script&gt; ç„¶åŽåœ¨æ–‡ç« ä¸Šå†™æˆç±»ä¼¼è¿™æ ·ï¼š123456789---title: &#123;&#123; title &#125;&#125;date: &#123;&#123; date &#125;&#125;tags:description: copyright: categories:password: password--- 16.æ·»åŠ jiathisåˆ†äº«åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ï¼Œjiathisä¸ºtrueï¼Œå°±è¡Œäº†1234# Share åˆ†äº«jiathis: true# Warning: JiaThis does not support https.#add_this_id: å¦‚æžœä½ æƒ³è‡ªå®šä¹‰è¯ï¼Œæ‰“å¼€themes/next/layout/_partials/share/jiathis.swigä¿®æ”¹å°±å¯ä»¥äº†1234567891011121314&lt;!-- JiaThis Button BEGIN --&gt;&lt;div class=&quot;jiathis_style&quot;&gt; &lt;a class=&quot;jiathis_button_tsina&quot;&gt;&lt;/a&gt; &lt;a class=&quot;jiathis_button_tqq&quot;&gt;&lt;/a&gt; &lt;a class=&quot;jiathis_button_weixin&quot;&gt;&lt;/a&gt; &lt;a class=&quot;jiathis_button_cqq&quot;&gt;&lt;/a&gt; &lt;a class=&quot;jiathis_button_douban&quot;&gt;&lt;/a&gt; &lt;a class=&quot;jiathis_button_renren&quot;&gt;&lt;/a&gt; &lt;a class=&quot;jiathis_button_qzone&quot;&gt;&lt;/a&gt; &lt;a class=&quot;jiathis_button_kaixin001&quot;&gt;&lt;/a&gt; &lt;a class=&quot;jiathis_button_copy&quot;&gt;&lt;/a&gt; &lt;a href=&quot;http://www.jiathis.com/share&quot; class=&quot;jiathis jiathis_txt jiathis_separator jtico jtico_jiathis&quot; target=&quot;_blank&quot;&gt;&lt;/a&gt; &lt;a class=&quot;jiathis_counter_style&quot;&gt;&lt;/a&gt;&lt;/div&gt; 17.åšæ–‡ç½®é¡¶æˆ–è€…æŽ’åºä¿®æ”¹ hero-generator-index æ’ä»¶ï¼ŒæŠŠæ–‡ä»¶ï¼šnode_modules/hexo-generator-index/lib/generator.js å†…çš„ä»£ç æ›¿æ¢ä¸ºï¼š12345678910111213141516171819202122232425262728&apos;use strict&apos;;var pagination = require(&apos;hexo-pagination&apos;);module.exports = function(locals)&#123; var config = this.config; var posts = locals.posts; posts.data = posts.data.sort(function(a, b) &#123; if(a.top &amp;&amp; b.top) &#123; // ä¸¤ç¯‡æ–‡ç« topéƒ½æœ‰å®šä¹‰ if(a.top == b.top) return b.date - a.date; // è‹¥topå€¼ä¸€æ ·åˆ™æŒ‰ç…§æ–‡ç« æ—¥æœŸé™åºæŽ’ else return b.top - a.top; // å¦åˆ™æŒ‰ç…§topå€¼é™åºæŽ’ &#125; else if(a.top &amp;&amp; !b.top) &#123; // ä»¥ä¸‹æ˜¯åªæœ‰ä¸€ç¯‡æ–‡ç« topæœ‰å®šä¹‰ï¼Œé‚£ä¹ˆå°†æœ‰topçš„æŽ’åœ¨å‰é¢ï¼ˆè¿™é‡Œç”¨å¼‚æˆ–æ“ä½œå±…ç„¶ä¸è¡Œ233ï¼‰ return -1; &#125; else if(!a.top &amp;&amp; b.top) &#123; return 1; &#125; else return b.date - a.date; // éƒ½æ²¡å®šä¹‰æŒ‰ç…§æ–‡ç« æ—¥æœŸé™åºæŽ’ &#125;); var paginationDir = config.pagination_dir || &apos;page&apos;; return pagination(&apos;&apos;, posts, &#123; perPage: config.index_generator.per_page, layout: [&apos;index&apos;, &apos;archive&apos;], format: paginationDir + &apos;/%d/&apos;, data: &#123; __index: true &#125; &#125;);&#125;; åœ¨æ–‡ç« ä¸­æ·»åŠ  top å€¼ï¼Œæ•°å€¼è¶Šå¤§æ–‡ç« è¶Šé å‰ï¼Œå¦‚12345678---title: ç¬¬ä¸€ç¯‡blogdate: 2018-05-04 23:38:11tags: ç”Ÿæ´»description: é™„åŠ ä¸€æ®µæ–‡ç« æ‘˜è¦ï¼Œå­—æ•°æœ€å¥½åœ¨140å­—ä»¥å†…ï¼Œä¼šå‡ºçŽ°åœ¨metaçš„descriptioné‡Œé¢copyright: truetop: 12--- 18.ä¿®æ”¹å­—ä½“å¤§å°æ‰“å¼€\themes\next\source\css\ _variables\base.stylæ–‡ä»¶ï¼Œå°†$font-size-baseæ”¹æˆ16pxï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š1$font-size-base =16px 19.ä¿®æ”¹æ‰“èµå­—ä½“ä¸é—ªåŠ¨ä¿®æ”¹æ–‡ä»¶next/source/css/_common/components/post/post-reward.stylï¼Œç„¶åŽæ³¨é‡Šå…¶ä¸­çš„å‡½æ•°wechat:hoverå’Œalipay:hoverï¼Œå¦‚ä¸‹ï¼š123456789101112/* æ³¨é‡Šæ–‡å­—é—ªåŠ¨å‡½æ•° #wechat:hover p&#123; animation: roll 0.1s infinite linear; -webkit-animation: roll 0.1s infinite linear; -moz-animation: roll 0.1s infinite linear;&#125; #alipay:hover p&#123; animation: roll 0.1s infinite linear; -webkit-animation: roll 0.1s infinite linear; -moz-animation: roll 0.1s infinite linear;&#125;*/ 20.ç‚¹å‡»çˆ†ç‚¸æ•ˆæžœè·Ÿé‚£ä¸ªçº¢å¿ƒæ˜¯å·®ä¸å¤šçš„ï¼Œé¦–å…ˆåœ¨themes/next/source/js/srcé‡Œé¢å»ºä¸€ä¸ªå«fireworks.jsçš„æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š1&quot;use strict&quot;;function updateCoords(e)&#123;pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top&#125;function setParticuleDirection(e)&#123;var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;return&#123;x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)&#125;&#125;function createParticule(e,t)&#123;var a=&#123;&#125;;return a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=function()&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;function createCircle(e,t)&#123;var a=&#123;&#125;;return a.x=e,a.y=t,a.color=&quot;#F00&quot;,a.radius=0.1,a.alpha=0.5,a.lineWidth=6,a.draw=function()&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1&#125;,a&#125;function renderParticule(e)&#123;for(var t=0;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;function animateParticules(e,t)&#123;for(var a=createCircle(e,t),n=[],i=0;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;targets:n,x:function(e)&#123;return e.endPos.x&#125;,y:function(e)&#123;return e.endPos.y&#125;,radius:0.1,duration:anime.random(1200,1800),easing:&quot;easeOutExpo&quot;,update:renderParticule&#125;).add(&#123;targets:a,radius:anime.random(80,160),lineWidth:0,alpha:&#123;value:0,easing:&quot;linear&quot;,duration:anime.random(600,800)&#125;,duration:anime.random(1200,1800),easing:&quot;easeOutExpo&quot;,update:renderParticule,offset:0&#125;)&#125;function debounce(e,t)&#123;var a;return function()&#123;var n=this,i=arguments;clearTimeout(a),a=setTimeout(function()&#123;e.apply(n,i)&#125;,t)&#125;&#125;var canvasEl=document.querySelector(&quot;.fireworks&quot;);if(canvasEl)&#123;var ctx=canvasEl.getContext(&quot;2d&quot;),numberOfParticules=30,pointerX=0,pointerY=0,tap=&quot;mousedown&quot;,colors=[&quot;#FF1461&quot;,&quot;#18FF92&quot;,&quot;#5A87FF&quot;,&quot;#FBF38C&quot;],setCanvasSize=debounce(function()&#123;canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+&quot;px&quot;,canvasEl.style.height=window.innerHeight+&quot;px&quot;,canvasEl.getContext(&quot;2d&quot;).scale(2,2)&#125;,500),render=anime(&#123;duration:1/0,update:function()&#123;ctx.clearRect(0,0,canvasEl.width,canvasEl.height)&#125;&#125;);document.addEventListener(tap,function(e)&#123;&quot;sidebar&quot;!==e.target.id&amp;&amp;&quot;toggle-sidebar&quot;!==e.target.id&amp;&amp;&quot;A&quot;!==e.target.nodeName&amp;&amp;&quot;IMG&quot;!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!1),setCanvasSize(),window.addEventListener(&quot;resize&quot;,setCanvasSize,!1)&#125;&quot;use strict&quot;;function updateCoords(e)&#123;pointerX=(e.clientX||e.touches[0].clientX)-canvasEl.getBoundingClientRect().left,pointerY=e.clientY||e.touches[0].clientY-canvasEl.getBoundingClientRect().top&#125;function setParticuleDirection(e)&#123;var t=anime.random(0,360)*Math.PI/180,a=anime.random(50,180),n=[-1,1][anime.random(0,1)]*a;return&#123;x:e.x+n*Math.cos(t),y:e.y+n*Math.sin(t)&#125;&#125;function createParticule(e,t)&#123;var a=&#123;&#125;;return a.x=e,a.y=t,a.color=colors[anime.random(0,colors.length-1)],a.radius=anime.random(16,32),a.endPos=setParticuleDirection(a),a.draw=function()&#123;ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.fillStyle=a.color,ctx.fill()&#125;,a&#125;function createCircle(e,t)&#123;var a=&#123;&#125;;return a.x=e,a.y=t,a.color=&quot;#F00&quot;,a.radius=0.1,a.alpha=0.5,a.lineWidth=6,a.draw=function()&#123;ctx.globalAlpha=a.alpha,ctx.beginPath(),ctx.arc(a.x,a.y,a.radius,0,2*Math.PI,!0),ctx.lineWidth=a.lineWidth,ctx.strokeStyle=a.color,ctx.stroke(),ctx.globalAlpha=1&#125;,a&#125;function renderParticule(e)&#123;for(var t=0;t&lt;e.animatables.length;t++)&#123;e.animatables[t].target.draw()&#125;&#125;function animateParticules(e,t)&#123;for(var a=createCircle(e,t),n=[],i=0;i&lt;numberOfParticules;i++)&#123;n.push(createParticule(e,t))&#125;anime.timeline().add(&#123;targets:n,x:function(e)&#123;return e.endPos.x&#125;,y:function(e)&#123;return e.endPos.y&#125;,radius:0.1,duration:anime.random(1200,1800),easing:&quot;easeOutExpo&quot;,update:renderParticule&#125;).add(&#123;targets:a,radius:anime.random(80,160),lineWidth:0,alpha:&#123;value:0,easing:&quot;linear&quot;,duration:anime.random(600,800)&#125;,duration:anime.random(1200,1800),easing:&quot;easeOutExpo&quot;,update:renderParticule,offset:0&#125;)&#125;function debounce(e,t)&#123;var a;return function()&#123;var n=this,i=arguments;clearTimeout(a),a=setTimeout(function()&#123;e.apply(n,i)&#125;,t)&#125;&#125;var canvasEl=document.querySelector(&quot;.fireworks&quot;);if(canvasEl)&#123;var ctx=canvasEl.getContext(&quot;2d&quot;),numberOfParticules=30,pointerX=0,pointerY=0,tap=&quot;mousedown&quot;,colors=[&quot;#FF1461&quot;,&quot;#18FF92&quot;,&quot;#5A87FF&quot;,&quot;#FBF38C&quot;],setCanvasSize=debounce(function()&#123;canvasEl.width=2*window.innerWidth,canvasEl.height=2*window.innerHeight,canvasEl.style.width=window.innerWidth+&quot;px&quot;,canvasEl.style.height=window.innerHeight+&quot;px&quot;,canvasEl.getContext(&quot;2d&quot;).scale(2,2)&#125;,500),render=anime(&#123;duration:1/0,update:function()&#123;ctx.clearRect(0,0,canvasEl.width,canvasEl.height)&#125;&#125;);document.addEventListener(tap,function(e)&#123;&quot;sidebar&quot;!==e.target.id&amp;&amp;&quot;toggle-sidebar&quot;!==e.target.id&amp;&amp;&quot;A&quot;!==e.target.nodeName&amp;&amp;&quot;IMG&quot;!==e.target.nodeName&amp;&amp;(render.play(),updateCoords(e),animateParticules(pointerX,pointerY))&#125;,!1),setCanvasSize(),window.addEventListener(&quot;resize&quot;,setCanvasSize,!1)&#125;; æ‰“å¼€themes/next/layout/_layout.swig,åœ¨&lt;/body&gt;ä¸Šé¢å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š12345&#123;% if theme.fireworks %&#125; &lt;canvas class=&quot;fireworks&quot; style=&quot;position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;&quot; &gt;&lt;/canvas&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;//cdn.bootcss.com/animejs/2.2.0/anime.min.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;/js/src/fireworks.js&quot;&gt;&lt;/script&gt;&#123;% endif %&#125; æ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œåœ¨é‡Œé¢æœ€åŽå†™ä¸‹ï¼š12# Fireworksfireworks: true 21.DaoVoice åœ¨çº¿è”ç³»é¦–å…ˆåœ¨ daovoice æ³¨å†Œè´¦å·,é‚€è¯·ç æ˜¯0f81ff2fï¼Œæ³¨å†Œå®ŒæˆåŽä¼šå¾—åˆ°ä¸€ä¸ª app_id : 1234daovoice(&apos;init&apos;, &#123; app_id: &quot;0000000&quot;&#125;);daovoice(&apos;update&apos;); è®°ä¸‹è¿™ä¸ª app_idçš„å€¼ï¼Œç„¶åŽæ‰“å¼€/themes/next/layout/_partials/head.swig,å†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š123456789101112&#123;% if theme.daovoice %&#125; &lt;script&gt; (function(i,s,o,g,r,a,m)&#123;i[&quot;DaoVoiceObject&quot;]=r;i[r]=i[r]||function()&#123;(i[r].q=i[r].q||[]).push(arguments)&#125;,i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset=&quot;utf-8&quot;;m.parentNode.insertBefore(a,m)&#125;)(window,document,&quot;script&quot;,(&apos;https:&apos; == document.location.protocol ? &apos;https:&apos; : &apos;http:&apos;) + &quot;//widget.daovoice.io/widget/0f81ff2f.js&quot;,&quot;daovoice&quot;) daovoice(&apos;init&apos;, &#123; app_id: &quot;&#123;&#123;theme.daovoice_app_id&#125;&#125;&quot; &#125;); daovoice(&apos;update&apos;); &lt;/script&gt;&#123;% endif %&#125;``````````````````````````````````````````` 12345æŽ¥ç€æ‰“å¼€ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œåœ¨æœ€åŽå†™ä¸‹å¦‚ä¸‹ä»£ç ï¼š```hash# Online contact daovoice: truedaovoice_app_id: è¿™é‡Œå¡«ä½ çš„åˆšæ‰èŽ·å¾—çš„ app_id é‡æ–° hexo g &amp;&amp; hexo s å°±èƒ½çœ‹åˆ°æ•ˆæžœäº†ã€‚å®‰è£…æˆåŠŸåŽå¯ä»¥åœ¨DaoVoice æŽ§åˆ¶å°ä¸Šçš„èŠå¤©è®¾ç½®é‡Œè®¾ç½®èŠå¤©çª—å£æ ·å¼ 22.æ·»åŠ è·Ÿå¸–(æ¥å¿…åŠ›)æœ‰ä¸¤ç§å®žçŽ°æ–¹æ³•ï¼šâ‘ æ›´æ–°nextä¸»é¢˜ï¼Œå› ä¸ºæœ€æ–°ç‰ˆæœ¬çš„ä¸»é¢˜å·²ç»æ”¯æŒè¿™ç§è¯„è®ºã€‚ç›´æŽ¥åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶_config.yml æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®:1gentie_productKey: #your-gentie-product-key â‘¡å¦‚æžœä½ ä¸æƒ³æ›´æ–°çš„è¯ï¼Œé‚£ä¹ˆæŒ‰ä¸‹é¢æ­¥éª¤è¿›è¡Œï¼šé¦–å…ˆï¼Œè¿˜æ˜¯åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶_config.yml æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®:1gentie_productKey: #your-gentie-product-key 23.ç»™æ–‡ç« è®¾ç½®é˜…è¯»é‡Hexo ç›®å½•ä¸‹çš„ \themes\next\ _config.yml æ–‡ä»¶ 12345678910111213141516# å¢žåŠ ä¸ç®—å­è®¿é—®æ•°é‡ç»Ÿè®¡busuanzi_count: # count values only if the other configs are false enable: true # custom uv span for the whole site site_uv: true site_uv_header: &lt;i class=&quot;fa fa-user&quot;&gt;&lt;/i&gt; è®¿é—®äººæ•° site_uv_footer: # custom pv span for the whole site site_pv: true site_pv_header: &lt;i class=&quot;fa fa-eye&quot;&gt;&lt;/i&gt; è®¿é—®æ€»é‡ site_pv_footer: æ¬¡ # custom pv span for one page only page_pv: true page_pv_header: &lt;i class=&quot;fa fa-file-o&quot;&gt;&lt;/i&gt; æµè§ˆ page_pv_footer: æ¬¡ 24ã€åœ¨æ–‡ç« ä¸­åµŒå…¥ CodePenæˆ– jsFiddleé“¾æŽ¥]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä½¿ç”¨Hexo + Githubæ­å»ºä¸ªäººåšå®¢è¯¦ç»†é…ç½®]]></title>
    <url>%2Fblog%2F2018%2F05%2F05%2F%E4%BD%BF%E7%94%A8Hexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[å¼€å§‹ä½¿ç”¨Hexo + GithubåŽ»æ­å»ºä¸€ä¸ªå±žäºŽè‡ªå·±çš„åšå®¢ç«™ç‚¹ï¼Œå¯ä»¥åœ¨è¿™é‡Œå‘å¸ƒä¸€ä¸‹è‡ªå·±çš„æƒ³æ³•ï¼Œä¸€äº›é—®é¢˜ç§¯ç´¯ï¼Œä¸€äº›å‘çŽ°ã€‚ æ–°å»ºæ–‡ç« hexo new &#39;æ–‡ç« æ ‡é¢˜&#39; ç”Ÿæˆé™æ€ç½‘é¡µ&amp;éƒ¨ç½²hexo clean æ¸…é™¤ç¼“å­˜hexo g ç”Ÿæˆé™æ€ç½‘é¡µhexo d å¼€å§‹éƒ¨ç½² è¿žæŽ¥å†™æ³•ï¼šhexo c &amp;&amp; hexo g &amp;&amp; hexo d å¼€å¯è¯„è®º1.æˆ‘ä½¿ç”¨å¤šè¯´ä»£æ›¿è‡ªå¸¦çš„è¯„è®ºï¼Œåœ¨å¤šè¯´ ç½‘ç«™æ³¨å†Œ &gt; åŽå°ç®¡ç† &gt; æ·»åŠ æ–°ç«™ç‚¹ &gt; å·¥å…· === å¤åˆ¶é€šç”¨ä»£ç  é‡Œé¢æœ‰ short_name åœ¨æ ¹ç›®å½• _config.yml æ·»åŠ ä¸€è¡Œ disqus_shortname: jslite æ˜¯åœ¨å¤šè¯´æ³¨å†Œæ—¶äº§ç”Ÿçš„ å¤åˆ¶åˆ° themes\landscape\layout_partial\article.ejsæŠŠ1234567&lt;% if (!index &amp;&amp; post.comments &amp;&amp; config.disqus_shortname)&#123; %&gt;&lt;section id="comments"&gt;&lt;div id="disqus_thread"&gt; &lt;noscript&gt;Please enable JavaScript to view the &lt;a href="//disqus.com/?ref_noscript"&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;&lt;/div&gt;&lt;/section&gt;&lt;% &#125; %&gt; æ”¹ä¸º1234567891011121314151617181920&lt;% if (!index &amp;&amp; post.comments &amp;&amp; config.disqus_shortname)&#123; %&gt; &lt;section id="comments"&gt; &lt;!-- å¤šè¯´è¯„è®ºæ¡† start --&gt; &lt;div class="ds-thread" data-thread-key="&lt;%= post.layout %&gt;-&lt;%= post.slug %&gt;" data-title="&lt;%= post.title %&gt;" data-url="&lt;%= page.permalink %&gt;"&gt;&lt;/div&gt; &lt;!-- å¤šè¯´è¯„è®ºæ¡† end --&gt; &lt;!-- å¤šè¯´å…¬å…±JSä»£ç  start (ä¸€ä¸ªç½‘é¡µåªéœ€æ’å…¥ä¸€æ¬¡) --&gt; &lt;script type="text/javascript"&gt; var duoshuoQuery = &#123;short_name:'&lt;%= config.disqus_shortname %&gt;'&#125;; (function() &#123; var ds = document.createElement('script'); ds.type = 'text/javascript';ds.async = true; ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js'; ds.charset = 'UTF-8'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds); &#125;)(); &lt;/script&gt; &lt;!-- å¤šè¯´å…¬å…±JSä»£ç  end --&gt; &lt;/section&gt;&lt;% &#125; %&gt; hexoç›¸å¤„é‡Œçš„é”™è¯¯éƒ¨ç½²æ²¡æœ‰æƒé™123456789101112131415161718192021[master 74ddc79] Site updated: 2018-07-22 23:14:27 1 file changed, 1 insertion(+), 1 deletion(-)Warning: Permanently added the RSA host key for IP address '13.250.177.223' to the list of known hosts.git@github.com: Permission denied (publickey).fatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists.FATAL Something's wrong. Maybe you can find the solution here: http://hexo.io/docs/troubleshooting.htmlError: Warning: Permanently added the RSA host key for IP address '13.250.177.223' to the list of known hosts.git@github.com: Permission denied (publickey).fatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists. at ChildProcess.&lt;anonymous&gt; (/Users/duanruilong/Github/hexo/node_modules/hexo-util/lib/spawn.js:37:17) at emitTwo (events.js:106:13) at ChildProcess.emit (events.js:191:7) at maybeClose (internal/child_process.js:877:16) at Process.ChildProcess._handle.onexit (internal/child_process.js:226:5) æŸ¥çœ‹æƒé™ 12345âžœ ~ ssh -T git@github.comgit@github.com: Permission denied (publickey).&lt;!--å°±æ˜¯æ²¡æœ‰æƒé™ --&gt; æŽ¥ä¸‹æ¥è¿™æ ·æ¥1ã€æ£€æŸ¥æ˜¯å¦æœ‰SSH key ç™»é™†githubï¼Œç‚¹å‡»å¤´åƒä½ç½®å¤„ Settings â€”â€”&gt; SSH and GPG keys ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰SSH keysã€‚å¦‚æžœæœ‰ï¼Œç›´æŽ¥è¿›è¡Œç¬¬ä¸‰æ­¥ã€‚ 2ã€æ–°å»º SSH keyï¼Œåœ¨git shell(æˆ–è€…git bashç­‰å‘½ä»¤çª—å£)ï¼Œæ³¨æ„å¤§å°å†™ï¼šssh-keygen -t rsa -C &quot;é‚®ç®±å&quot; ç„¶åŽä¼šå‡ºçŽ°ï¼š123456789101112131415161718192021222324252627282930Generating public/private rsa key pair.Enter file in which to save the key (/c/Users/dell/.ssh/id_rsa):ç›´æŽ¥å›žè½¦å°±å¯ä»¥ã€‚ç„¶åŽä¼šå‡ºçŽ°ï¼šEnter passphrase (empty for no passphrase):Enter same passphrase again:è¦æ±‚ä½ è¾“å…¥å¯†ç ï¼Œè¿™ä¸ªå¯†ç ä¼šåœ¨ä½ æäº¤é¡¹ç›®æ—¶ä½¿ç”¨ï¼Œå¦‚æžœä¸ºç©ºçš„è¯æäº¤é¡¹ç›®æ—¶åˆ™ä¸ç”¨è¾“å…¥ã€‚è¿™ä¸ªè®¾ç½®æ˜¯é˜²æ­¢åˆ«äººå¾€ä½ çš„é¡¹ç›®é‡Œæäº¤å†…å®¹ã€‚æ³¨æ„ï¼šè¾“å…¥å¯†ç çš„æ—¶å€™æ²¡æœ‰*å­—æ ·çš„ï¼Œç›´æŽ¥è¾“å…¥å°±å¥½ã€‚ç„¶åŽä¼šå‡ºçŽ°ï¼šYour identification has been saved in /c/Users/dell/.ssh/id_rsa.Your public key has been saved in /c/Users/dell/.ssh/id_rsa.pub.The key fingerprint is:65:69:Â·Â·Â·Â·Â·Â·02:4b emailname@email.comThe key's randomart image is:+--[ RSA 2048]----+| || . o . || . o o = o || . o * = o || E o + o . || . o. . . || .. |+-----------------+è‡³æ­¤ï¼Œå¯†é’¥å·²ç»æˆåŠŸç”Ÿæˆã€‚ 3ã€æŽ¥ä¸‹æ¥åœ¨githubä¸Šæ·»åŠ SSH keyï¼š â‘  æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼šid_rsa.pubï¼ˆæ–‡ä»¶è·¯å¾„å¯ä»¥åœ¨ä¸Šä¸€æ­¥SSHç”ŸæˆæˆåŠŸåŽçœ‹åˆ°è·¯å¾„ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯/Users/duanruilong/.ssh/id_rsa.pubï¼‰ï¼Œå¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€ï¼Œç„¶åŽå…¨é€‰å¤åˆ¶ã€‚ â‘¡ ç™»é™†githubï¼Œç‚¹å‡»å¤´åƒä½ç½®å¤„ Settings â€”â€”&gt; SSH and GPG keys â€”â€”&gt; New SSH keyï¼Œç‚¹å‡»æ–°å»ºSSH keyã€‚ â‘¢ å°† â‘  ä¸­å¤åˆ¶çš„å†…å®¹ç²˜è´´åœ¨keyæ–‡æœ¬æ¡†é‡Œï¼Œtitleå¯ä»¥ä¸ç”¨å¡«ï¼ˆæˆ–è€…è‡ªå·±èµ·ä¸€ä¸ªåå­—ä¹Ÿå¯ä»¥ï¼‰ã€‚ 4ã€æµ‹è¯•è®¾ç½®æ˜¯å¦æˆåŠŸssh -T git@github.com æœ‰å¯èƒ½ä¼šå‡ºçŽ°ï¼š 1234567891011121314151617The authenticity of host 'github.com (192.30.252.1)' can't be established.RSA key fingerprint is 16:27:ac:a5:76:28:2d:36:63:1b:56:4d:eb:df:a6:48.Are you sure you want to continue connecting (yes/no)?æˆ–è€…æ˜¯The authenticity of host 'github.com (192.30.252.1)' can't be established.RSA key fingerprint is nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.Are you sure you want to continue connecting (yes/no)?è¿™ç§æƒ…å†µä¸‹ï¼Œç›´æŽ¥ yes å›žè½¦ç„¶åŽä¼šå‡ºçŽ°ï¼ˆä¹Ÿå¯èƒ½åœ¨ ++$ ssh -T git@github.com++ ä¹‹åŽï¼Œç›´æŽ¥å‡ºçŽ°çš„å°±æ˜¯è¿™ä¸ªï¼Œæˆ‘å°±æ˜¯è¿™æ ·~ï¼‰ï¼šHi username! You've successfully authenticated, but GitHub does not provide shell access. 5ã€è®¾ç½®ç”¨æˆ·ä¿¡æ¯~ git config --global user.name~ git config --global user.email 6ã€ç„¶åŽå°±å¯ä»¥éƒ¨ç½²ä½ çš„åšå®¢hexo g &amp;&amp; hexo d]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>ç”Ÿæ´»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æˆ‘ä»¬ç¬¬ä¸€æ¬¡ç›¸é‡]]></title>
    <url>%2Fblog%2F2018%2F05%2F04%2F%E7%AC%AC%E4%B8%80%E7%AF%87blog%2F</url>
    <content type="text"><![CDATA[æ¬¢è¿Žæ¥åˆ°æˆ‘çš„blogï¼Œè¿™é‡Œæ˜¯æˆ‘è®°å½•ç”Ÿæ´»å’Œä¸€äº›äº‹æƒ…çš„åœ°æ–¹ï¼Œè¿™é‡Œä¼šæ”¶å½•ä¸€äº›å¥½çš„æ–‡ç« ï¼Œå€¼å¾—å­¦ä¹ çš„ä¸œè¥¿ï¼›ä¹Ÿæ˜¯ä¸€ä¸ªéšè®°çš„åœ°æ–¹ã€‚æˆ‘ä»¬çš„é‡åˆ°å°±æ˜¯ç¼˜åˆ†çš„å¼€å§‹ï¼Œäº’ç›¸å­¦ä¹ ï¼Œäº’ç›¸è®¤è¯†ã€‚ æˆ‘æ¥è‡ªä¸ƒå½©äº‘å— è¯»ä¹¦äºŽå¤éƒ½è¥¿å®‰ çŽ°åœ¨åæ ‡ä¸Šæµ· è€•ç»‡äºŽå‰ç«¯å¼€å‘ï¼Œèœé¸Ÿåˆ°å¤§ç¥žçš„è¿‡ç¨‹æ˜¯æ¼«é•¿çš„ï¼Œä¸æ–­å­¦ä¹ ï¼Œä¸æ–­è¿›æ­¥ï¼Œè¯´ä¸å®šå“ªä¸€å¤©â€¦â€¦ è·¯è¦ä¸€æ­¥ä¸€æ­¥èµ°ï¼ŒçŸ¥è¯†ä¹Ÿè¦æ…¢æ…¢å•ƒ å–œæ¬¢è¿åŠ¨æ‰“ç¯®çƒï¼Œæ¬¢è¿Žå„å¤§çƒå‹ç»“è¯†ï¼Œè¿˜å–œæ¬¢æžæžæ‘„å½±è§†é¢‘å‰ªè¾‘ï¼Œå–œæ¬¢çœ‹åˆ°çš„è‰²å½©ï¼Œç­‰ç­‰è¿˜è¦å°±æ˜¯ç¾Žé£Ÿçƒ¹é¥ª å¥½å§å°±è¿™æ ·å§ï¼]]></content>
      <categories>
        <category>éšè®°</category>
      </categories>
      <tags>
        <tag>ç”Ÿæ´»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2Fblog%2F2018%2F05%2F02%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post 1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>ç”Ÿæ´»</tag>
      </tags>
  </entry>
</search>
